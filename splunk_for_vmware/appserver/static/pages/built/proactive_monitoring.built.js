function sprintf(){var e=/%%|%(\d+\$)?(\([^)]+\))?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,t=arguments,n=0,r=t[n];n++;var i=function(e,t,n,r){var i=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+i:i+e},s=function(e,t,n,r,s){var o=r-e.length;return o>0&&(n||!s?e=i(e,r," ",n):e=e.slice(0,t.length)+i("",o,"0",!0)+e.slice(t.length)),e},o=function(e,t,n,r,o,u,a){var f=e>>>0;return n=n&&f&&{2:"0b",8:"0",16:"0x"}[t]||"",e=n+i(f.toString(t),u||0,"0",!1),s(e,n,r,o,a)},u=function(e,t,n,r,i){return r!=null&&(e=e.slice(0,r)),s(e,"",t,n,i)},a=function(e,r,a,f,l,c,h,p){if(e=="%%")return"%";var d=!1,v="",m=!1,g=!1,y=f.length;for(var b=0;f&&b<y;b++)switch(f.charAt(b)){case" ":v=" ";break;case"+":v="+";break;case"-":d=!0;break;case"0":m=!0;break;case"#":g=!0;break;default:}l?l=="*"?(l=+t[n],n++):l.charAt(0)=="*"?l=+t[l.slice(1,-1)]:l=+l:l=0,l<0&&(l=-l,d=!0);if(!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");h?h=="*"?(h=+t[n],n++):h.charAt(0)=="*"?h=+t[h.slice(1,-1)]:h=+h:h="fFeE".indexOf(p)>-1?6:p=="d"?0:void 0;var w;a?(a=a.substr(1,a.length-2),w=t[1].__getitem__?t[1].__getitem__(a):t[1][a]):r?w=t[r.slice(0,-1)]:(w=t[n],n++);var E,S;switch(p){case"s":return u(String(w),d,l,h,m);case"c":return u(String.fromCharCode(+w),d,l,h,m);case"b":return o(w,2,g,d,l,h,m);case"o":return o(w,8,g,d,l,h,m);case"x":return o(w,16,g,d,l,h,m);case"X":return o(w,16,g,d,l,h,m).toUpperCase();case"u":return o(w,10,g,d,l,h,m);case"i":case"d":return E=parseInt(+w,10),S=E<0?"-":v,w=S+i(String(Math.abs(E)),h,"0",!1),s(w,S,d,l,m);case"e":case"E":case"f":case"F":case"g":case"G":E=+w,S=E<0?"-":v;var x=["toExponential","toFixed","toPrecision"]["efg".indexOf(p.toLowerCase())],T=["toString","toUpperCase"]["eEfFgG".indexOf(p)%2];return w=S+Math.abs(E)[x](h),s(w,S,d,l,m)[T]();default:return e}};return r.replace(e,a)}this.JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)r=rep[n],typeof r=="string"&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Number.prototype.pad=function(e,t){var n=""+this;t=t||"0";while(n.length<e)n=t+n;return n},Date.prototype.months=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.prototype.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.prototype.dpm=[31,28,31,30,31,30,31,31,30,31,30,31],Date.prototype.strftime_f={A:function(e){return e.weekdays[e.getDay()]},a:function(e){return e.weekdays[e.getDay()].substring(0,3)},B:function(e){return e.months[e.getMonth()]},b:function(e){return e.months[e.getMonth()].substring(0,3)},C:function(e){return Math.floor(e.getFullYear()/100)},c:function(e){return e.toString()},D:function(e){return e.strftime_f.m(e)+"/"+e.strftime_f.d(e)+"/"+e.strftime_f.y(e)},d:function(e){return e.getDate().pad(2,"0")},e:function(e){return e.getDate()},F:function(e){return e.strftime_f.Y(e)+"-"+e.strftime_f.m(e)+"-"+e.strftime_f.d(e)},H:function(e){return e.getHours().pad(2,"0")},I:function(e){return(e.getHours()%12||12).pad(2)},j:function(e){var t=e.getDate(),n=e.getMonth()-1;if(n>1){var r=e.getYear();r%100==0&&r%400==0?++t:r%4==0&&++t}while(n>-1)t+=e.dpm[n--];return t.pad(3,"0")},k:function(e){return e.getHours().pad(2," ")},l:function(e){return e.getHours()%12||12},M:function(e){return e.getMinutes().pad(2,"0")},m:function(e){return(e.getMonth()+1).pad(2,"0")},n:function(e){return"\n"},p:function(e){return e.getHours()>11?"PM":"AM"},Q:function(e){return e.getMilliseconds()==0?"000":e.getMilliseconds().pad(3,"0")},R:function(e){return e.strftime_f.H(e)+":"+e.strftime_f.M(e)},r:function(e){return e.strftime_f.I(e)+":"+e.strftime_f.M(e)+":"+e.strftime_f.S(e)+" "+e.strftime_f.p(e)},S:function(e){return e.getSeconds().pad(2,"0")},s:function(e){return Math.floor(e.getTime()/1e3)},T:function(e){return e.strftime_f.H(e)+":"+e.strftime_f.M(e)+":"+e.strftime_f.S(e)},t:function(e){return"	"},u:function(e){return e.getDay()||7},v:function(e){return e.strftime_f.e(e)+"-"+e.strftime_f.b(e)+"-"+e.strftime_f.Y(e)},w:function(e){return e.getDay()},X:function(e){return e.toTimeString()},x:function(e){return e.toDateString()},Y:function(e){return e.getFullYear()},y:function(e){return(e.getYear()%100).pad(2)},z:function(e){return""},Z:function(e){return""},"%":function(e){return"%"}},Date.prototype.strftime_f["+"]=Date.prototype.strftime_f.c,Date.prototype.strftime_f.h=Date.prototype.strftime_f.b,Date.prototype.strftime=function(e){var t;if(t=this[e])return t;var n=[],r=0;while(r<e.length){var i=e.charAt(r);i=="%"?(i=e.charAt(++r),n.push(this.strftime_f[i]?this.strftime_f[i](this):i)):n.push(i),++r}return this[e]=n.join("")},define("strftime",function(){}),function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],m=e.nodeType&&Gt(e);n.queue||(f=v._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,v.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",v.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r];if(s===(m?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),m?v(e).show():c.done(function(){v(e).hide()}),c.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in p)v.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,m?u[i]:0),p[i]=u[i]||v.style(e,i),i in u||(u[i]=a.start,m&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("﻿ ")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"&&(!e.unique||!c.has(n))?a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(v.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!v.nodeName(i.parentNode,"optgroup"))){t=v(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?v(u[s]).val():o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r,g,!0)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){if(s&&i)return;var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[],s),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){c=lt(g,p),r(c,[],u,a),f=c.length;while(f--)if(l=c[f])g[p[f]]=!(m[p[f]]=l)}if(s){f=e&&g.length;while(f--)if(l=g[f])s[h[f]]=!(o[h[f]]=l)}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n,r){var i=0,s=t.length;for(;i<s;i++)nt(e,t[i],n,r);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e];return t||(t=k(e,new RegExp("(^|"+O+")"+e+"("+O+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(e,t,n){return[0]}),last:st(function(e,t,n){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t,n){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:st(function(e,t,n){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=1;l=h,e.sort(f);if(l)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active",":focus"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&(!i||!i.test(e))){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&(!i||!i.test(n)))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase())||!1,c.crossDomain=a&&a.join(":")+(a[3]?"":a[1]==="http:"?80:443)!==ln.join(":")+(ln[3]?"":ln[1]==="http:"?80:443)),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,t=v.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||v.fx.stop()},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})}(window);if(typeof Splunk=="undefined"||!Splunk)var Splunk={};Splunk.namespace=function(e){var t=e.split("."),n=Splunk;for(var r=t[0]=="Splunk"?1:0;r<t.length;r+=1)n[t[r]]=n[t[r]]||{},n=n[t[r]];return n},define("splunk",function(e){return function(){var t,n;return t||e.Splunk}}(this)),define("splunk.config",[],function(){return window.$C}),Splunk.namespace("util"),Splunk.util={logger:{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}},propToQueryString:function(e){var t=[],n;for(var r in e)n=""+e[r],t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")},queryStringToProp:function(e){e=this.trim(e,"&?#");if(!e||e.length==0)return{};var t=e.split("&"),n={},r,i,s,o=t.length;for(var u=0,a=o;u<a;u++)s=t[u].split("="),r=decodeURIComponent(s.shift()),i=s.join("="),n[r]=decodeURIComponent(i.replace(/\+/g," "));return n},getHash:function(){var e=window.location.href.indexOf("#");if(e==-1)return"";var t=window.location.href.indexOf("?",e);return t!=-1?window.location.href.substr(t):window.location.href.substr(e)},parseDate:function(e,t){if(!e||!e.indexOf||e.indexOf("mm")==0)return null;var n=0,r=-1,i=0,s=e.split(/\W+/),o=t.match(/%./g),u=0,a=0,f=0,l=0,c=0;for(u=0;u<s.length;++u){if(!s[u])continue;switch(o[u]){case"%d":i=parseInt(s[u],10);break;case"%m":r=parseInt(s[u],10)-1;break;case"%Y":case"%y":n=parseInt(s[u],10),n<100&&(n+=n>29?1900:2e3);break;case"%H":f=parseInt(s[u],10);break;case"%M":l=parseInt(s[u],10);break;case"%S":c=parseInt(s[u],10);break;default:}}if(n!=0&&r!=-1&&i!=0){var h=new Date(n,r,i,f,l,c);return h}return!1},getTimezoneOffsetDelta:function(e,t){if(!Splunk.util.isInt(e))return 0;var n=t.getTimezoneOffset()*60;return e*=-60,1e3*(e-n)},getEpochTimeFromISO:function(isoStr){this._isoTimeRegex||(this._isoTimeRegex=/([\+\-])?(\d{4,})(?:(?:\-(\d{2}))(?:(?:\-(\d{2}))(?:(?:[T ](\d{2}))(?:(?:\:(\d{2}))(?:(?:\:(\d{2}(?:\.\d+)?)))?)?(?:(Z)|([\+\-])(\d{2})(?:\:(\d{2}))?)?)?)?)?/);var m=this._isoTimeRegex.exec(isoStr),seconds,millisecondsStr;m[7]?(seconds=m[7].substring(0,2),millisecondsStr=m[7].substring(2)):millisecondsStr="";var offset=eval(m[9]+(60*m[10]+parseInt(m[11],10))),str=sprintf("%s/%s/%s %s:%s:%s",m[3],m[4],m[2],m[5],m[6],seconds),t=new Date(str);t.setTime(t.getTime()+this.getTimezoneOffsetDelta(offset,t));var startTime=t.getTime()/1e3;return startTime+millisecondsStr},getConfigValue:function(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(e==="FORM_KEY")return this.getFormKey();if(typeof t!="undefined")return t;throw new Error("getConfigValue - "+e+" not set, no default provided")},getCookie:function(e){var t=null;if(document.cookie&&document.cookie!=""){var n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=$.trim(n[r]);if(i.substring(0,e.length+1)==e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t},getFormKey:function(){var e="splunkweb_csrf_token_"+Splunk.util.getConfigValue("MRSPARKLE_PORT_NUMBER"),t=Splunk.util.getCookie(e);return t?t:""},make_url:function(){var e="",t,n;for(var r=0,i=arguments.length;r<i;r++)t=arguments[r].toString(),n=t.length,n>1&&t.charAt(n-1)=="/"&&(t=t.substring(0,n-1)),t.charAt(0)!="/"?e+="/"+t:e+=t;if(e!="/"){var s=e.split("/"),o=s[1];if(o=="static"||o=="modules"){var u=e.substring(o.length+2,e.length);e="/"+o+"/@"+window.$C.BUILD_NUMBER,window.$C.BUILD_PUSH_NUMBER&&(e+="."+window.$C.BUILD_PUSH_NUMBER),s[2]=="app"&&(e+=":"+this.getConfigValue("APP_BUILD",0)),e+="/"+u}}var a=Splunk.util.getConfigValue("MRSPARKLE_ROOT_PATH","/"),f=Splunk.util.getConfigValue("DJANGO_ROOT_PATH",""),l=Splunk.util.getConfigValue("LOCALE","en-US"),c="";return f&&e.substring(0,f.length)===f?c=e.replace(f,f+"/"+l.toLowerCase()):c="/"+l+e,a==""||a=="/"?c:a+c},make_full_url:function(e,t){return e=this.make_url(e),t&&(e=e+"?"+this.propToQueryString(t)),e},redirect_to:function(e,t,n,r){e=this.make_full_url(e,t),n||(n=window),n.document.location=e,r&&n.focus&&n.focus();return},getCurrentApp:function(){return $(document.body).attr("s:app")||"UNKNOWN_APP"},getCurrentView:function(){return $(document.body).attr("s:view")||"UNKNOWN_VIEW"},getCurrentDisplayView:function(){return $(document.body).attr("s:displayview")||this.getCurrentView()},getAutoCancelInterval:function(){var e=$(document.body).attr("s:autoCancelInterval");return e||(this.logger.error("no autoCancelInterval found. Returning 0"),e=0),e},getCurrentViewConfig:function(){return $.extend({},Splunk.ViewConfig)},getPath:function(e){e===undefined&&(e=document.location.pathname);var t=this.getConfigValue("LOCALE").toString();if(!this.getConfigValue("LOCALE")||e.indexOf(t)==-1)return e;var n=t.length+e.indexOf(t);return e.slice(n)},getCumlativeOffsetTop:function(e){return e?e.offsetTop+this.getCumlativeOffsetTop(e.offsetParent):0},getCumlativeOffsetLeft:function(e){return e?e.offsetLeft+this.getCumlativeOffsetLeft(e.offsetParent):0},getPageYOffset:function(){var e=0;return window.pageYOffset?e=window.pageYOffset:document.documentElement&&document.documentElement.scrollTop&&(e=document.documentElement.scrollTop),e},getWindowDimensions:function(){return{width:isNaN(window.innerWidth)?document.documentElement.clientWidth||0:window.innerWidth,height:isNaN(window.innerHeight)?document.documentElement.clientHeight||0:window.innerHeight}},getComputedStyleHelper:function(e,t){if(e.currentStyle)return e.currentStyle[t];if(window.getComputedStyle){var n=t.replace(/([A-Z])/g,"-$1").toLowerCase(),r=window.getComputedStyle(e,"");return r.getPropertyValue(n)}return""},getParameter:function(e,t){return t=t||window.location.search,t?t.indexOf(e+"=")+1?t.split(e+"=")[1].split("&")[0]:null:null},getHEX:function(e){var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),n=(t[1]<<16|t[2]<<8|t[3]).toString(16);return"#"+Array(6-n.length).concat([n]).toString().replace(/,/g,0)},normalizeColor:function(e){normalizedColor=null;if(e.charAt(0)==="#")e.length===4?normalizedColor=e+e.charAt(1)+e.charAt(2)+e.charAt(3):normalizedColor=e;else try{normalizedColor=this.getHEX(e)}catch(t){}return normalizedColor},validateCronString:function(e){var t=/^\s*(\*\/\d+|\*|\d+-\d+|\d+(,\d+)+|\d+)(\s+(\*\/\d+|\*|\d+-\d+|\d+(,\d+)+|\d+)){4}\s*$/;return t.test(e)?!0:!1},turboInnerHTML:function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},normalizeBoolean:function(e,t){typeof e=="string"&&(e=e.toLowerCase());switch(e){case!0:case 1:case"1":case"yes":case"on":case"true":return!0;case!1:case 0:case"0":case"no":case"off":case"false":return!1;default:if(t)throw TypeError("Unable to cast value into boolean: "+e);return e}},getCommaFormattedNumber:function(e){e+="";var t=e.split("."),n=t[0],r=t.length>1?"."+t[1]:"",i=/(\d+)(\d{3})/;while(i.test(n))n=n.replace(i,"$1,$2");return n+r},reLTrim:/^[\s\t\r\n]+/,reLTrimCommand:/^[\s\t\r\n\|]+/,reRNormalize:/[\s\t\r\n]+$/,addLeadingSearchCommand:function(e,t){var n=""+e;return n=n.replace(this.reLTrim,"").replace(this.reRNormalize," "),n.substring(0,1)=="|"?e:!t&&n.substring(0,7)=="search "&&n.length>7?e:"search "+n},stripLeadingSearchCommand:function(e){var t=""+e;return t=t.replace(this.reLTrimCommand,""),t.substring(0,7)=="search "?t.substring(7).replace(this.reLTrimCommand,""):e},stringToFieldList:function(e){if(typeof e!="string"||!e)return[];var t=[],n=[],r=!1,i=$.trim(e);for(var s=0,o=i.length;s<o;s++){if(i.charAt(s)=="\\"){var u=s+1;if(o>u&&(i.charAt(u)=="\\"||i.charAt(u)=='"')){n.push(i.charAt(u)),s++;continue}n.push(i.charAt(s));continue}if(i.charAt(s)=='"'){if(!r){r=!0;continue}r=!1,t.push(n.join("")),n=[];continue}if((i.charAt(s)==" "||i.charAt(s)==",")&&!r){n.length>0&&t.push(n.join("")),n=[];continue}n.push(i.charAt(s))}return n.length>0&&t.push(n.join("")),t},_sflQuotable:/([\\",\s])/,_sflEscapable:/([\\"])/g,fieldListToString:function(e){if(!e)return"";var t=[];for(var n=0,r=e.length;n<r;n++){var i=$.trim(e[n]);i!=""&&(i.search(this._sflEscapable)>-1&&(i=i.replace(this._sflEscapable,"\\$1")),i.search(this._sflQuotable)>-1&&(i=['"',i,'"'].join("")),t.push(i))}return t.join(",")},searchEscape:function(e){return e.match(/[\s\,=|\[\]\"]/)?'"'+e.replace(/(\"|\\)/g,"\\$1")+'"':e},objectSimilarity:function(e,t){if(e instanceof Array&&t instanceof Array){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!this.objectSimilarity(e[n],t[n]))return!1}else if(e instanceof Object&&t instanceof Object){if(e!=t){for(var r in t)if(!e.hasOwnProperty(r))return!1;for(var i in e)if(e.hasOwnProperty(i)){if(!t.hasOwnProperty(i))return!1;if(!this.objectSimilarity(e[i],t[i]))return!1}}}else if(typeof e=="function"&&typeof t=="function"){if(e.toString()!==t.toString())return!1}else if(e!==t)return!1;return!0},StopWatch:function(){var e=this,t=null,n=null,r=[],s=function(e){return e==null?!1:!0},o=function(){return s(t)},u=function(){return s(n)},a=function(){t=null,n=null};e.start=function(){if(o())throw new Error("cannot call start, start already invoked.");t=new Date},e.stop=function(){if(!o())throw new Error("cannot call stop, start not invoked.");if(u())throw new Error("cannot call stop, stop already invoked.");n=new Date,time=n-t,r.push(time)},e.pause=function(){if(!o())throw new Error("cannot call pause, start not invoked.");if(u())throw new Error("cannot call pause, stop already invoked.");e.stop(),a()},e.reset=function(){a(),r=[]},e.time=function(){var e=0;for(i=0;i<r.length;i++)e+=r[i];return o()&&!u()&&(e+=new Date-t),e/1e3}},isInt:function(e){return e!==""&&!isNaN(parseInt(e,10))&&parseInt(e,10)==e/1},smartTrim:function(e,t){if(!e)return e;if(t<1)return e;if(e.length<=t)return e;if(t==1)return e.substring(0,1)+"...";var n=Math.ceil(e.length/2),r=e.length-t,i=Math.ceil(r/2),s=r-i;return e.substring(0,n-i)+"..."+e.substring(n+s)},_tokenDiscoverer:/\$([^$]+)\$/g,discoverReplacementTokens:function(e){var t=[],n=Splunk.util._tokenDiscoverer,r;if(typeof e=="string"){if(e.match(n)){r=e.match(n);for(var i=0;i<r.length;i++)r[i]=r[i].substring(1,r[i].length-1);return r}return[]}if(typeof e=="function")return[];for(var s in e){r=[],r=Splunk.util.discoverReplacementTokens(e[s]);var o=s.match(n)||[];for(var u=0;u<o.length;u++)r.push(o[u].substring(1,o[u].length-1));for(var a=0;a<r.length;a++)t.indexOf(r[a])==-1&&t.push(r[a])}return t},replaceTokens:function(e,t,n){if(typeof e=="string")return e.match(t)&&(e=e.replace(t,n)),e;if(typeof e=="function")return e;var r={};for(var i in e)typeof e[i]=="object"?Splunk.util.replaceTokens(e[i],t,n):typeof e[i]=="string"&&e[i].match(t)&&(e[i]=e[i].replace(t,n)),i.match(t)&&(r[i]=i.replace(t,n));for(oldKey in r){var s=r[oldKey];e[s]=e[oldKey],delete e[oldKey]}return e},getServerTimezoneOffset:function(){return Splunk.util.getConfigValue("SERVER_TIMEZONE_OFFSET")},moduleLoadStates:{WAITING_FOR_INITIALIZATION:1,WAITING_FOR_HIERARCHY:2,WAITING_FOR_CONTEXT:6,HAS_CONTEXT:7},getRetryInterval:function(e,t,n,r){return e>=r?parseFloat(n):Math.min(n*Math.pow(e/parseFloat(r),3)+t,n)},escapeHtml:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},escapeBackslash:function(e){return(""+e).replace(/\\/g,"\\\\")},escapeRegex:function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},escapeSelector:function(e){return(""+e).replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},trimToAlphaNumeric:function(e){return(""+e).replace(/([\s;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=<>`\/\|\\])/g,"")},trim:function(e,t){return t?e.replace(new RegExp("^[\\s"+t+"]+"),"").replace(new RegExp("[\\s"+t+"]+$"),""):e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},lowerTrimStr:function(e,t){return e?this.trim(e).toLowerCase():t?t:e},focusFirstField:function(e){var t=$(":input:visible:enabled:first",e),n=$("select:visible:enabled:first",e);t.is(":button")&&t.hasClass("splButton-secondary")&&$(":input:button.splButton-primary:first",e).length&&(t=$(":input:button.splButton-primary:first",e));var r=t.length?t.offset().top:!1,i=n.length?n.offset().top:!1,s=t;r&&i&&i<r&&(s=n),s.focus();var o=s.is(":focus");o||setTimeout(function(){s.focus()},10)},getWikiTransform:function(e){var t=Splunk.util.escapeHtml(e);return t=t.replace(/\[(\!?)(\w+\:\/\/[^\s]+)\s+([^\]]+)\]/g,'<a href="$2" #~#$1#~#>$3</a>'),t=t.replace(/\[\[(\!?)([^\|]+)\|([^\]]+)\]\]/g,Splunk.util._generateInternalLink),t=t.replace(/#~#!#~#/g,'target="_blank"'),t=t.replace(/\s*#~##~#/g,""),t},_generateInternalLink:function(e,t,n,r){return n=Splunk.util.make_url(n),'<a href="'+n+'"#~#'+t+"#~#>"+r+"</a>"}};var $A=function(e){if(!e)return[];if(e.toArray)return e.toArray();var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t};Function.prototype.bind=function(){var e=this,t=$A(arguments),n=t.shift();return function(){return e.apply(n,t.concat($A(arguments)))}},String.prototype.repeat||(String.prototype.repeat=function(e){return(new Array(e+1)).join(this)}),String.prototype.reverse||(String.prototype.reverse=function(){return this.split("").reverse().join("")}),String.prototype.rsplit||(String.prototype.rsplit=function(e,t){var n=this.split(e);if(t&&n.length>t){var r=[];for(var i=0;i<t;i++)r[i]=n[n.length-t+i];return r}return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){t||(t=0);for(var n=0;n<this.length;n++)if(this[n]===e)return n;return-1}),Array.prototype.extend||(Array.prototype.extend=function(e){for(var t=0;t<e.length;t++)this.push(e[t])}),define("splunk.util",["jquery","splunk","splunk.config"],function(e){return function(){var t,n;return n=function(e,t,n){return e.extend({sprintf:this.sprintf},t.util)},t=n.apply(e,arguments),t||e.Splunk.util}}(this)),define("splunk.i18n",["strftime","splunk.util"],function(){var e={ja_JP:[[/d(?! d)/,"d日"],[/(?:^|[^M])(MM)(?:[^M]|$)/,"MM月"],[/YYYY/,"YYYY年"]],ko_KR:[[/d(?! d)/,"d일"],[/(?:^|[^M])(MM)(?:[^M]|$)/,"MM월"],[/YYYY/,"YYYY년"]],zh_CN:[[/d(?! d)/,"d日"],[/(?:^|[^M])(MM)(?:[^M]|$)/,"MM月"],[/YYYY/,"YYYY年"]],zh_TW:[[/d(?! d)/,"d日"],[/(?:^|[^M])(MM)(?:[^M]|$)/,"MM月"],[/YYYY/,"YYYY年"]]},t=[["MMM d","d MMM"]],n=window.format_date;return window.format_date=function(r,i){var s,o,u=window.locale_name();if(!(i in{full:!0,"long":!0,medium:!0,"short":!0})){if(i&&window.locale_uses_day_before_month()){o=t;for(s=0;s<o.length;s++)i=i.replace(o[s][0],o[s][1])}if(i&&u in e){o=e[u];for(s=0;s<o.length;s++){var a=o[s],f=a[0],l=a[1],c=i.match(f);if(c&&c.length>0){var h=c[c.length-1],p=i.lastIndexOf(h);i=i.substr(0,p)+l+i.substr(p+h.length)}}}}return n(r,i)},{_:window.gettext,ungettext:window.ungettext,format_decimal:window.format_decimal,format_number:window.format_number,format_percent:window.format_percent,format_scientific:window.format_scientific,format_date:window.format_date,format_datetime:window.format_datetime,format_time:window.format_time,format_datetime_microseconds:window.format_datetime_microseconds,format_time_microseconds:window.format_time_microseconds,locale_uses_day_before_month:window.locale_uses_day_before_month,format_datetime_range:window.format_datetime_range,locale_name:window.locale_name,DateTime:window.DateTime,moment_install:window.moment_install,jQuery_ui_datepicker_install:window.jQuery_ui_datepicker_install}}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",["splunk.i18n"],function(e){return function(){var t,n;return n=function(e){return this._.mixin({t:function(t){return e._(t)}}),this._},t=n.apply(e,arguments),t||e._}}(this)),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="0.9.10";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if(typeof n=="object")for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;var s=n.split(a);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r))}},l=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},c=o.Events={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){var r,i,s,o,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,l=o.length;a<l;a++){e=o[a];if(r=this._events[e]){s=[];if(t||n)for(c=0,h=r.length;c<h;c++)i=r[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&s.push(i);this._events[e]=s}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[i]=e,e.on(t,typeof t=="object"?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return;if(e)e.off(t,typeof t=="object"?this:n,this),!t&&!n&&delete r[e._listenerId];else{typeof t=="object"&&(n=this);for(var i in r)r[i].off(t,n,this);this._listeners={}}return this}};c.bind=c.on,c.unbind=c.off,u.extend(o,c);var h=o.Model=function(e,t){var n,r=e||{};this.cid=u.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(h.prototype,c,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){if(!e.set(e.parse(n,r),r))return!1;t&&t(e,n,r)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o,a=this.attributes;return e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t,r&&(!n||!n.wait)&&!this.set(r,n)?!1:(n=u.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=u.extend({},a,r)),n.parse===void 0&&(n.parse=!0),i=n.success,n.success=function(e,t,n){e.attributes=a;var s=e.parse(t,n);n.wait&&(s=u.extend(r||{},s));if(u.isObject(s)&&!e.set(s,n))return!1;i&&i(e,t,n)},s=this.isNew()?"create":n.patch?"patch":"update",s==="patch"&&(n.attrs=r),o=this.sync(s,this,n),r&&n.wait&&(this.attributes=a),o):!1)},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(e,t,i){(i.wait||e.isNew())&&r(),n&&n(e,t,i)};if(this.isNew())return e.success(this,null,e),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||M();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,t||{}),!1):!0}});var p=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))};u.extend(p.prototype,c,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,i,o,a,f,l,c,h,p,d;c=[],h=t.at,p=this.comparator&&h==null&&t.sort!=0,d=u.isString(this.comparator)?this.comparator:null;for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(a=e[n],t))){this.trigger("invalid",this,a,t);continue}if(f=this.get(o)){t.merge&&(f.set(a===o?o.attributes:a,t),p&&!l&&f.hasChanged(d)&&(l=!0));continue}c.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o)}c.length&&(p&&(l=!0),this.length+=c.length,h!=null?s.apply(this.models,[h,0].concat(c)):r.apply(this.models,c)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=c.length;n<i;n++)(o=c[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return u.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},update:function(e,t){t=u.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var n,r,i,s,o=[],a=[],f={};u.isArray(e)||(e=e?[e]:[]);if(t.add&&!t.remove)return this.add(e,t);for(r=0,i=e.length;r<i;r++)n=e[r],s=this.get(n),t.remove&&s&&(f[s.cid]=!0),(t.add&&!s||t.merge&&s)&&o.push(n);if(t.remove)for(r=0,i=this.models.length;r<i;r++)n=this.models[r],f[n.cid]||a.push(n);return a.length&&this.remove(a,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){var i=r.update?"update":"reset";e[i](n,r),t&&t(e,n,r)},this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)}});var d=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var v=["groupBy","countBy","sortBy"];u.each(v,function(e){p.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var m=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},g=/\((.*?)\)/g,y=/(\(\?)?:\w+/g,b=/\*\w+/g,w=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(m.prototype,c,{initialize:function(){},route:function(e,t,n){return u.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),o.history.route(e,u.bind(function(r){var i=this._extractParameters(e,r);n&&n.apply(this,i),this.trigger.apply(this,["route:"+t].concat(i)),this.trigger("route",t,i),o.history.trigger("route",this,t,i)},this)),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(w,"\\$&").replace(g,"(?:$1)?").replace(y,function(e,t){return t?e:"([^/]+)"}).replace(b,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var E=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,T=/msie [\w.]+/,N=/\/$/;E.started=!1,u.extend(E.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(N,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(S,"")},start:function(e){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=T.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(x,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!E.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new E;var C=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},k=/^(\S+)\s*(.*)$/,L=["model","collection","el","id","attributes","className","tagName","events"];u.extend(C.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(k),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,L)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}});var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.sync=function(e,t,n){var r=A[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||M()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1);var a=n.success;n.success=function(e){a&&a(t,e,n),t.trigger("sync",t,e,n)};var f=n.error;n.error=function(e){f&&f(t,e,n),t.trigger("error",t,e,n)};var l=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,l,n),l},o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var O=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};h.extend=p.extend=m.extend=C.extend=E.extend=O;var M=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["jquery","underscore"],function(e){return function(){var t,n;return n=function(e,t){return t.noConflict(),this.Backbone.hasOwnProperty("setDomLibrary")?this.Backbone.setDomLibrary(e):this.Backbone.$=e,this.Backbone.noConflict()},t=n.apply(e,arguments),t||e.Backbone}}(this)),define("util/console_dev",[],function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=window.console,n=t,r=["log","trace","error","warn","info","debug"],i=function(){},s;try{n.DEBUG_ENABLED=!0}catch(o){n={DEBUG_ENABLED:!0}}for(s=0;s<r.length;s++){var u=r[s];typeof n[u]!="function"&&(t!==undefined&&typeof t[u]=="function"?n[u]=e(t[u],t):n[u]=i)}return n}),Splunk.namespace("Splunk.Logger"),Splunk.Logger.getLogger=function(e,t){var n;t=t||Splunk.Logger.mode.Default;try{n=new t(e)}catch(r){throw n=this,new Error("Splunk.Logger mode is undefined, not callable or thrown an exception. mode="+t+" and fileName="+e+". Check to make sure the mode you are defining exist (see: web.conf js_logger_mode) and is a proper closure. Stack trace:"+r)}return n},Splunk.Logger.hasFirebug=function(){return typeof console!="undefined"&&console.firebug?!0:!1},Splunk.Logger.hasConsole=function(){return typeof console!="undefined"?!0:!1},Splunk.Logger.mode={},Splunk.Logger.mode.None=function(){var e=this;e.info=e.log=e.debug=e.warn=e.error=e.trace=function(){}},Splunk.Logger.mode.Firebug=function(e){var t=this,n=function(t){var n=[];for(var r=0;r<t.length;r++)n.push(t[r]);return n.push(e),n},r=function(e,t){e=n(e),Splunk.Logger.hasConsole()&&(t=console[t]||console.info||function(){},t.apply?t.apply(console,e):t(e.join(" ")))};Splunk.Logger.hasFirebug()&&console.firebug!="1.3.0"?(t.log=console.log,t.info=console.info,t.debug=console.debug,t.warn=console.warn,t.error=console.error,t.trace=console.trace):(t.info=function(){r(arguments,"info")},t.log=function(){r(arguments,"log")},t.debug=function(){r(arguments,"debug")},t.warn=function(){r(arguments,"warn")},t.error=function(){r(arguments,"error")},t.trace=function(){r(arguments,"trace")})},Splunk.Logger.mode.Server=function(e){var t=this,n=Splunk.Logger.mode.Server.Buffer.getInstance(),r=function(t,r){t=t||[];for(var i=0;i<t.length;i++)if(typeof t[i]=="object")try{t[i]=JSON.stringify(t[i])}catch(s){}var o=Array.apply(null,t).join(" "),u={level:r,"class":e,message:o};n.push(u)};t.info=function(){r(arguments,"info")},t.log=function(){r(arguments,"log")},t.debug=function(){r(arguments,"debug")},t.warn=function(){r(arguments,"warn")},t.error=function(){r(arguments,"error")},t.trace=function(){var e="";try{var t=new Error;e=t.stack.replace(/^Error/,"")}catch(t){}e&&r([e],"debug")}},Splunk.Logger.mode.Server.Buffer=function(){var e=this,t,n=[],r=function(){var e=JSON.stringify(n);$.post(Splunk.Logger.mode.Server.END_POINT,{data:e})},i=function(){r(),n=[]},s=function(){n.length>Splunk.Logger.mode.Server.MAX_BUFFER&&i()};e.push=function(e){n.push(e),s()},e.poller=function(){n.length>0&&i()},e.size=function(){return n.length},e.Buffer=function(){t=setInterval(e.poller,Splunk.Logger.mode.Server.POLL_BUFFER)}()},Splunk.Logger.mode.Server.Buffer.instance=null,Splunk.Logger.mode.Server.Buffer.getInstance=function(){return Splunk.Logger.mode.Server.Buffer.instance==null&&(Splunk.Logger.mode.Server.Buffer.instance=new Splunk.Logger.mode.Server.Buffer),Splunk.Logger.mode.Server.Buffer.instance},Splunk.Logger.mode.Server.END_POINT=Splunk.util.make_url(Splunk.util.getConfigValue("JS_LOGGER_MODE_SERVER_END_POINT","util/log/js")),Splunk.Logger.mode.Server.POLL_BUFFER=Splunk.util.getConfigValue("JS_LOGGER_MODE_SERVER_POLL_BUFFER",1e3),Splunk.Logger.mode.Server.MAX_BUFFER=Splunk.util.getConfigValue("JS_LOGGER_MODE_SERVER_MAX_BUFFER",100),Splunk.Logger.mode.Default=Splunk.Logger.mode[Splunk.util.getConfigValue("JS_LOGGER_MODE","None")],Splunk.log=function(e,t,n){Splunk.Logger.getLogger("logger.js").warn("WARNING! Splunk.log is now deprecated. See Splunk.Logger class for more details.","Original Message:",e," Original Category:",t,"Original Source:",n)};var D={};D.logger=Splunk.Logger.getLogger("logger.js"),D.wrapper=function(e,t){D.logger.warn("WARNING! D.",t,"is now deprecated. See Splunk.Logger class for more details.",e)},D.debug=function(e){D.wrapper(e,"debug")},D.error=function(e){D.wrapper(e,"error")},D.warn=function(e){D.wrapper(e,"warn")},Splunk.util.logger=Splunk.Logger.getLogger("util.js"),define("splunk.logger",["splunk","splunk.util"],function(e){return function(){var t,n;return t||e.Splunk.Logger}}(this)),define("util/console",["jquery","util/console_dev","splunk.logger","splunk.util"],function(e,t,n,r){var i=r.getConfigValue("JS_LOGGER_MODE","None");return i==="Firebug"?t:n.getLogger(r.getConfigValue("USERNAME","")+":::"+window.location.href)}),define("splunkjs/mvc/basetokenmodel",["require","exports","module","backbone"],function(e,t,n){var r=e("backbone"),i=r.Model.extend({moduleId:n.id});return i}),define("splunkjs/mvc/registry",["require","exports","module","underscore","backbone","util/console","./basetokenmodel"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=e("util/console"),o=e("./basetokenmodel"),u=i.Model.extend({initialize:function(){this.registerInstance("default",this._createTokenModel("default"))},createError:function(e){return e},registerInstance:function(e,t,n){n=n||{};if(!e)throw new Error("You must pass in an ID when registering an instance.");if(this.has(e)&&!n.replace)throw new Error(this.createError("Already have instance with id: "+e));return this.set(e,t,n),t},revokeInstance:function(e,t){this.unset(e,t)},hasInstance:function(e){return this.has(e)},getInstance:function(e,t){return t=t||{},this.has(e)||(t.create?this.registerInstance(e,this._createTokenModel(e)):s.error(this.createError("No instance with id: "+e))),this.get(e)},getInstances:function(){return r.values(this.attributes)},getInstanceNames:function(){return r.keys(this.attributes)},_createTokenModel:function(e){var t=new o;return t.id=e,t}});return u}),define("JS_CACHE/urlresolver",["require","exports","module","underscore"],function(e,t,n){var r=e("underscore"),i="dj",s={home:[{kwargs:{},pattern:"/",app:""},{kwargs:{},pattern:"/araitz/home/",app:"araitz"},{kwargs:{},pattern:"/drilldownfx/home/",app:"drilldownfx"},{kwargs:{},pattern:"/formlab/",app:"formlab"},{kwargs:{},pattern:"/homefx/",app:"homefx"},{kwargs:{},pattern:"/lunch1/home/",app:"lunch1"},{kwargs:{},pattern:"/searchfx/",app:"searchfx"},{kwargs:{},pattern:"/simplexml/",app:"simplexml"},{kwargs:{},pattern:"/singlefileapp/",app:"singlefileapp"},{kwargs:{},pattern:"/splunkdev/",app:"splunkdev"},{kwargs:{},pattern:"/splunkmix/",app:"splunkmix"},{kwargs:{},pattern:"/testfx/home/",app:"testfx"},{kwargs:{},pattern:"/testsite/",app:"testsite"},{kwargs:{},pattern:"/vizfx/",app:"vizfx"},{kwargs:{},pattern:"/webfx/home/",app:"webfx"},{kwargs:{},pattern:"/xkcd/home/",app:"xkcd"}],login:[{kwargs:{},pattern:"/accounts/login/",app:""}],logout:[{kwargs:{},pattern:"/accounts/logout/",app:""},{kwargs:{},pattern:"/formlab/logout",app:"formlab"},{kwargs:{},pattern:"/homefx/logout/",app:"homefx"},{kwargs:{},pattern:"/simplexml/logout",app:"simplexml"},{kwargs:{},pattern:"/splunkdev/logout",app:"splunkdev"},{kwargs:{},pattern:"/webfx/logout/",app:"webfx"}],job_history:[{kwargs:{},pattern:"/araitz/job_history/",app:"araitz"}],target:[{kwargs:{},pattern:"/drilldownfx/target/",app:"drilldownfx"}],root:[{kwargs:{},pattern:"/formlab/",app:"formlab"},{kwargs:{},pattern:"/simplexml/",app:"simplexml"},{kwargs:{},pattern:"/splunkdev/",app:"splunkdev"},{kwargs:{},pattern:"/webfx/",app:"webfx"}],page:[{kwargs:{},pattern:"/formlab/<page>/",app:"formlab"},{kwargs:{},pattern:"/simplexml/<page>/",app:"simplexml"},{kwargs:{},pattern:"/splunkdev/<page>/",app:"splunkdev"}],panels:[{kwargs:{},pattern:"/lunch1/panels/",app:"lunch1"}],interactive:[{kwargs:{},pattern:"/lunch1/interactive/",app:"lunch1"}],simplexml:[{kwargs:{},pattern:"/lunch1/simplexml/",app:"lunch1"}],search:[{kwargs:{},pattern:"/searchfx/search/",app:"searchfx"},{kwargs:{},pattern:"/singlefileapp/",app:"singlefileapp"},{kwargs:{},pattern:"/webfx/search/",app:"webfx"}],viewdata:[{kwargs:{},pattern:"/simplexml/viewdata/apps/<app>/<path>",app:"simplexml"},{kwargs:{},pattern:"/simplexml/viewdata/<path>",app:"simplexml"}],compiled_dashboard:[{kwargs:{},pattern:"/simplexml/compiled/dashboard/",app:"simplexml"}],compiled_dashboard_drilldown:[{kwargs:{},pattern:"/simplexml/compiled/dashboard/drilldown/",app:"simplexml"}],compiled_dashboard_interactive:[{kwargs:{},pattern:"/simplexml/compiled/dashboard/interactive/",app:"simplexml"}],compiled_form:[{kwargs:{},pattern:"/simplexml/compiled/form/",app:"simplexml"}],compiled_formplus:[{kwargs:{},pattern:"/simplexml/compiled/formplus/",app:"simplexml"}],apps:[{kwargs:{},pattern:"/splunkdev/apps/",app:"splunkdev"}],indexes:[{kwargs:{},pattern:"/splunkdev/indexes/",app:"splunkdev"}],searches:[{kwargs:{},pattern:"/splunkdev/searches/",app:"splunkdev"}],overview:[{kwargs:{},pattern:"/splunkmix/overview/",app:"splunkmix"}],activity:[{kwargs:{},pattern:"/webfx/activity/",app:"webfx"}],service:[{kwargs:{},pattern:"/webfx/service/",app:"webfx"}],sources:[{kwargs:{},pattern:"/webfx/sources/",app:"webfx"}],users:[{kwargs:{},pattern:"/webfx/users/",app:"webfx"}]},o=function(e,t,n){!n&&r.isObject(t)&&(n=t,t="");if(!e)throw new Error("Must provide a name for path reverse.");if(e.indexOf(":")>-1&&!t){var o=e.split(":");e=o[1],t=o[0]}if(!e)throw new Error("Must provide a name for path reverse.");if(!s.hasOwnProperty(e))throw new Error("No URL path with name '"+e+"' exists.");var u=null,a=s[e];if(a.length===1&&!t)u=a[0];else for(var f=0;f<a.length;f++)a[f].app===t&&(u=a[f]);if(!u)throw new Error("No URL path with name '"+e+"' in app '"+t+"' exists.");var l="/"+i+u.pattern;n=r.extend(r.clone(u.kwargs),n),r.each(n,function(e,t){if(!l.match("<"+t+">"))throw new Error("Key '"+t+"' does not exist in path: '"+l+"'");l=l.replace("<"+t+">",e)});var c=new RegExp("<[a-zA-Z0-9-_]{1,}>","g"),h=l.match(c);if(h)throw"Missing arguments ("+h.join(", ")+") for path '"+l+"'";return l};return{reverse:o}}),define("JS_CACHE/config",["require","exports","module","splunk.util"],function(e,t,n){var r=e("splunk.util");return{PROXY_PATH:r.make_url("/splunkd/__raw"),STATIC_URL:r.make_url("/static/js/")}}),function(e){var t,n=decodeURIComponent,r=e.deparam=function(t,i){var s={};return e.each(t.replace(/\+/g," ").split("&"),function(t,o){var u=o.split("="),a=n(u[0]);if(!a)return;var f=n(u[1]||""),l=a.split("]["),c=l.length-1,h=0,p=s;l[0].indexOf("[")>=0&&/\]$/.test(l[c])?(l[c]=l[c].replace(/\]$/,""),l=l.shift().split("[").concat(l),c++):c=0,e.isFunction(i)?f=i(a,f):i&&(f=r.reviver(a,f));if(c)for(;h<=c;h++)a=l[h]!==""?l[h]:p.length,h<c?p=p[a]=p[a]||(isNaN(l[h+1])?{}:[]):p[a]=f;else e.isArray(s[a])?s[a].push(f):a in s?s[a]=[s[a],f]:s[a]=f}),s};r.reviver=function(e,n){var r={"true":!0,"false":!1,"null":null,"undefined":t};return+n+""===n?+n:n in r?r[n]:n}}(jQuery),define("splunkjs/contrib/jquery.deparam",function(){}),define("splunkjs/mvc/protections",["require","exports","module","splunk.util"],function(e,t,n){function i(e){function t(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}var n=r.getConfigValue("DJANGO_PORT_NUMBER",null),i=r.getConfigValue("MRSPARKLE_PORT_NUMBER"),s=n||i,o="django_csrftoken_"+s,u=r.getCookie(o),a=r.getFormKey();e.ajaxPrefilter(function(e,n,r){e.hasOwnProperty("crossDomain")||(e.crossDomain=!1);var i=e.type||"";t(i)||(u&&r.setRequestHeader("X-CSRFToken",u),a&&r.setRequestHeader("X-Splunk-Form-Key",a))})}function s(e,t,n){e(document).bind("ajaxError",function(e,r,i,s){var o=window.location.pathname;if(r.status===401&&o.indexOf(n)===-1){var u=encodeURIComponent(o+document.location.search);document.location=t+"?return_to="+u}})}var r=e("splunk.util");return{enableCSRFProtection:i,enableUnauthorizationRedirection:s}}),define("splunkjs/mvc/tokenescapestring",["require","exports","module"],function(e,t,n){var r=function(e){this.value=e};return r}),define("splunkjs/mvc/tokensafestring",["require","exports","module"],function(e,t,n){var r=function(e){this.value=e};return r}),define("splunkjs/mvc/tokenutils",["require","exports","module","underscore","./registry"],function(e,t,n){var r=e("underscore"),i=e("./registry"),s={search:function(e){return JSON.stringify(String(e))},url:function(e){return encodeURIComponent(String(e))},html:function(e){return r.escape(String(e))}};r.extend(s,{h:s.html,u:s.url,s:s.search});var o=/(\w+:)?/.source,u=/([^$|:]+?)(\|[suh]+)?/.source,a=/\$/.source+o+u+/\$/.source,f=new RegExp(a+"|"+/\$\$/.source,"g"),l=function(e){return new RegExp(e)},c={getTokens:function(e,t){t=t||{};var n=t.tokenNamespace||"default",r=[],i=l(f);for(;;){var s=i.exec(e);if(t._isToken)return s&&s.index===0&&s[0].length===e.length;if(!s)break;var o=s[1],u=s[2];if(!o&&!u)continue;o?o=o.substring(0,o.length-1):o=n,r.push({namespace:o,name:u})}return r},getTokenNames:function(e){var t=c.getTokens(e),n=[];return r.each(t,function(e){e.namespace==="default"&&n.push(e.name)}),n},replaceTokens:function(e,t,n){var i;r.isFunction(n)?i={escaper:n}:i=n||{};var o=i.escaper,u=i.tokenNamespace||"default";return e.replace(l(f),function(e,n,i,a){if(!n&&!i)return"$";n?n=n.substring(0,n.length-1):n=u;var f=t.get(n);if(f===undefined)return e;var l=f.get(i);return l===undefined?e:(a&&r(a.substring(1).split("")).each(function(e){var t=s[e];t&&t!==o&&(l=t(l))}),r.isFunction(o)&&(l=o(l)),l)})},replaceTokenNames:function(e,t,n){var r=new i,s=r.getInstance("default",{create:!0});return s.set(t),c.replaceTokens(e,r,n)},hasToken:function(e){return c.getTokens(e).length>0},hasTokenName:function(e){return r.some(c.getTokens(e),function(e){return e.namespace==="default"})},isToken:function(e){return c.getTokens(e,{_isToken:!0})},isTokenName:function(e){return c.isToken(e)&&c.getTokens(e)[0].namespace==="default"},getTokenName:function(e){return c.isTokenName(e)&&c.getTokenNames(e)[0]},quoteAsTokenString:function(e){return r.isString(e)?e.replace(/\$/g,function(e){return"$$"}):e},getEscaper:function(e){return s[e]}};return c}),define("splunkjs/mvc/utils",["require","exports","module","underscore","jquery","./tokenutils","util/console"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("./tokenutils"),o=e("util/console"),u={search:function(e){return JSON.stringify(String(e))},url:function(e){return encodeURIComponent(String(e))},html:function(e){return r.escape(String(e))}};r.extend(u,{h:u.html,u:u.url,s:u.search});var a=function(e){e=e||{},this.source=e.source,this.prefix=e.prefix||"",this.dest=e.dest,this.destSetter=e.save||e.saveDest?"save":"set",this.sourceSetter=e.save||e.saveSource?"save":"set",this.debug=e.debug,this.aliasMap=e.alias||{},this.include(e.include),this.exclude(e.exclude),e.auto===!0?(this.auto("push"),this.auto("pull")):r.isString(e.auto)&&this.auto(e.auto)};r.extend(a.prototype,{include:function(e){return this.includes=r.isArray(e)?r.object(e,r.map(e,function(){return!0})):e,this},exclude:function(e){return this.excludes=r.isArray(e)?r.object(e,r.map(e,function(){return!0})):e,this},auto:function(e){return e==="push"?(this.source.on("change",this.push,this),this.push()):e=="pull"&&(this.dest.on("change",this.pull,this),this.pull()),this},push:function(e,t){var n=t&&t.unset?e.changed:this.source.toJSON({tokens:!0}),i={},s=this.aliasMap||{},u=this.includes,a=this.excludes||{},f=this.prefix,l=this.dest;r(n).each(function(e,t){if((u===undefined||u[t])&&!a[t]){var n=s[t],r=n!==undefined?n:f+t;l.get(r,{tokens:!0})!==e&&(i[r]=e)}}),r(i).isEmpty()||(this.debug&&o.log("PUSH",i,r.isObject(t)?r.pick(t,["unset"]):undefined),this.dest[this.destSetter](i,r.extend({tokens:!0},r.isObject(t)?r.pick(t,["unset"]):undefined)))},pull:function(e,t){var n=t&&t.unset?e.changed:this.dest.toJSON({tokens:!0}),i={},s=r.invert(this.aliasMap||{}),u=this.includes,a=this.excludes||{},f=this.prefix,l=this.source;r(n).each(function(e,t){if(s[t])i[s[t]]=e;else if(t.substring(0,f.length)==f){var n=t.substring(f.length);(u===undefined||u[n])&&!a[n]&&l.get(n,{tokens:!0})!==e&&(i[n]=e)}}),r(i).isEmpty()||(this.debug&&o.log("PULL",i,r.isObject(t)?r.pick(t,["unset"]):undefined),this.source[this.sourceSetter](i,r.extend({tokens:!0},r.isObject(t)?r.pick(t,["unset"]):undefined)))},destroy:function(){this.source.off(null,null,this),this.dest.off(null,null,this)}});var f={getPageInfo:function(){return f.getURLInfo(window.location.pathname)},getURLInfo:r.memoize(function(e){var t=e.substring(1).split("/"),n,i,s,o=r.indexOf(t,"app",1),u=r.indexOf(t,"manager",1),a=r.indexOf(t,"dj",0);return a>=0&&(o===-1||o>a)?(a>0&&(i=r.first(t,a).join("/")),n=t[a+1],s=r.rest(t,a+2)):o>1?(i=r.first(t,o-1).join("/"),n=t[o-1],s=r.rest(t,o+1)):u>1?(i=r.first(t,u-1).join("/"),n=t[u-1],s=r.rest(t,u+1)):(n=t[0],s=r.rest(t,2)),{root:i,locale:n,app:s[0],page:s[1]}}),getCurrentApp:function(){return f.getPageInfo().app},searchEscapeValue:function(e){return JSON.stringify(String(e))},escapeFn:function(e){return s.getEscaper(e)},escape:function(e,t){return f.escapeFn(t)(e)},replaceTokens:function(e,t,n){return s.replaceTokenNames(e,t,n)},getTokenName:function(e){return s.getTokenName(e)},discoverReplacementTokens:function(e){return s.getTokenNames(e)},isToken:function(e){return s.isTokenName(e)},hasToken:function(e){return s.hasTokenName(e)},containsToken:function(e){return r(e).some(s.hasTokenName)},quoteAsTokenString:function(e){return s.quoteAsTokenString(e)},syncModels:function(e,t,n){var i=n;return arguments.length==1?i=e:(i=i||{},r.extend(i,{source:e,dest:t})),new a(i)},redirect:function(e,t,n){t?window.open(e,"_blank"):n?window.open(e,n):window.location=e}};return f}),function(){var e="splunkjs",t=function(e,n){var r=t.resolve(e,n||"/"),i=t.modules[r];if(!i)throw new Error("Failed to resolve module "+e+", tried "+r);var s=i._cached?i._cached:i();return s};t.paths=[],t.modules={},t.extensions=[".js",".coffee"],t._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},t.resolve=function(){return function(e,n){function u(e){if(t.modules[e])return e;for(var n=0;n<t.extensions.length;n++){var r=t.extensions[n];if(t.modules[e+r])return e+r}}function a(e){e=e.replace(/\/+$/,"");var n=e+"/package.json";if(t.modules[n]){var i=t.modules[n](),s=i.browserify;if(typeof s=="object"&&s.main){var o=u(r.resolve(e,s.main));if(o)return o}else if(typeof s=="string"){var o=u(r.resolve(e,s));if(o)return o}else if(i.main){var o=u(r.resolve(e,i.main));if(o)return o}}return u(e+"/index")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r],s=u(i+"/"+e);if(s)return s;var o=a(i+"/"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;e==="/"?t=[""]:t=r.normalize(e).split("/");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}n||(n="/");if(t._core[e])return e;var r=t.modules.path();n=r.resolve("/",n);var i=n||"/";if(e.match(/^(?:\.\.?\/|\/)/)){var s=u(r.resolve(i,e))||a(r.resolve(i,e));if(s)return s}var o=f(e,i);if(o)return o;throw new Error("Cannot find module '"+e+"'")}}(),t.alias=function(e,n){var r=t.modules.path(),i=null;try{i=t.resolve(e+"/package.json","/")}catch(s){i=t.resolve(e,"/")}var o=r.dirname(i),u=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(t.modules);for(var a=0;a<u.length;a++){var f=u[a];if(f.slice(0,o.length+1)===o+"/"){var l=f.slice(o.length);t.modules[n+l]=t.modules[o+l]}else f===o&&(t.modules[n]=t.modules[o])}},t.define=function(e,n){var r=t._core[e]?"":t.modules.path().dirname(e),i=function(e){return t(e,r)};i.resolve=function(e){return t.resolve(e,r)},i.modules=t.modules,i.define=t.define;var s={exports:{}};t.modules[e]=function(){return t.modules[e]._cached=s.exports,n.call(s.exports,i,s,s.exports,r,e),t.modules[e]._cached=s.exports,s.exports}},typeof process=="undefined"&&(process={}),process.nextTick||(process.nextTick=function(){var e=[],t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;return t&&window.addEventListener("message",function(t){if(t.source===window&&t.data==="browserify-tick"){t.stopPropagation();if(e.length>0){var n=e.shift();n()}}},!0),function(n){t?(e.push(n),window.postMessage("browserify-tick","*")):setTimeout(n,0)}}()),process.title||(process.title="browser"),process.binding||(process.binding=function(e){if(e==="evals")return t("vm");throw new Error("No such module")}),process.cwd||(process.cwd=function(){return"."}),t.define("path",function(e,t,n,r,i){function s(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function o(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:process.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(s(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=u.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=u.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return u.exec(e)[3]||""}}),t.define("/package.json",function(e,t,n,r,i){t.exports={main:"index.js"}}),t.define("/index.js",function(e,t,n,r,i){(function(){var r=n||this;process.env=process.env||{},t.exports=r={Logger:e("./lib/log").Logger,Context:e("./lib/context"),Service:e("./lib/service"),Http:e("./lib/http"),Utils:e("./lib/utils"),Async:e("./lib/async"),Paths:e("./lib/paths").Paths,Class:e("./lib/jquery.class").Class},typeof window=="undefined"&&(r.NodeHttp=e("./lib/platform/node/node_http").NodeHttp)})()}),t.define("/lib/log.js",function(e,t,n,r,i){(function(){var t=e("./utils"),r=n||this,i={ALL:4,INFO:3,WARN:2,ERROR:1,NONE:0},s=function(e){t.isString(e)&&i.hasOwnProperty(e)?process.env.LOG_LEVEL=i[e]:!isNaN(parseInt(e,10))&&t.keyOf(parseInt(e,10),i)?process.env.LOG_LEVEL=e:process.env.LOG_LEVEL=i.ERROR};process.env.LOG_LEVEL?s(process.env.LOG_LEVEL):process.env.LOG_LEVEL=i.ERROR;var o,u,a,f;o=u=a=f=function(){};if(typeof console!="undefined"){var l=function(e){return function(t){try{console[e].apply(console,arguments)}catch(n){console[e](t)}}};console.log&&(o=l("log")),console.error&&(a=l("error")),console.warn&&(u=l("warn")),console.info&&(f=l("info"))}n.Logger={log:function(){process.env.LOG_LEVEL>=i.ALL&&o.apply(null,arguments)},error:function(){process.env.LOG_LEVEL>=i.ERROR&&a.apply(null,arguments)},warn:function(){process.env.LOG_LEVEL>=i.WARN&&u.apply(null,arguments)},info:function(){process.env.LOG_LEVEL>=i.INFO&&f.apply(null,arguments)},printMessages:function(e){e=e||[];for(var t=0;t<e.length;t++){var n=e[t],r=n.type,i=n.text,s="[SPLUNKD] "+i;switch(r){case"HTTP":case"FATAL":case"ERROR":this.error(s);break;case"WARN":this.warn(s);break;case"INFO":this.info(s);break;case"HTTP":this.error(s);break;default:this.info(s)}}},setLevel:function(e){s.apply(this,arguments)},levels:i}})()}),t.define("/lib/utils.js",function(e,t,n,r,i){(function(){var e=n||this;e.bind=function(e,t){return function(){return t.apply(e,arguments)}},e.trim=function(e){return e=e||"",String.prototype.trim?String.prototype.trim.call(e):e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},e.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},e.contains=function(t,n){return t=t||[],e.indexOf(t,n)>=0},e.startsWith=function(e,t){var n=e.match("^"+t);return n&&n.length>0&&n[0]===t},e.endsWith=function(e,t){var n=e.match(t+"$");return n&&n.length>0&&n[0]===t};var t=Object.prototype.toString;e.toArray=function(e){return Array.prototype.slice.call(e)},e.isArray=Array.isArray||function(e){return t.call(e)==="[object Array]"},e.isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},e.isNumber=function(e){return!!(e===0||e&&e.toExponential&&e.toFixed)},e.isString=function(e){return!!(e===""||e&&e.charCodeAt&&e.substr)},e.isObject=function(e){return e===Object(e)},e.isEmpty=function(t){if(e.isArray(t)||e.isString(t))return t.length===0;for(var n in t)if(this.hasOwnProperty.call(t,n))return!1;return!0},e.forEach=function(e,t,n){if(e===null)return;if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r,e)==={})return}else for(var s in e)if(e.hasOwnProperty(s)&&t.call(n,e[s],s,e)==={})return},e.extend=function(t){return e.forEach(Array.prototype.slice.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t},e.clone=function(t){return e.isObject(t)?e.isArray(t)?t.slice():e.extend({},t):t},e.namespaceFromProperties=function(e){return{owner:e.acl.owner,app:e.acl.app,sharing:e.acl.sharing}},e.keyOf=function(e,t){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e)return n;return undefined},e.getWithVersion=function(e,t){t=t||{};var n=e+""||"";while(n!==""){if(t.hasOwnProperty(n))return t[n];n=n.slice(0,n.lastIndexOf("."))}return t["default"]}})()}),t.define("/lib/context.js",function(e,t,n,r,i){(function(){var r=e("./paths").Paths,i=e("./jquery.class").Class,s=e("./http"),o=e("./utils"),u=n||this,a={5:"",4.3:"/services/json/v2","default":""};t.exports=u=i.extend({init:function(t,n){!(t instanceof s)&&!n&&(n=t,t=null),n=n||{},this.scheme=n.scheme||"https",this.host=n.host||"localhost",this.port=n.port||8089,this.username=n.username||null,this.password=n.password||null,this.owner=n.owner,this.app=n.app,this.sessionKey=n.sessionKey||"",this.authorization=n.authorization||"Splunk",this.paths=n.paths||r,this.version=n.version||"default",this.autologin=!0,n.hasOwnProperty("autologin")&&(this.autologin=n.autologin);if(!t){if(typeof window!="undefined")throw new Error("Http instance required when creating a Context within a browser.");var i=e("./platform/node/node_http").NodeHttp;t=new i}this.http=t,this.http._setSplunkVersion(this.version);var u=o.getWithVersion(this.version,a);this.prefix=this.scheme+"://"+this.host+":"+this.port+u,this._headers=o.bind(this,this._headers),this.fullpath=o.bind(this,this.fullpath),this.urlify=o.bind(this,this.urlify),this.get=o.bind(this,this.get),this.del=o.bind(this,this.del),this.post=o.bind(this,this.post),this.login=o.bind(this,this.login),this._shouldAutoLogin=o.bind(this,this._shouldAutoLogin),this._requestWrapper=o.bind(this,this._requestWrapper)},_headers:function(e){return e=e||{},e.Authorization=this.authorization+" "+this.sessionKey,e},_shouldAutoLogin:function(){return this.username&&this.password&&this.autologin},_requestWrapper:function(e,t){t=t||function(){};var n=this,r=null,i=function(i){if(r.wasAborted)return;i&&i.status===401&&n._shouldAutoLogin()?(n.sessionKey=null,n.login(function(n,i){if(r.wasAborted)return;n?t(n):e(t)})):t.apply(null,arguments)};return!this._shouldAutoLogin()||this.sessionKey?(r=e(i),r):(r=this.login(function(n,i){if(r.wasAborted)return;n?t(n):e(t)}),r)},fullpath:function(e,t){t=t||{};if(o.startsWith(e,"/"))return e;if(!t.app&&!this.app&&t.sharing!==u.Sharing.SYSTEM)return"/services/"+e;var n=t.owner||this.owner||"-",r=t.app||this.app||"-";return t.sharing=(t.sharing||"").toLowerCase(),t.sharing===u.Sharing.APP||t.sharing===u.Sharing.GLOBAL?n="nobody":t.sharing===u.Sharing.SYSTEM&&(n="nobody",r="system"),o.trim("/servicesNS/"+n+"/"+r+"/"+e)},urlify:function(e){return this.prefix+this.fullpath(e)},login:function(e){var t=this,n=this.paths.login,r={username:this.username,password:this.password};e=e||function(){};var i=function(n,r){var i=!!(!n&&r.data&&r.data.sessionKey);n||!i?e(n||"No session key available",!1):(t.sessionKey=r.data.sessionKey,e(null,!0))};return this.http.post(this.urlify(n),this._headers(),r,0,i)},get:function(e,t,n){var r=this,i=function(n){return r.http.get(r.urlify(e),r._headers(),t,0,n)};return this._requestWrapper(i,n)},del:function(e,t,n){var r=this,i=function(n){return r.http.del(r.urlify(e),r._headers(),t,0,n)};return this._requestWrapper(i,n)},post:function(e,t,n){var r=this,i=function(n){return r.http.post(r.urlify(e),r._headers(),t,0,n)};return this._requestWrapper(i,n)},request:function(e,t,n,r,i,s,o){var u=this,a=function(o){return u.http.request(u.urlify(e),{method:t,headers:u._headers(s),query:n,post:r,body:i,timeout:0},o)};return this._requestWrapper(a,o)},versionCompare:function(e){var t=this.version;t==="default"&&(t="5.0");var n=t.split("."),r=e.split("."),i=Math.max(n.length,r.length);for(var s=0;s<i;s++){var o=s<n.length?parseInt(n[s],10):0,u=s<r.length?parseInt(r[s],10):0;if(o<u)return-1;if(o>u)return 1}return 0}}),u.Sharing={USER:"user",APP:"app",GLOBAL:"global",SYSTEM:"system"}})()}),t.define("/lib/paths.js",function(e,t,n,r,i){(function(){var e=n||this;e.Paths={apps:"/services/apps/local",capabilities:"authorization/capabilities",configurations:"configs",deploymentClient:"deployment/client",deploymentServers:"deployment/server",deploymentServerClasses:"deployment/serverclass",deploymentTenants:"deployment/tenants",eventTypes:"saved/eventtypes",indexes:"data/indexes",info:"/services/server/info",inputs:null,jobs:"search/jobs",licenseGroups:"licenser/groups",licenseMessages:"licenser/messages",licensePools:"licenser/pools",licenseSlaves:"licenser/slaves",licenseStacks:"licenser/stacks",licenses:"licenser/licenses",loggers:"server/logger",login:"/services/auth/login",messages:"messages",passwords:"admin/passwords",parser:"search/parser",properties:"properties",roles:"authorization/roles",savedSearches:"saved/searches",settings:"server/settings",users:"/services/authentication/users",typeahead:"search/typeahead",views:"data/ui/views",currentUser:"/services/authentication/current-context",submitEvent:"/services/receivers/simple"}})()}),t.define("/lib/jquery.class.js",function(e,t,n,r,i){(function(){var e=n||this,t=!1,r=/xyz/.test(function(){return xyz})?/\b_super\b/:/.*/;e.Class=function(){},e.Class.extend=function(e){function o(){!t&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;t=!0;var i=new this;t=!1;for(var s in e)i[s]=typeof e[s]=="function"&&typeof n[s]=="function"&&r.test(e[s])?function(e,t){return function(){var r=this._super;this._super=n[e];var i=t.apply(this,arguments);return this._super=r,i}}(s,e[s]):e[s];return o.prototype=i,o.constructor=o,o.extend=arguments.callee,o}})()}),t.define("/lib/http.js",function(e,t,n,r,i){(function(){var r=e("./jquery.class").Class,i=e("./log").Logger,s=e("./utils"),o=n||this,u=null,a={5:function(e){var t=e.query||{},n=e.post||{},r=t.output_mode||n.output_mode||"json";return s.startsWith(r,"json")||(r="json"),t.output_mode=r,t},4:function(e){return e.query||{}},"default":function(e){return a[5](e)},none:function(e){return e.query||{}}};t.exports=o=u=r.extend({init:function(){this.get=s.bind(this,this.get),this.del=s.bind(this,this.del),this.post=s.bind(this,this.post),this.request=s.bind(this,this.request),this._buildResponse=s.bind(this,this._buildResponse),this._setSplunkVersion("none")},_setSplunkVersion:function(e){this.version=e},get:function(e,t,n,r,i){var s={method:"GET",headers:t,timeout:r,query:n};return this.request(e,s,i)},post:function(e,t,n,r,i){t["Content-Type"]="application/x-www-form-urlencoded";var s={method:"POST",headers:t,timeout:r,post:n};return this.request(e,s,i)},del:function(e,t,n,r,i){var s={method:"DELETE",headers:t,timeout:r,query:n};return this.request(e,s,i)},request:function(e,t,n){var r=function(e){n=n||function(){},e.status<400&&e.status!=="abort"?n(null,e):n(e)},i=s.getWithVersion(this.version,a)(t),o=t.post||{},f=e+"?"+u.encode(i),l=t.body?t.body:u.encode(o),c={method:t.method,headers:t.headers,timeout:t.timeout,body:l};return this.makeRequest(f,c,r)},makeRequest:function(e,t,n){throw new Error("UNDEFINED FUNCTION - OVERRIDE REQUIRED")},parseJson:function(e){throw new Error("UNDEFINED FUNCTION - OVERRIDE REQUIRED")},_buildResponse:function(e,t,n){var r,o={},u=null;t&&t.headers&&(u=s.trim(t.headers["content-type"]||t.headers["Content-Type"]));if(s.startsWith(u,"application/json")&&n)try{o=this.parseJson(n)||{}}catch(a){i.error("Error in parsing JSON:",n,a),o=n}else o=n;return o&&i.printMessages(o.messages),r={response:t,status:t?t.statusCode:0,data:o,error:e},r}}),u.encode=function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){t&&t[t.length-1]!=="&"&&(t+="&");var r=e[n];if(r instanceof Array)for(var i=0;i<r.length;i++)t=t+n+"="+encodeURIComponent(r[i])+"&";else if(typeof r=="object"){for(var s in r)if(r.hasOwnProperty(s)){var o=r[s];t=t+n+"="+encodeURIComponent(r[s])+"&"}}else t=t+n+"="+encodeURIComponent(r)}return t[t.length-1]==="&"&&(t=t.substr(0,t.length-1)),t}})()}),t.define("/lib/service.js",function(e,t,n,r,i){(function(){var r=e("./context"),i=e("./http"),s=e("./async"),o=e("./paths").Paths,u=e("./jquery.class").Class,a=e("./utils"),f=n||this,l=null,c=r.extend({init:function(){this._super.apply(this,arguments)}});t.exports=f=l=c.extend({init:function(){this._super.apply(this,arguments),this.specialize=a.bind(this,this.specialize),this.apps=a.bind(this,this.apps),this.configurations=a.bind(this,this.configurations),this.indexes=a.bind(this,this.indexes),this.savedSearches=a.bind(this,this.savedSearches),this.jobs=a.bind(this,this.jobs),this.users=a.bind(this,this.users),this.currentUser=a.bind(this,this.currentUser),this.views=a.bind(this,this.views)},specialize:function(e,t){return new l(this.http,{scheme:this.scheme,host:this.host,port:this.port,username:this.username,password:this.password,owner:e,app:t,sessionKey:this.sessionKey,version:this.version})},apps:function(){return new f.Applications(this)},configurations:function(e){return new f.Configurations(this,e)},indexes:function(e){return new f.Indexes(this,e)},savedSearches:function(e){return new f.SavedSearches(this,e)},jobs:function(e){return new f.Jobs(this,e)},users:function(){return new f.Users(this)},views:function(e){return new f.Views(this,e)},search:function(e,t,n,r){!r&&a.isFunction(n)&&(r=n,n=null);var i=new f.Jobs(this,{},n);return i.search(e,t,r)},oneshotSearch:function(e,t,n,r){!r&&a.isFunction(n)&&(r=n,n=null);var i=new f.Jobs(this,{},n);return i.oneshotSearch(e,t,r)},currentUser:function(e){e=e||function(){};var t=this,n=this.get(o.currentUser,{},function(r,i){if(r)e(r);else{var s=i.data.entry[0].content.username,o=new f.User(t,s);o.fetch(function(){if(n.wasAborted)return;e.apply(null,arguments)})}});return n},serverInfo:function(e){e=e||function(){};var t=new f.ServerInfo(this);return t.fetch(e)},parse:function(e,t,n){return!n&&a.isFunction(t)&&(n=t,t={}),n=n||function(){},t=t||{},t.q=e,this.get(o.parser,t,function(e,t){e?n(e):n(null,t.data)})},typeahead:function(e,t,n){!n&&a.isFunction(t)&&(n=t,t=10),n=n||function(){};var r={count:t||10,prefix:e};return this.get(o.typeahead,r,function(e,t){if(e)n(e);else{var r=(t.data||{}).results;n(null,r||[])}})},log:function(e,t,n){!n&&a.isFunction(t)&&(n=t,t={}),n=n||function(){},t=t||{},a.isObject(e)&&(e=JSON.stringify(e));var r=this.paths.submitEvent,i="POST",s={"Content-Type":"text/plain"},o=e,u=t,f={},l=this.request(r,i,u,f,o,s,function(e,t){e?n(e):n(null,t.data)});return l}}),f.Endpoint=u.extend({init:function(e,t){if(!e)throw new Error("Passed in a null Service.");if(!t)throw new Error("Passed in an empty path.");this.service=e,this.qualifiedPath=t,this.get=a.bind(this,this.get),this.post=a.bind(this,this.post),this.del=a.bind(this,this.del)},get:function(e,t,n){var r=this.qualifiedPath;return e&&(r=r+"/"+e),this.service.get(r,t,n)},post:function(e,t,n){var r=this.qualifiedPath;return e&&(r=r+"/"+e),this.service.post(r,t,n)},del:function(e,t,n){var r=this.qualifiedPath;return e&&(r=r+"/"+e),this.service.del(r,t,n)}}),f.Resource=f.Endpoint.extend({init:function(e,t,n){var r=e.fullpath(t,n);this._super(e,r),this.namespace=n,this._properties={},this._state={},this._load=a.bind(this,this._load),this.fetch=a.bind(this,this.fetch),this.properties=a.bind(this,this.properties),this.state=a.bind(this,this.state),this.path=a.bind(this,this.path)},path:function(){throw new Error("MUST BE OVERRIDDEN")},_load:function(e){this._properties=e||{},this._state=e||{}},fetch:function(e){throw new Error("MUST BE OVERRIDDEN")},properties:function(){return this._properties},state:function(){return this._state}}),f.Entity=f.Resource.extend({fetchOnUpdate:!1,init:function(e,t,n){this._super(e,t,n),this._load=a.bind(this,this._load),this.fetch=a.bind(this,this.fetch),this.remove=a.bind(this,this.remove),this.update=a.bind(this,this.update),this.fields=a.bind(this,this.fields),this.links=a.bind(this,this.links),this.acl=a.bind(this,this.acl),this.author=a.bind(this,this.author),this.updated=a.bind(this,this.updated),this.published=a.bind(this,this.published),this.enable=a.bind(this,this.enable),this.disable=a.bind(this,this.disable),this.reload=a.bind(this,this.reload),this._properties={},this._fields={},this._acl={},this._links={}},_load:function(e){e=a.isArray(e)?e[0]:e,e=e||{content:{},fields:{},acl:{},links:{}},this._super(e),this._properties=e.content||{},this._fields=e.fields||this._fields||{},this._acl=e.acl||{},this._links=e.links||{},this._author=e.author||null,this._updated=e.updated||null,this._published=e.published||null},fields:function(){return this._fields},acl:function(){return this._acl},links:function(){return this._links},author:function(){return this._author},updated:function(){return this._updated},published:function(){return this._published},fetch:function(e,t){!t&&a.isFunction(e)&&(t=e,e={}),t=t||function(){},e=e||{};var n=this;return this.get("",e,function(e,r){e?t(e):(n._load(r.data?r.data.entry:null),t(null,n))})},remove:function(e){e=e||function(){};var t=this;return this.del("",{},function(t){e(t)})},update:function(e,t){t=t||function(){};if(e.hasOwnProperty("name"))throw new Error("Cannot set 'name' field in 'update'");var n=this,r=this.post("",e,function(e,i){!e&&!n.fetchOnUpdate?(n._load(i.data.entry),t(e,n)):!e&&n.fetchOnUpdate?n.fetch(function(){if(r.wasAborted)return;t.apply(null,arguments)}):t(e,n)});return r},disable:function(e){e=e||function(){};var t=this;this.post("disable",{},function(n,r){n?e(n):e(null,t)})},enable:function(e){e=e||function(){};var t=this;this.post("enable",{},function(n,r){n?e(n):e(null,t)})},reload:function(e){e=e||function(){};var t=this;this.post("_reload",{},function(n,r){n?e(n):e(null,t)})}}),f.Collection=f.Resource.extend({fetchOnEntityCreation:!1,init:function(e,t,n){this._super(e,t,n),this._load=a.bind(this,this._load),this.fetch=a.bind(this,this.fetch),this.create=a.bind(this,this.create),this.list=a.bind(this,this.list),this.item=a.bind(this,this.item),this.instantiateEntity=a.bind(this,this.instantiateEntity),this._entities=[],this._entitiesByName={},this._properties={},this._paging={},this._links={}},instantiateEntity:function(e){throw new Error("MUST BE OVERRIDDEN")},_load:function(e){this._super(e);var t=[],n={},r=e.entry||[];for(var i=0;i<r.length;i++){var s=r[i],o=this.instantiateEntity(s);o._load(s),t.push(o),n.hasOwnProperty(o.name)?n[o.name].push(o):n[o.name]=[o]}this._entities=t,this._entitiesByName=n,this._paging=e.paging||{},this._links=e.links||{},this._updated=e.updated||null},links:function(){return this._links},paging:function(){return this._paging},updated:function(){return this._updated},fetch:function(e,t){!t&&a.isFunction(e)&&(t=e,e={}),t=t||function(){},e=e||{},e.count||(e.count=0);var n=this,r=n.get("",e,function(e,r){e?t(e):(n._load(r.data),t(null,n))});return r},item:function(e,t){a.isEmpty(t)&&(t=null);if(!e)throw new Error("Must suply a non-empty name.");var n=null;if(!this._entitiesByName.hasOwnProperty(e))return null;var r=this._entitiesByName[e];if(r.length===1&&!t)return r[0];if(r.length===1&&t)return n=this.service.fullpath(r[0].path(),t),r[0].qualifiedPath===n?r[0]:null;if(r.length>1&&!t)throw new Error("Ambiguous match for name '"+e+"'");for(var i=0;i<r.length;i++){var s=r[i];n=this.service.fullpath(r[i].path(),t);if(s.qualifiedPath===n)return s}},create:function(e,t){t=t||function(){};var n=this,r=this.post("",e,function(e,i){if(e)t(e);else{var s=i.data.entry;a.isArray(s)&&(s=s[0]);var o=n.instantiateEntity(s);o._load(s),n.fetchOnEntityCreation?o.fetch(function(){if(r.wasAborted)return;t.apply(null,arguments)}):t(null,o)}});return r},list:function(e){return e=e||function(){},a.clone(this._entities)}}),f.SavedSearch=f.Entity.extend({path:function(){return o.savedSearches+"/"+encodeURIComponent(this.name)},init:function(e,t,n){this.name=t,this._super(e,this.path(),n),this.acknowledge=a.bind(this,this.acknowledge),this.dispatch=a.bind(this,this.dispatch),this.history=a.bind(this,this.history),this.suppressInfo=a.bind(this,this.suppressInfo)},acknowledge:function(e){e=e||function(){};var t=this,n=this.post("acknowledge",{},function(n){e(n,t)});return n},dispatch:function(e,t){!t&&a.isFunction(e)&&(t=e,e={}),t=t||function(){},e=e||{};var n=this,r=this.post("dispatch",e,function(e,r){if(e){t(e);return}var i=r.data.sid,s=new f.Job(n.service,i,n.namespace);t(null,s,n)});return r},history:function(e){e=e||function(){};var t=this;return this.get("history",{},function(n,r){if(n){e(n);return}var i=[],s=r.data.entry||[];for(var o=0;o<s.length;o++){var u=r.data.entry[o],l=a.namespaceFromProperties(u),c=new f.Job(t.service,u.name,l);c._load(u),i.push(c)}e(null,i,t)})},suppressInfo:function(e){e=e||function(){};var t=this;return this.get("suppress",{},function(n,r){e(n,r.data.entry.content,t)})},update:function(e,t){e=e||{};if(!e.search){var n=this._super,r=this.fetch(function(i,s){i?t(i):(e.search=s.properties().search,n.call(s,e,function(){if(r.wasAborted)return;t.apply(null,arguments)}))});return r}return this._super(e,t)}}),f.SavedSearches=f.Collection.extend({path:function(){return o.savedSearches},instantiateEntity:function(e){var t=a.namespaceFromProperties(e);return new f.SavedSearch(this.service,e.name,t)},init:function(e,t){this._super(e,this.path(),t)}}),f.Application=f.Entity.extend({fetchOnUpdate:!0,path:function(){return o.apps+"/"+encodeURIComponent(this.name)},init:function(e,t){this.name=t,this._super(e,this.path(),{}),this.setupInfo=a.bind(this,this.setupInfo),this.updateInfo=a.bind(this,this.updateInfo)},setupInfo:function(e){e=e||function(){};var t=this;return this.get("setup",{},function(n,r){n?e(n):e(null,r.data.entry.content,t)})},updateInfo:function(e){e=e||function(){};var t=this;return this.get("update",{},function(n,r){n?e(n):e(null,r.data.entry.content,t)})}}),f.Applications=f.Collection.extend({fetchOnEntityCreation:!0,path:function(){return o.apps},instantiateEntity:function(e){return new f.Application(this.service,e.name,{})},init:function(e){this._super(e,this.path(),{})}}),f.ServerInfo=f.Entity.extend({path:function(){return o.info},init:function(e){this.name="server-info",this._super(e,this.path(),{})}}),f.User=f.Entity.extend({path:function(){return o.users+"/"+encodeURIComponent(this.name)},init:function(e,t){this.name=t,this._super(e,this.path(),{})}}),f.Users=f.Collection.extend({fetchOnEntityCreation:!0,path:function(){return o.users},instantiateEntity:function(e){return new f.User(this.service,e.name,{})},init:function(e){this._super(e,this.path(),{})},create:function(e,t){t=t||function(){};var n=this,r=this.post("",e,function(i,s){if(i)t(i);else{var o={name:e.name},u=n.instantiateEntity(o);u.fetch(function(){if(r.wasAborted)return;t.apply(null,arguments)})}});return r}}),f.View=f.Entity.extend({path:function(){return o.views+"/"+encodeURIComponent(this.name)},init:function(e,t,n){this.name=t,this._super(e,this.path(),n)}}),f.Views=f.Collection.extend({path:function(){return o.views},instantiateEntity:function(e){var t=a.namespaceFromProperties(e);return new f.View(this.service,e.name,t)},init:function(e,t){this._super(e,this.path(),t)}}),f.Index=f.Entity.extend({path:function(){return o.indexes+"/"+encodeURIComponent(this.name)},init:function(e,t,n){this.name=t,this._super(e,this.path(),n),this.submitEvent=a.bind(this,this.submitEvent)},submitEvent:function(e,t,n){!n&&a.isFunction(t)&&(n=t,t={}),n=n||function(){},t=t||{},t.index=this.name;var r=this;return this.service.log(e,t,function(e,t){n(e,t,r)})},remove:function(e){if(this.service.versionCompare("5.0")<0)throw new Error("Indexes cannot be removed in Splunk 4.x");return this._super(e)}}),f.Indexes=f.Collection.extend({path:function(){return o.indexes},instantiateEntity:function(e){var t=a.namespaceFromProperties(e);return new f.Index(this.service,e.name,t)},init:function(e,t){this._super(e,this.path(),t)},create:function(e,t,n){return a.isObject(e)&&a.isFunction(t)&&!n&&(n=t,t=e,e=t.name),t=t||{},t.name=e,this._super(t,n)}}),f.ConfigurationStanza=f.Entity.extend({path:function(){return o.configurations+"/conf-"+encodeURIComponent(this.file)+"/"+encodeURIComponent(this.name)},init:function(e,t,n,r){this.name=n,this.file=t,this._super(e,this.path(),r)}}),f.ConfigurationFile=f.Collection.extend({path:function(){return o.configurations+"/conf-"+encodeURIComponent(this.name)},instantiateEntity:function(e){var t=a.namespaceFromProperties(e);return new f.ConfigurationStanza(this.service,this.name,e.name,t)},init:function(e,t,n){this.name=t,this._super(e,this.path(),n)},create:function(e,t,n){return a.isObject(e)&&a.isFunction(t)&&!n&&(n=t,t=e,e=t.name),a.isFunction(t)&&!n&&(n=t,t={}),t=t||{},t.name=e,this._super(t,n)}}),f.Configurations=f.Collection.extend({fetchOnEntityCreation:!0,path:function(){return o.properties},instantiateEntity:function(e){return new f.ConfigurationFile(this.service,e.name,this.namespace)},init:function(e,t){if(!t||t.owner==="-"||t.app==="-")throw new Error("Configurations requires a non-wildcard owner/app");this._super(e,this.path(),t)},create:function(e,t){a.isObject(e)&&(e=e.__conf),t=t||function(){};var n=this,r=this.post("",{__conf:e},function(i,s){if(i)t(i);else{var o=new f.ConfigurationFile(n.service,e);o.fetch(function(){if(r.wasAborted)return;t.apply(null,arguments)})}});return r}}),f.Job=f.Entity.extend({path:function(){return o.jobs+"/"+encodeURIComponent(this.name)},init:function(e,t,n){this.name=t,this._super(e,this.path(),n),this.sid=t,this.cancel=a.bind(this,this.cancel),this.disablePreview=a.bind(this,this.disablePreview),this.enablePreview=a.bind(this,this.enablePreview),this.events=a.bind(this,this.events),this.finalize=a.bind(this,this.finalize),this.pause=a.bind(this,this.pause),this.preview=a.bind(this,this.preview),this.results=a.bind(this,this.results),this.searchlog=a.bind(this,this.searchlog),this.setPriority=a.bind(this,this.setPriority),this.setTTL=a.bind(this,this.setTTL),this.summary=a.bind(this,this.summary),this.timeline=a.bind(this,this.timeline),this.touch=a.bind(this,this.touch),this.unpause=a.bind(this,this.unpause)},cancel:function(e){var t=this.post("control",{action:"cancel"},e);return t},disablePreview:function(e){e=e||function(){};var t=this,n=this.post("control",{action:"disablepreview"},function(n){e(n,t)});return n},enablePreview:function(e){e=e||function(){};var t=this,n=this.post("control",{action:"enablepreview"},function(n){e(n,t)});return n},events:function(e,t){t=t||function(){},e=e||{},e.output_mode=e.output_mode||"json_rows";var n=this;return this.get("events",e,function(e,r){e?t(e):t(null,r.data,n)})},finalize:function(e){e=e||function(){};var t=this,n=this.post("control",{action:"finalize"},function(n){e(n,t)});return n},iterator:function(e,t){return new f.PaginatedEndpointIterator(this[e],t)},pause:function(e){e=e||function(){};var t=this,n=this.post("control",{action:"pause"},function(n){e(n,t)});return n},preview:function(e,t){t=t||function(){},e=e||{},e.output_mode=e.output_mode||"json_rows";var n=this;return this.get("results_preview",e,function(e,r){e?t(e):t(null,r.data,n)})},results:function(e,t){t=t||function(){},e=e||{},e.output_mode=e.output_mode||"json_rows";var n=this;return this.get("results",e,function(e,r){e?t(e):t(null,r.data,n)})},searchlog:function(e){e=e||function(){};var t=this;return this.get("search.log",{},function(n,r){n?e(n):e(null,r.data,t)})},setPriority:function(e,t){t=t||function(){};var n=this,r=this.post("control",{action:"setpriority",priority:e},function(e){t(e,n)});return r},setTTL:function(e,t){t=t||function(){};var n=this,r=this.post("control",{action:"setttl",ttl:e},function(e){t(e,n)});return r},summary:function(e,t){t=t||function(){};var n=this;return this.get("summary",e,function(e,r){e?t(e):t(null,r.data,n)})},timeline:function(e,t){t=t||function(){};var n=this;return this.get("timeline",e,function(e,r){e?t(e):t(null,r.data,n)})},touch:function(e){e=e||function(){};var t=this,n=this.post("control",{action:"touch"},function(n){e(n,t)});return n},track:function(e,t){var n=e.period||500;a.isFunction(t)&&(t={done:t});var r=!t.progress&&!t.done&&!t.failed&&!t.error;t.ready=t.ready||function(){},t.progress=t.progress||function(){},t.done=t.done||function(){},t.failed=t.failed||function(){},t.error=t.error||function(){},t._preready=t._preready||function(){},t._stoppedAfterReady=t._stoppedAfterReady||function(){};var i=this,o=!1,u=!1;s.whilst(function(){return!u},function(e){i.fetch(function(i,a){if(i){e(i);return}var f=a.properties().isDone===undefined;if(f)t._preready(a);else{if(!o){t.ready(a),o=!0;if(r){t._stoppedAfterReady(a),u=!0,e();return}}t.progress(a);var l=a.properties(),c=l.dispatchState;if(c==="DONE"&&l.isDone){t.done(a),u=!0,e();return}if(c==="FAILED"&&l.isFailed){t.failed(a),u=!0,e();return}}s.sleep(n,e)})},function(e){e&&t.error(e)})},unpause:function(e){e=e||function(){};var t=this,n=this.post("control",{action:"unpause"},function(n){e(n,t)});return n}}),f.Jobs=f.Collection.extend({path:function(){return o.jobs},instantiateEntity:function(e){var t=e.content.sid,n=a.namespaceFromProperties(e);return new f.Job(this.service,t,n)},init:function(e,t){this._super(e,this.path(),t),this.create=a.bind(this,this.create)},create:function(e,t,n){a.isObject(e)&&a.isFunction(t)&&!n&&(n=t,t=e,e=t.search),n=n||function(){},t=t||{},t.search=e;if((t.exec_mode||"").toLowerCase()==="oneshot")throw new Error("Please use splunkjs.Service.Jobs.oneshotSearch for exec_mode=oneshot");if(!t.search){n("Must provide a query to create a search job");return}var r=this;return this.post("",t,function(e,t){if(e)n(e);else{var i=new f.Job(r.service,t.data.sid,r.namespace);n(null,i)}})},search:function(e,t,n){return this.create(e,t,n)},oneshotSearch:function(e,t,n){a.isObject(e)&&a.isFunction(t)&&!n&&(n=t,t=e,e=t.search),n=n||function(){},t=t||{},t.search=e,t.exec_mode="oneshot",t.search||n("Must provide a query to create a search job");var r=t.output_mode||"json_rows",i=this.qualifiedPath,s="POST",o={},u=t,f={output_mode:r},l=null,c=this.service.request(i,s,f,u,l,o,function(e,t){e?n(e):n(null,t.data)});return c}}),f.PaginatedEndpointIterator=u.extend({init:function(e,t){t=t||{},this._endpoint=e,this._pagesize=t.pagesize||0,this._offset=0},next:function(e){e=e||function(){};var t=this,n={count:this._pagesize,offset:this._offset};return this._endpoint(n,function(n,r){if(n)e(n);else{var i=r.rows?r.rows.length:0;t._offset+=i,e(null,r,i>0)}})}})})()}),t.define("/lib/async.js",function(e,t,n,r,i){(function(){var t=e("./utils"),r=n||this;r.whilst=function(e,t,n){e=e||function(){return!1},t=t||function(e){e()},n=n||function(){};var i=function(i){i?n(i):r.whilst(e,t,n)};e()?t(i):n(null)},r.parallel=function(e,n){if(arguments.length>1&&t.isFunction(arguments[0])){var r=t.toArray(arguments);e=r.slice(0,r.length-1),n=r[r.length-1]}e=e||[],n=n||function(){},e.length===0&&n();var i=e.length,s=[],o=function(e){return function(r){if(r)n&&n(r),n=null;else{var o=t.toArray(arguments);o.shift(),o.length===1&&(o=o[0]),s[e]=o,--i===0&&(s.unshift(null),n&&n.apply(null,s))}}};for(var u=0;u<e.length;u++){var a=e[u];a(o(u))}},r.series=function(e,n){if(arguments.length>1&&t.isFunction(arguments[0])){var r=t.toArray(arguments);e=r.slice(0,r.length-1),n=r[r.length-1]}e=e||[],n=n||function(){};var i=function(e,n,r,s){if(!e){r.unshift(null),s.apply(null,r);return}e(function(e){if(e)s&&s(e),s=null;else{var o=t.toArray(arguments);o.shift(),o.length===1&&(o=o[0]),r.push(o),i(n[0],n.slice(1),r,s)}})};i(e[0],e.slice(1),[],n)},r.parallelMap=function(e,n,i){e=e||[],i=i||function(){};var s=[],o=function(e,t){return function(r){n(e,t,r)}};for(var u=0;u<e.length;u++)s.push(o(e[u],u));r.parallel(s,function(e){if(e)i&&i(e),i=null;else{var n=t.toArray(arguments);n.shift(),i(null,n)}})},r.seriesMap=function(e,n,i){e=e||[],i=i||function(){};var s=[],o=function(e,t){return function(r){n(e,t,r)}};for(var u=0;u<e.length;u++)s.push(o(e[u],u));r.series(s,function(e){if(e)i&&i(e);else{var n=t.toArray(arguments);n.shift(),i(null,n)}})},r.parallelEach=function(e,t,n){e=e||[],n=n||function(){},r.parallelMap(e,t,function(e,t){n(e)})},r.seriesEach=function(e,t,n){e=e||[],n=n||function(){},r.seriesMap(e,t,function(e,t){n(e)})},r.chain=function(e,n){if(arguments.length>1&&t.isFunction(arguments[0])){var r=t.toArray(arguments);e=r.slice(0,r.length-1),n=r[r.length-1]}e=e||[],n=n||function(){};if(!e.length)n();else{var i=function(e,r,s){var o=function(e){if(e)n(e),n=function(){};else{var s=t.toArray(arguments);s.shift(),i(r[0],r.slice(1),s)}},u=s;r.length?u.push(o):u.push(n),e.apply(null,u)};i(e[0],e.slice(1),[])}},r.sleep=function(e,t){setTimeout(function(){t()},e)},r.augment=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=Array.prototype.slice.call(arguments);for(var r=0;r<t.length;r++)n.push(t[r]);e.apply(null,n)}}})()}),t.define("/lib/platform/client/proxy_http.js",function(e,t,n,r,i){(function(){function o(e){var t=o.options,n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},i=14;while(i--)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,i){n&&(r[t.q.name][n]=i)}),r}var t=e("../../http"),r=e("../../utils"),i=n||this,s=function(e){var t={},n=e.split("\n");for(var i=0;i<n.length;i++)if(r.trim(n[i])!==""){var s=n[i].split(": ");t[s[0]]=s[1]}return t};o.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var u=/[.*+?|()\[\]{}\\$\^]/g,a=function(e){return e=e||"",e.replace(u,"\\$&")};i.ProxyHttp=t.extend({init:function(e){this.prefix=e,this._super()},makeRequest:function(e,t,n){t.headers["X-ProxyDestination"]=e;var r=o(e),i=""+(r.protocol?r.protocol:"")+"://"+r.authority;e=e.replace(new RegExp(a(i),"i"),""),e=this.prefix+e;var u=this,f={url:e,type:t.method,headers:t.headers,data:t.body||"",dataType:"text",success:function(e,t,r){if(l.wasAborted)return;var i={statusCode:r.status,headers:s(r.getAllResponseHeaders())},o=u._buildResponse(t,i,e);n(o)},error:function(e,t,r){if(l.wasAborted)return;var i={statusCode:e.status,headers:s(e.getAllResponseHeaders())};t==="abort"&&(i.statusCode="abort",e.responseText="{}");var o=e.responseText,a=u._buildResponse(r,i,o);n(a),t==="abort"&&(l.wasAborted=!0)}},l=$.ajax(f);return l},parseJson:function(e){return JSON.parse(e)}}),i.SplunkWebHttp=i.ProxyHttp.extend({init:function(){this._super("/en-US/splunkd/__raw")}})})()}),t.define("/lib/entries/browser.ui.entry.js",function(t,n,r,i,s){(function(e){var n=t("../../contrib/script");window[e]||(window[e]={}),window[e].UI||(window[e].UI={});var i=window[e].UI,s=r||this,o=0,u=function(e,t,r){if(!e)throw new Error("Must specify a path to load from.");r=r||function(){},n(e,t,r)};i.loadTimeline=function(e,t){var n="timeline"+o++;return u(e,n,t),n},i.loadCharting=function(e,t){var n="charting"+o++;return u(e,n,t),n},i.load=function(e,t){if(!e)throw new Error("Must specify paths to load components from");t=t||function(){};var r="all"+r++;return n(e,r,function(){t()}),r},i.ready=function(e,t){t=t||function(){},n.ready(e,t)}})(e)}),t.define("/contrib/script.js",function(e,t,n,r,i){!function(e,n){typeof t!="undefined"?t.exports=n():this[e]=n()}("$script",function(){function e(e,t,n){for(n=0,j=e.length;n<j;++n)if(!t(e[n]))return v;return 1}function t(t,n){e(t,function(e){return!n(e)})}function n(i,s,o){function a(e){return e.call?e():f[e]}function d(){if(!--b){f[y]=1,g&&g();for(var n in c)e(n.split("|"),a)&&!t(c[n],a)&&(c[n]=[])}}i=i[m]?i:[i];var v=s&&s.call,g=v?s:o,y=v?i.join(""):s,b=i.length;return setTimeout(function(){t(i,function(e){if(p[e])return y&&(l[y]=1),p[e]==2&&d();p[e]=1,y&&(l[y]=1),r(!u.test(e)&&h?h+e+".js":e,d)})},0),n}function r(e,t){var n=s.createElement("script"),r=v;n.onload=n.onerror=n[w]=function(){if(n[y]&&!/^c|loade/.test(n[y])||r)return;n.onload=n[w]=null,r=1,p[e]=2,t()},n.async=1,n.src=e,o.insertBefore(n,o.firstChild)}var i=this,s=document,o=s.getElementsByTagName("head")[0],u=/^https?:\/\//,a=i.$script,f={},l={},c={},h,p={},d="string",v=!1,m="push",g="DOMContentLoaded",y="readyState",b="addEventListener",w="onreadystatechange";return!s[y]&&s[b]&&(s[b](g,function E(){s.removeEventListener(g,E,v),s[y]="complete"},v),s[y]="loading"),n.get=r,n.order=function(e,t,r){(function i(s){s=e.shift(),e.length?n(s,i):n(s,t,r)})()},n.path=function(e){h=e},n.ready=function(r,i,s){r=r[m]?r:[r];var o=[];return!t(r,function(e){f[e]||o[m](e)})&&e(r,function(e){return f[e]})?i():!function(e){c[e]=c[e]||[],c[e][m](i),s&&s(o)}(r.join("|")),n},n.noConflict=function(){return i.$script=a,this},n})}),t.define("/browser.entry.js",function(t,n,r,i,s){(function(e){var n=window[e],r=t("../../index"),i=t("../../lib/platform/client/proxy_http"),s=i.ProxyHttp,o=i.SplunkWebHttp;window[e]=r,window[e].ProxyHttp=s,window[e].SplunkWebHttp=o,window[e].noConflict=function(t){return window[e]=n,r},t("../../lib/entries/browser.ui.entry")})(e)}),t("/browser.entry.js")}(),define("splunkjs/splunk",["jquery"],function(e){return function(){var t,n;return t||e.splunkjs}}(this)),Splunk.namespace("Splunk.Error"),Splunk.Error.PROPAGATE=!0,Splunk.Error.loggerMode=Splunk.Logger.mode.Server,Splunk.Error.Handler=new function(){var e=this,t=Splunk.Logger.getLogger("Splunk.Error",Splunk.Error.loggerMode);e.onerror=function(e,r,i){var s=n(e,r,i);return t.error(s),!Splunk.Error.PROPAGATE},e.raise=function(e){var r=n(e.message,e.fileName,e.lineNumber);t.error(r);if(Splunk.Error.PROPAGATE)throw e};var n=function(e,t,n){return"lineNumber="+n+", message="+e+", fileName="+t},r=function(){var t=jQuery.fn.bind;jQuery.fn.bind=function(n,r,i){!i&&r&&typeof r=="function"&&(i=r,r=null);if(i){var s=i,o=function(){try{s.apply(this,arguments)}catch(t){e.raise(t)}};i=o}return t.call(this,n,r,i)}};e.Error=function(){window.onerror=e.onerror}()},define("splunk.error",["jquery","splunk","splunk.logger"],function(e){return function(){var t,n;return t||e.Splunk.Error}}(this)),define("util/ajax_logging",["jquery","underscore","splunk.logger"],function(e,t,n){var r=n.getLogger("ajax_logging.js"),i=[n.mode.Server.END_POINT,"services/messages"];e.ajaxPrefilter(function(e,n,s){var o=t(i).every(function(t){return e.url.indexOf(t)===-1});o&&(r.debug("sending AJAX request to ",e.url),r.trace())})}),require.config({shim:{"splunkjs/contrib/jquery.deparam":{deps:["jquery"],exports:"jQuery.fn.deparam"}}}),define("splunkjs/mvc/mvc",["require","exports","module","underscore","backbone","./registry","JS_CACHE/urlresolver","JS_CACHE/config","../contrib/jquery.deparam","./protections","./tokenescapestring","./tokensafestring","./utils","splunkjs/splunk","util/console","splunk.config","splunk.error","util/ajax_logging"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=e("./registry"),o=e("JS_CACHE/urlresolver"),u=e("JS_CACHE/config"),a=e("../contrib/jquery.deparam"),f=e("./protections"),l=e("./tokenescapestring"),c=e("./tokensafestring"),h=e("./utils"),p=e("splunkjs/splunk"),d=e("util/console"),v=e("splunk.config");e("splunk.error"),e("util/ajax_logging");var m=!1,g=function(e){this.Components=new s,this.initialize.apply(this,arguments),this.STATIC_PREFIX=u.STATIC_URL};r.extend(g.prototype,i.Events,{started:!1,initialize:function(){},drilldown:function(e,t){var n=$.param(t||{});n&&(e=e+"?"+n),window.location=e},loadDebugger:function(t){var n=this;e(["./debugger"],function(e){n.Debugger=new e({registry:n.Components}),n.trigger("debugger:ready",n),t&&t(n.Debugger)})},loadDrilldown:function(e){var t=window.location.search.substr(1)||"",n=r.extend({},$.deparam(t),e),i=this;r.each(n,function(e,t){if(i.Components.has(t)){var n=i.Components.getInstance(t);n.settings?n.settings.set(e):n.set?n.set(e):d.log("Could not find a setter for '"+t+"'",e)}})},reverse:function(e,t,n){return o.reverse(e,t,n)},createService:function(e){e=e||{};var t=e.http||new p.ProxyHttp(u.PROXY_PATH);return e.version=e.version||"5.0",e.app=e.app||h.getPageInfo().app||"-",e.owner=e.owner||encodeURIComponent(v.USERNAME),new p.Service(t,e)},_loadDOMComponents:function(){var t=this,n=$(".splunk-view:not([data-initialized])");r.each(n,function(n,r){var i=$(n),s=i.attr("id"),o=i.data("require");if(!o)return;var u=t._decodeOptions(i);u.id=s,u.el=i;var a=e(o),f=new a(u);f.render(),i.attr("data-initialized","")});var i=$(".splunk-manager:not([data-initialized])");r.each(i,function(n,r){var i=$(n),s=i.attr("id"),o=i.data("require");if(!o)return;var u=t._decodeOptions(i);u.id=s;var a=e(o),f=new a(u);i.attr("data-initialized","")})},_decodeOptions:function(e){var t=this,n={},i=e.attr("data-options");return i&&i.length>0&&(n=JSON.parse(i),r.each(n,function(e,r){n[r]=t._decodeOptionValue(e)})),n},_decodeOptionValue:function(e){if(!e)return e;switch(e.type){case"token_safe":return new c(e.value);case undefined:return e;default:throw Error("Unrecognize option value type: "+e.type)}},tokenSafe:function(e){return new c(e)},tokenEscape:function(e){return new l(e)}}),window.splunkjs||(window.splunkjs={});var y=new g,b=window.splunkjs.mvc=y;return u.ENABLE_PROTECTIONS&&(f.enableCSRFProtection($),f.enableUnauthorizationRedirection($,y.reverse(":login"),y.reverse(":logout"))),y}),define("splunkjs/mvc",["require","exports","module","./mvc/mvc"],function(e,t,n){var r=e("./mvc/mvc");return r}),define("mixins/xhrmanagement",["underscore"],function(e){return{safeFetch:function(){if(this.isFetching()){this.touched=arguments;return}delete this.touched,this.fetch.apply(this,arguments)},isFetching:function(){return this.fetchXhr&&this.fetchXhr.state&&this.fetchXhr.state()==="pending"},fetchAbort:function(){this.isFetching()&&(delete this.touched,this.fetchXhr.abort())},deepOff:function(){this.fetchAbort(),e(this.associated).each(function(t){e.isFunction(t.deepOff)&&t.deepOff()},this),e.isFunction(this.fetchData.deepOff)?this.fetchData.deepOff():this.fetchData.off(),this.off()}}}),define("util/math_utils",["underscore"],function(e){var t=/(^[-+]?[0-9]*[.]?[0-9]*$)|(^[-+]?[0-9][.]?[0-9]*e[-+]?[1-9][0-9]*$)/,n=function(e){return t.test(e)?parseFloat(e):NaN},r=function(e,t){return typeof t=="undefined"||+t===0?Math.round(e):(e=+e,t=+t,isNaN(e)||typeof t!="number"||t%1!==0?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))},i=function(e){var t=n(e);return!isNaN(t)&&t%1===0},s=function(t,n){var r,i;return e.each(n,function(e,n){if(r==null||Math.abs(t-e)<Math.abs(r-t))r=e,i=n}),{value:r,index:i}};return{strictParseFloat:n,roundToDecimal:r,isInteger:i,nearestMatchAndIndexInArray:s}}),define("util/general_utils",["jquery","underscore","util/math_utils"],function(e,t,n){var r=function(e,n,r){var i=t.union(e,n);return t.map(i,function(e){var t={};return t[r]=e,t})},i=function(e,n,r){var i=t.difference(e,n);return t.map(i,function(e){var t={};return t[r]=e,t})},s=function(e,n,r){r=r||{},t(n).isArray()||(n=[n]),n=t.map(n,function(e){return e instanceof RegExp?e:new RegExp(e)});var i={},s,o=t.isString(r.strip)?r.strip:"",u=!!r.allowEmpty,a=!!r.allowObject;return t.each(e,function(e,r){s=r.replace(o,"");if(i[s])return;t.each(n,function(n){if(n.test(r)&&!t.isUndefined(e)){if(t.isString(e)&&e==""&&!u||t.isObject(e)&&!a)return;i[s]=e}},this)},this),i},o=function(n,r){t(r).isArray()||(r=[r]),r=t.map(r,function(e){return e instanceof RegExp?e:new RegExp(e)});var i=e.extend(!0,{},n);return t.each(i,function(e,n){t.each(r,function(e){e.test(n)&&delete i[n]},this)},this),i},u=function(e,t,n){var r=0;return e==t?r:(e<t?r=-1:r=1,n?r:-r)},a=function(e){var r=0,i=0;return t(e).each(function(e){t(e).isArray()&&(e=e.length>0?e[0]:null);if(t(e).isNull())return;i++;var s=n.strictParseFloat(e);t(s).isNaN()||r++}),i===0?!1:r>=i/2},f=function(e,t,n){if(e.length===0)return{upper:null,lower:null};var r=function(e,t){var n=e*(t-1)+1,r=Math.floor(n),i=n-r;return[n,r,i]},i=function(e,t){var n=r(e,t.length),i=n[0],s=n[1],o=n[2];return s===0||t.length===1?t[0]:s===t.length-1?t[t.length-1]:t[s]+o*(t[s+1]-t[s])};return{lower:i(t,e),upper:i(n,e)}},l=function(e,n,r){t.isUndefined(e[n])||(e[r]=e[n],delete e[n])},c=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},h=function(e){return e?e.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):null},p=function(e){return/^\s*\|\s*pivot\s+/.test(e)?(e=e.replace(/(\\"|\\')/g,""),e=e.replace(/".*"/g,"").replace(/'.*'/g,""),e.split("|").length===2):!1},d=function(e,t){return!e||!t?!1:e.indexOf(t,e.length-t.length)!==-1},v=function(){return window.getSelection?window.getSelection().toString():document.selection?document.selection.createRange().text:null};return{compareWithDirection:u,unionWithKey:r,differenceWithKey:i,filterObjectByRegexes:s,deleteFromObjectByRegexes:o,valuesAreNumeric:a,getPercentiles:f,transferKey:l,convertNumToString:h,invert:c,isValidPivotSearch:p,strEndsWith:d,getMouseSelection:v}}),define("util/splunkd_utils",["jquery","underscore","splunk.util"],function(e,t,n){var r="system",i="global",s="app",o="user",u="nobody",a="-",f="verbose",l="fast",c="smart",h="fatal",p="error",d="warn",v="info",m="network_error",g="404",y=function(e,t){t=t||{};var o=/^\/services/.test(e),f=/^\/.*/.test(e);if(f&&!o)return e;if(f&&o)return n.make_url("splunkd/__raw"+e);if(!t.app&&!t.owner)return n.make_url("splunkd/__raw/services/"+e);var l=t.owner||a,c=t.app||a;return t.sharing=(t.sharing||"").toLowerCase(),t.sharing===s||t.sharing===i?l=u:t.sharing===r&&(l=u,c=r),n.make_url("splunkd/__raw/servicesNS/"+encodeURIComponent(l)+"/"+encodeURIComponent(c)+"/"+e)},b=function(r,i){var s={},o=!0,u=[];i=i||t("object from SplunkD").t();if(r.hasOwnProperty("responseText")&&r.hasOwnProperty("getResponseHeader")){var a=r.getResponseHeader("Content-Type");if(a&&a.indexOf("application/json")>-1&&r.responseText)try{s=JSON.parse(r.responseText)}catch(f){o=!1}}r.hasOwnProperty("data")&&(s=s.data),r.hasOwnProperty("status")&&(r.status==404&&e.isEmptyObject(s)?u.push(x(g,n.sprintf(t("Could not retrieve %s. Make sure that this resource exists and has the correct permissions.").t(),i))):(r.status==0||r.status==12029)&&u.push(x(m,t("Your network connection may have been lost or Splunk may be down.").t())));if(!o)u.push(x(p,n.sprintf(t("Invalid JSON from: %s.").t(),i)));else if(s.messages)u=u.concat(T(s.messages));else if(r.messages){var l=T(r.messages);l.length?u=u.concat(l):u.push(x(p,t("Server error").t()))}else t.isString(r)&&u.push(x(p,r));return u.length||u.push(x(p,t("Server error").t())),u},w=function(t,n){var r={},i={data:{output_mode:"json"}};return t&&t.data&&(r=e.extend(r,{app:t.data.app||undefined,owner:t.data.owner||undefined,sharing:t.data.sharing||undefined}),delete t.data.app,delete t.data.owner,delete t.data.sharing),i.url=y(n,r),e.extend(!0,i,t||{})},E=function(e){return e=e||"",e.toLowerCase().replace(/\s/g,"_").replace(/\W/g,"")},S=function(e){var n={},r;if(e.responseText){try{r=JSON.parse(e.responseText)}catch(i){r={}}r.messages&&t.each(r.messages,function(e){n["splunkD:"+e.type]=e.text})}else n=e;return n},x=function(e,n){e=e.toLowerCase();var r=n.indexOf("~!~{"),i=n.lastIndexOf("}~!~"),s,o=n;if(r!=-1&&i!=-1)try{var u=n.slice(r+3,i+1);s=JSON.parse(u),o=s.errorMessageEnglish}catch(a){}return{key:t.uniqueId("splunkd_"+e),type:e,message:o,text:o}},T=function(e){return e?t(e).map(function(e){return x(e.type,e.text)}):[]},N=function(e,n){if(e)for(var r=0;r<e.length;r++)if(t.indexOf(n,e[r].type)!=-1)return!0;return!1},C=function(e,n){var r=[];if(e)for(var i=0;i<e.length;i++)t.indexOf(n,e[i].type)!=-1&&r.push(e[i]);return r},k=function(e){return e===h?p:e===d?"warning":e},L=function(e){return t.map(e,function(e){return/^\^/.test(e)?e:"^"+e})},A=function(e,t){return{messages:[{type:e,text:t}]}},O=function(e){switch(e){case o:return t("Private").t();case s:return t("App").t();case i:return t("Global").t();case r:return t("Global").t()}},M=function(e,u){switch(e){case o:return n.sprintf(t("Private. Owned by %s.").t(),u);case s:return n.sprintf(t("Shared in App. Owned by %s.").t(),u);case i:case r:return n.sprintf(t("Shared Globally. Owned by %s.").t(),u)}return""},_=function(n){var r=e.extend(!0,{},n);return t.each(r,function(e,t){typeof e=="boolean"&&(e?r[t]="1":r[t]="0")}),r},D=function(e){var t=n.normalizeBoolean(e);return t?"1":"0"};return{FATAL:h,ERROR:p,WARNING:d,INFO:v,NOT_FOUND:g,NETWORK_ERROR:m,SYSTEM:r,GLOBAL:i,APP:s,USER:o,NOBODY:u,WILDCARD:a,VERBOSE:f,FAST:l,SMART:c,fullpath:y,prepareSyncOptions:w,nameFromString:E,parseError:S,parseMessagesObject:T,createMessageObject:x,messagesContainsOneOfTypes:N,addAnchorsToWildcardArray:L,createSplunkDMessage:A,getSharingLabel:O,getPermissionLabel:M,normalizeType:k,filterMessagesByTypes:C,xhrErrorResponseParser:b,normalizeValuesForPOST:_,normalizeBooleanTo01String:D}}),function(e){typeof exports=="object"?module.exports=e(require("backbone"),require("underscore")):typeof define=="function"&&define.amd&&define("backbone_validation",["backbone","underscore"],e)}(function(e,t){return e.Validation=function(e){var t={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},n={formatLabel:function(e,n){return a[t.labelFormatter](e,n)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,n){return typeof e[n]!="undefined"?e[n]:t})}},r=function(t,n,i){return n=n||{},i=i||"",e.each(t,function(e,s){t.hasOwnProperty(s)&&(!e||typeof e!="object"||e instanceof Date||e instanceof RegExp?n[i+s]=e:r(e,n,i+s+"."))}),n},i=function(){var i=function(t){return e.reduce(e.keys(t.validation||{}),function(e,t){return e[t]=void 0,e},{})},o=function(t,n){var r=t.validation?t.validation[n]||{}:{};if(e.isFunction(r)||e.isString(r))r={fn:r};return e.isArray(r)||(r=[r]),e.reduce(r,function(t,n){return e.each(e.without(e.keys(n),"msg"),function(e){t.push({fn:f[e],val:n[e],msg:n.msg})}),t},[])},u=function(t,r,i,s){return e.reduce(o(t,r),function(o,u){var a=e.extend({},n,f),l=u.fn.call(a,i,r,u.val,t,s);return l===!1||o===!1?!1:l&&!o?u.msg||l:o},"")},a=function(t,n){var i,s={},o=!0,a=e.clone(n),f=r(n);return e.each(f,function(e,n){i=u(t,n,e,a),i&&(s[n]=i,o=!1)}),{invalidAttrs:s,isValid:o}},l=function(t,n){return{preValidate:function(t,n){return u(this,t,n,e.extend({},this.attributes))},isValid:function(t){var n=r(this.attributes);return e.isString(t)?!u(this,t,n[t],e.extend({},this.attributes)):e.isArray(t)?e.reduce(t,function(t,r){return t&&!u(this,r,n[r],e.extend({},this.attributes))},!0,this):(t===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(s,o){var u=this,f=!s,l=e.extend({},n,o),c=i(u),h=e.extend({},c,u.attributes,s),p=r(s||h),d=a(u,h);u._isValid=d.isValid,e.each(c,function(e,n){var r=d.invalidAttrs.hasOwnProperty(n);r||l.valid(t,n,l.selector)}),e.each(c,function(e,n){var r=d.invalidAttrs.hasOwnProperty(n),i=p.hasOwnProperty(n);r&&(i||f)&&l.invalid(t,n,d.invalidAttrs[n],l.selector)}),e.defer(function(){u.trigger("validated",u._isValid,u,d.invalidAttrs),u.trigger("validated:"+(u._isValid?"valid":"invalid"),u,d.invalidAttrs)});if(!l.forceUpdate&&e.intersection(e.keys(d.invalidAttrs),e.keys(p)).length>0)return d.invalidAttrs}}},c=function(t,n,r){e.extend(n,l(t,r))},h=function(e){delete e.validate,delete e.preValidate,delete e.isValid},p=function(e){c(this.view,e,this.options)},d=function(e){h(e)};return{version:"0.7.1",configure:function(n){e.extend(t,n)},bind:function(n,r){var i=n.model,o=n.collection;r=e.extend({},t,s,r);if(typeof i=="undefined"&&typeof o=="undefined")throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";i?c(n,i,r):o&&(o.each(function(e){c(n,e,r)}),o.bind("add",p,{view:n,options:r}),o.bind("remove",d))},unbind:function(e){var t=e.model,n=e.collection;t&&h(e.model),n&&(n.each(function(e){h(e)}),n.unbind("add",p),n.unbind("remove",d))},mixin:l(null,t)}}(),s=i.callbacks={valid:function(e,t,n){e.$("["+n+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,n,r){e.$("["+r+'~="'+t+'"]').addClass("invalid").attr("data-error",n)}},o=i.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},u=i.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",pattern:"{0} must be a valid {1}"},a=i.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return t===0?e.toUpperCase():" "+e.toLowerCase()}).replace("_"," ")},label:function(e,t){return t.labels&&t.labels[e]||a.sentenceCase(e,t)}},f=i.validators=function(){var t=String.prototype.trim?function(e){return e===null?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,n=/\s+$/;return e===null?"":e.toString().replace(t,"").replace(n,"")},n=function(t){return e.isNumber(t)||e.isString(t)&&t.match(o.number)},r=function(n){return!(e.isNull(n)||e.isUndefined(n)||e.isString(n)&&t(n)==="")};return{fn:function(t,n,r,i,s){return e.isString(r)&&(r=i[r]),r.call(i,t,n,s)},required:function(t,n,i,s,o){var a=e.isFunction(i)?i.call(s,t,n,o):i;if(!a&&!r(t))return!1;if(a&&!r(t))return this.format(u.required,this.formatLabel(n,s))},acceptance:function(t,n,r,i){if(t!=="true"&&(!e.isBoolean(t)||t===!1))return this.format(u.acceptance,this.formatLabel(n,i))},min:function(e,t,r,i){if(!n(e)||e<r)return this.format(u.min,this.formatLabel(t,i),r)},max:function(e,t,r,i){if(!n(e)||e>r)return this.format(u.max,this.formatLabel(t,i),r)},range:function(e,t,r,i){if(!n(e)||e<r[0]||e>r[1])return this.format(u.range,this.formatLabel(t,i),r[0],r[1])},length:function(e,n,i,s){if(!r(e)||t(e).length!==i)return this.format(u.length,this.formatLabel(n,s),i)},minLength:function(e,n,i,s){if(!r(e)||t(e).length<i)return this.format(u.minLength,this.formatLabel(n,s),i)},maxLength:function(e,n,i,s){if(!r(e)||t(e).length>i)return this.format(u.maxLength,this.formatLabel(n,s),i)},rangeLength:function(e,n,i,s){if(!r(e)||t(e).length<i[0]||t(e).length>i[1])return this.format(u.rangeLength,this.formatLabel(n,s),i[0],i[1])},oneOf:function(t,n,r,i){if(!e.include(r,t))return this.format(u.oneOf,this.formatLabel(n,i),r.join(", "))},equalTo:function(e,t,n,r,i){if(e!==i[n])return this.format(u.equalTo,this.formatLabel(t,r),this.formatLabel(n,r))},pattern:function(e,t,n,i){if(!r(e)||!e.toString().match(o[n]||n))return this.format(u.pattern,this.formatLabel(t,i),n)}}}();return i}(t),e.Validation}),define("validation/ValidationMixin",["underscore","backbone","backbone_validation"],function(e,t){return e.extend(t.Validation.messages,{required:"{label} is required",acceptance:"{label} must be accepted",min:"{label} must be greater than or equal to {1}",max:"{label} must be less than or equal to {1}",range:"{label} must be between {1} and {2}",length:"{label} must be {1} characters",minLength:"{label} must be at least {1} characters",maxLength:"{label} must be at most {1} characters",rangeLength:"{label} must be between {1} and {2} characters",oneOf:"{label} must be one of: {1}",equalTo:"{label} must be the same as {1}",pattern:"{label} must be a valid {1}"}),t.Validation.mixin}),define("models/Base",["jquery","underscore","backbone","mixins/xhrmanagement","util/general_utils","util/splunkd_utils","validation/ValidationMixin","splunk.util"],function(e,t,n,r,i,s,o,u){var a=n.Model.extend({initialize:function(e,r){n.Model.prototype.initialize.apply(this,arguments),this.error=new n.Model,this.fetchData=r&&r.fetchData?r.fetchData:new n.Model,this.associated=this.associated||{},this.associated.error=this.error,this.fetchData.on("change",t.debounce(function(){this.safeFetch()},0),this),this.on("sync",this._onsync,this),this.on("error",this._onerror,this),this.on("validated",this._rebroadcastValidation,this)},fetch:function(t){var r=e.extend(!0,{},{data:this.fetchData.toJSON()},t);this.fetchXhr=n.Model.prototype.fetch.call(this,r);var i=this;return this.fetchXhr.done(function(){i.touched&&i.safeFetch.apply(i,i.touched)}),this.fetchXhr},clear:function(e){return t.each(this.associated,function(t){t instanceof n.Model?t.clear(e):t instanceof n.Collection&&t.reset(null,e)}),this.error.clear(),n.Model.prototype.clear.call(this,e)},clone:function(){var e=n.Model.prototype.clone.call(this);return t.each(this.associated,function(t,r){if(t instanceof n.Model){var i=t.clone();e[r]=i,e.associated[r]=i}else if(t instanceof n.Collection){var s=new t.constructor(t.map(function(e){return e.clone()}));e[r]=s,e.associated[r]=s}}),e},associatedOff:function(e,n,r){t(this.associated).each(function(i){i.off(e,n,r),t.isFunction(i.associatedOff)&&i.associatedOff(e,n,r)},this),this.fetchData.off(e,n,r)},_rebroadcastValidation:function(e,n,r){var i=t.union(t.keys(this.attributes),t.keys(r));t(i).each(function(e){this.trigger("attributeValidated:"+e,!t.has(r,e),e,r[e])},this)},_onerror:function(e,t,n){e.error.clear();var r=s.xhrErrorResponseParser(t,this.id);this.trigger("serverValidated",!1,this,r),e.error.set("messages",r)},_onsync:function(e,n,r){e.error.clear();var i=this.parseSplunkDMessages(n),o=t(i).any(function(e){return e.type===s.ERROR||e.type===s.FATAL});this.trigger("serverValidated",!o,this,i),o&&e.error.set("messages",i)},parseSplunkDMessages:function(e){return e?s.parseMessagesObject(e.messages):[]},filterByKeys:function(e,n){n=n||{};var r={},i=t.isString(n.strip)?n.strip:"",s=!!n.allowEmpty;return t.each(this.toJSON(),function(n,o){t.indexOf(e,o)!=-1&&!t.isUndefined(n)&&(n!==""||s)&&(r[o.replace(i,"")]=n)},this),r},filterByWildcards:function(e,t){return i.filterObjectByRegexes(this.toJSON(),e,t)},filterChangedByWildcards:function(e,t){return i.filterObjectByRegexes(this.changedAttributes(),e,t)},toURLEncodedQueryString:function(e){var n=[],r;return t.each(this.toJSON(),function(i,s){if(t.isUndefined(i))return;if(i===""&&e&&e.preserveEmptyStrings===!1)return;r=encodeURIComponent(s),t.isObject(i)?n.push(r+"="+encodeURIComponent(JSON.stringify(i))):n.push(r+"="+encodeURIComponent(i))}),n.join("&")},toObject:function(e){var t=this.get(e);try{t=JSON.parse(t)}catch(n){}return t},replace:function(e,t){this.clear({silent:!0}),this.set(e,t)},restoreDefaults:function(e){var n=t.isFunction(this.defaults)?this.defaults():this.defaults;this.clear(e),this.set(n,e)}});return t.extend(a.prototype,o),t.extend(a.prototype,r),a}),define("models/SplunkDWhiteList",["jquery","backbone","underscore","models/Base","util/splunkd_utils"],function(e,t,n,r,i){return r.extend({initialize:function(e){r.prototype.initialize.apply(this,arguments)},concatOptionalRequired:function(){var e=(this.get("optional")||[]).slice(0),t=(this.get("required")||[]).slice(0);return e.concat(t)},url:"",sync:function(r,s,o){var u={data:{output_mode:"json"},url:n.isFunction(s.url)?s.url():s.url};switch(r){case"read":u.data=n.extend(u.data,o.data||{}),delete o.data,u.url=i.fullpath(u.url);break;default:throw new Error("invalid method: "+r)}return t.sync.call(this,r,s,e.extend(!0,u,o))},parse:function(t){var n=t.entry?e.extend(!0,{},t.entry[0]):{},r=n.fields||{};return r.wildcard&&(r.wildcard=i.addAnchorsToWildcardArray(r.wildcard)),r}})}),define("models/services/ACL",["jquery","backbone","models/Base","util/splunkd_utils"],function(e,t,n,r){return n.extend({initialize:function(e,t){n.prototype.initialize.apply(this,arguments)},sync:function(n,i,s){var o={data:{output_mode:"json"}};switch(n){case"update":o.processData=!0,o.type="POST",o.url=r.fullpath(i.id),e.extend(!0,o,s);break;default:throw new Error("invalid method: "+n)}return t.sync.call(this,n,i,o)}})}),define("models/ACLReadOnly",["jquery","underscore","backbone","models/Base","util/splunkd_utils"],function(e,t,n,r,i){return r.extend({initialize:function(e,t){r.prototype.initialize.apply(this,arguments)},permsToObj:function(){var t=e.extend(!0,{},this.get("perms"));return t.read=t.read||[],t.write=t.write||[],t},toDataPayload:function(){var e=this.permsToObj(),n={sharing:this.get("sharing"),owner:this.get("owner")};return n.sharing!==i.USER&&e.read.length!==0&&(t.indexOf(e.read,"*")!=-1?n["perms.read"]="*":n["perms.read"]=e.read.join(",")),n.sharing!==i.USER&&e.write.length!==0&&(t.indexOf(e.write,"*")!=-1?n["perms.write"]="*":n["perms.write"]=e.write.join(",")),n},canWrite:function(){return this.get("can_write")}})}),define("models/SplunkDBase",["jquery","underscore","backbone","models/Base","models/SplunkDWhiteList","models/services/ACL","models/ACLReadOnly","util/splunkd_utils","util/console"],function(e,t,n,r,i,s,o,u,a){var f=function(r,i){var s,o,a,f=e.Deferred(),l={data:{output_mode:"json"}};return a=t.isFunction(r.url)?r.url():r.url,o=this.splunkDWhiteList.fetch({url:u.fullpath(a,{})+"/_new",success:function(t,o){var c={};i.data&&(c=e.extend(c,{app:i.data.app||undefined,owner:i.data.owner||undefined,sharing:i.data.sharing||undefined})),l.url=u.fullpath(a,c),l.processData=!0,e.extend(!0,l.data,r.whiteListAttributes()),e.extend(!0,l,i),delete l.data.app,delete l.data.owner,delete l.data.sharing,l.data=u.normalizeValuesForPOST(l.data),s=n.sync.call(null,"create",r,l),s.done(function(){f.resolve.apply(f,arguments)}),s.fail(function(){f.reject.apply(f,arguments)})}}),o.fail(function(){f.reject.apply(f,arguments)}),f.promise()},l=function(r,i){var s,o,a=e.Deferred(),f={data:{output_mode:"json"}};if((window.$C.SPLUNKD_FREE_LICENSE||i.isFreeLicense)&&r.FREE_PAYLOAD)return i.success&&i.success(r,r.FREE_PAYLOAD,i),a.resolve.apply(a,[r,r.FREE_PAYLOAD,i]);r.isNew()?(o=t.isFunction(r.url)?r.url():r.url,o+="/_new"):r.urlRoot?o=r.urlRoot+"/"+r.id:o=r.id;var l={};return i.data&&(l=e.extend(l,{app:i.data.app||undefined,owner:i.data.owner||undefined,sharing:i.data.sharing||undefined})),f.url=u.fullpath(o,l),e.extend(!0,f,i),delete f.data.app,delete f.data.owner,delete f.data.sharing,s=n.sync.call(this,"read",r,f),s.done(function(){a.resolve.apply(a,arguments)}),s.fail(function(){a.reject.apply(a,arguments)}),a.promise()},c=function(t,r){var i,s,o,a=e.Deferred(),f={data:{output_mode:"json"}},l=t.id;return o=u.fullpath(l,{}),this.splunkDWhiteList.clear(),s=this.splunkDWhiteList.fetch({url:o,success:function(s){e.extend(!0,f.data,t.whiteListAttributes()),e.extend(!0,f,r),f.processData=!0,f.type="POST",f.url=o,f.data=u.normalizeValuesForPOST(f.data),i=n.sync.call(null,"update",t,f),i.done(function(){a.resolve.apply(a,arguments)}),i.fail(function(){a.reject.apply(a,arguments)})}}),s.fail(function(){a.reject.apply(a,arguments)}),a.promise()},h=function(t,r){var i,s=e.Deferred(),o={data:{output_mode:"json"}};return r.data&&r.data.output_mode?(o.url=u.fullpath(t.id,{})+"?output_mode="+encodeURIComponent(r.data.output_mode),delete r.data.output_mode):(o.url=u.fullpath(t.id,{})+"?output_mode="+encodeURIComponent(o.data.output_mode),delete o.data.output_mode),e.extend(!0,o,r),o.processData=!0,i=n.sync.call(this,"delete",t,o),i.done(function(){s.resolve.apply(s,arguments)}),i.fail(function(){s.reject.apply(s,arguments)}),s.promise()},p=r.extend({initialize:function(e,t){r.prototype.initialize.apply(this,arguments),this.splunkDWhiteList=t&&t.splunkDWhiteList?t.splunkDWhiteList:new i,this.initializeAssociated(),this.on("change:id",function(){var e=this.id;e&&(e+="/acl"),this.acl.set("id",e)},this),t&&t.splunkDPayload&&this.setFromSplunkD(t.splunkDPayload,{silent:!0})},parseSplunkDMessages:function(e){var n=r.prototype.parseSplunkDMessages.call(this,e);return e&&e.entry&&e.entry.length>0&&(n=t.union(n,u.parseMessagesObject(e.entry[0].messages))),n},initializeAssociated:function(){var t=this.constructor;this.associated=this.associated||{},this.links=this.links||new t.Links,this.associated.links=this.links,this.generator=this.generator||new t.Generator,this.associated.generator=this.generator,this.paging=this.paging||new t.Paging,this.associated.paging=this.paging,this.entry||(this.entry=new t.Entry,e.extend(this.entry,{links:new t.Entry.Links,acl:new t.Entry.ACL,content:new t.Entry.Content,fields:new t.Entry.Fields}),this.entry.associated.links=this.entry.links,this.entry.associated.acl=this.entry.acl,this.entry.associated.content=this.entry.content,this.entry.associated.fields=this.entry.fields),this.associated.entry=this.entry,this.acl=this.acl||new s,this.associated.acl=this.acl},url:"",sync:function(e,t,n){switch(e){case"create":return f.call(this,t,n);case"read":return l.call(this,t,n);case"update":return c.call(this,t,n);case"delete":return h.call(this,t,n);default:throw new Error("invalid method: "+e)}},parse:function(t){t=e.extend(!0,{},t),this.initializeAssociated();var n=/.\/_new$/;if(!t||!t.entry||t.entry.length===0){a.log("Response has no content to parse");return}var r=t.entry[0];return n.test(r.links.alternate)||(this.id=r.links.alternate,t.id=r.links.alternate,this.acl.set("id",this.id+"/acl")),this.links.set(t.links),delete t.links,this.generator.set(t.generator),delete t.generator,this.paging.set(t.paging),delete t.paging,this.entry.links.set(r.links),delete r.links,this.entry.acl.set(r.acl),delete r.acl,this.entry.content.set(r.content),delete r.content,r.fields&&r.fields.wildcard&&(r.fields.wildcard=u.addAnchorsToWildcardArray(r.fields.wildcard)),this.entry.fields.set(r.fields),delete r.fields,this.entry.set(r),delete t.entry,t},whiteListAttributes:function(){var e=this.splunkDWhiteList.concatOptionalRequired(),n=this.splunkDWhiteList.get("wildcard")||[],r=this.entry.content.filterByKeys(e,{allowEmpty:!0});return t.extend(r,this.entry.content.filterByWildcards(n,{allowEmpty:!0}))},setFromSplunkD:function(t,n){this.attributes={};var r=e.extend(!0,{},t),i=/.\/_new$/,s=this.id;if(r){if(r.entry&&r.entry[0]){var o=r.entry[0];o.links&&(o.links.alternate&&!i.test(o.links.alternate)&&(this.set({id:o.links.alternate},{silent:!0}),this.acl.set({id:o.links.alternate+"/acl"},n)),this.entry.links.set(o.links,n),delete o.links),o.acl&&(this.entry.acl.set(o.acl,n),delete o.acl),o.content&&(this.entry.content.set(o.content,n),delete o.content),o.fields&&(o.fields.wildcard&&(o.fields.wildcard=u.addAnchorsToWildcardArray(o.fields.wildcard)),this.entry.fields.set(o.fields,n),delete o.fields),this.entry.set(o,n),delete r.entry}r.links&&(this.links.set(r.links,n),delete r.links),r.generator&&(this.generator.set(r.generator,n),delete r.generator),r.paging&&(this.paging.set(r.paging,n),delete r.paging),this.set(r,n),this.id!==s&&this.trigger("change:"+this.idAttribute)}},toSplunkD:function(){var t={};return t=e.extend(!0,{},this.toJSON()),t.links=e.extend(!0,{},this.links.toJSON()),t.generator=e.extend(!0,{},this.generator.toJSON()),t.paging=e.extend(!0,{},this.paging.toJSON()),t.entry=[e.extend(!0,{},this.entry.toJSON())],t.entry[0].links=e.extend(!0,{},this.entry.links.toJSON()),t.entry[0].acl=e.extend(!0,{},this.entry.acl.toJSON()),t.entry[0].content=e.extend(!0,{},this.entry.content.toJSON()),t.entry[0].fields=e.extend(!0,{},this.entry.fields.toJSON()),delete t.id,t}},{Links:r,Generator:r,Paging:r,Entry:r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments)}},{Links:r,ACL:o,Content:r,Fields:r})});return p}),define("models/services/data/ui/View",["jquery","splunk.util","models/SplunkDBase","underscore"],function(e,t,n,r){return n.extend({url:"data/ui/views",initialize:function(){n.prototype.initialize.apply(this,arguments)},isXML:function(){return this.entry.content.get("eai:type")==="views"},isHTML:function(){return this.entry.content.get("eai:type")==="html"},getViewType:function(){var e="n/a";return this.isXML()?e="XML":this.isHTML()&&(e="HTML"),e},getLabel:function(){return this.entry.content.get("label")||this.entry.get("name")},isRoot:function(e){function s(e){return e&&e.toLowerCase()||e}if(!this.isXML())return!1;var t=this.entry.content.get("eai:data"),n=this.get$XML(),i=n.find(":eq(0)")[0];return i?arguments.length>1?r.any(arguments,function(e){return s(i.nodeName)===s(e)}):s(i.nodeName)===s(e):!1},isAdvanced:function(e){var n,r,i,s;if(!this.isRoot("view"))return!1;if(e){n=this.get$XML(),r=n.find(":eq(0)"),i=r.attr("type"),s=r.attr("isVisible");if(i&&i=="html")return!1;if(s&&!t.normalizeBoolean(s))return!1}return!0},get$XML:function(){var t=this.isXML()&&this.entry.content.get("eai:data")||"<dashboard/>",n;try{n=e.parseXML(t)}catch(r){n=e.parseXML("<dashboard/>")}return e(n).find("script").remove(),e(n)},isDashboard:function(){return this.isRoot("dashboard")},isForm:function(){return this.isRoot("form")},isSimpleXML:function(){return this.isXML()&&this.isRoot("dashboard","form")}})}),define("util/xml_utils",["jquery","underscore"],function(e,t){function n(t){var n=e.parseXML(t);return e(n.childNodes[0])}function r(t){var n=e.parseXML("<x></x>");return n.createCDATASection(t)}function i(t){var n=t.TEXT_NODE||3,r,s,o=t.childNodes;for(r=o.length-1;r>=0;r--)s=o[r],s!==undefined&&s.nodeType===n&&(/^\s*$/.test(s.nodeValue)?t.removeChild(s):s.nodeValue=e.trim(s.nodeValue));o=t.childNodes;for(r=o.length-1;r>=0;r--)s=o[r],(s.nodeType===t.ELEMENT_NODE||s.nodeType===t.DOCUMENT_NODE)&&i(s)}function o(e){var t=["\n"],n=e;while(n--)t.push(s);return t.join("")}function u(e,n,r){if(!n||!n.childNodes)return;var i=n.TEXT_NODE||3;for(var s=0;s<=n.childNodes.length;s++){var a=n.childNodes[s-1],f=n.childNodes[s];f&&f.nodeType!==i&&(!a||a.nodeType!==i)&&n.insertBefore(e.createTextNode(o(r)),f),s===n.childNodes.length&&a&&a.nodeType!==i&&n.appendChild(e.createTextNode(o(r-1)))}t.chain(n.childNodes).filter(function(e){return e.nodeType===n.ELEMENT_NODE}).each(function(t){u(e,t,r+1)})}function a(e){return i(e[0]),u(e[0],e[0].childNodes[0],1),e}function f(t){return t instanceof e&&(t=t[0]),Object.prototype.hasOwnProperty.call(t,"xml")?t.xml:(new XMLSerializer).serializeToString(t)}var s="  ";return{$node:n,cdata:r,stripEmptyTextNodes:i,formatXMLDocument:a,serialize:f}}),define("models/Dashboard",["jquery","underscore","splunk.util","models/services/data/ui/View","util/xml_utils","models/Base"],function(e,t,n,r,i,s){var o="html",u="chart",a="event",f="single",l="table",c=[u,a,f,l],h=s.extend({constructor:function(e){this._dash=e,s.prototype.constructor.call(this)},apply:function(){this._dash._applyMetadata(this.toJSON())},save:function(){return arguments.length&&this.set.apply(this,arguments),this._dash._applyMetadata(this.toJSON()),this._dash.save.apply(this._dash,arguments)},fetch:function(){var t=this._dash._extractMetadata();this.set(t);var n=e.Deferred();return n.resolve(this),n}}),p=r.extend({initialize:function(e,t){r.prototype.initialize.apply(this,arguments),this.indent=(t||{}).indent!==!1},initializeAssociated:function(){r.prototype.initializeAssociated.apply(this,arguments);var e=this.meta=this.meta||new h(this);this.entry.content.on("change:eai:data",function(){e.fetch()},this),e.fetch()},associatedOff:function(e,t,n){r.prototype.associatedOff.apply(this,arguments),this.meta.off(e,t,n)},set$XML:function(e){var t=i.serialize(this.indent?i.formatXMLDocument(e):e);this.setXML(t)},setXML:function(e){this.entry.content.set("eai:data",e),this.entry.content.set("eai:type","views")},setHTML:function(e){this.entry.content.set("eai:data",e),this.entry.content.set("eai:type","html")},_extractMetadata:function(){var e=this.isXML(),t=e?this.get$XML():null;return{label:this.entry.content.get("label")||this.entry.get("name"),description:e&&t.find(":eq(0) > description").text()||""}},_applyMetadata:function(e){var t=this.get$XML(),n=t.find(":eq(0) > label"),r=t.find(":eq(0) > description"),s=e.label,o=e.description;s!==undefined&&s!==null&&(n.length||(n=i.$node("<label/>"),t.find(":eq(0)").prepend(n)),n.text(s)),o!==undefined&&o!==null&&(o!==undefined&&o!==""||!r.length?r.length||(r=i.$node("<description/>"),n.length?r.insertAfter(n):t.find(":eq(0)").prepend(r)):r.remove(),r.text(o)),this.set$XML(t)},getLabel:function(){var e=this.meta.get("label");return e===undefined?"":e},setLabel:function(e){this.setLabelAndDescription(e,undefined)},getDescription:function(){return this.meta.get("description")},setDescription:function(e){this.setLabelAndDescription(undefined,e)},setLabelAndDescription:function(e,t){this._applyMetadata({label:e,description:t})},get$Rows:function(){var e=this.get$XML();return e.find(":eq(0) > row")},appendNewPanel:function(n,r){var s=t.indexOf(c,n)!=-1,u=n===o,a,f;if(s||u){s?a=t.template(this.nonHTMLPanelTemplate,{panelType:n,properties:r}):a=t.template(this.HTMLPanelTemplate,{properties:r}),f=this.get$XML();var l=i.$node("<row/>");e(l).append(i.$node(a)),f.find(":eq(0)").append(l),this.set$XML(f)}},nonHTMLPanelTemplate:'                <<%- panelType %>>                    <% if (properties.title) { %>                        <title><%- properties.title %></title>                    <% } %>                    <% if (properties.searchString) { %>                        <searchString><%- properties.searchString %></searchString>                        <% if (properties.earliestTime) { %>                            <earliestTime><%- properties.earliestTime %></earliestTime>                        <% } %>                        <% if (properties.latestTime) { %>                            <latestTime><%- properties.latestTime %></latestTime>                        <% } %>                    <% } else if (properties.pivotSearch) { %>                        <pivotSearch>                            <model><%= properties.pivotSearch.model %></model>                            <object><%= properties.pivotSearch.object %></object>                            <filters><%= properties.pivotSearch.filters %></filters>                            <cells><%= properties.pivotSearch.cells %></cells>                            <rows><%= properties.pivotSearch.rows %></rows>                            <columns><%= properties.pivotSearch.columns %></columns>                        </pivotSearch>                    <% } else if (properties.searchName) { %>                        <searchName><%- properties.searchName %></searchName>                    <% } %>                    <% if (properties.fields) { %>                        <fields><%- properties.fields %></fields>                    <% } %>                    <% _.each(properties.options, function(value, key) { %>                        <option name="<%- key %>"><%- value %></option>                    <% }) %>                </<%- panelType %>>            ',HTMLPanelTemplate:"<html><%= properties.html %></html>"},{panelXMLToPanelTypeAndProperties:function(t){var n={},r=e(t),s;return t.nodeName===o?(s=i.serialize(t),{panelType:t.nodeName,properties:{html:e.trim(s.replace(/^\s*<html>|<\/html>\s*$/g,""))}}):(r.children().each(function(t,r){var i=e(r);r.nodeName!=="option"?n[r.nodeName]=i.text():(n.options=n.options||{},n.options[i.attr("name")]=i.text())}),{panelType:t.nodeName,properties:n})},reportToPropertiesFromPanelType:function(e,n,r){var i=t.indexOf(c,e)!=-1,s={},o,a,l,h;if(!i)throw"Unsupported panel type";return!n.isNew()&&!r?s.searchName=n.entry.get("name"):(s.searchString=n.entry.content.get("search"),l=n.entry.content.get("dispatch.earliest_time"),l&&(s.earliestTime=l),h=n.entry.content.get("dispatch.latest_time"),h&&(s.latestTime=h)),e===u?s.options=n.entry.content.filterByWildcards(["^display.visualizations.charting..*"],{strip:"display.visualizations."}):e===f&&(s.options=n.entry.content.filterByWildcards(["^display.visualizations.singlevalue..*"],{strip:"display.visualizations.singlevalue."})),s}});p.Entry=p.Entry.extend({});var d=p.Entry.Content;return p.Entry.Content=d.extend({initialize:function(){d.prototype.initialize.apply(this,arguments)},validate:function(t){var n=t["eai:data"],r,i;if(n!=void 0){r=e.parseXML(n),i=r.firstChild;if(i.nodeName!=="dashboards"&&i.nodeName!=="form")return{"eai:data":"You must declare a dashboard node."}}}}),p}),define("helpers/user_agent",["underscore"],function(e){var t={Chrome:/chrome/i,Firefox:/firefox/i,Safari:/safari/i,IE:/(?=.*msie ([\d.]+))|(?=.*trident)(?=.*rv\:([\d.]+))/i,IE11:/(?=.*trident)(?=.*rv\:11)/i,IE10:/msie 10\.0/i,IE9:/msie 9\.0/i,IE8:/msie 8\.0/i,IE7:/msie 7\.0/i,SafariiPhone:/iPhone/,SafariiPad:/iPad/},n=2048,r={agentString:window.navigator.userAgent,isChrome:function(){return t.Chrome.test(r.agentString)},isFirefox:function(){return t.Firefox.test(r.agentString)},isIE:function(){return t.IE.test(r.agentString)},isIE11:function(){return t.IE11.test(r.agentString)},isIE10:function(){return t.IE10.test(r.agentString)},isIE9:function(){return t.IE9.test(r.agentString)},isIE8:function(){return t.IE8.test(r.agentString)},isIE7:function(){return t.IE7.test(r.agentString)},isSafari:function(){return!r.isChrome()&&!r.isSafariiPhone()&&!r.isSafariiPad()&&t.Safari.test(r.agentString)},isSafariiPhone:function(){return t.SafariiPhone.test(r.agentString)},isSafariiPad:function(){return t.SafariiPad.test(r.agentString)},isIELessThan:function(e){return r.isIE()&&parseFloat(t.IE.exec(r.agentString).sort(function(e,t){return t-e})[0])<e},isInIE7DocumentMode:function(){return document.documentMode==7?!0:!1},hasUrlLimit:function(){return r.isIE()?!0:!1},getUrlLimit:function(){return r.hasUrlLimit()?n:Infinity}};return e(e.functions(r)).chain().each(function(t){r[t]=e(r[t]).memoize()}),r}),define("util/router_utils",["jquery","underscore","backbone","splunk.util","helpers/user_agent"],function(e,t,n,r,i){var s={},o=/^[#\/]|\s+$/g,u={};s.AGENT_HAS_URL_LIMIT=i.hasUrlLimit(),s.URL_MAX_LENGTH=i.getUrlLimit();var a=function(e){if(!s.AGENT_HAS_URL_LIMIT)return!0;var t=window.location,n=t.href.split("#")[0];return n.length+e.length<s.URL_MAX_LENGTH},f=0,l=function(){return"_suid_"+ ++f},c=/^#?_suid_\d+$/,h=function(e){return c.test(e)},p=function(e){var t=l();return u[t]=e,t};return n.history.getFragment=function(e,t){var n=/\/$/;if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var r=window.location.search;r&&(e+=r);var i=this.root.replace(n,"");e.indexOf(i)||(e=e.substr(i.length))}else e=this.getHash();return h(e)&&(e=u[e]||""),s.strip_route(e)},n.history._updateHash=t(n.history._updateHash).wrap(function(e,t,r,i){if(!a(r)){r=p(r);if(i){var s=this.getHash();delete u[s]}}e.call(n.history,t,r,i)}),s.strip_route=function(e){return e.replace(o,"")},s.start_backbone_history=function(t){var o="pushState"in window.history;t||!o||i.isIE()?e(document).ready(function(){var t=n.history.getHash(),i=t.split("?"),o=i[0]||"",u=r.queryStringToProp(i[1]||""),f=r.queryStringToProp(window.location.search.split("?")[1]||""),l=e.extend(f,u),c=r.propToQueryString(l),d=(o&&!h(o)?o:s.strip_route(window.location.pathname))+(c?"?"+c:"");a(d)||(d=p(d)),window.location.replace(window.location.href.split("#")[0]+"#"+d),n.history.start()}):n.history.start({pushState:!0})},s}),define("models/classicurl",["jquery","underscore","splunk.util","backbone","models/Base","util/router_utils"],function(e,t,n,r,i,s){var o=i.extend({id:"classicURL",initialize:function(){i.prototype.initialize.apply(this,arguments)},sync:function(t,n,r){var i,s,o=e.Deferred();r=r||{};var u=r.silentClear,a=r.replaceState;delete r.silentClear,delete r.replaceState,u&&n.clear({silent:!0});if(t==="read")i=n.currentQueryString();else if(t==="create"||t==="update")s=n.toURLEncodedQueryString(r),a?n.replaceState(s,r):n.pushState(s,r),i=this.currentQueryString();else{if(t!=="delete")throw new Error("invalid method: "+t);this.pushState("",r),i=this.currentQueryString()}return r.success(n,i,r),o.resolve(n,i,r).promise()},parse:function(e){var r=n.queryStringToProp(e),i=t.clone(this.attributes);return t.each(i,function(e,t){i[t]=undefined}),t.extend(i,r),i},currentQueryString:function(){var e;return r.history._hasPushState?window.location.href.split("?")[1]||"":(e=r.history.getFragment(window.location.href.split("#")[1]||""),e.split("?")[1]||"")},pushState:function(t,n){t&&(t="?"+t),r.history.navigate(this.root()+t,e.extend(!0,{},n,{replace:!1}))},replaceState:function(t,n){t&&(t="?"+t),r.history.navigate(this.root()+t,e.extend(!0,{},n,{replace:!0}))},root:function(){return r.history._hasPushState?window.location.pathname:"#"+s.strip_route(window.location.pathname)}});return new o}),define("models/AlertAction",["underscore","models/SplunkDBase"],function(e,t){return t.extend({urlRoot:"configs/conf-alert_actions",getSetting:function(e,t){return this.entry.content.has(e)?this.entry.content.get(e):t},initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("models/services/search/jobs/Control",["jquery","backbone","models/Base","util/splunkd_utils"],function(e,t,n,r){return n.extend({initialize:function(e,t){n.prototype.initialize.apply(this,arguments)},sync:function(n,i,s){var o={data:{output_mode:"json"}};switch(n){case"update":o.processData=!0,o.type="POST",o.url=r.fullpath(i.id),e.extend(!0,o,s);break;default:throw new Error("invalid method: "+n)}return t.sync.call(this,n,i,o)}})}),define("collections/Base",["jquery","underscore","backbone","mixins/xhrmanagement","models/Base","splunk.util","util/splunkd_utils"],function(e,t,n,r,i,s,o){var u=n.Collection.extend({initialize:function(e,r){n.Collection.prototype.initialize.apply(this,arguments),this.fetchData=r&&r.fetchData?r.fetchData:new i,this.fetchData.on("change",t.debounce(function(){this.safeFetch()},0),this),this.associated=this.associated||{},this.on("sync",this._onsync,this),this.on("error",this._onerror,this),this.on("reset",this.previousModelsOff,this)},fetch:function(t){var r=e.extend(!0,{},{data:this.fetchData.toJSON()},t);this.fetchXhr=n.Collection.prototype.fetch.call(this,r);var i=this;return this.fetchXhr.done(function(){i.touched&&i.safeFetch.apply(i,i.touched)}),this.fetchXhr},_onerror:function(e,t,n){var r=o.xhrErrorResponseParser(t,this.id);this.trigger("serverValidated",!1,this,r)},_onsync:function(e,n,r){var i=this.parseSplunkDMessages(n),s=t(i).any(function(e){return e.type===o.ERROR||e.type===o.FATAL});this.trigger("serverValidated",!s,this,i)},parseSplunkDMessages:function(e){return e?o.parseMessagesObject(e.messages):[]},deepOff:function(){r.deepOff.apply(this,arguments),this.each(function(e){t.isFunction(e.deepOff)&&e.deepOff()})},associatedOff:function(e,n,r){t(this.associated).each(function(i){i.off(e,n,r),t.isFunction(i.associatedOff)&&i.associatedOff(e,n,r)},this),this.each(function(i){t.isFunction(i.associatedOff)&&i.associatedOff(e,n,r)}),this.fetchData.off(e,n,r)},previousModelsOff:function(e,n){t(n.previousModels).each(function(e){t.isFunction(e.deepOff)&&e.deepOff()})},reverse:function(e){e||(e={});var t=[].concat(this.models).reverse();if(e.mutate===!1)return t;this.reset(t,e)},isValid:function(e){return this.all(function(t){return t.isValid(e)})},deepClone:function(){return new this.constructor(this.invoke("clone"))},_reset:function(){this.length=0,this.models=[],this._byId={}},where:function(e,n){return t.isEmpty(e)?n?void 0:[]:this[n?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)}});return t.extend(u.prototype,r),u}),define("models/services/search/jobs/Summary",["jquery","underscore","backbone","models/Base","collections/Base","util/splunkd_utils"],function(e,t,n,r,i,s){var o=n.Model.extend({isNumeric:function(){return this.get("numeric_count")>this.get("count")/2},replace:function(){return r.prototype.replace.apply(this,arguments)},deepOff:function(){this.off()}}),u=i.extend({model:o}),a=r.extend({url:"",initialize:function(e,t){r.prototype.initialize.apply(this,arguments),this.initializeAssociated(),t&&t.splunkDPayload&&this.setFromSplunkD(t.splunkDPayload,{silent:!0}),this.memoizedFrequency={},this.memoizedFields={},this.memoizedFilterByMinFrequency={},this.fields.on("reset",function(){this.memoizedFrequency={},this.memoizedFields={},this.memoizedFilterByMinFrequency={}},this)},initializeAssociated:function(){var e=this.constructor;this.associated=this.associated||{},this.fields=this.fields||new e.Fields,this.associated.fields=this.fields},sync:function(r,i,o){if(r!=="read")throw new Error("invalid method: "+r);o=o||{};var u={},a={data:{output_mode:"json"}},f=t.isFunction(i.url)?i.url():i.url||i.id;return o.data&&(u=e.extend(u,{app:o.data.app||undefined,owner:o.data.owner||undefined,sharing:o.data.sharing||undefined})),a.url=s.fullpath(f,u),e.extend(!0,a,o),delete a.data.app,delete a.data.owner,delete a.data.sharing,n.sync.call(this,r,i,a)},_fields:function(e){var n=[];return t.each(e,function(e,r){var i={name:r};t.each(e,function(e,t){i[t]=e}),n.push(i)},this),n},parse:function(e){this.initializeAssociated();if(!e)return{};var t=this._fields(e.fields);return delete e.fields,this.set(e),this.fields.reset(t),{}},setFromSplunkD:function(t,n){var r;t=e.extend(!0,{},t),this.attributes={},t&&(r=this._fields(t.fields),delete t.fields,this.set(t,n),this.fields.reset(r,n))},filterByMinFrequency:function(e){if(this.memoizedFilterByMinFrequency.hasOwnProperty(e))return this.memoizedFilterByMinFrequency[e];var t=this.get("event_count"),n=this.associated.fields.filter(function(n){return n.get("count")/t>=e});return this.memoizedFilterByMinFrequency[e]=n,n},frequency:function(e){if(this.memoizedFrequency[e]!==void 0)return this.memoizedFrequency[e];var t=this.findByFieldName(e),n;return t?(n=t.get("count")/this.get("event_count"),this.memoizedFrequency[e]=n,n):(this.memoizedFrequency[e]=0,0)},findByFieldName:function(e){if(this.memoizedFields.hasOwnProperty(e))return this.memoizedFields[e];var t=this.fields.find(function(t){return e===t.get("name")});return this.memoizedFields[e]=t,t},distribution:function(e){var t,n=this.findByFieldName(e),r=this.get("histogram");if(!n)return[];t=n.get("histogram");if(!r||!t)return[];var i=Math.min(r.length,t.length),s=[],o=[],u;for(u=0;u<i;u++)s.push(t[u].count),o.push(r[u].count);var a=30,f,l;while(i>a){f=[],l=[];for(u=i-1;u>=0;u-=2)u>0?(f.unshift(s[u]+s[u-1]),l.unshift(o[u]+o[u-1])):(f.unshift(s[u]),l.unshift(o[u]));s=f,o=l,i=s.length}var c=[];for(u=0;u<i;u++)c.push(o[u]>0?Math.min(100,s[u]/o[u]*100):0);return c}},{Fields:u,Field:o});return a}),define("models/services/search/Job",["jquery","underscore","backbone","models/Base","models/ACLReadOnly","models/services/ACL","models/services/search/jobs/Control","models/services/search/jobs/Summary","util/splunkd_utils","splunk.util","util/console"],function(e,t,n,r,i,s,o,u,a,f,l){var c=function(t,n){var i=n,s=t,o=e.Deferred(),u=new r,l=new r,c={data:{rf:"*",auto_cancel:v.DEFAULT_AUTO_CANCEL,status_buckets:300,output_mode:"json"}},h={},p=this.getCustomDataPayload();n=n||{},n.data=n.data||{},h=e.extend(h,{app:n.data.app||undefined,owner:n.data.owner||undefined,sharing:n.data.sharing||undefined});var d=a.fullpath(t.url,h);return e.extend(!0,c.data,p||{}),e.extend(!0,c.data,n.data),delete c.data.app,delete c.data.owner,delete c.data.sharing,c.data.search&&(c.data.search=f.addLeadingSearchCommand(c.data.search,!0)),n.data=e.extend(!0,{},h),u.save({},{url:d,processData:!0,data:c.data,success:function(e,t,n){s.set("id",e.get("sid")),l.fetch({url:d+"/"+encodeURIComponent(e.get("sid")),data:{output_mode:"json"},success:function(e,t,n){i.success.call(null,s,t,i),s.trigger("sync",s,t,i),o.resolve.apply(o,arguments)},error:function(e,t,n){i.error&&i.error.call(null,s,t,i),s.trigger("error",s,t,i),o.reject.apply(o,arguments)}})},error:function(e,t,n){i.error&&i.error.call(null,s,t,i),s.trigger("error",s,t,i),o.reject.apply(o,arguments)}}),o.promise()},h=function(t,r){var i={data:{output_mode:"json"}},s={};if(t.isNew())throw new Error("You cannot read a job without an id.");return r&&r.data&&(s=e.extend(s,{app:r.data.app||undefined,owner:r.data.owner||undefined,sharing:r.data.sharing||undefined})),i.url=a.fullpath(t.url+"/"+encodeURIComponent(t.id),s),e.extend(!0,i,r||{}),delete i.data.app,delete i.data.owner,delete i.data.sharing,n.sync.call(this,"read",t,i)},p=function(t,r){var i={data:{output_mode:"json"}},s={},o=this.getCustomDataPayload();return r&&r.data&&(s=e.extend(s,{app:r.data.app||undefined,owner:r.data.owner||undefined,sharing:r.data.sharing||undefined})),e.extend(!0,i.data,o||{}),i.url=a.fullpath(t.url+"/"+encodeURIComponent(t.id),s),i.processData=!0,i.type="POST",e.extend(!0,i,r||{}),delete i.data.app,delete i.data.owner,delete i.data.sharing,n.sync.call(this,"update",t,i)},d=function(t,r){var i={data:{output_mode:"json"}},s=t.url+"/"+encodeURIComponent(t.id);return r.data&&r.data.output_mode?(i.url=a.fullpath(s,{})+"?output_mode="+encodeURIComponent(r.data.output_mode),delete r.data.output_mode):(i.url=a.fullpath(s,{})+"?output_mode="+encodeURIComponent(i.data.output_mode),delete i.data.output_mode),e.extend(!0,i,r),i.processData=!0,n.sync.call(this,"delete",t,i)},v=r.extend({url:"search/jobs",initialize:function(e,t){r.prototype.initialize.apply(this,arguments),this.initializeAssociated(),this.entry.links.on("change:control",function(){this.control.set("id",this.entry.links.get("control"))},this),this.entry.links.on("change:summary",function(){this.summary.set("id",this.entry.links.get("summary"))},this),this.entry.links.on("change:alternate",function(){var e=this.entry.links.get("alternate");e&&(e+="/acl"),this.acl.set("id",e)},this),t&&t.splunkDPayload&&this.setFromSplunkD(t.splunkDPayload,{silent:!0})},parseSplunkDMessages:function(e){var n=r.prototype.parseSplunkDMessages.call(this,e);if(e&&e.entry&&e.entry.length>0){var i=e.entry[0],s=i.content||{};n=t.union(n,a.parseMessagesObject(i.messages),a.parseMessagesObject(s.messages)),s.isZombie&&n.push(a.createMessageObject(a.FATAL,"Job terminated unexpectedly"))}return n},initializeAssociated:function(){var e=this.constructor;this.associated=this.associated||{},this.links=this.links||new e.Links,this.associated.links=this.links,this.generator=this.generator||new e.Generator,this.associated.generator=this.generator,this.paging=this.paging||new e.Paging,this.associated.paging=this.paging,this.entry||(this.entry=new e.Entry,this.entry.links=new e.Entry.Links,this.entry.associated.links=this.entry.links,this.entry.acl=new e.Entry.ACL,this.entry.associated.acl=this.entry.acl,this.entry.content=new e.Entry.Content,this.entry.content.performance=new e.Entry.Content.Performance,this.entry.content.associated.performance=this.entry.content.performance,this.entry.content.request=new e.Entry.Content.Request,this.entry.content.associated.request=this.entry.content.request,this.entry.content.runtime=new e.Entry.Content.Runtime,this.entry.content.associated.runtime=this.entry.content.runtime,this.entry.content.custom=new e.Entry.Content.Custom,this.entry.content.associated.custom=this.entry.content.custom,this.entry.associated.content=this.entry.content),this.associated.entry=this.entry,this.control=this.control||new o,this.associated.control=this.control,this.summary=this.summary||new u,this.associated.summary=this.summary,this.acl=this.acl||new s,this.associated.acl=this.acl},sync:function(e,t,n){switch(e){case"create":return c.call(this,t,n);case"read":return h.call(this,t,n);case"update":return p.call(this,t,n);case"delete":return d.call(this,t,n);default:throw new Error("invalid method: "+e)}},parse:function(t){t=e.extend(!0,{},t),this.initializeAssociated();if(!t||!t.entry||t.entry.length===0){l.log("Response has no content to parse");return}var n=t.entry[0];return this.id=n.content.sid,t.id=n.content.sid,this.links.set(t.links),delete t.links,this.generator.set(t.generator),delete t.generator,this.paging.set(t.paging),delete t.paging,this.entry.links.set(n.links),delete n.links,this.entry.acl.set(n.acl),delete n.acl,this.entry.content.performance.set(n.content.performance),delete n.content.performance,this.entry.content.request.set(n.content.request),delete n.content.request,this.entry.content.runtime.set(n.content.runtime),delete n.content.runtime,this.entry.content.custom.set(n.content.custom),delete n.content.custom,this.entry.content.set(n.content),delete n.content,this.entry.set(n),delete t.entry,t},setFromSplunkD:function(t,n){this.attributes={};var r=e.extend(!0,{},t),i=this.id;if(r){if(r.entry&&r.entry[0]){var s=r.entry[0];s.content&&(this.set({id:s.content.sid},{silent:!0}),r.id=s.content.sid,s.content.performance&&(this.entry.content.performance.set(s.content.performance,n),delete s.content.performance),s.content.request&&(this.entry.content.request.set(s.content.request,n),delete s.content.request),s.content.runtime&&(this.entry.content.runtime.set(s.content.runtime,n),delete s.content.runtime),s.content.custom&&(this.entry.content.custom.set(s.content.custom,n),delete s.content.custom),this.entry.content.set(s.content,n),delete s.content),s.links&&(this.entry.links.set(s.links,n),s.links.control&&this.control.set("id",s.links.control,n),s.links.summary&&this.summary.set("id",s.links.summary,n),s.links.alternate&&this.acl.set("id",s.links.alternate+"/acl",n),delete s.links),s.acl&&(this.entry.acl.set(s.acl,n),delete s.acl),this.entry.set(s,n),delete r.entry}r.links&&(this.links.set(r.links,n),delete r.links),r.generator&&(this.generator.set(r.generator,n),delete r.generator),r.paging&&(this.paging.set(r.paging,n),delete r.paging),this.set(r,n),this.id!==i&&this.trigger("change:"+this.idAttribute)}},toSplunkD:function(){var t={};return t=e.extend(!0,{},this.toJSON()),t.links=e.extend(!0,{},this.links.toJSON()),t.generator=e.extend(!0,{},this.generator.toJSON()),t.paging=e.extend(!0,{},this.paging.toJSON()),t.entry=[e.extend(!0,{},this.entry.toJSON())],t.entry[0].links=e.extend(!0,{},this.entry.links.toJSON()),t.entry[0].acl=e.extend(!0,{},this.entry.acl.toJSON()),t.entry[0].content=e.extend(!0,{},this.entry.content.toJSON()),t.entry[0].content.performance=e.extend(!0,{},this.entry.content.performance.toJSON()),t.entry[0].content.request=e.extend(!0,{},this.entry.content.request.toJSON()),t.entry[0].content.runtime=e.extend(!0,{},this.entry.content.runtime.toJSON()),t.entry[0].content.custom=e.extend(!0,{},this.entry.content.custom.toJSON()),delete t.id,t},getCustomDataPayload:function(){var n=e.extend(!0,{},this.entry.content.custom.toJSON()),r=t.keys(n);return t.each(r,function(e){var t="custom."+e;n[t]=n[e],delete n[e]}),n},canSummarize:function(){return f.normalizeBoolean(this.entry.content.get("canSummarize"))}},{QUEUED:"QUEUED",PARSING:"PARSING",RUNNING:"RUNNING",PAUSED:"PAUSED",FINALIZING:"FINALIZING",FAILED:"FAILED",DONE:"DONE",DEFAULT_AUTO_CANCEL:30,DEFAULT_AUTO_PAUSE:30,DEFAULT_POLLING_INTERVAL:1e3,DEFAULT_METADATA_POLLING_INTERVAL:3e3,DEFAULT_KEEP_ALIVE_INTERVAL:15e3,Links:r,Generator:r,Paging:r,Entry:r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments)}},{Links:r,ACL:i,Content:r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments)}},{Performance:r,Request:r,Runtime:r,Custom:r})})});return v}),function(e){var t=function(t){var n=this.superclass&&this.superclass.prototype,r=e.keys(t);e.keys({toString:!0}).length||r.push("toString","valueOf");for(var i=0,s=r.length;i<s;i++){var o=r[i],u=t[o];if(n&&e.isFunction(u)&&e.argumentNames(u)[0]=="$super")var a=u,u=e.extend(e.wrap(function(e){return function(){return n[e].apply(this,arguments)}}(o),a),{valueOf:function(){return a},toString:function(){return a.toString()}});this.prototype[o]=u}return this};e.extend({keys:function(e){var t=[];for(var n in e)t.push(n);return t},argumentNames:function(e){var t=e.toString().match(/^[\s\(]*function[^(]*\((.*?)\)/)[1].split(/, ?/);return t.length==1&&!t[0]?[]:t},bind:function(t,n){return function(){return t.apply(n,e.makeArray(arguments))}},wrap:function(t,n){var r=t;return function(){return n.apply(this,[e.bind(r,this)].concat(e.makeArray(arguments)))}},klass:function(){var n=null,r=e.makeArray(arguments);e.isFunction(r[0])&&(n=r.shift());var i=function(){this.initialize.apply(this,arguments)};i.superclass=n,i.subclasses=[],i.addMethods=t;if(n){var s=function(){};s.prototype=n.prototype,i.prototype=new s,n.subclasses.push(i)}for(var o=0;o<r.length;o++)i.addMethods(r[o]);return i.prototype.initialize||(i.prototype.initialize=function(){}),i.prototype.constructor=i,i}});var n=function(t){for(var n in t)n.match(/^on(.+)/)&&typeof t[n]=="function"&&t.element.bind(RegExp.$1,e.bind(t[n],t))},r=function(t){return e.klass(t,{initialize:function(t,n,r){this.element=e(n),t&&t.apply(this,r)}})},i=function(e,t,i){var s=r(t);return instance=new s(e,i),n(instance),t.instances||(t.instances=[]),t.instances.push(instance),instance};e.fn.extend({attach:function(){var t=e.makeArray(arguments),n=t.shift();return e.livequery&&this.selector?this.livequery(function(){i(this,n,t)}):this.each(function(){i(this,n,t)})},attachAndReturn:function(){var t=e.makeArray(arguments),n=t.shift();return e.map(this,function(e){return i(e,n,t)})},attached:function(t){var n=[];return t.instances?(this.each(function(r,i){e.each(t.instances,function(e,t){t.element.get(0)==i&&n.push(t)})}),n):n},firstAttached:function(e){return this.attached(e)[0]}});var s=e.klass({initialize:function(e){this.element.attr("nodeName")=="FORM"?this.element.attach(s.Form,e):this.element.attach(s.Link,e)}});s.Base=e.klass({initialize:function(t){this.options=e.extend({},t||{})},_makeRequest:function(t){return e.ajax(t),!1}}),s.Link=e.klass(s.Base,{onclick:function(){var t=e.extend({url:this.element.attr("href"),type:"GET"},this.options);return this._makeRequest(t)}}),s.Form=e.klass(s.Base,{onclick:function(t){var n=t.target;e.inArray(n.nodeName.toLowerCase(),["input","button"])>=0&&n.type.match(/submit|image/)&&(this._submitButton=n)},onsubmit:function(){var t=this.element.serializeArray();this._submitButton&&t.push({name:this._submitButton.name,value:this._submitButton.value});var n=e.extend({url:this.element.attr("action"),type:this.element.attr("method")||"GET",data:t},this.options);return this._makeRequest(n),!1}}),e.ajaxSetup({beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, text/html, application/xml, text/xml, */*")}})}(jQuery),define("lowpro",["jquery"],function(){});var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?"ActiveX":"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=e)try{var y=new ActiveXObject(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();define("swfobject",function(e){return function(){var t,n;return t||e.swfobject}}(this)),Splunk.namespace("Splunk.Session"),Splunk.Session=$.klass({EVENT_BUFFER_TIMEOUT:1e3,UI_INACTIVITY_TIMEOUT:60,START_EVENT:"SessionStart",TIMEOUT_EVENT:"SessionTimeout",RESTART_EVENT:"HaltOnRestart",UI_EVENT_TYPES:["click","keydown","mouseover","scroll"],initialize:function(){this.eventBuffer=[],this.timeoutDelay=Splunk.util.getConfigValue("UI_INACTIVITY_TIMEOUT",this.UI_INACTIVITY_TIMEOUT),this.timeoutDelay*=6e4,this.timeoutID=null,$(document).bind(this.START_EVENT,this.onSessionStart.bind(this)),!this.timeoutDelay<1&&($(document).bind(this.TIMEOUT_EVENT,this.onSessionTimeout.bind(this)),$(document).bind(this.UI_EVENT_TYPES.join(" "),this.onUIEvent.bind(this)),this.startTimeout()),$(document).trigger(this.START_EVENT,new Date)},onUIEvent:function(e){this.timeoutID?(this.eventBuffer.push(""),this.eventBuffer.length===1&&(this.resetTimeout(),setTimeout(function(){this.eventBuffer=[]}.bind(this),this.EVENT_BUFFER_TIMEOUT))):(this.startTimeout(),$(document).trigger(this.START_EVENT,new Date))},onSessionStart:function(e,t){},onSessionTimeout:function(e,t){},resetTimeout:function(){this.stopTimeout(),this.startTimeout()},signalRestart:function(){$(document).trigger(this.RESTART_EVENT)},startTimeout:function(){this.timeoutID=window.setTimeout(this.timeoutHandler.bind(this),this.timeoutDelay)},stopTimeout:function(){this.timeoutID&&(window.clearTimeout(this.timeoutID),this.timeoutID=null)},timeoutHandler:function(){this.stopTimeout(),$(document).trigger(this.TIMEOUT_EVENT,new Date)}}),Splunk.Session.instance=null,Splunk.Session.getInstance=function(){return Splunk.Session.instance||(Splunk.Session.instance=new Splunk.Session),Splunk.Session.instance},define("splunk.session",["lowpro","splunk","jquery","splunk.logger","splunk.util","swfobject"],function(e){return function(){var t,n;return t||e.Splunk.Session}}(this)),define("helpers/Session",["backbone","underscore","splunk.session"],function(e,t,n){var r=function(){this._session=new n,this.cid=t.uniqueId(),this.timeout="SessionTimeout."+this.cid,this.start="SessionStart."+this.cid,this.restart="HaltOnRestart."+this.cid,$(document).on(this.timeout,function(){this.trigger("timeout")}.bind(this)),$(document).on(this.start,function(){this.trigger("start")}.bind(this)),$(document).on(this.restart,function(){this.trigger("restart")}.bind(this))};return t.extend(r.prototype,e.Events,{dispose:function(){$(document).off(this.timeout),$(document).off(this.start),$(document).off(this.restart)}}),new r}),define("helpers/polling_manager",["underscore","jquery","backbone","helpers/Session"],function(e,t,n,r){function u(e){if(e.active()!==!0){window.clearTimeout(e.timeoutId);return}var n=function(){e.trigger("success"),e.model.off("sync",n)},r=t.extend(!0,{},e.options||{},{success:function(t,n,r){e.trigger("success"),e.options.condition(e.model)!==!0?(e.trigger("complete"),e.stop({silent:!0})):e.timeoutId=window.setTimeout(function(){u(e)},e.options.delay)},error:function(t,n,r){e.trigger("error"),e.options.stopOnError?e.stop({silent:!0}):e.timeoutId=window.setTimeout(function(){u(e)},e.options.delay)}});e.xhr=e.model.fetch(r)}var i={delay:1e3,stopOnError:!0,condition:function(){return!0}},s=["start","stop","success","error","complete"],o=function(t,n){this.set(t,n),n.ui_inactivity&&r.on("timeout",function(){this.stop(),r.off(null,null,this)},this)};e.extend(o.prototype,n.Events,{set:function(t,r){return this.model=t,this.options=e.extend(e.clone(i),r||{}),e.each(s,function(e){var t=this.options[e];typeof t=="function"&&this.on(e,t,this)},this),this.model instanceof n.Model&&this.model.on("destroy",this.stop,this),this.stop({silent:!0})},start:function(e){return this.active()===!0?this:(e=e||{},e.silent||this.trigger("start"),this.options.active=!0,u(this),this)},stop:function(e){return e=e||{},e.silent||this.trigger("stop"),this.options.active=!1,clearTimeout(this.timeoutId),this.xhr&&typeof this.xhr.abort=="function"&&this.xhr.abort(),this.xhr=null,this},active:function(){return this.options.active===!0}});var a=[];return{get:function(t){return e.find(a,function(e){return e.model===t})},getPoller:function(e,t){var n=this.get(e);return n?n.set(e,t):(n=new o(e,t),a.push(n)),n},start:function(e,t){return this.getPoller(e,t).start({silent:!0})},stop:function(e){var t=this.get(e);return t?(t.stop(),!0):!1},size:function(){return a.length}}}),function(e){function _(e,t){return function(n){return I(e.call(this,n),t)}}function D(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function P(){}function H(e){j(this,e)}function B(e){var t=this._data={},n=e.years||e.year||e.y||0,r=e.months||e.month||e.M||0,i=e.weeks||e.week||e.w||0,s=e.days||e.day||e.d||0,o=e.hours||e.hour||e.h||0,u=e.minutes||e.minute||e.m||0,a=e.seconds||e.second||e.s||0,f=e.milliseconds||e.millisecond||e.ms||0;this._milliseconds=f+a*1e3+u*6e4+o*36e5,this._days=s+i*7,this._months=r+n*12,t.milliseconds=f%1e3,a+=F(f/1e3),t.seconds=a%60,u+=F(a/60),t.minutes=u%60,o+=F(u/60),t.hours=o%24,s+=F(o/24),s+=i*7,t.days=s%30,r+=F(s/30),t.months=r%12,n+=F(r/12),t.years=n}function j(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function F(e){return e<0?Math.ceil(e):Math.floor(e)}function I(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function q(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function R(e){return Object.prototype.toString.call(e)==="[object Array]"}function U(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function z(e){return e?k[e]||e.toLowerCase().replace(/(.)s$/,"$1"):e}function W(e,t){return t.abbr=e,s[e]||(s[e]=new P),s[e].set(t),s[e]}function X(e){return e?(!s[e]&&o&&require("./lang/"+e),s[e]):t.fn._lang}function V(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function $(e){var t=e.match(f),n,r;for(n=0,r=t.length;n<r;n++)M[t[n]]?t[n]=M[t[n]]:t[n]=V(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function J(e,t){function r(t){return e.lang().longDateFormat(t)||t}var n=5;while(n--&&l.test(t))t=t.replace(l,r);return L[t]||(L[t]=$(t)),L[t](e)}function K(e){switch(e){case"DDDD":return d;case"YYYY":return v;case"YYYYY":return m;case"S":case"SS":case"SSS":case"DDD":return p;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return g;case"X":return w;case"Z":case"ZZ":return y;case"T":return b;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return h;default:return new RegExp(e.replace("\\",""))}}function Q(e,t,n){var r,i,s=n._a;switch(e){case"M":case"MM":s[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":r=X(n._l).monthsParse(t),r!=null?s[1]=r:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(s[2]=~~t);break;case"YY":s[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":s[0]=~~t;break;case"a":case"A":n._isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":s[3]=~~t;break;case"m":case"mm":s[4]=~~t;break;case"s":case"ss":s[5]=~~t;break;case"S":case"SS":case"SSS":s[6]=~~(("0."+t)*1e3);break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,r=(t+"").match(T),r&&r[1]&&(n._tzh=~~r[1]),r&&r[2]&&(n._tzm=~~r[2]),r&&r[0]==="+"&&(n._tzh=-n._tzh,n._tzm=-n._tzm)}t==null&&(n._isValid=!1)}function G(e){var t,n,r=[];if(e._d)return;for(t=0;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];r[3]+=e._tzh||0,r[4]+=e._tzm||0,n=new Date(0),e._useUTC?(n.setUTCFullYear(r[0],r[1],r[2]),n.setUTCHours(r[3],r[4],r[5],r[6])):(n.setFullYear(r[0],r[1],r[2]),n.setHours(r[3],r[4],r[5],r[6])),e._d=n}function Y(e){var t=e._f.match(f),n=e._i,r,i;e._a=[];for(r=0;r<t.length;r++)i=(K(t[r]).exec(n)||[])[0],i&&(n=n.slice(n.indexOf(i)+i.length)),M[t[r]]&&Q(t[r],i,e);e._isPm&&e._a[3]<12&&(e._a[3]+=12),e._isPm===!1&&e._a[3]===12&&(e._a[3]=0),G(e)}function Z(e){var t,n,r,i=99,s,o;for(s=e._f.length;s>0;s--){t=j({},e),t._f=e._f[s-1],Y(t),n=new H(t);if(n.isValid()){r=n;break}o=U(t._a,n.toArray()),o<i&&(i=o,r=n)}j(e,r)}function et(e){var t,n=e._i;if(E.exec(n)){e._f="YYYY-MM-DDT";for(t=0;t<4;t++)if(x[t][1].exec(n)){e._f+=x[t][0];break}y.exec(n)&&(e._f+=" Z"),Y(e)}else e._d=new Date(n)}function tt(t){var n=t._i,r=u.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):typeof n=="string"?et(t):R(n)?(t._a=n.slice(0),G(t)):t._d=n instanceof Date?new Date(+n):new Date(n)}function nt(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function rt(e,t,n){var i=r(Math.abs(e)/1e3),s=r(i/60),o=r(s/60),u=r(o/24),a=r(u/365),f=i<45&&["s",i]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",r(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,nt.apply({},f)}function it(e,n,r){var i=r-n,s=r-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=t(e).add("d",s),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function st(e){var n=e._i,r=e._f;return n===null||n===""?null:(typeof n=="string"&&(e._i=n=X().preparse(n)),t.isMoment(n)?(e=j({},n),e._d=new Date(+n._d)):r?R(r)?Z(e):Y(e):tt(e),new H(e))}function ot(e,n){t.fn[e]=t.fn[e+"s"]=function(e){var t=this._isUTC?"UTC":"";return e!=null?(this._d["set"+t+n](e),this):this._d["get"+t+n]()}}function ut(e){t.duration.fn[e]=function(){return this._data[e]}}function at(e,n){t.duration.fn["as"+e]=function(){return+this/n}}var t,n="2.0.0",r=Math.round,i,s={},o=typeof module!="undefined"&&module.exports,u=/^\/?Date\((\-?\d+)/i,a=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,f=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,l=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,c=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,h=/\d\d?/,p=/\d{1,3}/,d=/\d{3}/,v=/\d{1,4}/,m=/[+\-]?\d{1,6}/,g=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,y=/Z|[\+\-]\d\d:?\d\d/i,b=/T/i,w=/[\+\-]?\d+(\.\d{1,3})?/,E=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,S="YYYY-MM-DDTHH:mm:ssZ",x=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],T=/([\+\-]|\d\d)/gi,N="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),C={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},k={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},L={},A="DDD w W M D d".split(" "),O="M D H h m s w W".split(" "),M={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return I(this.year()%100,2)},YYYY:function(){return I(this.year(),4)},YYYYY:function(){return I(this.year(),5)},gg:function(){return I(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return I(this.weekYear(),5)},GG:function(){return I(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return I(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return I(~~(this.milliseconds()/10),2)},SSS:function(){return I(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+I(~~(e/60),2)+":"+I(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+I(~~(10*e/6),4)},X:function(){return this.unix()}};while(A.length)i=A.pop(),M[i+"o"]=D(M[i],i);while(O.length)i=O.pop(),M[i+i]=_(M[i],2);M.DDDD=_(M.DDD,3),P.prototype={set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var n,r,i;this._monthsParse||(this._monthsParse=[]);for(n=0;n<12;n++){this._monthsParse[n]||(r=t([2e3,n]),i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i"));if(this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var n,r,i;this._weekdaysParse||(this._weekdaysParse=[]);for(n=0;n<7;n++){this._weekdaysParse[n]||(r=t([2e3,1]).day(n),i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[n].test(e))return n}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return it(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}},t=function(e,t,n){return st({_i:e,_f:t,_l:n,_isUTC:!1})},t.utc=function(e,t,n){return st({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:t})},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=t.isDuration(e),i=typeof e=="number",s=r?e._data:i?{}:e,o=a.exec(e),u,f;return i?n?s[n]=e:s.milliseconds=e:o&&(u=o[1]==="-"?-1:1,s={y:0,d:~~o[2]*u,h:~~o[3]*u,m:~~o[4]*u,s:~~o[5]*u,ms:~~o[6]*u}),f=new B(s),r&&e.hasOwnProperty("_lang")&&(f._lang=e._lang),f},t.version=n,t.defaultFormat=S,t.lang=function(e,n){var r;if(!e)return t.fn._lang._abbr;n?W(e,n):s[e]||X(e),t.duration.fn._lang=t.fn._lang=X(e)},t.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),X(e)},t.isMoment=function(e){return e instanceof H},t.isDuration=function(e){return e instanceof B},t.fn=H.prototype={clone:function(){return t(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return J(t(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return this._isValid==null&&(this._a?this._isValid=!U(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray()):this._isValid=!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){var n=J(this,e||t.defaultFormat);return this.lang().postformat(n)},add:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),q(this,r,1),this},subtract:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),q(this,r,-1),this},diff:function(e,n,r){var i=this._isUTC?t(e).utc():t(e).local(),s=(this.zone()-i.zone())*6e4,o,u;return n=z(n),n==="year"||n==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),u+=(this-t(this).startOf("month")-(i-t(i).startOf("month")))/o,n==="year"&&(u/=12)):(o=this-i-s,u=n==="second"?o/1e3:n==="minute"?o/6e4:n==="hour"?o/36e5:n==="day"?o/864e5:n==="week"?o/6048e5:o),r?u:F(u)},from:function(e,n){return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=this.diff(t().startOf("day"),"days",!0),n=e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<t([this.year()]).zone()||this.zone()<t([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){if(typeof e=="string"){e=this.lang().weekdaysParse(e);if(typeof e!="number")return this}return this.add({d:e-t})}return t},month:function(e){var t=this._isUTC?"UTC":"";if(e!=null){if(typeof e=="string"){e=this.lang().monthsParse(e);if(typeof e!="number")return this}return this._d["set"+t+"Month"](e),this}return this._d["get"+t+"Month"]()},startOf:function(e){e=z(e);switch(e){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.day(0),this},endOf:function(e){return this.startOf(e).add(e,1).subtract("ms",1)},isAfter:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)>+t(e).startOf(n)},isBefore:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)<+t(e).startOf(n)},isSame:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)===+t(e).startOf(n)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return t.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var n=r((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add("d",e-n)},weekYear:function(e){var t=it(this,this.lang()._week.dow,this.lang()._week.doy).year;return e==null?t:this.add("y",e-t)},isoWeekYear:function(e){var t=it(this,1,4).year;return e==null?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return e==null?t:this.add("d",(e-t)*7)},isoWeek:function(e){var t=it(this,1,4).week;return e==null?t:this.add("d",(e-t)*7)},weekday:function(e){var t=(this._d.getDay()+7-this.lang()._week.dow)%7;return e==null?t:this.add("d",e-t)},isoWeekday:function(e){var t=(this._d.getDay()+6)%7;return e==null?t:this.add("d",e-t)},lang:function(t){return t===e?this._lang:(this._lang=X(t),this)}};for(i=0;i<N.length;i++)ot(N[i].toLowerCase().replace(/s$/,""),N[i]);ot("year","FullYear"),t.fn.days=t.fn.day,t.fn.months=t.fn.month,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.duration.fn=B.prototype={weeks:function(){return F(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+~~(this._months/12)*31536e6},humanize:function(e){var t=+this,n=rt(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},get:function(e){return e=z(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=z(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:t.fn.lang};for(i in C)C.hasOwnProperty(i)&&(at(i,C[i]),ut(i.toLowerCase()));at("Weeks",6048e5),t.duration.fn.asMonths=function(){return(+this-this.years()*31536e6)/2592e6+this.years()*12},t.lang("en",{ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),o&&(module.exports=t),typeof ender=="undefined"&&(this.moment=t),typeof define=="function"&&define.amd&&define("moment",[],function(){return t})}.call(this),define("util/moment",["splunk.i18n","moment"],function(e,t){var n=e.moment_install;return typeof n=="function"&&n(t),t}),define("util/time_utils",["underscore","splunk.i18n","splunk.util","util/moment"],function(e,t,n,r){var i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d+)[+-]{1}\d{2}[:]?\d{2}$/,s=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})[+-]{1}\d{2}[:]?\d{2}$/,o={},u=t.locale_name().substring(0,2),a="%Y-%m-%dT%H:%M:%S.%Q%:z";o.s=o.sec=o.secs=o.second=o.seconds={abbr:"s",singular:e("second").t(),plural:e("seconds").t()},o.m=o.min=o.mins=o.minute=o.minutes={abbr:"m",singular:e("minute").t(),plural:e("minutes").t()},o.h=o.hr=o.hrs=o.hour=o.hours={abbr:"h",singular:e("hour").t(),plural:e("hours").t()},o.d=o.day=o.days={abbr:"d",singular:e("day").t(),plural:e("days").t()},o.w=o.week=o.weeks={abbr:"w",singular:e("week").t(),plural:e("weeks").t()},o.mon=o.month=o.months={abbr:"mon",singular:e("month").t(),plural:e("months").t()},o.q=o.qtr=o.qtrs=o.quarter=o.quarters={abbr:"q",singular:e("quarter").t(),plural:e("quarters").t()},o.y=o.yr=o.yrs=o.year=o.years={abbr:"y",singular:e("year").t(),plural:e("years").t()};var f=o,l=function(e){var t=i.exec(e)||s.exec(e);t?(this.year=parseInt(t[1],10),this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10),this.millisecond=t.length>7?parseInt(t[7],10):0):this.isInvalid=!0},c=function(e){return new l(e)},h=function(e){var t=e.year,n=e.month-1,r=e.day,i=e.hour,s=e.minute,o=e.second,u=e.millisecond;return new Date(t,n,r,i,s,o,u)},p=function(e){var t=c(e);return h(t)},d=function(e){var n=new t.DateTime({date:e,year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),microsecond:e.getMilliseconds()*1e3});return n.weekday=function(){var e=this.date.getDay()-1;return e<0&&(e=6),e},n},v=function(t){if(t.length===1)return"second";t[0]instanceof l||(t=e(t).map(c));var n=[],r=[],i=[],s=[],o=[],u=function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t)return!1;return!0};return e(t).each(function(e){n.push(e.second),r.push(e.minute),i.push(e.hour),s.push(e.day),o.push(e.month)}),u(n,0)?u(r,0)?u(i,0)?u(s,1)?u(o,1)?"year":"month":"day":"hour":"minute":"second"},m=function(e){return i.test(e)||s.test(e)},g=function(e){return e?(new Date(e*1e3)).toLocaleString():null},y=function(e,t,n){if(!e)return null;var i=r.unix(e);return t!==undefined?i.from(r.unix(t),n):i.fromNow(n)},b=function(e,t){var n=e;switch(t){case"d":n*=86400;break;case"h":n*=3600;break;case"m":n*=60}return n},w=function(t,n){e.isString(t)&&(t=parseInt(t,10));var r=new Date,i=r.getTime()/1e3,s=i-t;return y(s,i,n)},E=function(e,t){var n=f.hasOwnProperty(e),r=t===!1?"":f.s.abbr;return n?f[e].abbr:r},S=function(t){if(!e.isString(t))return!1;var n=t.match(/^\s*(rt|)([-+]?)(\d*)([a-zA-Z]*)(@?)([a-zA-Z]*)(\d*)\s*$/);if(n){var r=E(n[4],!1),i=n[5]!=="";return{amount:r?parseInt(n[3],10)||1:0,unit:r,hasSnap:i,snapUnit:E(n[6],!1),snapUnitAmount:parseInt(n[7],10),isNow:n[4]==="now",isRealTime:n[1]==="rt",isPositive:n[2]==="+"||!0,parse:n}}return!1},x=function(t){return e.isString(t)&&t.indexOf("rt")===0},T=function(e,t){var n,r,i;return x(e)?(r=S(e),r?r.unit||r.isNow?r.parse.slice(2,r.parse.length).join(""):(i=r.parse.slice(3,r.parse.length).join(""),i?(n=r.isPositive?"+":"-",n+i):t?"":"0"):e):e},N=function(e,t){var n=new Date(e),r=new Date(e);switch(t){case"w":n.setDate(n.getDate()-7),r.setDate(r.getDate()+7);break;case"d":n.setDate(n.getDate()-1),r.setDate(r.getDate()+1);break;case"h":n.setHours(n.getHours()-1),r.setHours(r.getHours()+1);break;case"m":n.setMinutes(n.getMinutes()-1),r.setMinutes(r.getMinutes()+1);break;case"s":n.setSeconds(n.getSeconds()-1),r.setSeconds(r.getSeconds()+1);break;case"ms":n.setMilliseconds(n.getMilliseconds()-1),r.setMilliseconds(r.getMilliseconds()+1)}return{lowerRange:n,upperRange:r}},C=function(t){return t===undefined?!1:e.isNumber(t)||!/^(now|-|\+|@|rt).*/.test(t)},k=function(t){return e.isNumber(t)||e.isString(t)&&/^\d+((\.\d+)|(\d*))$/.test(t)&&t!=="0"},L=function(e,t){return C(e)&&t?t.getHours()==0&&t.getMinutes()==0&&t.getSeconds()==0&&t.getMilliseconds()==0:!1},A=function(t){return t?e.isString(t)&&(t===""||/now/.test(t)):!0},O=function(e){return e==="0"?!0:!e},M=function(e,t,n){var r;if(e.length>0){r=e.find(function(e){var r=e.entry.content.get("earliest_time"),i=e.entry.content.get("latest_time"),s=O(r)&&O(t),o=O(i)&&O(n),u=e.isDisabled(),a=e.isSubMenu();return!u&&!a&&(s||r==t)&&(o||i==n)});if(r)return r.entry.content.get("label")}return!1},_=function(t,n){var r,i;if(x(t)||x(n)){r=S(t),i=A(n);var s={s:e("%t second window").t(),m:e("%t minute window").t(),h:e("%t hour window").t(),d:e("%t day window").t(),w:e("%t week window").t(),mon:e("%t month window").t(),q:e("%t quarter window").t(),y:e("%t year window").t()};return r&&r.amount&&i&&s.hasOwnProperty(r.unit)?s[r.unit].replace(/%t/,r.amount):e("Real-time").t()}return!1},D=function(t,n){var r=S(t),i=A(n),s=S(n);if(!r||r.isRealTime||s.isRealTime)return!1;if(r.amount&&(!r.snapUnit||r.unit===r.snapUnit)&&(s.isNow||s.snapUnit&&!s.amount)&&(!s.snapUnit||r.unit===s.snapUnit)){var o=e("Last %amount %unit").t();return o=o.replace(/%amount/,r.amount),o=o.replace(/%unit/,f[r.unit][r.amount>1?"plural":"singular"]),o}return!1},P=function(n,r,i,s){var o=L(n,r),a=L(i,s);if(o&&a){if(u=="en")return t.format_datetime_range(null,r,s,!0);var f=e("%1 through %2").t(),l=new Date(s.getTime());return l.setDate(l.getDate()-1),f.replace("%1",t.format_date(r,"short")).replace("%2",t.format_date(l,"short"))}return!1},H=function(n,r,i){var s=L(n,r),o=A(i);if(s&&o){var u=e("Since %1").t();return u.replace("%1",t.format_date(r,"short"))}return!1},B=function(n,r,i){if(O(n)&&L(r,i)){var s=e("Before %1").t();return s.replace("%1",t.format_date(i,"short"))}return!1},j=function(t,n){return!O(t)&&C(t)&&C(n)?e("Date time range").t():!1},F=function(t,n){return C(t)&&A(n)?e("Since date time").t():!1},I=function(t,n){return O(t)&&C(n)?e("Before date time").t():!1},q=function(t,n){return O(t)&&A(n)?e("All time").t():!1},R=function(t,n,r,i,s){return q(n,i)||M(t,n,i)||_(n,i)||D(n,i)||P(n,r,i,s)||H(n,r,i)||B(n,i,s)||j(n,i)||F(n,i)||I(n,i)||e("Custom time").t()};return{extractBdTime:c,bdTimeToDateObject:h,rangeFromIsoAndOffset:N,isoToDateObject:p,determineLabelGranularity:v,isValidIsoTime:m,TIME_UNITS:f,ISO_PATTERN:a,normalizeUnit:E,parseTimeString:S,isRealtime:x,stripRTSafe:T,isAbsolute:C,isEpoch:k,timeAndJsDateIsWholeDay:L,isNow:A,isEmpty:O,findPresetLabel:M,generateRealtimeLabel:_,generateRelativeTimeLabel:D,generateBetweenTimeLabel:P,generateSinceDateLabel:H,generateBeforeDateLabel:B,generateDateTimeRangeLabel:j,generateSinceTimeRangeLabel:F,generateBeforeTimeRangeLabel:I,generateAllTimeLabel:q,generateLabel:R,convertToRelativeTime:y,convertToLocalTime:g,jsDateToSplunkDateTimeWithMicroseconds:d,getRelativeStringFromSeconds:w,convertAmountAndUnitToSeconds:b}}),define("util/Ticker",["underscore","backbone"],function(e,t){var n=function(e){this.delay=e||1e3};return e.extend(n.prototype,t.Events,{start:function(e){if(this._intervalId)return;e&&this.force(),this._intervalId=setInterval(function(){this.trigger("tick",(new Date).getTime())}.bind(this),this.delay)},stop:function(){this._intervalId&&(clearInterval(this._intervalId),delete this._intervalId)},reset:function(e){e||(e={}),this.stop(),e.delay&&(this.delay=e.delay),this.start(e.force)},force:function(){this.trigger("tick",(new Date).getTime()),this._intervalId&&this.reset()}}),n}),define("models/Job",["jquery","underscore","backbone","models/services/search/Job","helpers/polling_manager","util/splunkd_utils","util/time_utils","util/console","splunk.util","helpers/Session","util/Ticker"],function(e,t,n,r,i,s,o,u,a,f,l){var c={delay:r.DEFAULT_POLLING_INTERVAL,condition:function(e){return e.entry.content.get("isDone")!==!0&&e.entry.content.get("isFailed")!==!0}},h=function(e,t,n){this.observable=e,this.fetchParams=t||{};var r=e.fetch;e.fetch=function(t){return t=t||{},t.sid=n.id,r.call(e,t)},this.xhr=null};h.prototype={fetch:function(n){this.abortXhr();var r=t(this.fetchParams).isFunction()?this.fetchParams():this.fetchParams;this.xhr=this.observable.fetch(e.extend(!0,{},r,n))},destroy:function(){this.abortXhr(),this.observable instanceof n.Model?this.observable.clear():this.observable instanceof n.Collection&&this.observable.reset(),this.observable.trigger("destroy")},getObservable:function(){return this.observable},abortXhr:function(){this.xhr&&t(this.xhr.abort).isFunction()&&this.xhr.abort(),this.xhr=null}};var p=r.extend({initialize:function(t,n){r.prototype.initialize.apply(this,arguments),n=n||{},this.enableSimplePoller=n.enableSimplePoller||!1,this.pollingOptions=e.extend(!0,{},c,n),this.prepared=this.entry.content.get("dispatchState")&&!this.isPreparing(),this.processKeepAlive=n.processKeepAlive||!1,this.keepAlivePoller=null,this.keepAliveInterval=n.keepAliveInterval||r.DEFAULT_KEEP_ALIVE_INTERVAL,this.entry.content.on("change",function(){var e=this.entry.content.changedAttributes(),t=this.entry.content.previousAttributes();this.handleJobProgress(e,t)},this),this.entry.content.on("change:dispatchState",function(){this.entry.content.get("dispatchState")&&!this.isPreparing()&&!this.prepared&&(this.prepared=!0,this.trigger("prepared"))},this),this.enableSimplePoller?(this.ticker=new l(100),this.ticker.on("tick",function(){this.safeFetch({data:{app:this.entry.acl.get("app"),owner:this.entry.acl.get("owner"),sharing:this.entry.acl.get("sharing")}})},this),this.entry.content.on("change:dispatchState",function(){this.entry.content.get("isDone")&&this.ticker.stop()},this),this.on("prepared",function(){var e=0,t=30,n=function(){var r;e++;if(this.entry.content.get("isDone")){this.off("sync",n,this);return}this.isReportSearch()?this.entry.content.get("isPreviewEnabled")?r=this.entry.content.get("resultPreviewCount"):r=this.entry.content.get("resultCount"):r=this.entry.content.get("eventAvailableCount");if(r>0||e===t)this.off("sync",n,this),this.trigger("slowDownPoller")}.bind(this);this.on("slowDownPoller",function(){this.ticker.reset({delay:this.pollingOptions.delay,force:!0})},this),this.on("sync",n,this)},this)):(this.jobPoller=i.getPoller(this,this.pollingOptions),this.childObjects=[],this.preserveChildrenOnDestroy=n.preserveChildrenOnDestroy||!1,this.entry.acl.on("change",function(){e.extend(this.jobPoller.options,{data:{app:this.entry.acl.get("app"),owner:this.entry.acl.get("owner"),sharing:this.entry.acl.get("sharing")}})},this)),this.error.on("change",function(){s.messagesContainsOneOfTypes(this.error.get("messages"),[s.NOT_FOUND])&&this.handleJobDestroy()},this),this.entry.content.on("change:isFailed",function(){this.entry.content.get("isFailed")===!0&&this.handleJobDestroy()},this),this.on("destroy",this.handleJobDestroy,this)},handleJobProgress:function(e,n){if(this.isNew())return!1;var r=this.entry.content.get("isRealTimeSearch"),i=this.entry.content.get("reportSearch"),o=this.getAdhocSearchMode()===s.VERBOSE,u=this.entry.content.get("isPreviewEnabled"),a=this.entry.content.get("isDone"),f=t.isEmpty(e);if(f||!a&&i&&!u&&!o)return!1;var l=!t(e.scanCount).isUndefined()&&e.scanCount>n.scanCount,c=!t(e.eventCount).isUndefined(),h=!t(e.resultCount).isUndefined(),p=!t(e.isDone).isUndefined()&&e.isDone===!0,d=l||c||h||p||r;return d?(this.trigger("jobProgress"),this.enableSimplePoller||this.fetchManagedChildren(),p&&this.processKeepAlive&&this.startKeepAlive(),!0):!1},handleJobDestroy:function(){this.enableSimplePoller||this.preserveChildrenOnDestroy||t(this.childObjects).each(function(e){e.destroy()}),this.stopPolling(),this.processKeepAlive=!1,this.stopKeepAlive()},startKeepAlive:function(){f.off("timeout",null,this),f.off("start",null,this),f.on("timeout",this.stopKeepAlive,this),f.on("start",this.startKeepAlive,this),this.stopKeepAlive(),this.keepAlivePoller=new l(this.keepAliveInterval),this.keepAlivePoller.on("tick",function(){this.control.save({},{data:{action:"touch"},success:function(e,t,n){u.log("touched job:",e.id)}.bind(this),error:function(e,t,n){if(!(!t.hasOwnProperty("status")||t.status!=0&&t.status!=12029))return;u.log("error touching job (stopping keep alive):",e.id),this.keepAlivePoller.stop()}.bind(this)})},this),this.keepAlivePoller.start()},stopKeepAlive:function(){this.keepAlivePoller&&(this.keepAlivePoller.stop(),this.keepAlivePoller.off())},startPolling:function(e){f.off("timeout",null,this),f.off("start",null,this),f.on("timeout",this.stopPolling,this),f.on("start",function(){this.startPolling(!0)},this),this.enableSimplePoller?(e||!this.entry.content.get("isDone")&&!this.entry.content.get("isFailed"))&&this.ticker.start(!0):this.jobPoller.start()},stopPolling:function(){this.enableSimplePoller?this.ticker.stop():this.jobPoller.stop()},noParamControlUpdate:function(t,n){return n&&n.data&&delete n.data,this.control.save({},e.extend(!0,n,{data:{action:t}}))},pause:function(e){return this.noParamControlUpdate("pause",e)},unpause:function(e){return this.noParamControlUpdate("unpause",e)},finalize:function(e){return this.noParamControlUpdate("finalize",e)},cancel:function(e){return this.noParamControlUpdate("cancel",e)},touch:function(e){return this.noParamControlUpdate("touch",e)},setTTL:function(t,n){return n&&n.data&&delete n.data,this.control.save({},e.extend(!0,n,{data:{action:"setttl",ttl:t}}))},setPriority:function(t,n){return n&&n.data&&delete n.data,this.control.save({},e.extend(!0,n,{data:{action:"setpriority",priority:t}}))},enablePreview:function(e){return this.noParamControlUpdate("enablepreview",e)},disablePreview:function(e){return this.noParamControlUpdate("disablepreview",e)},saveControlUpdate:function(t,n){n=n||{},n.data=n.data||{};var r={action:t,auto_cancel:n.data.auto_cancel,auto_pause:n.data.auto_pause,email_list:n.data.email_list,email_subject:n.data.email_subject,email_results:n.data.email_results,ttl:n.data.ttl};return n&&n.data&&delete n.data,this.control.save({},e.extend(!0,n,{data:r}))},saveJob:function(e){return this.saveControlUpdate("save",e)},unsaveJob:function(e){return this.saveControlUpdate("unsave",e)},makeWorldReadable:function(t){var n=this.entry.acl.get("owner"),r={sharing:s.GLOBAL,owner:this.entry.acl.get("owner"),"perms.read":"*"};return t&&t.data&&delete t.data,this.acl.save({},e.extend(!0,t,{data:r}))},undoWorldReadable:function(t){var n=this.entry.acl.get("owner"),r={sharing:s.GLOBAL,owner:n,"perms.read":""};return t&&t.data&&delete t.data,this.acl.save({},e.extend(!0,t,{data:r}))},isSharedAccordingToTTL:function(e){var t=this.entry.acl.permsToObj();return t.read.indexOf("*")!=-1&&this.entry.content.get("ttl")===e?!0:!1},saveIsBackground:function(e){return this.entry.content.custom.set("isBackground","1"),this.save({},e)},isBackground:function(){return a.normalizeBoolean(this.entry.content.custom.get("isBackground"))},register:function(e,t){var n=new h(e,t,this);this.childObjects.push(n),this.entry.content.get("isDone")===!0&&n.fetch({sid:this.id})},fetchManagedChild:function(e){var n=t(this.childObjects).find(function(t){return t.getObservable()===e});if(!n)return u.error("Search Job Manager: can only refresh an object that has already been registered",e),!1;n.fetch({sid:this.id})},fetchManagedChildren:function(){t(this.childObjects).each(function(e){e.fetch({sid:this.id})}.bind(this))},resultCountSafe:function(){return this.entry.content.get("isPreviewEnabled")&&!this.entry.content.get("isDone")?this.entry.content.get("resultPreviewCount"):this.entry.content.get("resultCount")},eventAvailableCountSafe:function(){return this.entry.content.get("statusBuckets")==0?this.resultCountSafe():this.entry.content.get("eventAvailableCount")},latestTimeSafe:function(){var e=this.entry;return e.content.get("latestTime")||e.get("published")},isQueued:function(){return this.checkUppercaseValue("dispatchState",p.QUEUED)},isParsing:function(){return this.checkUppercaseValue("dispatchState",p.PARSING)},isFinalizing:function(){return this.checkUppercaseValue("dispatchState",p.FINALIZING)},isPreparing:function(){return this.isQueued()||this.isParsing()},isRunning:function(){return!this.isNew()&&!this.entry.content.get("isPaused")&&!this.entry.content.get("isDone")&&!this.isPreparing()&&!this.isFinalizing()},isReportSearch:function(){return this.entry.content.get("reportSearch")?!0:!1},isOverAllTime:function(){var e=this.getDispatchEarliestTime();return(!e||e==="0")&&!this.getDispatchLatestTime()},isRealtime:function(){return this.entry.content.get("isRealTimeSearch")},checkUppercaseValue:function(e,t){var n=this.entry.content.get(e);return n?n.toUpperCase()===t:!1},getDispatchEarliestTime:function(){var e=this.entry.content.request.get("earliest_time");return e===void 0?this.entry.content.get("searchEarliestTime"):e},getDispatchEarliestTimeOrAllTime:function(){return this.entry.content.get("delegate")==="scheduler"&&this.entry.content.get("searchLatestTime")!==void 0?this.entry.content.get("searchEarliestTime")||"0":this.entry.content.request.get("earliest_time")||"0"},getDispatchLatestTime:function(){var e=this.entry.content.request.get("latest_time");return e===void 0?this.entry.content.get("searchLatestTime"):e},getDispatchLatestTimeOrAllTime:function(){var e=this.entry.content.get("searchLatestTime");return this.entry.content.get("delegate")==="scheduler"&&e!==void 0?e:this.entry.content.request.get("latest_time")||""},getStrippedEventSearch:function(){var e=this.entry.content.get("eventSearch");return e&&(e=a.stripLeadingSearchCommand(e)),e},getSearch:function(){var e=this.entry.get("name");return e?e:this.entry.content.request.get("search")},getAdhocSearchMode:function(){var e=this.entry.content.request.get("adhoc_search_level"),t=this.entry.content.get("statusBuckets"),n;if(!e){if(t!==void 0&&t==0)return s.FAST;n=this.entry.content.get("delegate");if(this.entry.content.get("isSavedSearch")&&n==="scheduler")return s.FAST}return e},canBePausedOnRemove:function(){return!this.isNew()&&!this.entry.content.get("isDone")&&!this.get("cannotPauseOnRemove")&&!this.entry.content.get("isPaused")&&!this.isBackground()&&!this.entry.content.get("isSaved")?!0:!1},deepOff:function(){r.prototype.deepOff.apply(this,arguments),f.off(null,null,this)}},{createMetaDataSearch:function(e,t,n){var i=new p({},{delay:r.DEFAULT_METADATA_POLLING_INTERVAL,enableSimplePoller:!0});return i.save({},{data:{app:n.get("app"),owner:n.get("owner"),search:e,preview:"true",earliest_time:"rt",latest_time:"rt",auto_cancel:r.DEFAULT_AUTO_CANCEL,max_count:1e5},success:function(e,n){t.resolve()},error:function(e,n){t.resolve()}}),i}});return p}),define("util/pdf_utils",["underscore","jquery","splunk.util","util/console","models/AlertAction","models/Job","splunk.config"],function(e,t,n,r,i,s,o){function c(n,i,u,a){var f=t.Deferred();return l().done(function(t){u=u.split(/[,\s]+/).join(",");var l={server:t.getSetting("mailserver","localhost"),use_ssl:t.getSetting("use_ssl","false"),use_tls:t.getSetting("use_tls","false"),to:u,sendpdf:"True",from:t.getSetting("from","splunk@localhost"),papersize:a.paperSize||"a2",paperorientation:a.paperOrientation||"portrait",pdfview:n},c="| sendemail "+e(l).map(function(e,t){return[t,JSON.stringify(e)].join("=")}).join(" ");r.log("Starting search %o",c);var h=new s;h.save({},{data:{search:c,earliest_time:"0",latest_time:"now",app:i,namespace:i,owner:o.USERNAME,ui_dispatch_app:i,ui_dispatch_view:n,preview:!1}}).done(e.bind(function(){h.startPolling(),h.entry.content.on("change:isDone",function(t,n){if(n){var i=h.entry.content.get("messages");e(i).each(function(e){e.type==="ERROR"&&r.error(e.text)}),e(i).any(function(e){return e.type==="ERROR"})?f.reject(e(i).pluck("text")[0]):f.resolve(),e.defer(e.bind(h.destroy,h))}}),h.entry.content.on("change:isFailed",function(t,n){n&&f.reject(),e.defer(e.bind(h.destroy,h))}),h.on("error",function(){f.reject("Error creating search job"),e.defer(e.bind(h.destroy,h))})},this)).fail(e.bind(function(){r.log("Search creation fail",arguments)},this))}).fail(function(){f.reject()}),f.promise()}function h(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var u="pdfgen",a="deprecated",f=e.once(function(){var e=t.Deferred();return o.PDFGEN_IS_AVAILABLE?e.resolve(!0,u):t.getJSON(n.make_url("report/is_enabled")).success(function(t){t&&t.status=="enabled"?e.resolve(!0,a):e.resolve(!1,t&&t.status)}).error(function(){e.resolve(!1)}),e.promise()}),l=e.once(function(){var e=t.Deferred(),n=new i({id:"email"});return n.fetch().done(function(){e.resolve(n)}).fail(function(){e.reject()}),e.promise()}),p=function(i,s,o){var u=n.make_full_url("splunkd/__raw/services/pdfgen/render"),a=t('<form method="POST" target="_blank"></form>').attr("action",u);t("<input/>").attr({type:"hidden",name:"input-dashboard-xml",value:h(i)}).appendTo(a),t("<input/>").attr({type:"hidden",name:"namespace",value:s}).appendTo(a),t("<input/>").attr({type:"hidden",name:"splunk_form_key",value:n.getFormKey()}).appendTo(a),o&&e.each(o,function(e,n){t("<input/>").attr({type:"hidden",name:n,value:e}).appendTo(a)}),r.log("submitting form",a[0]),a.appendTo(document.body).submit(),e.defer(function(){a.remove()})},d=function(r,i,s,o){var l=t.Deferred();return f().done(function(t,f){var c=o?"input-"+o:"input-dashboard",h={namespace:i};h[c]=r,f===u?(s=e.extend(h,s||{}),l.resolve(n.make_full_url("splunkd/__raw/services/pdfgen/render",s))):f===a?l.resolve([n.make_url("app",i,r),n.propToQueryString({output:"pdf"})].join("?")):l.reject()}).fail(function(){l.reject()}),l.promise()};return{isPdfServiceAvailable:f,getRenderURL:d,downloadReportFromXML:p,getEmailAlertSettings:l,sendTestEmail:c}}),define("uri/route",["underscore","splunk.util"],function(e,t){var n={};return n.encodeRoot=function(t,n){var r=e.map((t||"").split("/"),function(e){return encodeURIComponent(e)});return t=r.join("/"),t=t?"/"+t:t,t+"/"+encodeURIComponent(n)},n.staticFile=function(e,t,r,i){return n.encodeRoot(e,t)+"/static/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)},n.img=function(e,t,r,i){return n.encodeRoot(e,t)+"/static/"+encodeURIComponent(r)+"/img/"+encodeURIComponent(i)},n.page=function(r,i,s,o,u){typeof o=="undefined"&&(o="");var a=n.encodeRoot(r,i)+"/app/"+encodeURIComponent(s);return e.isArray(o)?e.each(o,function(e){a+="/"+encodeURIComponent(e)}):a+="/"+encodeURIComponent(o),u&&(u.data&&(a=a+"?"+t.propToQueryString(u.data)),u.absolute&&(a=window.location.protocol+"//"+window.location.host+a)),a},n.appIcon=function(e,t,r,i,s){var o="";return window&&window.devicePixelRatio>1&&(o="_2x"),n.splunkdNS(e,t,r,i,"static/appIcon"+o+".png",s)},n.appIconAlt=function(e,t,r,i,s){var o="";return window&&window.devicePixelRatio>1&&(o="_2x"),n.splunkdNS(e,t,r,i,"static/appIconAlt"+o+".png",s)},n.appLogo=function(e,t,r,i,s){var o="";return window&&window.devicePixelRatio>1&&(o="_2x"),n.splunkdNS(e,t,r,i,"static/appLogo"+o+".png",s)},n.splunkdNS=function(e,t,r,i,s){return n.encodeRoot(e,t)+"/splunkd/__raw/servicesNS/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+s},n.data_models=function(e,t,r,i){return n.page(e,t,r,"data_models",i)},n.data_model_explorer=function(e,t,r,i){return n.page(e,t,r,"data_model_explorer",i)},n.pivot=function(e,t,r,i){return n.page(e,t,r,"pivot",i)},n.data_model_manager=function(e,t,r,i){return n.page(e,t,r,"data_model_manager",i)},n.data_model_editor=function(e,t,r,i){return n.page(e,t,r,"data_model_editor",i)},n.search=function(e,t,r,i){return n.page(e,t,r,"search",i)},n.report=function(e,t,r,i){return n.page(e,t,r,"report",i)},n.reports=function(e,t,r,i){return n.page(e,t,r,"reports",i)},n.alert=function(e,t,r,i){return n.page(e,t,r,"alert",i)},n.alerts=function(e,t,r,i){return n.page(e,t,r,"alerts",i)},n.editDashboard=function(e,t,r,i,s){return n.page(e,t,r,[i,"edit"],s)},n.logout=function(e,t){return n.encodeRoot(e,t)+"/account/logout"},n.jobInspector=function(e,r,i,s){var o={sid:s,namespace:i};return n.encodeRoot(e,r)+"/search/inspector"+"?"+t.propToQueryString(o)},n.ifx=function(e,r,i,s,o){var u={sid:s,namespace:i,offset:o};return n.encodeRoot(e,r)+"/ifx"+"?"+t.propToQueryString(u)},n.manager=function(r,i,s,o,u){var a=n.encodeRoot(r,i)+"/manager/"+encodeURIComponent(s);return e.isArray(o)?e.each(o,function(e){a+="/"+encodeURIComponent(e)}):a+="/"+encodeURIComponent(o),u&&u.data&&(a=a+"?"+t.propToQueryString(u.data)),a},n.managerEdit=function(e,t,r,i,s,o){return o=o||{},o=$.extend(!0,{data:{action:"edit",uri:s}},o),n.manager(e,t,r,i,o)},n.triggeredAlerts=function(e,r,i,s){var o=n.encodeRoot(e,r)+"/alerts/"+encodeURIComponent(i);return s&&s.data&&(o=o+"?"+t.propToQueryString(s.data)),o},n.docSearch=function(e,n,r,i,s){var o="http://docs.splunk.com/Special:SplunkSearch/docs",u={locale:e,versionNumber:n,license:r?"free":"pro",installType:i?"trial":"prod",q:s};return o+"?"+t.propToQueryString(u)},n.docHelp=function(e,r,i){var s=n.encodeRoot(e,r)+"/help",o={location:i};return s+"?"+t.propToQueryString(o)},n.docHelpInAppContext=function(e,r,i,s,o,u,a){var f=n.encodeRoot(e,r)+"/help",l={location:i};return u&&(a?l.location="["+a+"]"+l.location:l.location="["+s+":"+o+"]"+l.location),f+"?"+t.propToQueryString(l)},n.exportUrl=function(e,r,i,s,o,u,a,f,l,c){c=c||{};var h=l?"results":"event",p=n.encodeRoot(e,r)+"/api/search/jobs/"+encodeURIComponent(i)+"/"+h,d={isDownload:!0,timeFormat:c.timeFormat||"%FT%T.%Q%:z",maxLines:0,count:f,filename:s||"",outputMode:o,"spl_ctrl-limit":u,"spl_ctrl-count":a};return p+="?"+t.propToQueryString(d),p},n.getContextualPageRouter=function(t){var r=t.get("root"),i=t.get("locale"),s=t.get("app"),o=["page","docSearch","docHelp","docHelpInAppContext","exportUrl","exportUrl","getContextualPageRouter","pageStart","encodeRoot"],u=e(n).chain().functions().difference(o),a={};return e(u).each(function(t){var o=n[t];a[t]=function(){var t=[r,i,s].concat(e(arguments).toArray());return o.apply(null,t)}}),a},n.appNavUrl=function(e,t,r){return n.encodeRoot(e,t)+"/appnav/"+encodeURIComponent(r||"")},n.viewStrings=function(e,t,r,i){return n.page(e,t,r,i)+"/strings"},n}),define("models/Application",["models/Base"],function(e){return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments)},getPermissions:function(e){return{app:this.get("app"),owner:e==="private"?this.get("owner"):"nobody"}}})}),define("models/services/AppLocal",["models/SplunkDBase"],function(e){return e.extend({url:"apps/local",initialize:function(){e.prototype.initialize.apply(this,arguments)},appAllowsDisable:function(){return this.entry.links.get("disable")?!0:!1}})}),define("models/services/authentication/User",["underscore","models/SplunkDBase"],function(e,t){return t.extend({FREE_PAYLOAD:{links:{create:"/services/authentication/users/_new"},generator:{},entry:[{name:"admin",links:{alternate:"/services/authentication/users/admin",list:"/services/authentication/users/admin",edit:"/services/authentication/users/admin"},author:"system",acl:{app:"",can_list:!0,can_write:!0,modifiable:!1,owner:"system",perms:{read:["*"],write:["*"]},removable:!1,sharing:"system"},fields:{required:[],optional:["defaultApp","email","password","realname","restart_background_jobs","roles","tz"],wildcard:[]},content:{isFree:!0,capabilities:[],defaultApp:"launcher",defaultAppIsUserOverride:!1,defaultAppSourceRole:"system","eai:acl":null,email:"changeme@example.com",password:"********",realname:"Administrator",restart_background_jobs:!0,roles:["admin"],type:"Splunk",tz:""}}],paging:{total:1,perPage:30,offset:0},messages:[]},urlRoot:"authentication/users",url:"authentication/users",initialize:function(){t.prototype.initialize.apply(this,arguments)},getCapabilities:function(){return this.entry.content.get("capabilities")||[]},hasCapability:function(t){return this.isFree()?!0:this.isNew()||e.indexOf(this.getCapabilities(),t)!==-1},canAccelerateDataModel:function(){return this.isFree()?!1:this.hasCapability("accelerate_datamodel")},canSearch:function(){return this.hasCapability("search")},canRTSearch:function(){return this.hasCapability("rtsearch")},canScheduleRTSearch:function(){return this.hasCapability("schedule_rtsearch")},canScheduleSearch:function(){return this.hasCapability("schedule_search")},canEditMonitor:function(){return this.hasCapability("edit_monitor")},canManageRemoteApps:function(){return this.hasCapability("rest_apps_management")},canEditViewHtml:function(){return this.hasCapability("edit_view_html")},isFree:function(){return this.entry.content.get("isFree")}})}),define("models/services/data/ui/Time",["jquery","splunk.util","models/SplunkDBase","util/time_utils"],function(e,t,n,r){return n.extend({url:"data/ui/times",initialize:function(){n.prototype.initialize.apply(this,arguments)},isRealTime:function(){return this.isDisabled()?!1:r.isRealtime(this.entry.content.get("latest_time"))},isPeriod:function(){if(this.isDisabled())return!1;var e=this.entry.content.get("earliest_time"),t=this.entry.content.get("latest_time");return e&&e.indexOf("@")!=-1&&e.indexOf("-")!=0?!0:e&&t&&e.indexOf("@")!=-1&&t.indexOf("@")!=-1?!0:!1},isLast:function(){if(this.isDisabled())return!1;if(this.isPeriod())return!1;var e=this.entry.content.get("earliest_time");return e?e.indexOf("-")==0:!1},isOther:function(){return this.isDisabled()?!1:!this.isRealTime()&&!this.isPeriod()&&!this.isLast()&&!this.isSubMenu()},isDisabled:function(){return this.entry.content.get("disabled")},isSubMenu:function(){return this.entry.content.get("is_sub_menu")==="1"}})}),define("models/fetch_data/EAIFetchData",["underscore","models/Base"],function(e,t){return t.extend({defaults:{filter:{}},toJSON:function(){var n=t.prototype.toJSON.call(this);n.sortKey&&(n.sort_key=n.sortKey,n.sort_dir=n.sortDirection),delete n.sortKey,delete n.sortDirection;if(e(n.filter).size()>0){var r=[];e(n.filter).each(function(e,t){r.push(t+"=*"+e+"*")}),n.search=r.join(" ")}return delete n.filter,n}})}),define("collections/SplunkDsBase",["jquery","underscore","backbone","models/SplunkDBase","models/fetch_data/EAIFetchData","collections/Base","util/splunkd_utils"],function(e,t,n,r,i,s,o){return s.extend({model:r,initialize:function(e,t){t=t||{},t.fetchData=t.fetchData||new i,s.prototype.initialize.call(this,e,t)},sync:function(r,i,s){s=s||{};var u,a,f={data:{output_mode:"json"},traditional:!0};switch(r){case"read":if((window.$C.SPLUNKD_FREE_LICENSE||s.isFreeLicense)&&i.FREE_PAYLOAD){s.success&&s.success(i,i.FREE_PAYLOAD,s);var l=e.Deferred();return l.resolve.apply(l,[i,i.FREE_PAYLOAD,s])}a=t.isFunction(i.url)?i.url():i.url;var c={};return s.data&&(c=e.extend(c,{app:s.data.app||undefined,owner:s.data.owner||undefined,sharing:s.data.sharing||undefined})),f.url=o.fullpath(a,c),e.extend(!0,f,s),delete f.data.app,delete f.data.owner,delete f.data.sharing,n.sync.call(this,"read",i,f);default:throw new Error("invalid method: "+r)}},parse:function(n){var r=n.entry,i=e.extend(!0,{},n);return delete i.entry,t.map(r,function(t){var n=e.extend(!0,{},i);return n.entry=[e.extend(!0,{},t)],n})},setFromSplunkD:function(t,n){this.reset(t,e.extend({parse:!0},n))}},{availableWithUserWildCardSearchString:function(e){return'((eai:acl.sharing="user" AND eai:acl.owner="'+e+'") OR (eai:acl.sharing!="user"))'}})}),define("collections/services/data/ui/Times",["models/services/data/ui/Time","collections/SplunkDsBase"],function(e,t){return t.extend({url:"data/ui/times",model:e,initialize:function(){t.prototype.initialize.apply(this,arguments)},filterToRealTime:function(e){return this.filter(function(e){return e.isRealTime()})},filterToPeriod:function(e){return this.filter(function(e){return e.isPeriod()})},filterToLast:function(e){return this.filter(function(e){return e.isLast()})},filterToOther:function(e){return this.filter(function(e){return e.isOther()})},comparator:function(e){return parseInt(e.entry.content.get("order"),10)}})}),define("models/services/server/ServerInfo",["models/SplunkDBase","splunk.util"],function(e,t){return e.extend({urlRoot:"server/info",id:"server-info",initialize:function(){e.prototype.initialize.apply(this,arguments)},hasAddOn:function(e){var t=this.entry.content.get("addOns");return t?t.hasOwnProperty(e):!1},hasHadoopAddon:function(){return this.hasAddOn("hadoop")},isFreeLicense:function(){return t.normalizeBoolean(this.entry.content.get("isFree"))},hasEnterpriseLicense:function(){return this.entry.content.get("activeLicenseGroup")=="Enterprise"},getBranding:function(){return this.entry.content.get("product_type")}})}),define("collections/services/AppLocals",["jquery","underscore","backbone","models/services/AppLocal","collections/SplunkDsBase","util/general_utils"],function(e,t,n,r,i,s){return i.extend({model:r,url:"apps/local",initialize:function(){i.prototype.initialize.apply(this,arguments)},sortWithString:function(e){e=typeof e=="string"?e:"";var n={},r=e.split(",");if(t.isArray(r)&&r.length>0)for(var i=0,o=r.length;i<o;i++)n[r[i]]=i;this.comparator=function(e,r){var i=e.entry.get("name"),o=r.entry.get("name"),u=e.entry.content.get("label"),a=r.entry.content.get("label"),f=n[i],l=n[o],c=t.isNumber(f),h=t.isNumber(l);if(c&&h)return f<l?-1:1;if(!c&&!h)return s.compareWithDirection(u,a,!1);if(c&&!h)return-1;if(!c&&h)return 1},this.sort()}})}),define("splunkjs/mvc/sharedmodels",["require","exports","module","jquery","underscore","models/Application","models/services/AppLocal","models/services/authentication/User","collections/services/data/ui/Times","./utils","splunk.config","util/splunkd_utils","models/services/server/ServerInfo","collections/services/AppLocals"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("models/Application"),o=e("models/services/AppLocal"),u=e("models/services/authentication/User"),a=e("collections/services/data/ui/Times"),f=e("./utils"),l=e("splunk.config"),c=e("util/splunkd_utils"),h=e("models/services/server/ServerInfo"),p=e("collections/services/AppLocals"),d=f.getPageInfo(),v={appLocal:{model:new o,fetch:i.memoize(function(){var e=v.app.model,t=v.appLocal.model,n=t.dfd=t.fetch({url:c.fullpath(t.url+"/"+e.get("app")),data:{app:e.get("app"),owner:e.get("owner")}});return t.dfd=n,n})},user:{model:new u,fetch:i.memoize(function(){var e=v.app.model,t=v.user.model,n=t.dfd=t.fetch({url:c.fullpath(t.url+"/"+e.get("owner")),data:{app:e.get("app"),owner:e.get("owner")}});return t.dfd=n,n})},times:{model:new a,fetch:i.memoize(function(){var e=v.app.model,t=v.times.model,n=t.dfd=t.fetch({data:{app:e.get("app"),owner:e.get("owner")}});return n})},app:{model:new s({owner:l.USERNAME,root:d.root,locale:d.locale,app:d.app,page:d.page}),fetch:function(){return r.Deferred().resolve(v.app.model)}},serverInfo:{model:new h,fetch:i.memoize(function(){var e=v.serverInfo.model,t=e.dfd=e.fetch();return t})},appLocals:{model:new p,fetch:i.memoize(function(){var e=v.app.model,t=v.appLocals.model,n=t.dfd=t.fetch({data:{sort_key:"name",sort_dir:"desc",app:"-",owner:e.get("owner"),search:"visible=true AND disabled=0 AND name!=launcher",count:-1}});return n})}};return{get:function(e){if(!v.hasOwnProperty(e))throw new Error("There is no shared model '"+e+"'");var t=v[e];return t.fetch(),t.model}}}),define("models/services/SavedSearch",["models/SplunkDBase"],function(e){return e.extend({url:"saved/searches",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("models/services/data/ui/Viewstate",["underscore","models/SplunkDBase","util/splunkd_utils","splunk.util"],function(e,t,n,r){return t.extend({url:"data/ui/viewstates",initialize:function(){t.prototype.initialize.apply(this,arguments)},getFlattenedAndDedupedModules:function(){var t=this.entry.content.toJSON(),n={};return delete t["eai:acl"],delete t["eai:appName"],delete t["eai:userName"],delete t.disabled,e.each(t,function(e,t){var r=t.split("."),i=r[0].split("_")[0],s=r[1];n[i]||(n[i]={}),n[i][s]||(n[i][s]=e)}),n},convertToReportPoperties:function(){var e=this.getFlattenedAndDedupedModules(),t={},i,s,o,u,a,f,l,c,h;return e.ButtonSwitcher?(u=e.ButtonSwitcher.selected,u==="splIcon-results-table"?(t["display.general.type"]="statistics",s=!0):u==="splIcon-events-list"&&(t["display.general.type"]="events",i=!0)):(t["display.general.type"]="visualizations",o=!0),e.AxisScaleFormatter&&(t["display.visualizations.charting.axisY.scale"]=e.AxisScaleFormatter["default"]),e.FancyChartTypeFormatter&&(t["display.visualizations.type"]="charting",t["display.visualizations.charting.chart"]=e.FancyChartTypeFormatter["default"]),e.ChartTypeFormatter&&(t["display.visualizations.type"]="charting",t["display.visualizations.charting.chart"]=e.ChartTypeFormatter["default"]),e.LegendFormatter&&(t["display.visualizations.charting.legend.placement"]=e.LegendFormatter["default"]),e.LineMarkerFormatter&&(t["display.visualizations.charting.axisX.markers"]=n.normalizeBooleanTo01String(e.LineMarkerFormatter["default"])),e.NullValueFormatter&&(t["display.visualizations.charting.chart.nullValueMode"]=e.NullValueFormatter["default"]),e.StackModeFormatter&&(t["display.visualizations.charting.chart.stackMode"]=e.StackModeFormatter["default"]),e.XAxisTitleFormatter&&(t["display.visualizations.charting.axisTitleX.text"]=e.XAxisTitleFormatter["default"]),e.YAxisRangeMaximumFormatter&&(t["display.visualizations.charting.axisY.maximumNumber"]=e.YAxisRangeMaximumFormatter["default"]),e.YAxisRangeMinimumFormatter&&(t["display.visualizations.charting.axisY.minimumNumber"]=e.YAxisRangeMinimumFormatter["default"]),e.YAxisRangeMinimumFormatter&&(t["display.visualizations.charting.axisY.minimumNumber"]=e.YAxisRangeMinimumFormatter["default"]),e.YAxisTitleFormatter&&(t["display.visualizations.charting.axisTitleY.text"]=e.YAxisTitleFormatter["default"]),e.FlashChart&&(t["display.visualizations.chartHeight"]=e.FlashChart.height.replace("px","")),e.JSChart&&(t["display.visualizations.chartHeight"]=e.JSChart.height.replace("px","")),e.FlashTimeline&&(r.normalizeBoolean(e.FlashTimeline.minimized)?t["display.page.search.timeline.format"]="compact":t["display.page.search.timeline.format"]="hidden"),e.Count&&(a=e.Count["default"]||e.Count.count,s||o?t["display.prefs.statistics.count"]=a:t["display.prefs.events.count"]=a),e.DataOverlay&&(t["display.statistics.overlay"]=e.DataOverlay["default"]||e.DataOverlay.dataOverlayMode),e.HiddenSoftWrap&&(f=n.normalizeBooleanTo01String(e.HiddenSoftWrap.enable),s||o?t["display.statistics.wrap"]=f:(t["display.events.list.wrap"]=f,t["display.events.table.wrap"]=f)),e.SoftWrap&&(f=n.normalizeBooleanTo01String(e.SoftWrap.enable),s||o?t["display.statistics.wrap"]=f:(t["display.events.list.wrap"]=f,t["display.events.table.wrap"]=f)),e.MaxLines&&(t["display.events.maxLines"]=e.MaxLines["default"]||e.MaxLines.maxLines),e.RowNumbers&&(h=e.RowNumbers["default"]||e.RowNumbers.displayRowNumbers,h=n.normalizeBooleanTo01String(h),s||o?t["display.statistics.rowNumbers"]=h:t["display.events.rowNumbers"]=h),e.Segmentation&&(l=e.Segmentation["default"]||e.Segmentation.segmentation,s||o?["row","cell","none"].indexOf(l)>-1&&(t["display.statistics.drilldown"]=l):["inner","outer","full","none"].indexOf(l)>-1&&(t["display.events.list.drilldown"]=l,t["display.events.raw.drilldown"]=l)),e.FieldPicker&&(c=e.FieldPicker.fields.split(","),t["display.events.fields"]='["'+c.join('","')+'"]',t["display.page.search.showFields"]=n.normalizeBooleanTo01String(e.FieldPicker.sidebarDisplay)),t}})}),define("collections/services/search/Jobs",["models/services/search/Job","collections/SplunkDsBase"],function(e,t){return t.extend({url:"search/jobs",model:e,initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("collections/Jobs",["underscore","models/Job","collections/services/search/Jobs"],function(e,t,n){return n.extend({model:t,comparator:function(e){var t=new Date(e.entry.get("published"));return t.valueOf()||0},initialize:function(){n.prototype.initialize.apply(this,arguments)},fetchNonAutoSummaryJobs:function(t){var n='(NOT _AUTOSUMMARY AND NOT "|*summarize*action=")',r={};return t=t||{},t.data=t.data||{},t.data.count=t.data.count||10,t.data.offset=t.data.offset||0,t.data.sortKey=t.data.sortKey||"dispatch_time",t.data.sortDir=t.data.sortDir||"desc",t.data.search?t.data.search=n+" AND ("+t.data.search+")":t.data.search=n,r["NOT isDataPreview"]="1",t.data.app&&t.data.app!=="*"&&(r["eai:acl.app"]=t.data.app),delete t.data.app,t.data.owner&&t.data.owner!=="*"&&(r["eai:acl.owner"]=t.data.owner),delete t.data.owner,t.data.label&&(r.label=t.data.label),delete t.data.label,t.data.jobStatus&&t.data.jobStatus!=="*"&&(t.data.jobStatus==="running"?(r.isDone=0,r.isPaused=0,r.isFinalized=0):t.data.jobStatus==="done"?r.isDone=1:t.data.jobStatus==="paused"?r.isPaused=1:t.data.jobStatus==="finalized"&&(r.isFinalized=1)),delete t.data.jobStatus,e.each(r,function(e,n){t.data.search=t.data.search+" "+n+'="'+e+'"'}),this.fetch(t)}})}),define("models/Report",["jquery","underscore","models/services/SavedSearch","models/services/data/ui/Viewstate","collections/Jobs","util/time_utils","util/splunkd_utils","util/general_utils","splunk.util","splunk.i18n","uri/route","util/math_utils"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=n.extend({reportTree:{match:{"display.general.type":{visualizations:{match:{"display.visualizations.type":{singlevalue:{view:t("single").t(),icon:"single-value",label:t("Single Value").t()},charting:{match:{"display.visualizations.charting.chart":{line:{view:t("line").t(),icon:"chart-line",label:t("Line").t()},area:{view:t("area").t(),icon:"chart-area",label:t("Area").t()},column:{view:t("column").t(),icon:"chart-column",label:t("Column").t()},bar:{view:t("bar").t(),icon:"chart-bar",label:t("Bar").t()},pie:{view:t("pie").t(),icon:"chart-pie",label:t("Pie").t()},scatter:{view:t("scatter").t(),icon:"chart-scatter",label:t("Scatter").t()},radialGauge:{view:t("radialGauge").t(),icon:"gauge-radial",label:t("Radial").t()},fillerGauge:{view:t("fillerGauge").t(),icon:"gauge-filler",label:t("Filler").t()},markerGauge:{view:t("markerGauge").t(),icon:"gauge-marker",label:t("Marker").t()}}}}}}},statistics:{view:t("statistics").t()},events:{view:t("events").t()}}}},initialize:function(){n.prototype.initialize.apply(this,arguments),this.jobs=new i,this.associated.jobs=this.jobs},sync:function(t,i,s){if(t!=="read")return n.prototype.sync.apply(this,arguments);s=s||{};var u=e.Deferred(),f=e.Deferred(),l=new n({id:this.id}),c;return c=l.fetch(e.extend(!0,{},s,{success:function(e,t){this.setFromSplunkD(l.toSplunkD());var n=this.entry.content.get("vsid"),i=this.entry.content.get("displayview"),u=a.normalizeBoolean(this.entry.content.get("display.general.migratedFromViewState")),c,h;n&&i&&!u?(c=/.*:/.test(n)?n:i+":"+n,h=new r,h.fetch({url:o.fullpath(h.url+"/"+encodeURIComponent(c),{app:s.data.app,owner:s.data.owner}),success:function(e,n){var r=h.convertToReportPoperties();r["display.general.migratedFromViewState"]="1",this.entry.content.set(r),s.success&&s.success(this,t,s),f.resolve()}.bind(this),error:function(e,n){this.entry.content.set("display.general.migratedFromViewState","1"),s.success&&s.success(this,t,s),f.resolve()}.bind(this)})):(s.success&&s.success(this,t,s),f.resolve())}.bind(this),error:function(e,t){s.error&&s.error(this,t,s)}.bind(this)})),e.when(f).then(function(){c.done(function(){u.resolve.apply(u,arguments)}.bind(this))}.bind(this)),c.fail(function(){u.reject.apply(u,arguments)}.bind(this)),u.promise()},fetchJobs:function(e){var t=this.entry.get("name");if(!t)throw"Report must have a name to associate it with Jobs";return e=e||{},e.data=e.data||{},e.data.app=this.entry.acl.get("app"),e.data.owner=this.entry.acl.get("owner"),e.data.label=t,this.jobs.fetchNonAutoSummaryJobs(e)},openInView:function(){return this.entry.content.get("request.ui_dispatch_view")==="pivot"||this.entry.content.get("request.ui_dispatch_view")===""&&this.isPivotReport()?"pivot":"search"},getVizType:function(){var e=this,n=function(r){if(r&&r.view)return r;if(r&&r.match){var i;t(r.match).each(function(t,n){i=t[e.entry.content.get(n)]},e);if(i)return n(i)}};return n(this.reportTree.match["display.general.type"].visualizations)},isAlert:function(){var e=this.entry.content.get("is_scheduled"),t=this.entry.content.get("alert_type"),n=this.entry.content.get("alert.track"),r=this.entry.content.get("actions"),i=this.isRealTime();return e&&(t!=="always"||n||i&&r)},isRealTime:function(){var e=s.isRealtime(this.entry.content.get("dispatch.earliest_time")),t=s.isRealtime(this.entry.content.get("dispatch.latest_time"));return e&&t},isPivotReport:function(){return u.isValidPivotSearch(this.entry.content.get("search"))},stripAlertAttributes:function(e){return this.entry.content.set({"alert.track":0,alert_type:"always",is_scheduled:0},e)},stripReportAttributesToSaveAsAlert:function(e){return this.entry.content.set({auto_summarize:!1},e)},stripPivotAttributes:function(){this.entry.content.set({"display.page.pivot.dataModel":""})},setTimeRangeWarnings:function(e){var n=this.entry.content.get("dispatch.earliest_time"),r=this.entry.content.get("dispatch.latest_time"),i=[],u,a;(!s.isEmpty(n)&&s.isAbsolute(n)||!s.isEmpty(r)&&s.isAbsolute(r))&&i.push(o.createMessageObject(o.WARNING,t("Your report has an absolute time range.").t()));if(e)if(e.isAlert()){u=e.entry.content.get("dispatch.earliest_time"),a=e.entry.content.get("dispatch.latest_time");if(n!==u||r!==a)this.entry.content.set({"dispatch.earliest_time":u,"dispatch.latest_time":a}),i.push(o.createMessageObject(o.WARNING,t("Your changes to the time range of this alert will not be saved.").t()))}else!e.isRealTime()&&e.entry.content.get("is_scheduled")&&this.isRealTime()&&(this.entry.content.set({is_scheduled:!1}),i.push(o.createMessageObject(o.WARNING,t("Saving a scheduled report as a real-time report will remove the schedule.").t())));i.length&&this.error.set({messages:i})},setAccelerationWarning:function(e,n){var r=this.entry.content.get("display.page.search.mode")===o.VERBOSE,i=[];e?r&&(t.isUndefined(n)||n.entry.content.get("display.page.search.mode")===o.VERBOSE)?(i.push(o.createMessageObject(o.WARNING,t("A report running in verbose mode cannot be accelerated. Your search mode will be saved as Smart Mode.").t())),this.entry.content.set("display.page.search.mode",o.SMART)):r&&!t.isUndefined(n)&&(i.push(o.createMessageObject(o.WARNING,t("A report running in verbose mode cannot be accelerated. Your search mode will not be saved.").t())),this.entry.content.set("display.page.search.mode",n.entry.content.get("display.page.search.mode"))):(i.push(o.createMessageObject(o.WARNING,t("This report cannot be accelerated. Acceleration will be disabled.").t())),this.entry.content.set("auto_summarize",!1)),i.length&&(this.trigger("serverValidated",!1,this,i),this.error.set({messages:i}))},setPivotWarning:function(){var e=[];this.isPivotReport()&&(e.push(o.createMessageObject(o.WARNING,t("Saving from Search will prevent this report from opening in Pivot.").t())),this.stripPivotAttributes()),e.length&&(this.trigger("serverValidated",!1,this,e),this.error.set({messages:e}))},setDisplayType:function(e,t){var n=this.entry.content.get("display.general.type")||"statistics";if(n==="events")e&&(n="statistics");else if(n==="statistics"||n==="visualizations")e||(n="events");this.entry.content.set({"display.general.type":n},t)},contentEqualsFromBlacklist:function(e,n){var r=u.deleteFromObjectByRegexes(this.entry.content.toJSON(),n),i=u.deleteFromObjectByRegexes(e.entry.content.toJSON(),n);return t.isEqual(r,i)},canDelete:function(){return this.entry.links.get("remove")?!0:!1},canWrite:function(e,t){return this.entry.acl.get("can_write")&&(!this.entry.content.get("is_scheduled")||!!e)&&(!this.isRealTime()||!!t)},canClone:function(e,t){return(!this.entry.content.get("is_scheduled")||!!e)&&(!this.isRealTime()||!!t)},getAlertTriggerConditionString:function(){var e=this.entry.content.get("alert_type"),n=this.entry.content.get("dispatch.earliest_time"),r=this.entry.content.get("dispatch.latest_time"),i=n&&s.isRealtime(n)||r&&s.isRealtime(r),o=this.entry.content.get("alert_threshold"),u=s.parseTimeString(n),l=this.entry.content.get("alert_condition"),c=n==="rt"||r==="rt";switch(e){case"always":return i?t("Per-Result.").t():t("Number of Results is > 0.").t();case"number of events":case"number of hosts":case"number of sources":if(c)return t("Unsupported.").t();var h={"number of events":t("Results").t(),"number of hosts":t("Hosts").t(),"number of sources":t("Sources").t()};switch(this.entry.content.get("alert_comparator")){case"greater than":if(!i)return a.sprintf(t("Number of %(typetext)s is > %(threshold)s.").t(),{typetext:h[e],threshold:o});switch(u.unit){case"m":return a.sprintf(f.ungettext("Number of %(typetext)s is > %(threshold)s in %(timeAmount)s minute.","Number of %(typetext)s is > %(threshold)s in %(timeAmount)s minutes.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext("Number of %(typetext)s is > %(threshold)s in %(timeAmount)s hour.","Number of %(typetext)s is > %(threshold)s in %(timeAmount)s hours.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext("Number of %(typetext)s is > %(threshold)s in %(timeAmount)s day.","Number of %(typetext)s is > %(threshold)s in %(timeAmount)s days.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount})}break;case"less than":if(!i)return a.sprintf(t("Number of %(typetext)s is < %(threshold)s.").t(),{typetext:h[e],threshold:o});switch(u.unit){case"m":return a.sprintf(f.ungettext("Number of %(typetext)s is < %(threshold)s in %(timeAmount)s minute.","Number of %(typetext)s is < %(threshold)s in %(timeAmount)s minutes.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext("Number of %(typetext)s is < %(threshold)s in %(timeAmount)s hour.","Number of %(typetext)s is < %(threshold)s in %(timeAmount)s hours.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext("Number of %(typetext)s is < %(threshold)s in %(timeAmount)s day.","Number of %(typetext)s is < %(threshold)s in %(timeAmount)s days.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount})}break;case"equal to":if(!i)return a.sprintf(t("Number of %(typetext)s is = %(threshold)s.").t(),{typetext:h[e],threshold:o});switch(u.unit){case"m":return a.sprintf(f.ungettext("Number of %(typetext)s is = %(threshold)s in %(timeAmount)s minute.","Number of %(typetext)s is = %(threshold)s in %(timeAmount)s minutes.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext("Number of %(typetext)s is = %(threshold)s in %(timeAmount)s hour.","Number of %(typetext)s is = %(threshold)s in %(timeAmount)s hours.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext("Number of %(typetext)s is = %(threshold)s in %(timeAmount)s day.","Number of %(typetext)s is = %(threshold)s in %(timeAmount)s days.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount})}break;case"not equal to":if(!i)return a.sprintf(t("Number of %(typetext)s is &#8800; %(threshold)s.").t(),{typetext:h[e],threshold:o});switch(u.unit){case"m":return a.sprintf(f.ungettext("Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s minute.","Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s minutes.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext("Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s hour.","Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s hours.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext("Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s day.","Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s days.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount})}break;case"drops by":return a.sprintf(t("Number of %(typetext)s drops by %(threshold)s.").t(),{typetext:h[e],threshold:o});case"rises by":return a.sprintf(t("Number of %(typetext)s rises by %(threshold)s.").t(),{typetext:h[e],threshold:o})}break;case"custom":if(c)return t("Unsupported.").t();if(!i)return a.sprintf(t('Custom. "%s".').t(),l);switch(u.unit){case"m":return a.sprintf(f.ungettext('Custom. "%(alertCondition)s" in %(timeAmount)s minute.','Custom. "%(alertCondition)s" in %(timeAmount)s minutes.',u.amount),{alertCondition:l,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext('Custom. "%(alertCondition)s" in %(timeAmount)s hour.','Custom. "%(alertCondition)s" in %(timeAmount)s hours.',u.amount),{alertCondition:l,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext('Custom. "%(alertCondition)s" in %(timeAmount)s day.','Custom. "%(alertCondition)s" in %(timeAmount)s days.',u.amount),{alertCondition:l,timeAmount:u.amount})}}},getStringOfActions:function(){var e=[];if(this.entry.content.get("action.email")||this.entry.content.get("action.script")){var n=this.entry.content.get("actions");n.search("email")!=-1&&e.push(t("Send Email").t()),n.search("script")!=-1&&e.push(t("Run a Script").t())}return this.entry.content.get("alert.track")&&e.push(t("List in Triggered Alerts").t()),e.join(t(", ").t())},routeToViewReport:function(e,t,n,r){var i={s:this.id};return this.isAlert()?l.alert(e,t,n,{data:i}):(r&&(i.sid=r),l.report(e,t,n,{data:i}))},getNearestMaxlines:function(){var e=parseInt(this.entry.content.get("display.events.maxLines"),10);return isNaN(e)&&(e=5),""+c.nearestMatchAndIndexInArray(e,[5,10,20,50,100,200,0]).value},getSortingSearch:function(){var e,n=this.entry.content,r=n.get("display.prefs.events.offset"),i=n.get("display.prefs.events.count"),s=n.get("display.events.table.sortColumn");return s&&!t.isUndefined(r)&&!t.isUndefined(i)&&(e="| sort "+(parseInt(r,10)+parseInt(i,10))+(n.get("display.events.table.sortDirection")==="desc"?" - ":" ")+s),e}},{DOCUMENT_TYPES:{ALERT:"alert",PIVOT_REPORT:"pivot-report",REPORT:"report"}});return h}),define("collections/services/SavedSearches",["models/services/SavedSearch","collections/SplunkDsBase"],function(e,t){return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments)},url:"saved/searches",model:e})}),define("collections/Reports",["models/Report","collections/services/SavedSearches"],function(e,t){return t.extend({model:e,initialize:function(){t.prototype.initialize.apply(this,arguments)}},{ALERT_SEARCH_STRING:'(is_scheduled=1 AND (alert_type!=always OR alert.track=1 OR (dispatch.earliest_time="rt*" AND dispatch.latest_time="rt*" AND actions="*" )))'})}),define("util/ajax_no_cache",["jquery"],function(e){if(!e)throw"ajax_no_cache requires jQuery.";e.ajaxPrefilter(function(e,t,n){e.type&&e.type.toUpperCase()=="GET"&&e.cache===undefined&&(e.cache=!1)})}),define("splunkjs/mvc/simplexml/controller",["require","models/Dashboard","util/router_utils","models/classicurl","backbone","jquery","underscore","../../mvc","util/xml_utils","../utils","util/pdf_utils","util/console","uri/route","../sharedmodels","util/splunkd_utils","splunk.util","../protections","collections/Reports","util/ajax_no_cache"],function(e){var t=e("models/Dashboard"),n=e("util/router_utils"),r=e("models/classicurl"),i=e("backbone"),s=e("jquery"),o=e("underscore"),u=e("../../mvc"),a=e("util/xml_utils"),f=e("../utils"),l=e("util/pdf_utils"),c=e("util/console"),h=e("uri/route"),p=e("../sharedmodels"),d=e("util/splunkd_utils"),v=e("splunk.util"),m=e("../protections"),g=e("collections/Reports");e("util/ajax_no_cache"),m.enableCSRFProtection(s),m.enableUnauthorizationRedirection(s,v.make_url("account/login"),"/account/logout");var y=t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.entry.content.on("change:eai:data",this.updateItemOrder,this)},getFlattenedXML:function(e){if(!this._itemOrder)throw new Error("Cannot create flattened XML without the item order being captured first");var t=a.$node,n=this;e=e||{};var r=t("<dashboard/>");return t("<label/>").text(this.meta.get("label")).appendTo(r),this.meta.has("description")&&t("<description/>").text(this.meta.get("description")).appendTo(r),o(this._itemOrder).each(function(i){var s=t("<row/>");if(o(i).any(function(e){return e.length>1})){var f=o(i).map(function(e){return e.length}).join(",");s.attr("grouping",f)}o(i).chain().flatten().each(function(t){var r=u.Components.get(t),i=r.model.mapToXML(o.extend({tokens:!1,flatten:!0},e)),f=a.$node("<"+i.type+"/>");i.attributes!==undefined&&f.attr(i.attributes);if(i.content)i.cdata?f.append(a.cdata(i.content)):f.text(i.content);else{n._applyTitle(f,i);var l=u.Components.get(r.model.entry.content.get("display.general.manager"));e.useLoadjob!==!1&&l&&l.job?n._applySearch(f,{search:{type:"inline",search:"| loadjob "+l.job.sid+" ignore_running=t"}}):n._applySearch(f,i),n._applyOptions(f,i),n._applyTags(f,i)}f.appendTo(s)}),s.appendTo(r)}),e&&e.indent&&a.formatXMLDocument(r),a.serialize(r)},updateElement:function(e,t,n){c.log("About to update item=%o with settings=%o",e,t);var r=this.get$XML(),i=r.find("#"+e);if(!i.length){var u=o(this._itemOrder).chain().flatten().indexOf(e).value();c.log("Node with ID=%o not found. Search for item with index=%o",e,u);if(u===-1)throw new Error("Unable to find dashboard element with ID "+e);i=r.find("row").children()[u];if(!i)throw new Error("Unable to find dashboard element with ID "+e);i=s(i)}i=i[0],c.log("Updating XML node: ",i),a.stripEmptyTextNodes(i);var f=a.$node("<"+t.type+"/>");s(i).attr("id")&&f.attr("id",s(i).attr("id")),c.log("children",i.childNodes);while(i.childNodes.length)f.append(i.childNodes[0]);return n&&n.clearOptions&&(f.find("option").remove(),delete t.options),this._applyTitle(f,t),t.search&&t.search.type==="global"?this._applyGlobalSearch(r,t):this._applySearch(f,t),this._applyOptions(f,t),this._applyTags(f,t),s(i).replaceWith(f),c.DEBUG_ENABLED&&(a.formatXMLDocument(r),c.log(a.serialize(r))),this.set$XML(r),this.save()},deleteElement:function(e){var t=o(this._itemOrder).map(function(t){return o(t).map(function(t){var n=o(t).indexOf(e);return n>-1?t.slice(0,n).concat(t.slice(n+1)):o.clone(t)})});return this.setItemOrder(t)},addElement:function(e,t){var n=a.$node("<row/>"),r=a.$node("<"+t.type+"/>");this._itemOrder.push([[t.id]]),n.append(r),this._applyTitle(r,t),this._applySearch(r,t);var i=this.get$XML();return i.find(":eq(0)").append(n),c.DEBUG_ENABLED&&(a.formatXMLDocument(i),c.log(a.serialize(i))),this.set$XML(i),this.save()},saveFormSettings:function(e,t,n){var r=this.get$XML(),i,u;if(e){r=this._migrateViewType(r,"form"),i=r.find(":eq(0)"),u=r.find(":eq(0)>fieldset");if(!u.length){u=a.$node('<fieldset autoRun="true" submitButton="false"></fieldset>');var f=r.find(":eq(0)>description");f.length?u.insertAfter(f):(f=r.find(":eq(0)>label"),f.length?u.insertAfter(f):u.prependTo(i))}var l=o(u.find('input[type="time"]')).find(function(e){return!s(e).attr("token")});if(t){var h;l?(h=s(l).find("default"),h.length||(h=a.$node("<default></default>").appendTo(l))):(l=a.$node('<input type="time" searchWhenChanged="true" />'),h=a.$node("<default></default>").appendTo(l),u.append(l)),n?o.isString(n)?h.text(n):(h.empty(),n.earliestTime&&a.$node("<earliestTime></earliestTime>").text(n.earliestTime).appendTo(h),n.latestTime&&a.$node("<latestTime></latestTime>").text(n.latestTime).appendTo(h)):h.remove()}else s(l).remove()}else r=this._migrateViewType(r,"dashboard"),r.find(":eq(0)>fieldset").remove();c.DEBUG_ENABLED&&(a.formatXMLDocument(r),c.log(a.serialize(r))),this.set$XML(r),this.save()},_migrateViewType:function(e,t){var n=e.find(":eq(0)");if(n.prop("tagName")!==t){e=s(s.parseXML("<"+t+"/>"));var r=e.find(":eq(0)"),i=n[0];o(i.attributes).each(function(e){r.attr(e.nodeName,e.nodeValue)});while(i.childNodes.length)r.append(i.childNodes[0])}return e},_applyOptions:function(e,t){t.options&&o.each(t.options,function(t,n){var r=e.find('option[name="'+n+'"]');t===""||t===null||t===void 0?r.remove():r.length?r.text(t):a.$node("<option/>").attr("name",n).text(t).appendTo(e)}),t.removeOptions&&o(t.removeOptions).each(function(t){e.find('option[name="'+t+'"]').remove()})},_applyTags:function(e,t){t.tags&&o.each(t.tags,function(t,n){e.find(n).remove(),(o.isArray(t)&&t.length||t)&&a.$node("<"+n+"/>").text(t).appendTo(e)})},_applyTitle:function(e,t){var n=e.find("title");t.title&&(n.length||(n=a.$node("<title/>").prependTo(e)),n.text(t.title))},_applySearch:function(e,t){if(t.search){e.find("searchString,searchTemplate,searchName,searchPostProcess,pivotSearch,earliestTime,latestTime").remove();var n=e.find("title");switch(t.search.type){case"inline":case"global":var r=a.$node("<searchString/>").text(t.search.search);n.length?r.insertAfter(n):r.prependTo(e),t.search.latest_time&&a.$node("<latestTime/>").text(t.search.latest_time).insertAfter(r),t.search.earliest_time&&a.$node("<earliestTime/>").text(t.search.earliest_time).insertAfter(r);break;case"postprocess":var i=a.$node("<searchPostProcess/>").text(t.search.search);n.length?i.insertAfter(n):i.prependTo(e);break;case"saved":var s=a.$node("<searchName/>").text(t.search.name);n.length?s.insertAfter(n):s.prependTo(e);break;case"pivot":throw new Error("Pivot search not implemented!");default:throw new Error("Unknown search type: "+t.search.type)}}},_applyGlobalSearch:function(e,t){var n=e.find(":eq(0)");n.children("searchTemplate,earliestTime,latestTime").remove();var r=n.children("label"),i=n.children("description"),s=a.$node("<searchTemplate/>").text(t.search.search);i.length?s.insertAfter(i):r.length?s.insertAfter(r):s.prependTo(n),t.search.latest_time&&a.$node("<latestTime/>").text(t.search.latest_time).insertAfter(s),t.search.earliest_time&&a.$node("<earliestTime/>").text(t.search.earliest_time).insertAfter(s)},_clearEmptyItems:function(e){return o(e).chain().map(function(e){return o(e).filter(function(e){return e.length>0})}).filter(function(e){return e.length>0}).value()},captureItemOrder:function(e){e=this._clearEmptyItems(e),this._itemOrder=e,this._itemOrderMap=o.object(o.flatten(e),this.get$XML().find("row").children()),this.validateItemOrder(),c.DEBUG_ENABLED&&c.log("Captured dashboard item order: %o",JSON.stringify(this._itemOrder))},updateItemOrder:function(){this._itemOrder&&this.isXML()&&this.captureItemOrder(this._itemOrder)},validateItemOrder:function(){o(this._itemOrderMap).each(function(e,t){var n=s(e).attr(t);if(n!==undefined&&n!==t)throw new Error("Invalid Item order. Expected node with ID "+t+". Instead saw "+n)})},setItemOrder:function(e){e=this._clearEmptyItems(e);var t;if(!this._itemOrder)this.captureItemOrder(e);else if(!o.isEqual(e,this._itemOrder)){var n=this.get$XML(),r=this._itemOrderMap;n.find("row").remove(),o(e).each(function(e){var t=a.$node("<row/>");if(o(e).any(function(e){return e.length>1})){var i=o(e).map(function(e){return e.length}).join(",");t.attr("grouping",i)}o.chain(e).flatten().each(function(e){var n=r[e];s(n).find("script").remove(),t.append(n)}),t.children().length||c.DEBUG_ENABLED&&c.log("Created empty row for items %o and map %o",e,r),n.find("dashboard,form").append(t)}),this._itemOrder=e,this.set$XML(n),c.log("Saving new item order",e,n[0]),t=this.save()}else c.log("no changes"),t=s.Deferred(),t.resolve();return t},isEditable:function(){return this.isDashboard()||this.isForm()}}),b=i.Router.extend({initialize:function(e){this.model=e.model,this.app=e.app},routes:{":locale/app/:app/:page?*qs":"view",":locale/app/:app/:page":"view",":locale/app/:app/:page/?*qs":"view",":locale/app/:app/:page/":"view",":locale/app/:app/:page/edit?*qs":"edit",":locale/app/:app/:page/edit":"edit","*root/:locale/app/:app/:page?*qs":"rootedView","*root/:locale/app/:app/:page":"rootedView","*root/:locale/app/:app/:page/?*qs":"rootedView","*root/:locale/app/:app/:page/":"rootedView","*root/:locale/app/:app/:page/edit?*qs":"rootedEdit","*root/:locale/app/:app/:page/edit":"rootedEdit",":locale/manager/:app/:page?*qs":"view",":locale/manager/:app/:page":"view",":locale/manager/:app/:page/?*qs":"view",":locale/manager/:app/:page/":"view","*root/:locale/manager/:app/:page?*qs":"rootedView","*root/:locale/manager/:app/:page":"rootedView","*root/:locale/manager/:app/:page/?*qs":"rootedView","*root/:locale/manager/:app/:page/":"rootedView","dj/:app/:page/":"splunkdj","dj/:app/:page/?*qs":"splunkdj","*root/dj/:app/:page/":"rootedSplunkdj","*root/dj/:app/:page/?*qs":"rootedSplunkdj"},view:function(){c.log("ROUTE: view"),this.page.apply(this,arguments),this.model.set("edit",!1)},edit:function(){c.log("ROUTE: edit"),this.page.apply(this,arguments),this.model.set("edit",!0)},rootedView:function(e){this.app.set("root",e),this.view.apply(this,o.rest(arguments))},rootedEdit:function(e){this.app.set("root",e),this.edit.apply(this,o.rest(arguments))},page:function(e,t,n){c.log("ROUTE: page(locale=%o, app=%o, page=%o)",e,t,n),this.app.set({locale:e,app:t,page:n}),r.fetch()},splunkdj:function(e,t){this.page("en-US",e,t)},rootedSplunkdj:function(e){this.app.set("root",e),this.splunkdj.apply(this,o.rest(arguments))},updateUrl:function(){var e=[this.app.get("root")||"",this.app.get("locale"),"app",this.app.get("app"),this.app.get("page")];this.model.get("edit")&&e.push("edit");var t=[e.join("/")],n=r.toURLEncodedQueryString();n.length&&t.push(n),this.navigate(t.join("?"),{replace:!1})}}),w=function(){this.readyDfd=s.Deferred();var e=this.model=new i.Model,t=this.collection={},r=this.model.app=p.get("app"),o=this.model.appLocal=p.get("appLocal"),u=this.model.user=p.get("user"),a=this.collection.times=p.get("times");this.router=new b({model:this.model,app:r}),n.start_backbone_history();var f=this.model.view=new y;this.model.view.fetch({url:h.splunkdNS(r.get("root"),r.get("locale"),r.get("owner"),r.get("app"),[f.url,r.get("page")].join("/"))}).done(this._onViewModelLoad.bind(this)),l.isPdfServiceAvailable().always(function(t){e.set("pdf_available",t)}),this._onViewModelLoadDfd=s.Deferred(),this.model.on("change:edit",this.router.updateUrl,this.router)};o.extend(w.prototype,i.Events,{_onViewModelLoad:function(){var e=this.model;e.set("editable",e.view.isEditable()),e.view.isXML()&&(e.set("label",this.model.view.getLabel()),e.set("description",this.model.view.getDescription()),e.on("change:label change:description",function(){e.view.setLabelAndDescription(e.get("label"),e.get("description")),e.view.save()})),this._onViewModelLoadDfd.resolve(this.model.view)},onViewModelLoad:function(e,t){this._onViewModelLoadDfd.done(e.bind(t||null))},getStateModel:function(){return this.model},isEditMode:function(){return this.model.get("edit")===!0},onReady:function(e){s.when(this.readyDfd,this._onViewModelLoadDfd).then(e)},ready:function(){this.readyDfd.resolve()},isReady:function(){return this.readyDfd.state()==="resolved"},fetchCollection:function(){this.reportsCollection=new g,this.reportsCollection.REPORTS_LIMIT=150;var e=this.model.app,t={data:{count:this.reportsCollection.REPORTS_LIMIT,app:e.get("app"),owner:e.get("owner"),search:'is_visible="1"'}};this.reportsCollection.initialFetchDfd=this.reportsCollection.fetch(t)}});var E=new w;return c.DEBUG_ENABLED&&(window.Dashboard=E),E}),define("splunkjs/mvc/tokenawaremodel",["require","exports","module","underscore","backbone","splunkjs/mvc","./tokenescapestring","./tokensafestring","./utils","util/console","./tokenutils","models/Base"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=e("splunkjs/mvc"),o=e("./tokenescapestring"),u=e("./tokensafestring"),a=e("./utils"),f=e("util/console"),l=e("./tokenutils"),c=e("models/Base"),h=!1,p=c.extend({applyTokensByDefault:!1,retrieveTokensByDefault:!1,constructor:function(e,t){var n=this;e=e||{},t=t||{},this._tokenNamespace=t.tokenNamespace||undefined,this._retainUnmatchedTokens=t.retainUnmatchedTokens,this._tokenEscaper=t.tokenEscaper||undefined,this._tokenRegistry=t._tokenRegistry||s.Components,this.tokens=!!t.tokens,this._applyTokensByDefault=t.hasOwnProperty("applyTokensByDefault")?t.applyTokensByDefault:this.applyTokensByDefault,this._retrieveTokensByDefault=t.hasOwnProperty("retrieveTokensByDefault")?t.retrieveTokensByDefault:this.retrieveTokensByDefault,c.prototype.constructor.call(this,{}),this._templates=new c({}),this._bindings={},this._pushed_properties=[],this._templates.on("change",function(e,t){n._updateBindingsForProperties(e.changed,t)}),this.set(e,t)},_updateBindingsForProperties:function(e,t){var n=this;r.each(e,function(e,i){var s;if(e===undefined)s=undefined;else{var o=l.getTokens(e,{tokenNamespace:n._tokenNamespace}),u=function(t){if(l.isToken(e)){var i=o[0],s=n._tokenRegistry.getInstance(i.namespace,{create:!0}),u=s.get(i.name);if(!r.isString(u))return u}var a=r.all(o,function(e){var t=n._tokenRegistry.getInstance(e.namespace,{create:!0}),r=t.get(e.name);return r!==undefined}),f;return a||n._retainUnmatchedTokens||t?f=l.replaceTokens(e,n._tokenRegistry,{tokenNamespace:n._tokenNamespace,escaper:n._tokenEscaper}):f=undefined,f};s={observes:o,template:e,computeValue:u}}n._setBinding(i,s,t)})},_setBinding:function(e,t,n){var i=this,s=this._bindings[e];s&&(r.each(s._listeners,function(e){e.dispose()}),s._listeners=[]),this._bindings[e]=t,t!==undefined&&(t._listeners=[],r.each(t.observes,function(n){var r=i._tokenRegistry.getInstance(n.namespace,{create:!0}),s=n.name,o=function(){i._pullPropertyValue(e)};i.listenTo(r,"change:"+s,o),o.dispose=function(){i.stopListening(r,"change:"+s,o)},t._listeners.push(o)}),this._isPushEnabled(e)&&this._configureBindingForPush(e),this._isPushEnabled(e)&&this.get(e)!==undefined?this._pushPropertyValue(e,n):this._pullPropertyValue(e,n))},_pullPropertyValue:function(e,t){var n=this._bindings[e],r=n.computeValue();h&&f.log("PROPAGATE: "+e+" <- "+r),t=t||{},t.hasOwnProperty("_silent")&&(t.silent=t._silent,delete t._silent),c.prototype.set.call(this,e,r,t)},enablePush:function(e){if(this._isPushEnabled(e))return;this._pushed_properties.push(e),this._bindings[e]!==undefined&&this._configureBindingForPush(e)},_isPushEnabled:function(e){return r.contains(this._pushed_properties,e)},_configureBindingForPush:function(e){var t=this._bindings[e];if(!l.isToken(t.template))return;var n=this,r=function(t,r,i){n._pushPropertyValue(e)};this.listenTo(this,"change:"+e,r),r.dispose=function(){n.stopListening(n,"change:"+e,r)},t._listeners.push(r)},_pushPropertyValue:function(e,t){var n=this._bindings[e],r=this.get(e),i=n.observes[0],s=this._tokenRegistry.getInstance(i.namespace,{create:!0}),o=i.name;h&&f.log("PROPAGATE: "+r+" -> "+o),t=t||{},t.hasOwnProperty("_silent")&&(t.silent=t._silent,delete t._silent),s.set(o,r,t)},set:function(e,t,n){var i=this,s;typeof e=="object"?(s=e,n=t):(s={})[e]=t,n=n||{},n.hasOwnProperty("tokens")||(n.tokens=this._applyTokensByDefault);var a={},f=[],l={},h=function(e,t){a[e]=t},p=function(e,t){i._isPushEnabled(e)||f.push(e),l[e]=t};r.each(s,function(e,t){e instanceof u?h(t,e.value):e instanceof o?p(t,e.value):r.isString(e)&&n.tokens?h(t,e):p(t,e)});var d=r.clone(n);n.hasOwnProperty("silent")&&(d._silent=n.silent,delete d.silent),r.isEmpty(a)||this._templates.set(a,d),r.isEmpty(f)||r.each(f,function(e){i._templates.unset(e,d)}),r.isEmpty(l)||c.prototype.set.call(this,l,n)},get:function(e,t){return t||(t={}),t.hasOwnProperty("tokens")||(t.tokens=this._retrieveTokensByDefault),t.tokens?this._templates.has(e)?this._templates.get(e):l.quoteAsTokenString(c.prototype.get.call(this,e)):c.prototype.get.call(this,e)},extractWithPrefix:function(e){var t=this,n={};return r.each(r.keys(this.attributes),function(r){if(r.indexOf(e)===0){var i=r.substring(e.length),o,u=t.get(r,{tokens:!0});u!==undefined?o=s.tokenSafe(u):o=t.get(r),n[i]=o}}),n},toJSON:function(e){e||(e={}),e.hasOwnProperty("tokens")||(e.tokens=this._retrieveTokensByDefault);if(e.tokens){var t=this,n={};return r.each(this.attributes,function(e,r){n[r]=t.get(r,{tokens:!0})}),n=r.extend(n,this._templates.toJSON()),n}return c.prototype.toJSON.call(this,arguments)}});return p._createReportModel=function(e){return new p(e||{},{applyTokensByDefault:!0,retainUnmatchedTokens:!0})},p}),define("splunkjs/mvc/settings",["require","exports","module","./tokenawaremodel"],function(e,t,n){var r=e("./tokenawaremodel"),i=r.extend({sync:function(){return!1}});return i}),define("splunkjs/mvc/basesplunkview",["require","exports","module","underscore","./mvc","util/console","backbone","./settings"],function(e,t,n){var r=e("underscore"),i=e("./mvc"),s=e("util/console"),o=e("backbone"),u=e("./settings"),a=o.View.extend({_numConfigureCalls:0,omitFromSettings:[],constructor:function(e,t){e=e||{},t=t||{},e.settingsOptions=r.extend(e.settingsOptions||{},t);var n=e.id;n===undefined&&e.name&&(n=e.name,s.warn("Use of 'name' to specify the ID of a Splunk model is deprecated.")),n===undefined&&(n=r.uniqueId("view_")),this.name=this.id=e.name=e.id=n;var u=o.View.prototype.constructor.apply(this,arguments);return this._numConfigureCalls==0&&this.configure(),i.Components.registerInstance(this.id,this,{replace:t.replace}),u},configure:function(){this._numConfigureCalls++;if(this._numConfigureCalls>1)throw new Error("BaseSplunkView.configure() called multiple times.");var e=this.options.settings;if(e&&e instanceof u)return this.settings=e,this;var t=(this.omitFromSettings||[]).concat(["model","collection","el","attributes","className","tagName","events","settingsOptions"]),n=r.omit(this.options,t),i=this.options.settingsOptions;return this.settings=new u(n,i),this},initialize:function(){o.View.prototype.initialize.apply(this,arguments)},remove:function(){return o.View.prototype.remove.apply(this,arguments),i.Components.revokeInstance(this.id),this},setElement:function(){return o.View.prototype.setElement.apply(this,arguments),this.$el.addClass("splunk-view"),this.className&&this.$el.addClass(this.className),this.$el.attr("id")||this.$el.attr("id",this.id),this},bindToComponentSetting:function(e,t,n){this.listenTo(this.settings,"change:"+e,function(r,i,s){var o=this.settings.previous(e),u=i;this.unbindFromComponent(o,t,n),this.bindToComponent(u,t,n)},this);var r=this.settings.get(e);this.bindToComponent(r,t,n)},bindToComponent:function(e,t,n){if(!e||!t)return this;this.listenTo(i.Components,"change:"+e,t,n);if(i.Components.has(e)){var s=i.Components.get(e);r.defer(function(){t.apply(n,[i.Components,s,{}])})}return this},unbindFromComponent:function(e,t,n){return e?(i.Components.off("change:"+e,t,n),this):this}});return a}),define("views/Base",["jquery","backbone","underscore"],function(e,t,n){return t.View.extend({awake:!0,touch:!1,initialize:function(){var e=this.render;this.children={},this.render=n.bind(function(){var t=(new Date).getTime(),n;return this.awake?e.apply(this):this.touch=!0,n=(new Date).getTime(),this.options.instrument!==!1&&this.$el.attr("data-render-time",(n-t)/1e3),this},this),this.options.moduleId&&(this.moduleId=this.options.moduleId),this.$el.attr("data-cid",this.cid);if(this.moduleId){var t=this.cssNamespace();this.options.dontAddModuleIdAsClass||this.$el.addClass(t),this.$el.attr("data-view",this.moduleId)}this.options.template&&(this.template=this.options.template),this.template&&(this.compiledTemplate=this.compileTemplate(this.template))},wake:function(e){return e||(e={}),this.awake=!0,this.touch&&(this.touch=!1,e.syncRender?this.render():this.debouncedRender()),n.each(this.children,function(t){n.isFunction(t.wake)&&t.wake(e)}),this},sleep:function(){return this.awake=!1,n.each(this.children,function(e){n.isFunction(e.sleep)&&e.sleep()}),this},debouncedRender:function(){this._debouncedRender||(this._debouncedRender=n.debounce(this.render,0)),this._debouncedRender.apply(this,arguments)},debouncedReflow:function(){this._debouncedReflow||(this._debouncedReflow=n.debounce(this.reflow,0)),this._debouncedReflow.apply(this,arguments)},compileTemplate:n.memoize(function(e){return n.template(e)}),cssNamespace:function(){return(this.moduleId||"").toLowerCase().replace(/\//g,"-").replace(/\_/g,"").replace(/^views-/,"").replace(/-master$/,"")},uniqueNS:function(){return(this.moduleId||"unidentified").toLowerCase().replace(/\//g,"-")+"-"+this.cid},dispose:function(){this.stopListening()},stopListening:function(){this.modelsOff(this.model),this.collectionsOff(this.collection),t.View.prototype.stopListening.apply(this,arguments)},remove:function(){return this.removeChildren(),this._isAddedToDocument&&(this.onRemovedFromDocument(),this._isAddedToDocument=!1),this.stopListening(),this.$el.remove(),this},debouncedRemove:function(e){e||(e={});var t={detach:!1};return n.defaults(e,t),e.detach&&this.$el.detach(),this._debouncedRemove||(this._debouncedRemove=n.debounce(this.remove,0)),this._debouncedRemove.apply(this,arguments),this},removeChildren:function(){n.each(this.children,function(e){n.isArray(e)?n.each(e,function(e){e.remove()}):e.remove()})},modelsOff:function(e){return e instanceof t.Model?(n.isFunction(e.associatedOff)&&e.associatedOff(null,null,this),e.off(null,null,this)):n(e).each(function(t){n.isFunction(e.associatedOff)&&e.associatedOff(null,null,this),this.modelsOff(t)},this),this},collectionsOff:function(e){return e instanceof t.Collection?e.off(null,null,this):n(e).each(function(e){this.collectionsOff(e)},this),this},detach:function(){this._isAddedToDocument&&(this.onRemovedFromDocument(),this._isAddedToDocument=!1),this.$el.detach()},appendTo:function(e){return this.attachToDocument(e,"appendTo")},prependTo:function(e){return this.attachToDocument(e,"prependTo")},replaceAll:function(e){return this.attachToDocument(e,"replaceAll")},insertAfter:function(e){return this.attachToDocument(e,"insertAfter")},insertBefore:function(e){return this.attachToDocument(e,"insertBefore")},attachToDocument:function(t,r){if(n.isString(t))throw new Error(r+" does not support selectors or HTML strings");t=e(t);if(t.length===0)return this;var i=t[0],s=this.el.parentNode;return s&&s!==i&&this._isAddedToDocument&&(this.onRemovedFromDocument(),this._isAddedToDocument=!1),this.$el[r](t),s!==i&&this.isAttachedToDocument()&&(this._isAddedToDocument=!0,this.onAddedToDocument()),this},onAddedToDocument:function(){var e=this;n.each(this.children,function(t){n.isFunction(t.onAddedToDocument)&&e.isAncestorOf(t)&&!t._isAddedToDocument&&(t._isAddedToDocument=!0,t.onAddedToDocument())})},onRemovedFromDocument:function(){var e=this;n.each(this.children,function(t){n.isFunction(t.onRemovedFromDocument)&&e.isAncestorOf(t)&&t._isAddedToDocument&&(t.onRemovedFromDocument(),t._isAddedToDocument=!1)})},isAttachedToDocument:function(){return e.contains(document.documentElement,this.el)},isAncestorOf:function(t){return t.el?e.contains(this.el,t.el):!1},isDescendantOf:function(t){return t.el?e.contains(t.el,this.el):!1},reflow:function(){n(this.children).each(function(e){n.isFunction(e.reflow)&&e.reflow()})}})}),define("models/services/authorization/Role",["models/SplunkDBase"],function(e){return e.extend({url:"authorization/roles",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/authorization/Roles",["models/services/authorization/Role","collections/SplunkDsBase"],function(e,t){return t.extend({FREE_PAYLOAD:{links:{create:"/services/authorization/roles/_new"},generator:{},entry:[{name:"admin",links:{alternate:"/services/authorization/roles/admin",list:"/services/authorization/roles/admin",edit:"/services/authorization/roles/admin",remove:"/services/authorization/roles/admin"},author:"system",acl:{app:"",can_list:!0,can_write:!0,modifiable:!1,owner:"system",perms:{read:["*"],write:["*"]},removable:!1,sharing:"system"},content:{capabilities:[],cumulativeRTSrchJobsQuota:400,cumulativeSrchJobsQuota:200,defaultApp:"","eai:acl":null,imported_capabilities:[],imported_roles:[],imported_rtSrchJobsQuota:20,imported_srchDiskQuota:500,imported_srchFilter:"",imported_srchIndexesAllowed:["*"],imported_srchIndexesDefault:["main"],imported_srchJobsQuota:10,imported_srchTimeWin:-1,rtSrchJobsQuota:100,srchDiskQuota:1e4,srchFilter:"*",srchIndexesAllowed:["*","_*"],srchIndexesDefault:["main","os"],srchJobsQuota:50,srchTimeWin:0}}],paging:{total:1,perPage:30,offset:0},messages:[]},initialize:function(){t.prototype.initialize.apply(this,arguments)},url:"authorization/roles",model:e})}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),define("bootstrap.transition",["jquery"],function(){}),!function(e){var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),define("bootstrap.modal",["jquery"],function(){}),define("views/shared/Modal",["jquery","underscore","views/Base","bootstrap.transition","bootstrap.modal"],function(e,t,n){var r="modal fade",i="modal-wide",s="modal-header",o="modal-body",u="modal-body modal-body-scrolling",a="modal-footer",f="."+s,l=f+" > h3",c="modal-loading",h="."+c,p='<div class="'+c+'"></div>',d=".modal-body",v=d+" > div.form",m='<div class="form form-horizontal"></div>',g='<div class="form form-horizontal form-complex"></div>',y='<div class="form form-horizontal form-justified"></div>',b="."+a,w='<a href="#" class="btn cancel modal-btn-cancel pull-left" data-dismiss="modal">'+t("Cancel").t()+"</a>",E='<a href="#" class="btn back modal-btn-back">'+t("Back").t()+"</a>",S='<a href="#" class="btn btn-primary modal-btn-primary pull-right">'+t("Save").t()+"</a>",x='<a href="#" class="btn btn-primary modal-btn-primary pull-right" data-dismiss="modal">'+t("Done").t()+"</a>",T='<a href="#" class="btn btn-primary modal-btn-primary">'+t("Delete").t()+"</a>",N='<a href="#" class="btn btn-primary modal-btn-primary">'+t("Next").t()+"</a>",C='<a href="#" class="btn modal-btn-continue pull-left" data-dismiss="modal">'+t("Continue Editing").t()+"</a>",k='                <div class="'+s+'">                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                    <h3>&nbsp;</h3>                </div>                <div class="'+u+'">                </div>                <div class="'+a+'">                </div>            ',L={ENTER:13,TAB:9},A='.btn, input[type="text"], input[type="password"], textarea';return n.extend({className:r,attributes:{style:"display:none",tabIndex:-1},initialize:function(){n.prototype.initialize.apply(this,arguments);var e={show:!1,keyboard:!0,backdrop:!0};this.keydownEventCode=null,this.keydownEventTarget=null,this.$el.modal(t.extend({},e,t.pick(this.options,["backdrop","keyboard","show","remote"]))),this.shown=!1,this.options.onHiddenRemove&&this.on("hidden",this.remove,this)},events:{show:function(e){if(e.target!==e.currentTarget)return;this.trigger("show")},shown:function(e){if(e.target!==e.currentTarget)return;this.shown=!0;var t=this.$(A);t.length>0&&t.first().focus(),this.trigger("shown")},hide:function(e){if(e.target!==e.currentTarget)return;this.trigger("hide")},hidden:function(e){if(e.target!==e.currentTarget)return;this.shown=!1,this.trigger("hidden")},keydown:function(n){var r=n.which;this.keydownEventCode=n.which,this.keydownEventTarget=n.target;if(r===L.TAB){var i="a[href], area[href], input:not([disabled]),select:not([disabled]), textarea:not([disabled]),button:not([disabled]), iframe, object, embed, *[tabindex],*[contenteditable]",s=this.el.querySelectorAll(i);s=t.uniq(s);for(var o=0;o<s.length;o++){var u=e(s[o]);if(!u.is(":visible")||u.css("visibility")==="hidden")s.splice(o,1),o--}var a=s[0],f=s[s.length-1];t.contains(s,n.target)&&(n.preventDefault(),n.target===f&&!n.shiftKey?a.focus():n.target===a&&n.shiftKey?f.focus():n.shiftKey?s[t.indexOf(s,n.target)-1].focus():s[t.indexOf(s,n.target)+1].focus())}},keyup:function(t){var n=t.which;if(n===L.ENTER&&this.keydownEventCode===L.ENTER){var r=e(t.target);t.target!==this.keydownEventTarget&&e(this.keydownEventTarget).is("input")&&e(this.keydownEventTarget).attr("type")==="text"&&(r=e(this.keydownEventTarget)),r.is("input")&&r.attr("type")==="text"&&this.$el.find(".btn-primary:visible").length===1&&(r.is(A)&&r.blur(),t.preventDefault(),this.keydownEventCode=null,this.keydownEventTarget=null,this.$el.find(".btn-primary:visible").click())}}},hide:function(){this.$el.modal("hide")},show:function(){this.$el.modal("show")},toggle:function(){this.$el.modal("toggle")},remove:function(){this.shown&&this.hide(),n.prototype.remove.apply(this,arguments)}},{CLASS_NAME:r,CLASS_MODAL_WIDE:i,HEADER_CLASS:s,BODY_CLASS:u,FOOTER_CLASS:a,HEADER_SELECTOR:f,HEADER_TITLE_SELECTOR:l,BODY_SELECTOR:d,BODY_FORM_SELECTOR:v,LOADING_CLASS:c,LOADING_SELECTOR:h,LOADING_HORIZONTAL:p,FOOTER_SELECTOR:b,TEMPLATE:k,FORM_HORIZONTAL:m,FORM_HORIZONTAL_COMPLEX:g,FORM_HORIZONTAL_JUSTIFIED:y,BUTTON_CANCEL:w,BUTTON_BACK:E,BUTTON_SAVE:S,BUTTON_CONTINUE:C,BUTTON_DELETE:T,BUTTON_DONE:x,BUTTON_NEXT:N})}),define("splunkjs/mvc/simplexml/mapper",["require","underscore","../mvc","backbone","util/console"],function(e){var t=e("underscore"),n=e("../mvc"),r=e("backbone"),i=e("util/console"),s=function(){};t.extend(s.prototype,{tagName:"#abstract",map:function(){},getSearch:function(e,t){var n;return e.entry.get("name")?(i.log("Mapping Saved Search"),n={type:"saved",name:e.entry.get("name",t)}):(i.log("Mapping Inline Search"),n={type:e.entry.content.get("display.general.search.type")||"inline",search:e.entry.content.get("search",t),earliest_time:e.entry.content.get("dispatch.earliest_time",t),latest_time:e.entry.content.get("dispatch.latest_time",t)},t.flatten&&n.type==="postprocess"&&(n.type="inline",n.search=e.entry.content.get("fullSearch",t))),n},toXML:function(e,t){t=t||{tokens:!0};var n={type:this.tagName,title:e.entry.content.get("display.general.title",t),search:this.getSearch(e,t),options:{},tags:{}};return this.map(e.entry.content,n,t),n.options.fields&&(n.tags.fields||(n.tags.fields=n.options.fields),n.options.fields=null),n}});var o={};return s.register=function(e,t){o[e]=t},s.get=function(e){var t=o[e];if(!t)throw new Error("No mapper for type "+e);return new t},s.extend=r.Model.extend,s}),define("models/DashboardReport",["require","jquery","underscore","models/Report","splunkjs/mvc/simplexml/controller","splunkjs/mvc/simplexml/mapper","util/console","splunkjs/mvc/tokenawaremodel"],function(e){var t=e("jquery"),n=e("underscore"),r=e("models/Report"),i=e("splunkjs/mvc/simplexml/controller"),s=e("splunkjs/mvc/simplexml/mapper"),o=e("util/console"),u=e("splunkjs/mvc/tokenawaremodel"),a=r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments)},saveXML:function(e){var t=this.entry.content.get("display.general.id");return o.log("[%o] Saving Panel Element XML...",t),i.model.view.updateElement(t,this.mapToXML(),e)},mapToXML:function(e){var t=this.entry.content.get("display.general.type"),n=["display",t,"type"].join(".");this.entry.content.has(n)&&(t=[t,this.entry.content.get(n)].join(":")),o.log("Looking up mapper for type ",t);var r=s.get(t);return o.log("Found mapper",r),r.toXML(this,e)},deleteXML:function(){return i.model.view.deleteElement(this.entry.content.get("display.general.id"))},defaults:{"display.visualizations.charting.axisY.scale":"linear","display.visualizations.charting.axisX.scale":"linear","display.visualizations.charting.axisX.minimumNumber":"","display.visualizations.charting.axisX.maximumNumber":"","display.visualizations.charting.axisY.minimumNumber":"","display.visualizations.charting.axisY.maximumNumber":"","display.visualizations.charting.axisTitleX.text":"","display.visualizations.charting.axisTitleY.text":"","display.visualizations.charting.axisLabelsX.majorUnit":"","display.visualizations.charting.axisLabelsY.majorUnit":"","display.visualizations.charting.legend.placement":"right","display.visualizations.charting.legend.labelStyle.overflowMode":"ellipsisMiddle","display.visualizations.charting.chart.stackMode":"default","display.visualizations.charting.chart.nullValueMode":"zero","display.visualizations.charting.chart.rangeValues":'["0","30","70","100"]',"display.visualizations.charting.chart.style":"shiny","display.visualizations.charting.gaugeColors":[8710400,16771072,12529712],"display.prefs.events.count":"10","display.prefs.statistics.count":"10"},validation:{"display.visualizations.charting.axisX.minimumNumber":[{pattern:"number",msg:"Please enter a number",required:!1},{fn:"validateXAxisExtremes",required:!1}],"display.visualizations.charting.axisX.maximumNumber":[{pattern:"number",msg:"Please enter a number",required:!1},{fn:"validateXAxisExtremes",required:!1}],"display.visualizations.charting.axisY.minimumNumber":[{pattern:"number",msg:"Please enter a number",required:!1},{fn:"validateYAxisExtremes",required:!1}],"display.visualizations.charting.axisY.maximumNumber":[{pattern:"number",msg:"Please enter a number",required:!1},{fn:"validateYAxisExtremes",required:!1}],"display.visualizations.charting.axisLabelsX.majorUnit":{pattern:"number",min:Number.MIN_VALUE,msg:"Please enter a positive number",required:!1},"display.visualizations.charting.axisLabelsY.majorUnit":{pattern:"number",min:Number.MIN_VALUE,msg:"Please enter a positive number",required:!1},"display.visualizations.charting.axisY.scale":{fn:"validateYScaleAndStacking",required:!1},"display.visualizations.charting.chart.stackMode":{fn:"validateYScaleAndStacking",required:!1},"display.visualizations.charting.chart.rangeValues":{fn:"validateRangeValues",required:!1},"display.prefs.events.count":{pattern:"number",min:1,msg:n("Rows Per Page must be a positive number.").t(),required:!1},"display.prefs.statistics.count":{pattern:"number",min:1,msg:n("Rows Per Page must be a positive number.").t(),required:!1}},validateXAxisExtremes:function(e,t,r){var i=parseFloat(r["display.visualizations.charting.axisX.minimumNumber"]),s=parseFloat(r["display.visualizations.charting.axisX.maximumNumber"]);if(!n.isNaN(i)&&!n.isNaN(s)&&s<=i)return"The minimum value must be less than maximum value"},validateYAxisExtremes:function(e,t,r){var i=parseFloat(r["display.visualizations.charting.axisY.minimumNumber"]),s=parseFloat(r["display.visualizations.charting.axisY.maximumNumber"]);if(!n.isNaN(i)&&!n.isNaN(s)&&s<=i)return"The minimum value must be less than maximum value"},validateYScaleAndStacking:function(e,t,n){var r=n["display.visualizations.charting.axisY.scale"],i=n["display.visualizations.charting.chart.stackMode"];if(r==="log"&&i!=="default")return"Log scale and stacking cannot be enabled at the same time"},validateRangeValues:function(e){var r=n(e?JSON.parse(e):[]).map(parseFloat);if(n(r).any(n.isNaN)||!e)return"All color ranges must be valid numbers";var i=n.uniq(r),s=t.extend([],r).sort(function(e,t){return e-t});if(!n.isEqual(r,i)||!n.isEqual(r,s))return"Color ranges must be entered from lowest to highest"},attrToArray:function(e){var t=this.get(e);return t?n.values(JSON.parse(t)):[]},rangesValuesToArray:function(){return this.attrToArray("display.visualizations.charting.chart.rangeValues")},gaugeColorsToArray:function(){return this.attrToArray("display.visualizations.charting.gaugeColors")}},{Entry:r.Entry.extend({},{Content:u.extend({applyTokensByDefault:!0})})});return a}),define("views/shared/delegates/Base",["backbone"],function(e){return e.View.extend({dispose:function(){return this.stopListening(),this},remove:function(){return this.dispose(),this}})}),define("views/shared/delegates/PopdownDialog",["jquery","underscore","views/shared/delegates/Base"],function(e,t,n){return n.extend({initialize:function(){var e={arrow:".arrow",mode:"dialog",adjustPosition:!0,minMargin:20,allowPopUp:!0,direction:"auto",zIndex:"auto",scrollContainer:window,ignoreClasses:[]};t.defaults(this.options,e),this.isShown=!1,this.addEventHandlers=t.bind(this.addEventHandlers,this),this.dialogClick=t.bind(this.dialogClick,this),this.keepInBoundsDebounced=t.debounce(this.keepInBounds,100),this.$el.attr("id")||this.$el.attr("id","dialog-"+this.cid),this.options.show&&this.show(this.options.show)},events:{click:"dialogClick"},arrow:function(){return this.$el.find(this.options.arrow).first()},scrollContainer:function(){return this.$scrollContainer||(this.$scrollContainer=e(this.options.scrollContainer)),this.$scrollContainer},toggle:function(e){return this.trigger("toggle",e),this[this.isShown?"hide":"show"](e),this.trigger("toggled",e),!0},show:function(e){this.trigger("show",e),this.isShown||t.defer(this.addEventHandlers,e),this.options.zIndex!="auto"&&this.$el.css("zIndex",this.options.zIndex),this.options.adjustPosition&&e&&this.adjustPosition(e),this.isShown=!0,this.$el.addClass("open").show(),e.attr("data-dialog-id",this.$el.attr("id")),this.trigger("shown",e)},hide:function(){if(!this.isShown)return!1;this.trigger("hide"),this.removeEventHandlers(),this.isShown=!1,this.$el.removeClass("open").hide(),this.trigger("hidden")},addEventHandlers:function(t){return e("html").on("mousedown.popdown."+this.cid,this.bodyMouseDown.bind(this)),e(window).on("keydown."+this.cid,this.windowKeydown.bind(this)),this.options.scrollContainer!==window&&(this.scrollPosition={top:this.scrollContainer().scrollTop(),left:this.scrollContainer().scrollLeft()},this.scrollContainer().on("scroll."+this.cid,this.containerScroll.bind(this))),this},removeEventHandlers:function(){return e("html").off("."+this.cid),e(window).off("."+this.cid),this.options.scrollContainer!==window&&this.scrollContainer().off("."+this.cid),this},dispose:function(){return this.removeEventHandlers(),n.prototype.dispose.apply(this,arguments),this},measure:function(e,t){var n={};return n.width=e.outerWidth(),n.halfWidth=n.width/2,n.height=e.outerHeight(),n.halfHeight=n.height/2,t!==!1&&(n.offset=e.offset(),n.position=e.position(),n.center={left:n.offset.left+n.halfWidth,top:n.offset.top+n.halfHeight}),n},adjustPosition:function(e){var t=this.options.direction;this["adjustPosition"+t.charAt(0).toUpperCase()+t.slice(1)](e)},adjustPositionAuto:function(t){this.$el.css({top:-9999,left:-9999,bottom:"auto"}),this.$el.show();var n={},r={left:0,top:0},i=!0;n.toggle=this.measure(t),n.dialog=this.measure(this.$el),n.arrow=this.measure(this.arrow(),!1),n.window=this.measure(e(window),!1),n.window.top=e(window).scrollTop(),n.window.bottom=n.window.height+e(window).scrollTop(),n.dialogParent={offset:this.$el.offsetParent().offset()},n.toggle.relativeOffset={left:n.toggle.offset.left-n.dialogParent.offset.left+n.toggle.halfWidth,top:Math.floor(n.toggle.offset.top-n.dialogParent.offset.top)},n.toggle.center.left<n.dialog.halfWidth+this.options.minMargin?r.left=n.dialog.halfWidth-n.toggle.center.left+this.options.minMargin:n.toggle.center.left+n.dialog.halfWidth+this.options.minMargin>n.window.width&&(r.left=n.window.width-(n.toggle.center.left+n.dialog.halfWidth+this.options.minMargin)),r.left=Math.round(r.left);var s=n.toggle.offset.top+n.toggle.height+n.dialog.height+this.options.minMargin,o=n.toggle.offset.top-n.dialog.height-this.options.minMargin;s>n.window.bottom&&this.options.allowPopUp&&o>n.window.top?(r.top=-n.dialog.height-n.arrow.halfWidth,r.bottom=n.toggle.height+n.arrow.halfWidth,this.$el.addClass("up"),i=this.options.attachDialogTo||this.$el.parent()[0]==e("body")[0]||this.$el.parent()[0]==e(".modal:visible")[0]):(r.top=n.toggle.height,this.$el.removeClass("up"),s>n.window.bottom&&(this.scrollContainer().scrollTop(this.scrollContainer().scrollTop()+s-n.window.bottom),n.toggle.offset=t.offset(),n.toggle.relativeOffset.top=n.toggle.offset.top-n.dialogParent.offset.top)),this.position={top:i?r.top+n.toggle.relativeOffset.top:"auto",left:n.toggle.relativeOffset.left,marginLeft:-n.dialog.halfWidth+r.left,bottom:i?"auto":r.bottom},this.$el.css(this.position),this.arrow().css("marginLeft",0-n.arrow.halfWidth-r.left),n.dialog.halfWidth-n.arrow.halfWidth-r.left<8?this.$el.css("borderTopLeftRadius",Math.max(n.dialog.halfWidth-n.arrow.halfWidth-r.left,0)):this.$el.css("borderTopLeftRadius","")},adjustPositionRight:function(t){this.$el.addClass("right"),this.$el.css({top:-9999,left:-9999}),this.$el.show();var n={},r={left:0,top:0},i=function(){return Math.round(r.top)+n.toggle.relativeOffset.top-n.dialog.halfHeight+n.toggle.halfHeight}.bind(this);n.toggle=this.measure(t),n.dialog=this.measure(this.$el),n.arrow=this.measure(this.arrow(),!1),n.window=this.measure(e(window),!1),n.window.top=e(window).scrollTop(),n.window.bottom=n.window.height+e(window).scrollTop(),n.arrow.minMargin=10,n.arrow.maxShift=n.dialog.halfHeight-n.arrow.halfHeight-n.arrow.minMargin,n.dialogParent={offset:this.$el.offsetParent().offset()},n.toggle.relativeOffset={left:n.toggle.offset.left-n.dialogParent.offset.left+n.toggle.width,top:Math.floor(n.toggle.offset.top-n.dialogParent.offset.top)},n.toggle.center.top-n.window.top<n.dialog.halfHeight+this.options.minMargin?r.top=n.dialog.halfHeight-(n.toggle.center.top-n.window.top)+this.options.minMargin:n.toggle.center.top+n.dialog.halfHeight+this.options.minMargin>n.window.bottom&&(r.top=n.window.bottom-(n.toggle.center.top+n.dialog.halfHeight+this.options.minMargin)),i()<this.options.minMargin&&(r.top=r.top+(this.options.minMargin-i())),r.top>n.arrow.maxShift?r.top-=r.top-n.arrow.maxShift:-r.top>n.arrow.maxShift&&(r.top-=r.top+n.arrow.maxShift),this.position={top:i(),left:n.toggle.relativeOffset.left,marginLeft:n.arrow.halfWidth},this.$el.css(this.position),this.arrow().css("marginTop",0-n.arrow.halfHeight-r.top)},containerScroll:function(e){var t=this.scrollContainer().scrollTop(),n=this.scrollContainer().scrollLeft();this.position.top=this.position.top+(this.scrollPosition.top-t),this.position.left=this.position.left+(this.scrollPosition.left-n),this.$el.css(this.position),this.scrollPosition={top:t,left:n},this.keepInBoundsDebounced()},keepInBounds:function(e){var t=this.scrollContainer().offset().top,n=t+this.scrollContainer().outerHeight(),r=this.$el.hasClass("up")?this.$el.offset().top+this.$el.outerHeight():this.$el.offset().top;(r<t||r>n)&&this.hide()},bodyMouseDown:function(t){var n=e(t.target);if(!this.isShown)return;if(e.contains(this.$el[0],t.target)||t.target===this.$el[0])return;for(var r=0;r<this.options.ignoreClasses.length;r++)if(n.closest("."+this.options.ignoreClasses[r]).length)return;this.hide(t)},dialogClick:function(e){this.options.mode!="dialog"&&this.hide()},windowKeydown:function(e){var t=27,n=13;return e.keyCode==t?(this.hide(),!0):(e.keyCode==n&&this.bodyMouseDown(e),!0)},pointTo:function(e){this.isShown?this.adjustPosition(e):this.show(e)}})}),define("views/shared/delegates/Popdown",["jquery","underscore","views/shared/delegates/Base","views/shared/delegates/PopdownDialog"],function(e,t,n,r){return n.extend({initialize:function(){var e={toggle:"> .popdown-toggle, > .dropdown-toggle",dialog:"> .popdown-dialog, > .dropdown-menu",arrow:".arrow",mode:"menu",adjustPosition:!0,minMargin:20,attachDialogTo:!1,allowPopUp:!0,scrollContainer:window,ignoreClasses:[]};t.defaults(this.options,e),this.children={},this.events={},this.events["mousedown "+this.options.toggle]="toggle",this.events["keydown "+this.options.toggle]="keydownToggle",this.events["click "+this.options.toggle]="clickToggle",this.delegateEvents(this.events),this.$activeToggle=this.$(this.options.toggle).first(),this.options.show&&this.show()},delegate:function(){if(!this.children.hasOwnProperty("delegate")){var n=t.clone(this.options);n.el=this.options.dialog instanceof e?this.options.dialog[0]:this.$(this.options.dialog)[0],t.isString(this.options.scrollContainer)&&(this.options.scrollContainer=this.$activeToggle.closest(this.options.scrollContainer)),n.scrollConter=this.options.dialog instanceof e?this.options.dialog[0]:this.$(this.options.dialog)[0],this.children.delegate=new r(n),this.listenTo(this.children.delegate,"toggle",this.hearToggle),this.listenTo(this.children.delegate,"toggled",this.hearToggled),this.listenTo(this.children.delegate,"show",this.hearShow),this.listenTo(this.children.delegate,"shown",this.hearShown),this.listenTo(this.children.delegate,"hide",this.hearHide),this.listenTo(this.children.delegate,"hidden",this.hearHidden),this.options.attachDialogTo&&e(this.options.attachDialogTo).append(this.children.delegate.el)}return this.children.delegate},toggle:function(t){t.preventDefault();if(e(t.currentTarget).is(".disabled, :disabled"))return;return this.delegate().toggle(e(t.currentTarget)),!0},hearToggle:function(e){this.trigger("toggle",e)},hearToggled:function(e){this.trigger("toggled",e)},show:function(){this.delegate().show(this.$activeToggle)},hearShow:function(t){this.trigger("show",t),e(window).on("resize.popdown."+this.cid,this.windowResize.bind(this)),this.$activeToggle.removeClass("active"),this.$activeToggle=t.addClass("active")},hearShown:function(e){this.trigger("shown",e)},hide:function(t){if(!this.delegate().isShown)return!1;e(window).off("."+this.cid),this.$activeToggle.removeClass("active"),e.contains(this.children.delegate.el,e(":focus")[0])&&this.$activeToggle.focus(),this.children.delegate.hide()},clickToggle:function(e){e.preventDefault()},keydownToggle:function(e){var t=13;e.keyCode==t&&this.toggle(e)},hearHide:function(e){this.trigger("hide",e),this.$activeToggle.removeClass("active")},hearHidden:function(e){this.trigger("hidden",e)},dispose:function(){return this.children.delegate&&this.children.delegate.remove(),n.prototype.dispose.apply(this,arguments),this},adjustPosition:function(){this.delegate(),this.children.delegate.adjustPosition(this.$activeToggle)},windowResize:function(e){this.children.delegate&&this.children.delegate.isShown&&this.adjustPosition(this.$activeToggle)},pointTo:function(e){this.$activeToggle=e,this.delegate().adjustPosition(this.$activeToggle)},remove:function(){return n.prototype.remove.apply(this),this.children.delegate&&this.children.delegate.remove(),this.children.delegate&&this.options.attachDialogTo&&this.children.delegate.$el.remove(),e(window).off("resize.popdown."+this.cid),e(window).off("."+this.cid),this}})}),define("splunkjs/mvc/progressbarview",["require","exports","module","jquery","./mvc","backbone","./basesplunkview","underscore","views/shared/delegates/Popdown","splunk.util"],function(e,t,n){var r=e("jquery"),i=e("./mvc"),s=e("backbone"),o=e("./basesplunkview"),u=e("underscore"),a=e("views/shared/delegates/Popdown"),f=e("splunk.util"),l=o.extend({moduleId:n.id,className:"splunk-progressbar",configure:function(){this.options.manager&&(this.options.managerid=this.options.manager),o.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.children||(this.children={}),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.model={jobState:new s.Model,messages:new s.Model};var e=u.debounce(this.render);this.model.jobState.on("change",e,this),this.model.messages.on("change",e,this)},onManagerChange:function(e,t){this.manager&&this.manager.off(null,null,this),this.manager=t;if(!t)return;this.model.jobState.clear(),this.model.messages.clear(),this.manager.on("search:start",this.onSearchStart,this),this.manager.on("search:progress",this.onSearchProgress,this),this.manager.on("search:error",this.onSearchFail,this),this.manager.on("search:fail",this.onSearchFail,this),this.manager.on("search:cancelled",this.onSearchCancelled,this),this.manager.replayLastSearchEvent(this)},onSearchStart:function(){this.model.messages.clear(),this.model.jobState.set({text:"",progress:0,active:!0})},onSearchProgress:function(e){var t=e.content||{},n=t.dispatchState;t.isRealTimeSearch||this.model.jobState.set({notRealTime:!0});if(t.messages){var r=u(t.messages).chain().where({type:"ERROR"}).pluck("text").value(),i=u(t.messages).chain().where({type:"WARN"}).pluck("text").value();this.model.messages.set("errors",r,{unset:u.isEmpty(r)}),this.model.messages.set("warnings",i,{unset:u.isEmpty(i)})}if(n===undefined)this.model.jobState.clear();else if(n==="FAILED")this.model.jobState.clear();else{var s=t.doneProgress,o,a,f=!0;u.isNumber(s)&&!u.isNaN(s)&&(o=String(Math.floor(s*100)));var l=u("Loading").t();f=!0,a=[l," - ",o+"%"].join(""),t.dispatchState==="PAUSED"?(a=u("Paused").t(),f=!1):f=!0,t.dispatchState==="DONE"?this.model.jobState.clear():this.model.jobState.set({text:a,progress:o,active:f})}},onSearchFail:function(){this.model.jobState.clear()},onSearchCancelled:function(){this.model.jobState.clear()},render:function(){if(this.model.jobState.has("notRealTime")&&this.model.jobState.has("progress")){if(!this.$progress){this.$progress=r('<div class="progress-bar"><div class="progress-msg"></div><div class="progress"><div class="bar" style="width: 0%"></div></div></div>').appendTo(this.el);var e=window.devicePixelRatio>1?"/static/img/splunk/progress@2x.gif":"/static/img/splunk/progress.gif";r("<img/>").attr("src",f.make_url(e)).appendTo(this.$progress.find(".bar"))}this.$(".progress-msg").text(this.model.jobState.get("text")),this.$(".progress").find(".bar").width((this.model.jobState.get("progress")||0)+"%")}else this.$progress&&(this.$progress.remove(),this.$progress=null);return this.model.messages.has("errors")||this.model.messages.has("warnings")?(this.$error||(this.$error=r('<div class="error-details"><a href="#" class="dropdown-toggle error-indicator"><i class="icon-warning-sign"></i></a><div class="dropdown-menu"><div class="arrow"></div><ul class="first-group error-list"></ul></div></div>').appendTo(this.$el)),this.$error.find(".error-list").html(this.errorStatusTemplate(u.extend({_:u,errors:null,warnings:null},this.model.messages.toJSON()))),this.children.errorPopdown||(this.children.errorPopdown=new a({el:this.$error})),this.$error[this.model.messages.has("errors")?"addClass":"removeClass"]("severe")):(this.$error&&(this.$error.remove(),this.$error=null),this.children.errorPopdown&&(this.children.errorPopdown.remove(),this.children.errorPopdown=null)),this},remove:function(){return u(this.children).invoke("remove"),u(this.model).invoke("off"),this.manager&&this.manager.off(null,null,this),o.prototype.remove.call(this)},errorStatusTemplate:u.template('<% _(errors).each(function(error){ %><li class="error"><i class="icon-warning-sign"></i> <%- error %></li><% }); %><% _(warnings).each(function(warn){ %><li class="warning"><i class="icon-warning-sign"></i> <%- warn %></li><% }); %>')});return l}),define("util/moment/compactFromNow",["util/moment"],function(e){function n(e,n,r){var i=t(Math.abs(e)/1e3),s=t(i/60),o=t(s/60),u=t(o/24),a=t(u/365),f=i<45&&["s",i]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",t(u/30)]||a===1&&["y"]||["yy",a],l=f[0],c=f[1]||1,h=e>0,p=(r._compactRelativeTime||{})[l];return p===undefined?r.relativeTime(c,!!n,l,h):typeof p=="function"?p(c,n,l,h):p.replace(/%d/i,c)}var t=Math.round;return e.duration.fn.humanizeCompact=function(e){var t=+this,r=n(t,!e,this.lang());return e&&(r=this.lang().pastFuture(t,r)),this.lang().postformat(r)},e.fn.compactFromNow=function(t){return e.duration(this.diff(e())).lang(this.lang()._abbr).humanizeCompact(!t)},e}),define("splunkjs/mvc/refreshtimeindicatorview",["require","exports","module","./mvc","./basesplunkview","util/moment","util/moment/compactFromNow","underscore"],function(e,t,n){function f(){o(u).each(function(e){e()})}function l(e){delete u[e],o.isEmpty(u)&&(clearInterval(a),a=null)}function c(e,t,n){u[e]&&l(e),u[e]=o.bind(t,n),a||(a=setInterval(f,1e3))}var r=e("./mvc"),i=e("./basesplunkview"),s=e("util/moment");e("util/moment/compactFromNow");var o=e("underscore"),u={},a,h=i.extend({moduleId:n.id,className:"splunk-timeindicator",configure:function(){this.options.manager&&(this.options.managerid=this.options.manager),i.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.timer=o.uniqueId("timer_")},onManagerChange:function(e,t){this.manager&&this.manager.off(null,null,this),this.manager=t;if(!t)return;this.manager.on("search:start",this.clear,this),this.manager.on("search:progress",this.onSearchProgress,this),this.manager.on("search:done",this.onSearchProgress,this),this.manager.on("search:fail",this.clear,this),this.manager.on("search:cancelled",this.clear,this),t.replayLastSearchEvent(this)},clear:function(){l(this.timer),this.$el.html("&nbsp;")},updateRefreshTime:function(){this.refreshTime&&(s().diff(this.refreshTime)<1e4?this.$el.hide():(this.$el.text(this.refreshTime.compactFromNow()).show(),this.$el.attr("title",o("Last refresh: ").t()+this.refreshTime.format("LLL"))))},onSearchProgress:function(e){var t=(e||{}).content||{};if(t.dispatchState==="FAILED")this.clear();else if(t.dispatchState==="PARSING"||t.dispatchState==="QUEUED")this.clear();else if(t.dispatchState==="RUNNING")t.isRealTimeSearch?(l(this.timer),this.$el.text(o("Real-time").t())):this.clear();else if(t.dispatchState==="DONE"){this.refreshTime=s(this.manager.job.published());if(!this.refreshTime){this.clear();return}this.clear(),this.updateRefreshTime(),c(this.timer,this.updateRefreshTime,this)}},render:function(){return this.$el.html("&nbsp;"),this},remove:function(){return l(this.timer),this.onManagerChange(null,null),i.prototype.remove.call(this)}});return h}),Splunk.window={open:function(e,t,n){n=$.extend({resizable:!0,scrollbars:!0,toolbar:!0,location:!0,menubar:!0,width:$(window).width(),height:$(window).height()},n),n.top||(n.top=Math.max(0,screen.availHeight/2-n.height/2)),n.left||(n.left=Math.max(0,screen.availWidth/2-n.width/2)),n.screenX=n.left,n.screenY=n.top;var r=[];for(var i in n)n[i]===!0&&(n[i]="yes"),n[i]===!1&&(n[i]="no"),r.push(i+"="+n[i]);t="w"+t.replace(/[^a-zA-Z 0-9]+/g,"");var s=window.open(e,t,r.join(","));return s&&s.focus&&s.focus(),s},openJobManager:function(e){var t=Splunk.util.getCurrentApp();t=="UNKNOWN_APP"&&(t="search");var n=Splunk.util.make_url("app",t,"job_management");e&&(n+="?"+Splunk.util.propToQueryString(e));var r=this.open(n,"splunk_job_manager",{width:900,height:600,menubar:!1});return r},openAerts:function(e){return this.open(e,"splunk_alerts",{width:900,height:600,menubar:!1})},openJobInspector:function(e){var t=Splunk.util.make_url("search","inspector");if(!e)return alert(_("Cannot open job inspector; no search job ID provided!")),!1;var n={sid:e,namespace:Splunk.util.getCurrentApp()};t+="?"+Splunk.util.propToQueryString(n);var r=this.open(t,"splunk_job_inspector",{width:870,height:560,menubar:!1});return r}},define("splunk.window",["splunk","splunk.util","splunk.i18n"],function(e){return function(){var t,n;return t||e.Splunk.window}}(this)),define("views/shared/controls/Control",["jquery","underscore","backbone","module","views/Base"],function(e,t,n,r,i){return i.extend({moduleId:r.id,className:"control",initialize:function(){i.prototype.initialize.apply(this,arguments);var e={defaultValue:"",enabled:!0,flag:!1,validate:!1,forceUpdate:!1,updateModel:!0};return t.defaults(this.options,e),this._value=this.options.defaultValue,this.model&&(this.registerListeners(),this.setValueFromModel(!1)),this},registerListeners:function(){this.model.on("change:"+this.options.modelAttribute,this.setValueFromModel,this)},getValue:function(){return this._value},getModelAttribute:function(){return this.options.modelAttribute},setValue:function(e,t){var n=this._setValue(e,t);return this.options.updateModel&&this.updateModel(),n},_setValue:function(e,t,n){e=this.normalizeValue(e);if(this._value!==e){var r=this._value;this._value=e,t===!1||this.render(),n||this.trigger("change",e,r)}return this},normalizeValue:function(e){return e},unsetValue:function(){this.model.unset(this.getModelAttribute())},setValueFromModel:function(e){return this._setValue(this.model.get(this.options.modelAttribute),e),this},updateModel:function(){var e={validate:this.options.validate,forceUpdate:this.options.forceUpdate};return this.model?this.model[this.options.save?"save":"set"](this.getUpdatedModelAttributes(),e):!0},getUpdatedModelAttributes:function(){var e={};return e[this.options.modelAttribute]=this._value,e},enable:function(){this.$el.removeClass("enabled")},disable:function(){this.$el.addClass("enabled")}})}),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s,o,u,a;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,o=this.options.trigger.split(" ");for(a=o.length;a--;)u=o[a],u=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):u!="manual"&&(i=u=="hover"?"mouseenter":"focus",s=u=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e.fn[this.type].defaults,r={},i;this._options&&e.each(this._options,function(e,t){n[e]!=t&&(r[e]=t)},this),i=e(t.currentTarget)[this.type](r).data(this.type);if(!i.options.delay||!i.options.delay.show)return i.show();clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,i,s,o,u=e.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(u);if(u.isDefaultPrevented())return;t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,i=t[0].offsetHeight;switch(s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,s,o,u,a;n.offset(e).addClass(t).addClass("in"),s=n[0].offsetWidth,o=n[0].offsetHeight,t=="top"&&o!=i&&(e.top=e.top+i-o,a=!0),t=="bottom"||t=="top"?(u=0,e.left<0&&(u=e.left*-2,e.left=0,n.offset(e),s=n[0].offsetWidth,o=n[0].offsetHeight),this.replaceArrow(u-r+s,s,"left")):this.replaceArrow(o-i,o,"top"),a&&n.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function i(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var t=this,n=this.tip(),r=e.Event("hide");this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),define("bootstrap.tooltip",["jquery"],function(){}),define("views/shared/controls/SyntheticSelectControl",["jquery","underscore","backbone","module","views/shared/controls/Control","views/shared/delegates/Popdown","util/math_utils","bootstrap.tooltip"],function(e,t,n,r,i,s,o,u){return i.extend({moduleId:r.id,className:"control btn-group",keys:{UP_ARROW:38,DOWN_ARROW:40},items:undefined,groupedItems:undefined,renderList:!0,initialize:function(){var e={toggleClassName:"",menuClassName:"",iconClassName:"icon-large",iconURLClassName:"icon-large",descriptionPosition:"right",label:"",popdownOptions:{el:this.el},html:"",nearestValue:!1};t.defaults(this.options,e),t.defaults(this.options.popdownOptions,e.popdownOptions),this.normalizeItems(this.options.items,this.options.groupedItems);var n=this.options.modelAttribute;n&&this.$el.attr("data-name",n),i.prototype.initialize.call(this,arguments)},setItems:function(e){this.normalizeItems(e,undefined),this.debouncedRender()},setGroupedItems:function(e){this.normalizeItems(undefined,e),this.debouncedRender()},normalizeItems:function(e,n){if(!e&&n){this.items=[],this.groupedItems=n.slice();if(!(n instanceof Array&&n[0].items instanceof Array&&!t.isUndefined(n[0].items[0].value)))throw new Error("Invalid groupedItems Input");t.each(n,function(e,n){t.each(e.items,function(e,t){this.items.push(e)},this)},this)}else if(e){this.items=e.slice(),this.groupedItems=[];var r={};r.label="",r.items=this.items,this.groupedItems.push(r)}this.options.nearestValue&&(this.valuesAsInts=[],t.each(this.items,function(e){var n=parseInt(e.value,10);if(t.isNaN(n))throw new Error("You cannot use the nearestValue option with a SyntheticSelect control that has values other than ints!");this.valuesAsInts.push(n)},this)),this.renderList=!0},stopListening:function(){e(window).off("."+this.cid),this.$menu&&this.$menu.off("."+this.cid),i.prototype.stopListening.apply(this,arguments)},show:function(){this.$menu.find(".icon-check:visible").closest("a").focus(),this.$menu.on("click."+this.cid,"a",this.click.bind(this)),e(window).on("keydown."+this.cid,this.keydown.bind(this)),this.trigger("popdownShown")},hide:function(){e(window).off("."+this.cid),this.$menu.off("."+this.cid),this.trigger("popdownHidden")},disable:function(){this.options.enabled=!1,this.$("a.dropdown-toggle").addClass("disabled")},enable:function(){this.options.enabled=!0,this.$("a.dropdown-toggle").removeClass("disabled")},tooltip:function(e){this.$("a.dropdown-toggle").tooltip(e)},click:function(t){var n=e(t.currentTarget);n.hasClass("disabled")||this.setValue(n.data("value"),!0),t.preventDefault()},keydown:function(n){if(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)return!0;var r=e(":focus"),i=!1,s=-1,o=-1,u=r.data("value");e.contains(this.el,r[0])&&t.each(this.items,function(e,t){e["value"]==u?s=t:!1},this);if(n.keyCode===this.keys.DOWN_ARROW){if(s<this.items.length-1)return this.$menu.find("[data-value="+this.items[s+1].value+"]").focus(),!1}else{if(n.keyCode===this.keys.UP_ARROW)return s>0?(this.$menu.find("[data-value="+this.items[s-1].value+"]").focus(),!1):(this.$(".dropdown-toggle").focus(),!1);if(n.keyCode>=48&&n.keyCode<=57||n.keyCode>=65&&n.keyCode<=90||n.keyCode>=97&&n.keyCode<=122||n.keyCode>=128&&n.keyCode<=165){var a=!1;this.$menu.find(" a").each(function(){if(a)return;var t=e(this),r=t.text().replace(/^\s\s*/,"").substring(0,1).toLowerCase(),i=String.fromCharCode(n.keyCode).toLowerCase();i==r&&t.focus()})}}},findItem:function(){if(!this.items||!this.items.length)return void 0;if(this.options.nearestValue){var e=o.nearestMatchAndIndexInArray(this._value,this.valuesAsInts);if(e.index!=void 0)return this.items[e.index]}return t.find(this.items,function(e){return t.isEqual(this._value,e.value)},this)||this.items[0]},render:function(){var n=this.groupedItems,r=this.items;if(!r||!r.length)return this;var i=this.findItem();if(this.renderList){var o=this.compiledTemplate({groupedItems:n,item:i,options:this.options,menuWidthClass:this.options.menuWidth!="normal"?"dropdown-menu-"+this.options.menuWidth:""});this.$el.html(o),this.$el.find(".dropdown-menu a").each(function(t,n){e(n).data("value",r[t].value)}),this.$menu=this.$(".dropdown-menu"),this.children.popdown&&this.children.popdown.remove(),this.children.popdown=new s(this.options.popdownOptions),this.children.popdown.on("shown",this.show.bind(this)),this.children.popdown.on("hidden",this.hide.bind(this)),this.renderList=!1}var u=this.options.additionalClassNames;return u&&this.$el.addClass(u),this.$menu.find("a").each(function(n,r){var s=e(r);s.find(".icon-check")[t.isEqual(s.data("value"),i.value)?"show":"hide"]()}),i.label&&this.$(".dropdown-toggle > .link-label").text(t(this.options.label).t()+" "+t(i.label).t()),this.$(".dropdown-toggle > i").attr("class","icon-"+i.icon),this},template:'            <a class="dropdown-toggle <%- options.toggleClassName %>" href="#">                <% if (item.icon) { %> <i class="icon-<%-item.icon%> icon-large"></i><% } %>                <span class="link-label"><%- options.label %> <%- item.label %></span><span class="caret"></span>            </a>            <div class="dropdown-menu dropdown-menu-selectable <%- options.menuClassName %> <%- menuWidthClass %> ">            <div class="arrow"></div>                <% _.each(groupedItems, function(group, key, fullItems) { %>                <ul>                <% _.each(group.items, function(element, index, list) { %>                    <li><a class="<%- element.enabled === false ? "disabled" : ""%>" href="#" data-value="<%- element.value %>">                        <i class="icon-check"></i>                        <% if (element.icon) { %> <i class="icon-<%-element.icon%> <%-options.iconClassName %>"></i><% } %>                        <% if (element.iconURL) { %> <img class="<%-options.iconURLClassName %>" src="<%-element.iconURL%>" alt="icon"><% } %>                        <span class="link-label"><%- element.label %></span>                        <% if (element.description && (options.descriptionPosition == "right")) { %> <span class="link-description"><%- element.description %></span><% } %>                        <% if (element.description && (options.descriptionPosition == "bottom")) { %> <span class="link-description-below"><%- element.description %></span><% } %>                    </a></li>                <% }); %>                </ul>                <% }); %>            </div>        '})}),define("views/shared/controls/SyntheticRadioControl",["jquery","underscore","module","views/shared/controls/Control","bootstrap.tooltip"],function(e,t,n,r){return r.extend({className:"control btn-group",moduleId:n.id,initialize:function(){var e={buttonClassName:"btn",elastic:!1};t.defaults(this.options,e);var n={iconSize:"icon-large"};t.each(this.options.items,function(e,r,i){t.defaults(e,n)}),this.options.modelAttribute&&this.$el.attr("data-name",this.options.modelAttribute),this.$el.addClass("btn-group-radio"),r.prototype.initialize.call(this,this.options)},events:{"click button":function(t){!this.options.enabled||this.setValue(e(t.currentTarget).data("value"),!0),t.preventDefault()}},disable:function(){this.options.enabled=!1,this.$("button").addClass("disabled")},enable:function(){this.options.enabled=!0,this.$("button").removeClass("disabled")},render:function(){if(!this.el.innerHTML){var n=t.template(this.template,{items:this.options.items,buttonClassName:this.options.buttonClassName,help:this.options.help,elastic:this.options.elastic,enabled:this.options.enabled,modelAttribute:this.options.modelAttribute});this.$el.html(n),this.$('[rel="tooltip"]').tooltip({animation:!1,container:"body"});var r=this.options.items;this.$el.find("button").each(function(t,n){e(n).attr("data-value",r[t].value).data("value",r[t].value)})}var i=this._value;this.$el.find("button").each(function(n,r){var s=e(r);s[t.isEqual(s.data("value"),i)?"addClass":"removeClass"]("active")});var s=this.options.additionalClassNames;return s&&this.$el.addClass(s),this},remove:function(){this.$('[rel="tooltip"]').tooltip("destroy"),r.prototype.remove.call(this)},template:'            <% _.each(items, function(item, index){ %>                <button name="<%- modelAttribute || "" %>"                         <% if (elastic) { %> style="width:<%- Math.round(100*(1/items.length)) %>%" <% } %>                         <% if (item.tooltip) { %> rel="tooltip" title="<%=item.tooltip%>" <% }                         %> class="<%=buttonClassName%> <%- item.className || "" %> <%- enabled ? "" : "disabled" %>">                    <% if (item.icon) { %> <i class="icon-<%-item.icon%> <%-item.iconSize%>"></i><% } %>                    <% if(item.label){ %> <%= item.label%> <%}%>                </button>            <% }) %>        '})}),define("views/shared/controls/SyntheticCheckboxControl",["underscore","module","views/shared/controls/Control","splunk.util"],function(e,t,n,r){return n.extend({className:"control",moduleId:t.id,initialize:function(){var t={checkboxClassName:"btn",defaultValue:!1,label:""};e.defaults(this.options,t),this.options.modelAttribute&&this.$el.attr("data-name",this.options.modelAttribute),n.prototype.initialize.call(this,arguments)},events:{"click label":function(e){!this.options.enabled||this.setValue(!this._value),e.preventDefault()},"click .btn":function(e){e.preventDefault()}},disable:function(){this.options.enabled=!1,this.$("label").addClass("disabled"),this.$(".btn").addClass("disabled")},enable:function(){this.options.enabled=!0,this.$("label").removeClass("disabled"),this.$(".btn").removeClass("disabled")},normalizeValue:function(e){return r.normalizeBoolean(e)?1:0},render:function(){var t=this.options.invertValue?!this.getValue():this.getValue();if(!this.el.innerHTML){var n=e.template(this.template,{options:this.options,checked:t});this.$el.html(n),this.options.enabled||this.disable()}else this.$(".icon-check")[t?"show":"hide"]();var r=this.options.additionalClassNames;return r&&this.$el.addClass(r),this},template:'            <label class="checkbox">                  <a href="#" data-name="<%- options.modelAttribute || "" %>" class="<%- options.checkboxClassName %>"><i class="icon-check" <% if (!checked) {%>style="display:none"<% } %>></i></a>                  <%= options.label%>            </label>        '})}),define("views/shared/controls/TextControl",["underscore","module","views/shared/controls/Control"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){var t={inputClassName:"",placeholder:"",prepend:!1,append:!1,useSyntheticPlaceholder:!1,trimLeadingSpace:!0,trimTrailingSpace:!0,password:!1};e.defaults(this.options,t),this.options.placeholder&&!this.supportsNativePlaceholder()&&(this.options.useSyntheticPlaceholder=!0),this.options.modelAttribute&&this.$el.attr("data-name",this.options.modelAttribute),n.prototype.initialize.call(this,arguments)},events:{"change input":function(e){var t=this.$input.val();this.options.trimLeadingSpace&&(t=t.replace(/^\s+/g,"")),this.options.trimTrailingSpace&&(t=t.replace(/\s+$/g,"")),this.setValue(t,!1),this.updatePlaceholder()},"click .placeholder":function(e){this.$input.focus()},"keyup input":function(e){this.updatePlaceholder(),this.trigger("keyup",e,this.$input.val())},"mouseup input":function(e){this.updatePlaceholder()}},updatePlaceholder:function(){!this.options.useSyntheticPlaceholder||this.$placeholder[this.$input.val()===""?"show":"hide"]()},supportsNativePlaceholder:function(){var e=document.createElement("input");return"placeholder"in e},disable:function(){this.$input.hide(),this.$disabledInput.css("display","inline-block")},enable:function(){this.$input.show(),this.$disabledInput.hide()},render:function(){if(!this.el.innerHTML){var t=e.template(this.template,{options:this.options,value:this._value||""});this.$el.html(t),this.$input=this.$("input"),this.$disabledInput=this.$(".uneditable-input"),!this.options.useSyntheticPlaceholder||(this.$placeholder=this.$(".placeholder")),this.options.prepend&&this.$el.addClass("input-prepend").prepend(this.options.prepend),this.options.append&&this.$el.addClass("input-append").append(this.options.append)}else this.$input.val(this._value),this.$disabledInput.text(this._value);this.updatePlaceholder();var n=this.options.additionalClassNames;return n&&this.$el.addClass(n),this},template:'        <span class="uneditable-input <%= options.inputClassName %>" <% if(options.enabled){ %>style="display:none"<%}%>><%- value %></span>        <input type="<% if (options.password){%>password<%}else{%>text<%}%>" name="<%- options.modelAttribute || "" %>" class="<%= options.inputClassName %>" value="<%- value %>" <% if(options.placeholder && !options.useSyntheticPlaceholder){ %>placeholder="<%- options.placeholder %>"<%}%> <% if(!options.enabled){ %>style="display:none"<%}%>>            <% if (options.useSyntheticPlaceholder) { %> <span class="placeholder"><%- options.placeholder %></span><% } %>        '})}),define("views/shared/controls/TextareaControl",["underscore","module","views/shared/controls/Control"],function(e,t,n){var r=13;return n.extend({moduleId:t.id,initialize:function(){var t={textareaClassName:"",placeholder:"",useSyntheticPlaceholder:!1};e.defaults(this.options,t),this.options.placeholder&&!this.supportsNativePlaceholder()&&(this.options.useSyntheticPlaceholder=!0),this.options.modelAttribute&&this.$el.attr("data-name",this.options.modelAttribute),n.prototype.initialize.call(this,arguments)},events:{"change textarea":function(e){!this.options.enabled||this.setValue(this.$("textarea").val(),!1),!this.options.enabled||this.updatePlaceholder()},"click .placeholder":function(e){!this.options.enabled||this.$textarea.focus()},"keyup textarea":function(e){this.updatePlaceholder()},"mouseup textarea":function(e){this.updatePlaceholder()},"keypress textarea":function(e){e.which==r&&e.stopPropagation()}},updatePlaceholder:function(){!this.options.useSyntheticPlaceholder||this.$placeholder[this.$textarea.val()===""?"show":"hide"]()},supportsNativePlaceholder:function(){var e=document.createElement("input");return e.hasOwnProperty&&e.hasOwnProperty("placeholder")?!0:!1},disable:function(){this.options.enabled=!1,this.$textarea.hide(),this.$disabledTextarea.show()},enable:function(){this.options.enabled=!0,this.$textarea.show(),this.$disabledTextarea.hide()},render:function(){if(!this.el.innerHTML){var t=e.template(this.template,{options:this.options,value:this._value||""});this.$el.html(t),this.$textarea=this.$("textarea"),this.$disabledTextarea=this.$(".uneditable-input"),!this.options.useSyntheticPlaceholder||(this.$placeholder=this.$(".placeholder"))}else this.$textarea.val(this._value),this.$disabledTextarea.text(this._value);this.updatePlaceholder();var n=this.options.additionalClassNames;return n&&this.$el.addClass(n),this},template:'            <span class="uneditable-input uneditable-input-multiline <%= options.inputClassName %>" <% if(options.enabled){ %>style="display:none"<%}%>><%- value %></span>            <textarea type="text" name="<%- options.modelAttribute || "" %>" class="<%= options.textareaClassName %>" <% if(options.placeholder && !options.useSyntheticPlaceholder){ %>placeholder="<%- options.placeholder %>"<%}%> <% if(!options.enabled){ %>style="display:none"<%}%>><%- value %></textarea>            <% if (options.useSyntheticPlaceholder) { %> <span class="placeholder"><%- options.placeholder %></span><% } %>        '})}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),define("jquery.ui.core",["jquery"],function(){}),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(n[u]=e.isPlainObject(a)?e.widget.extend({},n[u],a):a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(e,t){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){n?(t=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element);var r=this;e.each(n,function(n,i){function s(){if(r.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof i=="string"?r[i]:i).apply(r,arguments)}typeof i!="string"&&(s.guid=i.guid=i.guid||s.guid||e.guid++);var o=n.match(/^(\w+)\s*(.*)$/),u=o[1]+r.eventNamespace,a=o[2];a?r.widget().delegate(a,u,s):t.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),define("jquery.ui.widget",["jquery.ui.core"],function(){}),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.0"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.0",window["DP_jQuery_"+dpuuid]=$}(jQuery),define("jquery.ui.datepicker",["jquery","jquery.ui.widget","splunk.i18n"],function(e){return function(){var t,n;return n=function(e,t,n){var r=n.jQuery_ui_datepicker_install;return typeof r=="function"&&r(e),e.ui.datepicker},t=n.apply(e,arguments),t||e.jquery.ui.datepicker}}(this)),define("views/shared/controls/DateControl",["jquery","underscore","backbone","module","views/shared/controls/Control","jquery.ui.datepicker"],function(e,t,n,r,i,s){return i.extend({moduleId:r.id,initialize:function(){var e={inputClassName:"",help:"MM/DD/YYYY"};t.defaults(this.options,e),i.prototype.initialize.call(this,this.options),this.model.on("change",this.render,this)},events:{"change input[type=text]":function(e){this.setValue(this.$("input").datepicker("getDate"),!1)}},updateModel:function(){var e={validate:this.options.validate,forceUpdate:this.options.forceUpdate};return this.model?this.model.setMonDayYearFromJSDate(this._value,e):!0},render:function(){if(!this.el.innerHTML){var e=t.template(this.template,{options:this.options});this.$el.html(e),this.$("input").datepicker({defaultDate:this.model.jsDate()});var n=this.options.additionalClassNames;n&&this.$el.addClass(n)}var r=this.$("input").datepicker("getDate"),i=this.model.jsDate();return(!r||r.getTime()!==i.getTime())&&this.$("input").datepicker("setDate",i),this.$("input").blur(),this},template:'            <input type="text" size="8" class="<%= options.inputClassName %>" value=""/>        '})}),define("views/shared/controls/LabelControl",["underscore","module","views/shared/controls/Control","bootstrap.tooltip"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){var t={inputClassName:"input-label",defaultValue:"label",iconSize:"icon-large"};e.defaults(this.options,t),n.prototype.initialize.call(this,arguments)},render:function(){var t=this._value||"";if(!this.el.innerHTML){var n=e.template(this.template,{options:this.options,value:t});this.$el.html(n),this.$span=this.$("span")}else this.$span.text(t);var r=this.options.additionalClassNames;return r&&this.$el.addClass(r),this.options.modelAttribute&&this.$el.attr("data-name",this.options.modelAttribute),this.options.tooltip&&this.$(".tooltip-text").tooltip({animation:!1,title:this.options.tooltip}),this},template:'            <span class="<%= options.inputClassName %><% if(options.tooltip) { %> tooltip-text<% } %>">                <% if (options.icon) { %> <i class="icon-<%-options.icon%> <%-options.iconSize%>"></i><% } %>                <%- value %>            </span>        '})}),define("views/shared/controls/ControlGroup",["jquery","underscore","module","backbone","views/Base","views/shared/controls/Control","views/shared/controls/SyntheticSelectControl","views/shared/controls/SyntheticRadioControl","views/shared/controls/SyntheticCheckboxControl","views/shared/controls/TextControl","views/shared/controls/TextareaControl","views/shared/controls/DateControl","views/shared/controls/LabelControl","bootstrap.tooltip"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){return i.extend({className:"control-group",moduleId:n.id,initialize:function(){var n={label:"",controls:[],error:!1,_errorMsg:"",controlClass:"",enabled:!0,required:!1};t.defaults(this.options,n),this.options.controls.length==0&&(this.options.controls=[{type:this.options.controlType,options:this.options.controlOptions}]),this.controlTypes={SyntheticSelect:o,SyntheticRadio:u,SyntheticCheckbox:a,Text:f,Textarea:l,Date:c,Label:h},i.prototype.initialize.call(this,arguments),this.options.enabled||this.$el.addClass("disabled"),t(this.options.controls).isArray()||(this.options.controls=[this.options.controls]),this.childList=[],t.each(this.options.controls,function(t,n){if(t instanceof r.View)this.children["child"+n]=t,this.childList.push(t);else{var i=e.extend(!0,{validate:!!this.options.validate,forceUpdate:!!this.options.forceUpdate,enabled:!!this.options.enabled},t.options),s=this.children["child"+n]=new this.controlTypes[t.type](i);this.childList.push(s)}},this),this.perAttrValidation={},t.isArray(this.options.controls)&&t.each(this.options.controls,function(e,n){e.options&&e.options.model&&(this.perAttrValidation[e.options.modelAttribute]=!0,e.options.model.on("attributeValidated:"+e.options.modelAttribute,function(e,n,r){this.perAttrValidation[n]=e,this.error(t.any(this.perAttrValidation,function(e){return!e}))},this))},this),this.options.controlOptions&&this.options.controlOptions.model instanceof r.Model&&(t.isArray(this.options.controlOptions)||(this.perAttrValidation[this.options.controlOptions.modelAttribute]=!0,this.options.controlOptions.model.on("attributeValidated:"+this.options.controlOptions.modelAttribute,function(e,n,r){this.perAttrValidation[n]=e,this.error(t.any(this.perAttrValidation,function(e){return!e}))},this)))},events:{"click a.tooltip-link":function(e){e.preventDefault()}},render:function(){if(!this.el.innerHTML){var e=t.template(this.template,{_:t,controlCid:this.children.child0.cid,label:this.options.label,help:this.options.help,controlClass:this.options.controlClass,helpClass:this.options.helpClass,tooltip:this.options.tooltip,required:this.options.required});this.$el.html(e),this.options.tooltip&&this.$(".tooltip-link").tooltip({animation:!1,title:this.options.tooltip}),t.each(this.childList,function(e,t){this.$(".controls").append(e.render().$el),t||e.$el.attr("id","control-"+this.children.child0.cid)},this),this.options.help&&this.$(".controls").append(this.$(".help-block"))}return this.error(this.options.error),this},hide:function(){this.$el.hide()},show:function(){this.$el.show()},enable:function(){this.$el.removeClass("disabled"),t(this.getAllControls()).invoke("enable")},disable:function(){this.$el.addClass("disabled"),t(this.getAllControls()).invoke("disable")},getModelAttributes:function(){var e=[];return t.each(this.childList,function(t){e.push(t.getModelAttribute())},this),e},error:function(e,t){return e?this.$el.addClass("error"):this.$el.removeClass("error"),this._errorMsg=t,this},getAllControls:function(){return t(this.children).filter(function(e){return e instanceof s})},template:'                <label class="control-label" for="control-<%- controlCid %>">                <%- label %>                <% if (tooltip) { %>                    <a href="#" class="tooltip-link"><%- _("?").t() %></a>                <% } %>                <% if (required) { %>                    <span class="required">*</span>                <% } %>                </label>                <div class="controls <%- controlClass %>">                <% if (help) { %> <span class="help-block <%- helpClass %>"><%= help %></span><% } %>                </div>                        '})}),define("models/FlashMessage",["models/Base"],function(e){return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments)},idAttribute:"key"})}),define("collections/FlashMessages",["collections/Base","models/FlashMessage"],function(e,t){return e.extend({model:t,initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("helpers/FlashMessagesHelper",["jquery","underscore","models/FlashMessage","util/splunkd_utils"],function(e,t,n,r){var i=function(n,r){this.options=r||{},this.defaults=e.extend(!0,{},this.options),t.defaults(this.defaults,{removeDuplicates:!0});if(t.isUndefined(n))throw"FlashMessagesHelper must be created with a valid FlashMessages collection";this.flashMessagesCollection=n,this.registered={},this.clientModelMessages={},this.serverModelMessages={},this.generalMessages={}};return i.prototype={register:function(e,n){this.registered[e.cid]={instance:e},n&&(this.registered[e.cid].whitelist=t(n).isArray()?n:[n]),e.on("serverValidated",t.debounce(this.serverValidationHandler,0),this),e.on("validated",t.debounce(this.clientValidationHandler,0),this)},unregister:function(e){e.off(null,null,this),delete this.clientModelMessages[e.cid],delete this.serverModelMessages[e.cid],delete this.registered[e.cid]},destroy:function(){var e=t(this.registered).pluck("instance");t(e).each(function(e){this.unregister(e)},this)},clientValidationHandler:function(e,t,n){this.clientModelMessages[t.cid]=n,this.updateFlashMessageCollection()},serverValidationHandler:function(e,t,n){this.serverModelMessages[t.cid]=n,this.updateFlashMessageCollection()},addGeneralMessage:function(e,t){this.generalMessages[e]=t,this.updateFlashMessageCollection()},removeGeneralMessage:function(e){t(this.generalMessages).has(e)&&(delete this.generalMessages[e],this.updateFlashMessageCollection())},getGeneralMessagesSize:function(){return t(this.generalMessages).size()},getClientModelMessagesSize:function(){return t(this.clientModelMessages).size()},getServerModelMessagesSize:function(){return t(this.serverModelMessages).size()},updateFlashMessageCollection:function(){var e=[],i=[],s=[];t(this.clientModelMessages).each(function(i){t(i).each(function(t){e.push(new n({type:r.ERROR,html:t}))},this)},this),t(this.serverModelMessages).each(function(e,s){var o=this.registered[s]?this.registered[s].whitelist:null;t(e).each(function(e){(!o||t(o).contains(e.type))&&i.push(new n({type:r.normalizeType(e.type),html:t.escape(e.message)}))},this)},this),t(this.generalMessages).each(function(e){s.push(new n({type:r.normalizeType(e.type),html:e.html}))},this);var o=t.union(e,i,s);this.defaults.removeDuplicates&&(o=t(o).uniq(function(e){return e.get("html")})),this.defaults.postProcess&&(o=this.defaults.postProcess(o)),this.flashMessagesCollection.reset(o)}},i}),define("views/shared/FlashMessages",["jquery","underscore","backbone","views/Base","collections/FlashMessages","helpers/FlashMessagesHelper","module"],function(e,t,n,r,i,s,o){return r.extend({moduleId:o.id,className:"alerts",initialize:function(o){r.prototype.initialize.call(this,o),this.flashMsgCollection=new i,this.flashMsgHelper=new s(this.flashMsgCollection,this.options.helperOptions),this.flashMsgCollection.on("add remove reset",this.render,this),this.model instanceof n.Model?(this.flashMsgHelper.register(this.model,this.options.whitelist),this.model.error&&this.model.error.get("messages")&&this.flashMsgHelper.serverValidationHandler(!0,this.model,this.model.error.get("messages"))):t(this.model).each(function(e,t){this.flashMsgHelper.register(e,this.options.whitelist),e.error&&e.error.get("messages")&&this.flashMsgHelper.serverValidationHandler(!0,e,e.error.get("messages"))},this),this.collection instanceof n.Collection?(this.flashMsgHelper.register(this.collection,this.options.whitelist),this.collection.each(function(e){this.flashMsgHelper.register(e,this.options.whitelist)},this)):t(this.collection).each(function(e){this.flashMsgHelper.register(e,this.options.whitelist),e.each(function(e){this.flashMsgHelper.register(e,this.options.whitelist)},this)},this),this.beforeUnloadHandler=t(function(){this.sleep()}).bind(this),e(window).on("beforeunload",this.beforeUnloadHandler)},register:function(e,t){this.flashMsgHelper.register(e,t)},unregister:function(e){this.flashMsgHelper.unregister(e)},remove:function(){return this.flashMsgCollection.off(null,null,this),this.flashMsgHelper.destroy(),e(window).off("beforeunload",this.beforeUnloadHandler),r.prototype.remove.apply(this,arguments)},render:function(){return this.$el.empty(),this.$el.append(this.compiledTemplate({flashMessages:this.flashMsgCollection})),this.flashMsgCollection.length?this.$el.show():this.$el.hide(),this},template:'                <% flashMessages.each(function(flashMessage){ %>                     <div class="alert alert-<%- flashMessage.get("type") %>">                        <i class="icon-alert"></i>                        <%= flashMessage.get("html") %>                    </div>                <% }); %>             '})}),define("views/shared/jobstatus/buttons/ExportResultsDialog",["underscore","models/Base","module","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/FlashMessages","uri/route","util/pdf_utils","util/math_utils"],function(e,t,n,r,i,s,o,u,a){return r.extend({moduleId:n.id,initialize:function(n){r.prototype.initialize.apply(this,arguments);var f=t.extend({defaults:{fileName:"",format:"csv",limitResults:"unlimited",maxResults:1e3},validation:{maxResults:{fn:"validateMaxResults"}},validateMaxResults:function(t,n,r){if((r.format==="pdf"||r.limitResults==="limit")&&(!a.isInteger(t)||parseFloat(t)<=0))return e("Max results must be an integer greater than 0").t()}});this.model={searchJob:this.model.searchJob,application:this.model.application,report:this.model.report,inmem:new f},this.children.flashMessage=new s({model:this.model.inmem}),this.deferredPdfAvailable=$.Deferred(),this.deferredInitializeFormat=$.Deferred(),this.usePanelType=n.usePanelType,this.resultTypeIsReport=this.usePanelType?this.model.report.entry.content.get("display.general.type")!=="events":!!this.model.searchJob.entry.content.get("reportSearch"),this.model.report?this.deferredPdfAvailable=u.isPdfServiceAvailable():this.deferredPdfAvailable.resolve(!1),$.when(this.deferredPdfAvailable).then(function(t){var n=[{label:e("CSV").t(),value:"csv"},{label:e("XML").t(),value:"xml"},{label:e("JSON").t(),value:"json"}];this.model.report&&this.model.report.id&&t&&n.unshift({label:e("PDF").t(),value:"pdf"}),this.resultTypeIsReport||n.unshift({label:e("Raw Events").t(),value:"raw"}),this.children.formatControl=new i({controlType:"SyntheticSelect",controlOptions:{modelAttribute:"format",model:this.model.inmem,items:n,save:!1,toggleClassName:"btn",labelPosition:"outside",elastic:!0,popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},label:e("Format").t()}),this.deferredInitializeFormat.resolve()}.bind(this)),this.children.filenameControl=new i({controlType:"Text",controlOptions:{modelAttribute:"fileName",model:this.model.inmem,placeholder:"optional"},label:e("File Name").t()}),this.children.limitResultsControl=new i({controlType:"SyntheticRadio",controlOptions:{modelAttribute:"limitResults",model:this.model.inmem,items:[{label:e("Unlimited").t(),value:"unlimited"},{label:e("Limited").t(),value:"limit"}],save:!1,toggleClassName:"btn",labelPosition:"outside",elastic:!0},label:e("Number of Results").t()}),this.children.maxResultsControl=new i({controlType:"Text",controlOptions:{modelAttribute:"maxResults",model:this.model.inmem},label:e("Max Results").t()}),this.model.inmem.on("change:limitResults",this.toggleMaxResults,this),this.model.inmem.on("change:format",this.toggleByFormat,this),this.model.inmem.on("validated",function(e,t,n){if(e){var r=this.model.inmem.get("format"),i=this.model.inmem.get("maxResults"),s=this.model.inmem.get("limitResults")==="limit"?i:0;if(r==="pdf"){var a="",f=this.model.report.entry.content.get("action.email.reportPaperOrientation"),l=this.model.report.entry.content.get("action.email.reportPaperSize")||"a2";f==="landscape"&&(a="-landscape"),u.getRenderURL(this.model.report.entry.get("name"),this.model.report.entry.acl.get("app"),{sid:this.model.searchJob.id,"paper-size":l+a,"max-rows-per-table":i},"report").done(function(e){this.hide(),window.open(e)}.bind(this))}else window.location.href=o.exportUrl(this.model.application.get("root"),this.model.application.get("locale"),this.model.searchJob.get("id"),this.model.inmem.get("fileName"),this.model.inmem.get("format"),this.model.inmem.get("limitResults"),i,s,this.resultTypeIsReport),this.hide()}},this)},events:$.extend({},r.prototype.events,{"click .btn-primary":function(e){this.model.inmem.validate(),e.preventDefault()}}),toggleByFormat:function(){this.model.inmem.get("format")==="pdf"?(this.children.filenameControl.$el.hide(),this.children.limitResultsControl.$el.hide(),this.children.maxResultsControl.$el.show()):(this.children.filenameControl.$el.show(),this.children.limitResultsControl.$el.show(),this.toggleMaxResults())},toggleMaxResults:function(){this.model.inmem.get("limitResults")==="unlimited"?this.children.maxResultsControl.$el.hide():this.children.maxResultsControl.$el.show()},render:function(){$.when(this.deferredInitializeFormat).then(function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Export Results").t()),this.$(r.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL_JUSTIFIED),this.$(r.BODY_FORM_SELECTOR).append(this.children.formatControl.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.filenameControl.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.limitResultsControl.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.maxResultsControl.render().el),this.toggleByFormat(),this.toggleMaxResults(),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+e("Export").t()+"</a>"),this}.bind(this))}})}),define("splunkjs/mvc/basemanager",["require","exports","module","underscore","backbone","util/console","./mvc"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=e("util/console"),o=e("./mvc"),u=i.Model.extend({constructor:function(e,t){e=e||{},t=t||{};var n=t.id||e.id;n===undefined&&(n=t.name||e.name,n!==undefined&&s.log("Use of 'name' to specify the ID of a Splunk model is deprecated.")),n===undefined&&(n=r.uniqueId("manager_")),this.id=this.name=t.name=t.id=n;var u=i.Model.prototype.constructor.apply(this,arguments);return o.Components.registerInstance(this.id,this,{replace:t.replace}),u},_start:function(){}});return u}),define("splunkjs/mvc/splunkresultsmodel",["require","exports","module","underscore","backbone"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=function(e){var t=e.get("data")||{},n=t.resultPreviewCount||0;return n>0},o=function(){return!0},u=i.Model.extend({defaults:{manager:null,condition:s,source:"",autofetch:!0,serialfetch:!0},initialize:function(){this.on("change:autofetch",this.handleAutofetch,this),this.handleAutofetch(),this.get("autofetch")&&this._fetch()},handleAutofetch:function(){this.get("autofetch")?(this.on("change",this._fetch,this),this.get("manager").on("change:data",this._fetch,this)):(this.off("change",null,this),this.get("manager").off("change:data",null,this))},sync:function(){return!1},destroy:function(){this.off(),this.get("manager").off(null,null,this)},_fetch:function(){this.fetch({autofetch:!0})},fetch:function(e){e=e||{};var t=!!e.autofetch,n=e.success,i=e.error;e=r.omit(e,["error","success","autofetch"]);var o=function(e,t){return i&&i(this,t,e),this},u=this.get("manager");if(!u)return o(e,r("No manager").t());var a=u.job;if(!a)return o(e,r("No job").t());var f=this.get("condition")||s;if(t&&!f(u,a))return;var l=this._requestOptions(e);if(this._isFetching&&this.get("serialfetch")){this._pendingFetchOptions=l,this._pendingFetchOptions.success=n,this._pendingFetchOptions.error=i;return}this._isFetching=!0;var c=this,h=this.get("source");a[h](l,function(t,r){var i=c._pendingFetchOptions;c._pendingFetchOptions=null,c._isFetching=!1;if(t){o(e,t);var s=null;t.data&&t.data.messages&&t.data.messages.length&&(s=t.data.messages[0]);var u=s?s.text:"An error occurred while fetching data.";c.trigger("error",u,t)}else{c._data=r,c.trigger("data",c,r),n&&n(this,r,e);if(i&&!c._isFetching){var a=c.get("manager");a&&a.job&&c.fetch(i)}}})},_requestOptions:function(e){var t=this.toJSON();return t=r.omit(t,["data","manager","source","autofetch","serialfetch","condition"]),r.extend(t,e)},data:function(){return this._data},model:function(){var e=new i.Model(this.data());e.raw=this.data()},collection:function(){var e,t,n=this.data();if(!n)return new i.Collection;var r=n.fields||[],s=[];if(n.results)s=n.results;else if(n.columns){var o=n.columns||[];for(e=0;e<o.length;e++)s.push({field:r[e],values:o[e]})}else if(n.rows){var u=n.rows||[];for(e=0;e<u.length;e++){var a=u[e],f={};for(t=0;t<r.length;t++)f[r[t]]=a[t];s.push(f)}}var l=new i.Collection(s);return l.raw=n,l},hasData:function(){return this.data()?r.isArray(this._data)&&this._data.length===1&&this._data[0].count===0?!1:this._data.results&&this._data.results.length===0?!1:this._data.fields&&this._data.fields.length===0?!1:!0:!1}},{defaultCondition:s,identityCondition:o});return u}),define("splunkjs/mvc/searchmodel",["require","exports","module","underscore","./tokenawaremodel","./tokensafestring","splunk.util"],function(e,t,n){var r=e("underscore"),i=e("./tokenawaremodel"),s=e("./tokensafestring"),o=e("splunk.util"),u=i.extend({set:function(e,t,n){var r;return e==null?this:(typeof e=="object"?(r=e,n=t):(r={})[e]=t,n&&n.qualified&&r.search&&(r.search instanceof s?r.search=new s(o.stripLeadingSearchCommand(r.search.value)):r.search=o.stripLeadingSearchCommand(r.search)),i.prototype.set.call(this,r,n))},get:function(e,t){var n=i.prototype.get.apply(this,arguments);return e==="search"&&t&&t.qualified&&n&&(n=o.addLeadingSearchCommand(n)),n},resolve:function(e){return this.get("search",e)}}),a=i.extend({});return u.ALLOWED_ATTRIBUTES=["search"],a.ALLOWED_ATTRIBUTES=["adhoc_search_level","auto_cancel","auto_finalize_ec","auto_pause","buckets","earliest_time","enable_lookups","exec_mode","force_bundle_replication","indexedRealtime","latest_time","label","lookups","max_count","max_time","namespace","now","preview","reduce_freq","reload_macros","remote_server_list","required_field_list","rf","rt_backfill","rt_blocking","rt_indexfilter","rt_maxblocksecs","rt_queue_size","search_listener","search_mode","spawn_process","status_buckets","sync_bundle_replication","time_format","timeout","ttl"],{SearchJob:a,SearchQuery:u}}),define("splunkjs/mvc/jobtracker",["require","underscore","backbone","splunkjs/mvc","util/console"],function(e){var t=e("underscore"),n=e("backbone"),r=e("splunkjs/mvc"),i=e("util/console"),s=["dispatchState","scanCount","resultCount","eventCount","eventAvailableCount","isDone","isFailed","isFinalized","doneProgress"],o=200,u=1e3,a=function(){this.initialize.apply(this,arguments)};return t.extend(a.prototype,n.Events,{initialize:function(){this._active={},this._inflight=null,this._timer=null,this._fresh=!1,this._fetch=t.bind(this._fetch,this),this.service=r.createService({app:"-",owner:"-"})},track:function(e,t){this._active[e.sid]=this._initializeItem(e,t||{}),this._fresh=!0,this._scheduleNextFetch()},untrack:function(e){var t=this._active[e];t&&(t._stop=!0,delete this._active[e])},_initializeItem:function(e,r){var i={job:e,model:new n.Model};return t.isFunction(r.progress)&&i.model.on("change",function(){r.progress(e)}),t.isFunction(r.ready)&&i.model.once("change:dispatchState",i.callbacks.ready),t.isFunction(r.done)&&i.model.on("done",r.done),t.isFunction(r.failed)&&i.model.on("failed",r.failed),t.isFunction(r.error)&&i.model.on("error",r.error),i},_scheduleNextFetch:function(){if(this._timer||this._inflight)return;var e=this._fresh?o:u;this._timer=setTimeout(this._fetch,e)},_fetch:function(){this._timer=null;var e=t.clone(this._active);if(t.isEmpty(e))return;var n=t(e).keys(),r=t(n).map(function(e){return["sid",e].join("=")}).join(" OR "),o=this;this._inflight=this.service.jobs().get("",{search:r,count:n.length},function(r,u){o._inflight=null;if(r){i.error("Error fetching search jobs: %o",r),t(e).chain().pluck("model").invoke("trigger",["error",r]),o._scheduleNextFetch();return}var a=u.data,f={},l=o._active;t(l).each(function(t,n){e.hasOwnProperty(n)||(f[n]=t)}),t.isEmpty(f)?o._fresh=!1:o._fresh=!0;var c=t(a.entry).map(function(n){var r=n.content.sid,i=e[r],o=i.job,u=i.model;if(i._stop)return r;o._load(n),u.set(t.pick(n.content,s));var a=o.properties(),l=a.dispatchState;return a.isFailed||a.isZombie||l==="FAILED"?(u.trigger("failed",o),u.off()):a.isDone||l==="DONE"?(u.trigger("done",o),u.off()):f[r]=i,r});c=t(c),t(n).each(function(e){if(!c.contains(e)){var n=l[e];if(!n)return;if(n._stop)return;!n.model.has("dispatchState")||n.model.get("dispatchState")===undefined?(f[e]=n,o._fresh=!0):(n.model.trigger("error",t("The job has not been found").t()),o._itemDone(n))}}),o._active=f,o._scheduleNextFetch()})},_itemDone:function(e){e.model.off()}}),new a}),define("splunkjs/contrib/require-css/normalize",["require","module"],function(e,t){function o(e,t,n){if(e.indexOf("data:")===0)return e;e=r(e);if(e.match(/^\//)||e.match(s))return e;var i=n.match(s),o=t.match(s);return o&&(!i||i[1]!=o[1]||i[2]!=o[2])?u(e,t):a(u(e,t),n)}function u(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));var n=t.split("/"),r=e.split("/");n.pop();while(curPart=r.shift())curPart==".."?n.pop():n.push(curPart);return n.join("/")}function a(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var n=/([^:])\/+/g,r=function(e){return e.replace(n,"$1/")},s=/[^\:\/]*:\/\/([^\/])*/,f=function(e,t,n){t=r(t),n=r(n);var i=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,s,u,e;while(s=i.exec(e)){u=s[3]||s[2]||s[5]||s[6]||s[4];var a=o(u,t,n),f=s[5]||s[6]?1:0;e=e.substr(0,i.lastIndex-u.length-f-1)+a+e.substr(i.lastIndex-f-1),i.lastIndex=i.lastIndex+(a.length-u.length)}return e};return f.convertURIBase=o,f}),define("splunkjs/contrib/require-css/css",["./normalize"],function(e){function t(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}if(typeof window=="undefined")return{load:function(e,t,n){n()}};var n=!1,r=document.getElementsByTagName("head")[0],i=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/),s=!1;!i||(i[1]||i[7]?(s=parseInt(i[1])<6||parseInt(i[7])<=9,i="trident"):i[2]?(s=!0,i="webkit"):i[3]||(i[4]?(s=parseInt(i[4])<18,i="gecko"):n&&alert("Engine detection failed")));var o={};o.pluginBuilder="./css-builder";var u=[],a={},f=[];o.addBuffer=function(e){if(t(u,e)!=-1)return;if(t(f,e)!=-1)return;u.push(e),f.push(e)},o.setBuffer=function(t,n){var r=window.location.pathname.split("/");r.pop(),r=r.join("/")+"/";var i=require.toUrl("base_url").split("/");i.pop();var s=i.join("/")+"/";s=e.convertURIBase(s,r,"/"),s.match(/^\/|([^\:\/]*:)/)||(s="/"+s),s.substr(s.length-1,1)!="/"&&(s+="/"),o.inject(e(t,s,r));for(var f=0;f<u.length;f++)(n&&u[f].substr(u[f].length-5,5)==".less"||!n&&u[f].substr(u[f].length-4,4)==".css")&&(function(e){a[e]=a[e]||!0,setTimeout(function(){typeof a[e]=="function"&&a[e](),delete a[e]},7)}(u[f]),u.splice(f--,1))},o.attachBuffer=function(e,n){for(var r=0;r<u.length;r++)if(u[r]==e)return a[e]=n,!0;if(a[e]===!0)return a[e]=n,!0;if(t(f,e)!=-1)return n(),!0};var l=function(e,t){setTimeout(function(){for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n];if(r.href==e.href)return t()}l(e,t)},10)},c=function(e,t){setTimeout(function(){try{return e.sheet.cssRules,t()}catch(n){}c(e,t)},10)};if(i=="trident"&&s)var h=[],p=[],d=0,v=function(e,t){var n;p.push({url:e,cb:t}),n=h.shift(),!n&&d++<12&&(n=document.createElement("style"),r.appendChild(n)),m(n)},m=function(e){var t=p.shift();if(!t){e.onload=y,h.push(e);return}e.onload=function(){t.cb(t.ss),m(e)};var n=e.styleSheet;t.ss=n.imports[n.addImport(t.url)]};var g=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},y=function(){};o.linkLoad=function(e,t){var o=setTimeout(function(){n&&alert("timeout"),t()},C*1e3-100),u=function(){clearTimeout(o),a&&(a.onload=y),setTimeout(t,7)};if(!s){var a=g(e);a.onload=u,r.appendChild(a)}else if(i=="webkit"){var a=g(e);l(a,u),r.appendChild(a)}else if(i=="gecko"){var f=document.createElement("style");f.textContent='@import "'+e+'"',c(f,u),r.appendChild(f)}else i=="trident"&&v(e,u)};var b=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],w={},E=function(e,t,n){if(w[e]){t(w[e]);return}var r,i,s;if(typeof XMLHttpRequest!="undefined")r=new XMLHttpRequest;else if(typeof ActiveXObject!="undefined")for(i=0;i<3;i+=1){s=b[i];try{r=new ActiveXObject(s)}catch(o){}if(r){b=[s];break}}r.open("GET",e,requirejs.inlineRequire?!1:!0),r.onreadystatechange=function(i){var s,o;r.readyState===4&&(s=r.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=r,n(o)):(w[e]=r.responseText,t(r.responseText)))},r.send(null)},S=document.createElement("style");S.type="text/css",r.appendChild(S),S.styleSheet?o.inject=function(e){S.styleSheet.cssText+=e}:o.inject=function(e){S.appendChild(document.createTextNode(e))};var x=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g,T=window.location.pathname.split("/");T.pop(),T=T.join("/")+"/";var N=function(t,n,r){t.substr(0,1)!="/"&&(t="/"+e.convertURIBase(t,T,"/")),E(t,function(i){i=e(i,t,T);var s=[],o=[],u=[],a;while(a=x.exec(i)){var f=a[4]||a[5]||a[7]||a[8]||a[9];s.push(f),o.push(x.lastIndex-a[0].length),u.push(a[0].length)}var l=0;for(var c=0;c<s.length;c++)(function(e){N(s[e],function(t){i=i.substr(0,o[e])+t+i.substr(o[e]+u[e]);var r=t.length-u[e];for(var a=e+1;a<s.length;a++)o[a]+=r;l++,l==s.length&&n(i)},r)})(c);s.length==0&&n(i)},r)};o.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)};var C,k=!1;return o.load=function(e,t,r,i,u){C=C||i.waitSeconds||7;var a=e+(u?".less":".css");if(o.attachBuffer(a,r))return;fileUrl=t.toUrl(a),!k&&n&&(alert(s?"hacking links":"not hacking"),k=!0),u?N(fileUrl,function(e){u&&(e=u(e,function(e){o.inject(e),setTimeout(r,7)}))}):o.linkLoad(fileUrl,r)},n&&(o.inspect=function(){if(S.styleSheet)return S.styleSheet.cssText;if(S.innerHTML)return S.innerHTML}),o}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/messages.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/messages",["require","exports","module","underscore","./mvc","util/console","css!../css/messages.css"],function(e,t,n){var r=e("underscore"),i=e("./mvc"),s=e("util/console");e("css!../css/messages.css");var o={cancelled:{icon:"info-circle",level:"info",message:r("Search was cancelled.").t()},empty:{icon:"blank",level:"info",message:""},"unresolved-search":{icon:"warning-sign",level:"error",message:r("Search is waiting for input...").t()},"no-events":{icon:"info-circle",level:"info",message:r("Search did not return any events.").t()},"no-results":{icon:"blank",level:"info",message:r("No results found.").t()},"no-search":{icon:"info-circle",level:"info",message:r("No search set.").t()},"no-stats":{icon:"warning-sign",level:"error",message:r("Search isn't generating any statistical results.").t()},"not-started":{icon:"info-circle",level:"info",message:r("No search started.").t()},waiting:{icon:"blank",level:"info",message:r("Waiting for data...").t()},"waiting-queued":{icon:"info-circle",level:"info",message:r("Waiting for search to start: job is queued.").t()},"waiting-preparing":{icon:"info-circle",level:"info",message:r("Waiting for search to start: job is preparing.").t()}},u='<div class="splunk-message-container <%- compact ? \'compact\' : \'\' %>">    <div class="alert alert-<%= level %>">         <i class="icon-alert"></i>         <%= message %>     </div> </div>',a={FATAL:1,ERROR:2,WARN:3,INFO:4,DEBUG:5},f={messageTemplate:u,messages:o,render:function(e,t){r.isString(e)&&(e=this.messages[e]);if(!e){s.log("Warning: Unknown message: "+e);return}e.compact=!!e.compact,t.html(r.template(this.messageTemplate,e))},resolve:function(e){return this.messages[e]},_extractErrorMessage:function(e,t,n,i){if(e){var s=e[t||"content"];if(s&&s.isZombie)return r("The search job terminated unexpectedly.").t();if(s&&s.messages&&s.messages.length){var o=r(s.messages).filter(function(e){return(e.type==="ERROR"||e.type==="FATAL")&&!!e.text});if(o.length){var u=r.chain(o).sortBy(function(e){return a[e.type]||99}).pluck("text").unique().value();return n?u.join("; "):u[0]}}}return i},getSearchErrorMessage:function(e){return f._extractErrorMessage(e,"data",!0)},getSearchFailureMessage:function(e){return f._extractErrorMessage(e,"content",!1,r("The search failed").t())}};return f}),define("splunkjs/mvc/searchmanager",["require","exports","module","underscore","jquery","JS_CACHE/config","./mvc","../splunk","./basemanager","./splunkresultsmodel","./searchmodel","splunkjs/splunk","./tokensafestring","util/console","./jobtracker","./messages"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("JS_CACHE/config"),o=e("./mvc"),u=e("../splunk").Async,a=e("./basemanager"),f=e("./splunkresultsmodel"),l=e("./searchmodel"),c=e("splunkjs/splunk"),h=e("./tokensafestring"),p=e("util/console"),d=e("./jobtracker"),v=e("./messages"),m=a.extend({moduleId:n.id,defaults:{autostart:!0,cache:!1,cancelOnUnload:!0},constructor:function(e,t){return this.query=e.queryModel||new l.SearchQuery({},t),this.search=e.searchModel||new l.SearchJob({label:e.id},t),delete e.queryModel,delete e.searchModel,a.prototype.constructor.apply(this,arguments)},initialize:function(e){this.service=o.createService({app:e.app,owner:e.owner}),this.search.has("label")||this.search.set("label",e.id),this._debouncedStartSearch=r.debounce(this.startSearch),this.on("change:autostart",this.handleAutostart,this),this.on("search:error",function(e){return this.lastError=e,!0},this),this.on("all",function(e){e.substring(0,"search:".length)==="search:"&&(this._lastSearchEvent=[e,Array.prototype.slice.call(arguments,1)])},this),this.handleAutostart(),this._start(),this._cancelOnUnload=r.bind(this._cancelOnUnload,this),this.on("change:cancelOnUnload change:cache",this.handleCancelOnUnload,this),this.handleCancelOnUnload()},handleAutostart:function(){this.get("autostart")?(this.query.on("change",this._debouncedStartSearch,this),this.search.on("change",this._debouncedStartSearch,this)):(this.query.off("change",this._debouncedStartSearch,this),this.search.off("change",this._debouncedStartSearch,this))},handleCancelOnUnload:function(){i(window).off("unload",this._cancelOnUnload),this.get("cancelOnUnload")&&!this.get("cache")&&i(window).on("unload",this._cancelOnUnload)},_cancelOnUnload:function(){this.job&&!this.job.properties().isDone&&i.ajax({url:s.PROXY_PATH+this.job.qualifiedPath+"/control",data:{action:"cancel"},type:"POST",async:!1})},set:function(e,t,n){var i;r.isObject(e)&&!r.isArray(e)||e===null?(i=e,n=t):(i={},i[e]=t);var s={},o={};return r.has(i,"search")&&this._isDictionary(i.search)&&(s=i.search,delete i.search),r.has(i,"query")&&this._isDictionary(i.query)&&(o=i.query,delete i.query),s=r.extend(s,r.pick(i,l.SearchJob.ALLOWED_ATTRIBUTES)),o=r.extend(o,r.pick(i,l.SearchQuery.ALLOWED_ATTRIBUTES)),r.isEmpty(s)||this.search.set(s,n),r.isEmpty(o)||this.query.set(o,n),a.prototype.set.call(this,i,n)},get:function(e){return r.contains(l.SearchJob.ALLOWED_ATTRIBUTES,e)?this.search.get.apply(this.search,arguments):r.contains(l.SearchQuery.ALLOWED_ATTRIBUTES,e)?this.query.get.apply(this.query,arguments):a.prototype.get.call(this,e)},_isDictionary:function(e){return r.isObject(e)&&!(e instanceof h)},_start:function(){return this.get("autostart")&&this.startSearch(),this},data:function(e,t){if(!e)throw new Error("Cannot get a results model without specifying the source.");return t=t||{},t.manager=this,t.source=e,new f(t)},_startSearchFromSid:function(e){var t=this,n=new c.Service.Job(this.service,e);n.fetch(function(i){if(i){t.trigger("search:error",r("Error in getting pre-existing search: ").t()+e);return}var s=n.properties().request;t.query.set(r.pick(s,l.SearchQuery.ALLOWED_ATTRIBUTES),{silent:!0}),t.search.set(r.pick(s,l.SearchJob.ALLOWED_ATTRIBUTES),{silent:!0}),t.createManager(n)})},startSearch:function(){this.lastError="",this.cancel();if(this.has("sid")){this._startSearchFromSid(this.get("sid"));return}var e=this.get("cache")||!1;r.isBoolean(e)&&(e=e?-1:0);var t=this._createOptionsForSearchJob(),n=e<0?(new Date(0)).valueOf():(new Date).valueOf()-e*1e3;if(!t.search){this.query.get("search",{tokens:!0})?this.trigger("search:error",v.resolve("unresolved-search").message):this.trigger("search:error",r("No search query provided.").t());return}if(e===0)return this.createSearch(),this;var i={};t.label&&(i.search="label="+t.label+"*");var s=this;return this.service.jobs().fetch(i,function(e,i){if(e){p.log("Error fetching searches"),s.trigger("search:error",r("Error fetching searches").t());return}var o=i.list();r.each(t,function(e,n){t[n]=r.isBoolean(e)||r.isNumber(e)?e.toString():e});var u=[];for(var a=0;a<o.length;++a){var f=o[a],l=f.properties().request,c=(new Date(f.published())).valueOf();r.isEqual(l,t)&&c>n&&u.push(f)}u.sort(function(e,t){var n=(new Date(e.published())).valueOf(),r=(new Date(t.published())).valueOf();return r-n});var h=u[0];h?s.createManager(h):s.createSearch()}),this},_createOptionsForSearchJob:function(){var e={};return r.each(this.search.attributes,function(t,n){t!==undefined&&(e[n]=t)}),e.search=this.query.resolve({qualified:!0}),e},pause:function(){this.job&&this.job.pause()},unpause:function(){return this.job&&this.job.unpause(),this},finalize:function(){return this.job&&this.job.finalize(),this},cancel:function(){if(this.get("cache"))return;return this.job&&(d.untrack(this.job.sid),this.job.cancel(),this.job=null,this.trigger("search:cancelled")),this},createSearchPinger:function(e){var t=this;u.whilst(function(){return t.job===e},function(n){var r=e.properties(),i,s;r.isDone||r.request===undefined||r.request.auto_cancel===undefined?i=r.ttl:r.request!==undefined&&(s=r.request&&parseInt(r.request.auto_cancel,10)||Infinity,i=Math.min(s,r.ttl));var o=parseInt((i||30)*1e3/3,10);u.sleep(o,function(){t.job===e&&e.fetch(n)})},function(){})},createManager:function(e){var t=this,n=r.bind(this._checkJob,this),i=this.get("cache");this.job=e,this.createSearchPinger(e),d.track(e,{progress:function(e){if(!n(e,i))return;var r=e.properties(),s=e.state();t.trigger("search:progress",s,e),t.unset("data",{silent:!0}),t.set("data",r)},done:function(e){if(!n(e,i))return;var r=e.state();t.trigger("search:done",r,e)},failed:function(e){if(!n(e,i))return;var r=e.state();t.trigger("search:fail",r,e)}}),this.trigger("search:start",e)},_checkJob:function(e,t){return this.job!==e?(t||e.cancel(),!1):!0},createSearch:function(){var e=this._createOptionsForSearchJob();this._inflightCreateXHR&&this._inflightCreateXHR.abort();var t=this,n=this.get("cache"),i=this._inflightCreateXHR=this.service.jobs().create(e,function(e,s){if(i!==t._inflightCreateXHR){!e&&!n&&s.cancel(),t._inflightCreateXHR=null;return}t._inflightCreateXHR=null;if(e){e.status!=="abort"&&t.trigger("search:error",r("Could not create search.").t(),e,s);return}t.createManager(s)})},replayLastSearchEvent:function(e){var t=!1;if(this._lastSearchEvent){var n=this._lastSearchEvent[0],i=r(this._events[n]).find(function(t){return t.ctx===e});if(i){var s=this._lastSearchEvent[1];i.callback.apply(e,s),t=!0}}return t},getLastSearchEvent:function(){return this._lastSearchEvent}});return m}),define("splunkjs/mvc/savedsearchmanager",["require","exports","module","./mvc","./searchmanager","underscore","util/console","splunkjs/splunk"],function(e,t,n){var r=e("./mvc"),i=e("./searchmanager"),s=e("underscore"),o=e("util/console"),u=e("splunkjs/splunk"),a={status_buckets:!0,buckets:!0,earliest_time:!0,indexedRealtime:!0,latest_time:!0,enable_lookups:!0,lookups:!0,max_count:!0,max_time:!0,reduce_freq:!0,rt_backfill:!0,spawn_process:!0,time_format:!0,ttl:!0},f={status_buckets:"buckets",enable_lookups:"lookups"},l=i.extend({moduleId:n.id,defaults:{autostart:!0,cache:!1,cancelOnUnload:!0},startSearch:function(){if(!this.get("searchname")){this.trigger("search:error",s("No saved search provided.").t());return}var e=this.get("cache")||!1;s.isBoolean(e)&&(e=e?-1:0);var t=e<0?(new Date(0)).valueOf():(new Date).valueOf()-e*1e3,n=new u.Service.SavedSearch(this.service,this.get("searchname"),{owner:this.service.owner,app:this.service.app,sharing:this.service.sharing}),r=this;return n.fetch(function(n,i){if(n){if(n.status===404){var u=s("Warning: saved search not found: ").t()+'"'+r.get("searchname")+'"';o.log(u),r.trigger("search:error",u)}else o.log("Error fetching saved searches"),r.trigger("search:error",s("Error fetching saved searches").t());return}r.query.set("search",i.properties().search,{silent:!0});if(e===0){r._startSearchWithNewJob(i);return}i.history(function(n,s){var o=[];for(var u=0;u<s.length;++u){var a=s[u],f=a.properties()||{},l=(new Date(a.published())).valueOf(),c=e==="scheduled"&&f.isScheduled;(c||l>t)&&o.push(a)}o.sort(function(e,t){var n=(new Date(e.published())).valueOf(),r=(new Date(t.published())).valueOf();return r-n});var h=o[0];h?r._startSearchWithExistingJob(h):r._startSearchWithNewJob(i)})}),this},_startSearchWithExistingJob:function(e){this.createManager(e)},_startSearchWithNewJob:function(e){var t=this;e.dispatch(this._createOptionsForSearchJob(),function(e,n){if(e){t.trigger("search:error",s("Error dispatching saved search.").t(),e,n);return}n.enablePreview(),t.createManager(n)})},_createOptionsForSearchJob:function(){var e={};return s.each(this.search.toJSON(),function(t,n){if(t===undefined||!s.has(a,n))return;var r="dispatch."+(f[n]||n);e[r]=t}),e}});return l}),define("splunkjs/mvc/postprocessmanager",["require","exports","module","underscore","./mvc","./utils","./basemanager","./searchmodel","./splunkresultsmodel","./messages"],function(e,t,n){function l(e,t){return t?[e.replace(/[\|\s]$/g,""),t.replace(/^[\|\s]/g,"")].join(" | "):e}var r=e("underscore"),i=e("./mvc"),s=e("./utils"),o=e("./basemanager"),u=e("./searchmodel"),a=e("./splunkresultsmodel"),f=e("./messages"),c=a.extend({_requestOptions:function(){var e=a.prototype._requestOptions.call(this),t=this.get("manager"),n=t.query.postProcessResolve();return n&&(e.search=l(n,e.search)),e}}),h=u.SearchQuery.extend({resolve:function(e){if(!this.isResolved())return undefined;var t=this._manager.parent.query.resolve(e);if(t===undefined)return undefined;var n=u.SearchQuery.prototype.resolve.call(this,r.defaults({qualified:!1},e));return l(t,n)},postProcessResolve:function(){return u.SearchQuery.prototype.resolve.apply(this,arguments)},isResolved:function(){var e=u.SearchQuery.prototype.resolve.apply(this,arguments),t=this.get("search",{tokens:!0});return e!==undefined||t===undefined}}),p=o.extend({moduleId:n.id,defaults:{managerid:null,search:""},initialize:function(e,t){var n=e.postProcess||e.search;this.query=new h({search:n},t),this.query._manager=this,this.set("data",{}),this.query.on("change",this.startSearch,this),this.on("all",function(e){e.indexOf("search:")===0&&(this._lastSearchEvent=[e,Array.prototype.slice.call(arguments,1)])},this);var r=e.managerid||e.manager;i.Components.bind("change:"+r,this.onManagerChange,this),i.Components.has(r)&&this.onManagerChange(i.Components,i.Components.get(r))},startSearch:function(){if(this.parent&&this.parent.job){var e=this.parent.job,t=e.state();this._onSearchStart(e),this._onSearchTick("search:progress",t,e),t&&t.content&&t.content.isDone&&this._onSearchTick("search:done",t,e)}},onManagerChange:function(e,t){this.parent&&(this.parent.off(null,null,this),delete this.job);if(!t)return;this.parent=t,this._countData=this.data("preview",{autofetch:!1,output_mode:"json",search:"stats count"}),this._countData.on("error",r.partial(this.trigger,"search:error"),this),this.search=this.parent.search,t.on("search:start",this._onSearchStart,this),t.on("search:progress",r.partial(this._onSearchTick,"search:progress"),this),t.on("search:done",r.partial(this._onSearchTick,"search:done"),this),t.on("search:cancelled",r.partial(this.trigger,"search:cancelled"),this),t.on("search:fail",r.partial(this.trigger,"search:fail"),this),t.on("search:error",r.partial(this.trigger,"search:error"),this),t.replayLastSearchEvent(this)},get:function(e){return r.contains(u.SearchQuery.ALLOWED_ATTRIBUTES,e)?this.query.get.apply(this.query,arguments):!r.has(this.attributes,e)&&this.parent&&this.parent.has(e)?this.parent.get.apply(this.parent,arguments):o.prototype.get.apply(this,arguments)},_onSearchStart:function(e){this.job=e,this.query.isResolved()?this.trigger("search:start",e):this.trigger("search:error",f.resolve("unresolved-search").message)},_onSearchTick:function(e,t,n){if(!this.query.isResolved())return;t=r.clone(t||{});var i=t.content=r.clone(t.content||{}),s=i.resultPreviewCount||0,o=this,u=function(){o.trigger(e,t,n),e==="search:progress"&&(o.unset("data",{silent:!0}),o.set("data",t.content))};this._countData.fetch({success:function(){var e=0;if(o._countData.hasData()){var t=o._countData.data();e=parseInt(t.results[0].count,10)}i.resultPreviewCount=e,i.resultCount=e,u()}})},data:function(e,t){if(!e)throw new Error("Cannot get a results model without specifying the source.");return t=r.defaults({manager:this,source:e},t),new c(t)},replayLastSearchEvent:function(e){var t=!1;if(this._lastSearchEvent){var n=this._lastSearchEvent,i=n[0],s=r(this._events[i]).find(function(t){return t.ctx===e});if(s){var o=n[1];t=!0,s.callback.apply(e,o)}}return t}});return p}),define("splunkjs/mvc/resultslinkview",["require","exports","module","jquery","underscore","splunk.util","splunk.window","models/Job","uri/route","views/shared/jobstatus/buttons/ExportResultsDialog","./basesplunkview","./mvc","./savedsearchmanager","./utils","./sharedmodels","splunk.util","./postprocessmanager"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("splunk.util"),o=e("splunk.window"),u=e("models/Job"),a=e("uri/route"),f=e("views/shared/jobstatus/buttons/ExportResultsDialog"),l=e("./basesplunkview"),c=e("./mvc"),h=e("./savedsearchmanager"),p=e("./utils"),d=e("./sharedmodels"),v=e("splunk.util"),m=e("./postprocessmanager"),g=l.extend({moduleId:n.id,configure:function(){this.options.manager&&(this.options.managerid=this.options.manager),l.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.searchJobModel=new u,this.applicationModel=d.get("app"),this.listenTo(this.model.entry.content,"change:search",i.bind(this.render,this))},onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null);if(!t)return;this.manager=t,this.listenTo(t,"search:start",this.onSearchStart),this.listenTo(t,"search:done",this.onSearchDone),this.manager.job&&this.onSearchStart(this.manager.job),this.manager.replayLastSearchEvent(this)},onSearchStart:function(e){this.searchJobModel.set("id",e.sid),this.$pivotButton&&this.$pivotButton.off("click").on("click",this.openPivot.bind(this)).show(),this.$searchButton&&this.$searchButton.off("click").on("click",this.openSearch.bind(this)).show(),this.$exportButton&&(this.manager instanceof m?(this.$exportButton.tooltip("destroy"),this.$exportButton.attr("title",i("Export - You cannot export results for post-process jobs.").t()),this.$exportButton.tooltip({animation:!1,container:"body"}),this.$exportButton.addClass("disabled"),this.$exportButton.off("click").on("click",function(e){e.preventDefault()}).show()):(this.$exportButton.addClass("disabled"),this.$exportButton.off("click").on("click",function(e){e.preventDefault()}).show())),this.$inspectButton&&this.$inspectButton.off("click").on("click",this.inspectSearch.bind(this)).show()},onSearchDone:function(e){this.searchJobModel.setFromSplunkD({entry:[this.manager.job.state()]}),this.$exportButton&&(this.manager instanceof m?(this.$exportButton.tooltip("destroy"),this.$exportButton.attr("title",i("Export - You cannot export results for post-process jobs.").t()),this.$exportButton.tooltip({animation:!1,container:"body"}),this.$exportButton.addClass("disabled"),this.$exportButton.off("click").on("click",function(e){e.preventDefault()}).show()):(this.$exportButton.tooltip("destroy"),this.$exportButton.attr("title",i("Export").t()),this.$exportButton.tooltip({animation:!1,container:"body"}),this.$exportButton.removeClass("disabled"),this.$exportButton.off("click").on("click",this.exportResults.bind(this)).show()))},openSearch:function(e){e&&e.preventDefault();var t=this.options,n=this.manager,r,i,s;t["link.openSearch.search"]?(r={q:t["link.openSearch.search"]},i=t["link.openSearch.searchEarliestTime"],!i&&n.job.properties().earliestTime?i=v.getEpochTimeFromISO(n.job.properties().earliestTime):i=n.search.get("earliest_time"),i!=null&&(r.earliest=i),s=t["link.openSearch.searchLatestTime"],!s&&n.job.properties().latestTime?s=v.getEpochTimeFromISO(n.job.properties().latestTime):s=n.search.get("latest_time"),s!=null&&(r.latest=s)):t["link.openSearch.viewTarget"]?r={sid:this.searchJobModel.get("id")}:(r={sid:this.searchJobModel.get("id"),q:n.query.resolve()},n instanceof h&&(r.s=n.get("searchname")),i=n.search.get("earliest_time"),i!=null&&(r.earliest=i),s=n.search.get("latest_time"),s!=null&&(r.latest=s));var o=p.getPageInfo(),u=a.page(o.root,o.locale,o.app,t["link.openSearch.viewTarget"]||"search",{data:r});window.open(u,"_blank")},exportResults:function(e){e&&e.preventDefault();var t=new f({model:{searchJob:this.searchJobModel,application:this.applicationModel,report:this.model},usePanelType:!0});t.render().appendTo(r("body")),t.show()},inspectSearch:function(e){e&&e.preventDefault();var t=p.getPageInfo(),n=a.jobInspector(t.root,t.locale,t.app,this.searchJobModel.get("id"));o.open(n,"splunk_job_inspector",{width:870,height:560,menubar:!1})},openPivot:function(e){e&&e.preventDefault();var t=p.getPageInfo(),n,r;if(this.model.has("id")){var i=this.model.get("id");n={s:i},this.model.entry.content.has("dispatch.earliest_time")&&(n.earliest=this.model.entry.content.get("dispatch.earliest_time"),n.latedst=this.model.entry.content.get("dispatch.latest_time")),r=a.pivot(t.root,t.locale,t.app,{data:n}),p.redirect(r,!0)}else{var s=this.model.entry.content.get("search");n={q:s},this.model.entry.content.has("dispatch.earliest_time")&&(n.earliest=this.model.entry.content.get("dispatch.earliest_time"),n.latest=this.model.entry.content.get("dispatch.latest_time")),r=a.pivot(t.root,t.locale,t.app,{data:n}),p.redirect(r,!0)}},render:function(){var e;return this.model.isPivotReport()?e=i.template(this.pivotTemplate):e=i.template(this.template),this.$el.html(e({options:this.options})),this.resolveBooleanOptions("link.openPivot.visible","link.visible",!0)?this.$pivotButton=this.$(".pivot-button").hide():this.$(".pivot-button").remove(),this.resolveBooleanOptions("link.openSearch.visible","link.visible",!0)?this.$searchButton=this.$(".search-button").hide():this.$(".search-button").remove(),this.resolveBooleanOptions("link.exportResults.visible","link.visible",!0)?this.$exportButton=this.$(".export-button").hide():this.$(".export-button").remove(),this.resolveBooleanOptions("link.inspectSearch.visible","link.visible",!0)?this.$inspectButton=this.$(".inspect-button").hide():this.$(".inspect-button").remove(),this.$searchButton||this.$exportButton||this.$inspectButton?this.$el.show():this.$el.hide(),this.$("> a").tooltip({animation:!1,container:"body"}),this},resolveBooleanOptions:function(){var e=this.options,t;for(var n=0,r=arguments.length-1;n<r;n++){t=e[arguments[n]];if(t!=null)return s.normalizeBoolean(t)}return s.normalizeBoolean(arguments[arguments.length-1])},template:'            <a href="#search" class="search-button btn-pill" title="<%- options[\'link.openSearch.text\'] || _(\'Open in Search\').t() %>">                <i class="icon-search"></i>                <span class="hide-text"><%- options[\'link.openSearch.text\'] || _("Open in Search").t() %></span>            </a><a href="#export" class="export-button btn-pill" title="<%- _(\'Export - You can only export results for completed jobs.\').t() %>">                <i class="icon-export"></i>                <span class="hide-text"><%- _("Export").t() %></span>            </a><a href="#inspect" class="inspect-button btn-pill" title="<%- _(\'Inspect\').t() %>">                <i class="icon-info"></i>                <span class="hide-text"><%- _("Inspect").t() %></span>            </a>        ',pivotTemplate:'            <a href="#pivot" class="pivot-button btn-pill" title="<%- _(\'Open in Pivot\').t() %>">                <i class="icon-pivot"></i>                <span class="hide-text"><%- _("Open in Pivot").t() %></span>            </a><a href="#export" class="export-button btn-pill" title="<%- _(\'Export\').t() %>">                <i class="icon-export"></i>                <span class="hide-text"><%- _("Export").t() %></span>            </a><a href="#inspect" class="inspect-button btn-pill" title="<%- _(\'Inspect\').t() %>">                <i class="icon-info"></i>                <span class="hide-text"><%- _("Inspect").t() %></span>            </a>        '});return g}),define("views/shared/PopTart",["underscore","module","views/Base","views/shared/delegates/PopdownDialog"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"popdown-dialog",initialize:function(t){t=t||{};var i={direction:"auto",adjustPosition:!0};e.defaults(t,i),n.prototype.initialize.apply(this,arguments),this.children.popdownDialogDelegate=new r({el:this.el,ignoreClasses:this.options.ignoreClasses,adjustPosition:this.options.adjustPosition,show:this.options.show,mode:this.options.mode,direction:this.options.direction,arrow:this.options.arrow,minMargin:this.options.minMargin,allowPopUp:this.options.allowPopUp,scrollContainer:this.options.scrollContainer}),this.children.popdownDialogDelegate.on("all",function(){this.trigger.apply(this,arguments)},this),this.options.onHiddenRemove&&this.on("hidden",this.remove,this),this.on("shown",function(e){this.shown=!0},this),this.on("hidden",function(e){this.shown=!1},this)},toggle:function(){return this.children.popdownDialogDelegate.toggle()},show:function(e){this.children.popdownDialogDelegate.show(e)},hide:function(){this.children.popdownDialogDelegate.hide()},render:function(){return this.el.innerHTML=this.template,this},remove:function(){this.shown&&this.hide(),n.prototype.remove.apply(this,arguments)},template:'                <div class="arrow"></div>                <div class="popdown-dialog-body popdown-dialog-padded"></div>            ',template_menu:'                <div class="arrow"></div>            '})}),define("views/shared/vizcontrols/custom_controls/DrilldownRadio",["underscore","jquery","module","views/shared/controls/SyntheticRadioControl","splunk.util"],function(e,t,n,r,i){return r.extend({moduleId:n.id,initialize:function(){t.extend(this.options,{modelAttribute:"display.visualizations.charting.drilldown",items:[{label:e("Yes").t(),value:"all"},{label:e("No").t(),value:"none"}],save:!1,elastic:!0}),r.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/DrilldownRadioGroup",["underscore","module","views/shared/controls/ControlGroup","./DrilldownRadio"],function(e,t,n,r){return n.extend({moduleId:t.id,initialize:function(){var t=new r({model:this.model});this.options.label=e("Drilldown").t(),this.options.controls=[t],n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/StackModeControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){var t=[{value:"default",icon:"bar-beside",tooltip:e("not stacked").t()},{value:"stacked",icon:"bar-stacked",tooltip:e("stacked").t()}];this.options.allowStacked100!==!1&&t.push({value:"stacked100",icon:"bar-stacked-100",tooltip:e("stacked 100%").t()}),this.options.label=e("Stack Mode").t(),this.options.controlType="SyntheticRadio",this.options.controlOptions={modelAttribute:"display.visualizations.charting.chart.stackMode",model:this.model,className:"btn-group",items:t},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/NullValueModeControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("Null Values").t(),this.options.controlType="SyntheticRadio",this.options.controlOptions={modelAttribute:"display.visualizations.charting.chart.nullValueMode",model:this.model,className:"btn-group",items:[{value:"gaps",icon:"missing-value-skipped",tooltip:e("Gaps").t()},{value:"zero",icon:"missing-value-zero",tooltip:e("Zero").t()},{value:"connect",icon:"missing-value-join",tooltip:e("Connect").t()}]},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/GaugeStyleControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("Style").t(),this.options.controlType="SyntheticRadio",this.options.controlOptions={modelAttribute:"display.visualizations.charting.chart.style",model:this.model,items:[{label:e("Minimal").t(),value:"minimal"},{label:e("Shiny").t(),value:"shiny"}]},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/SingleValueBeforeLabelControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("Before Label").t(),this.options.controlType="Text",this.options.controlOptions={modelAttribute:"display.visualizations.singlevalue.beforeLabel",model:this.model,placeholder:e("optional").t(),inputClassName:"input-medium"},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/SingleValueAfterLabelControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("After Label").t(),this.options.controlType="Text",this.options.controlOptions={modelAttribute:"display.visualizations.singlevalue.afterLabel",model:this.model,placeholder:e("optional").t(),inputClassName:"input-medium"},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/SingleValueUnderLabelControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("Under Label").t(),this.options.controlType="Text",this.options.controlOptions={modelAttribute:"display.visualizations.singlevalue.underLabel",model:this.model,placeholder:e("optional").t(),inputClassName:"input-medium"},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/MultiSeriesRadio",["underscore","jquery","module","views/shared/controls/ControlGroup","splunk.util"],function(e,t,n,r,i){return r.extend({moduleId:n.id,initialize:function(){this.options.label=e("Multi-series Mode").t(),this.options.controlType="SyntheticRadio",this.options.controlClass="controls-halfblock",this.options.controlOptions={modelAttribute:"display.visualizations.charting.layout.splitSeries",model:this.model,items:[{label:e("Yes").t(),value:"1"},{label:e("No").t(),value:"0"}],save:!1,elastic:!0},r.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/components/Statistics",["underscore","module","views/Base","views/shared/controls/ControlGroup","views/shared/controls/SyntheticSelectControl"],function(e,t,n,r,i){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments),this.children.drillDown=new r({label:e("Drilldown").t(),controlType:"SyntheticRadio",controlClass:"controls-thirdblock",controlOptions:{className:"btn-group",items:[{value:"row",label:e("Row").t()},{value:"cell",label:e("Cell").t()},{value:"none",label:e("None").t()}],model:this.model,modelAttribute:"display.statistics.drilldown"}}),this.children.rowNumbers=new r({label:e("Row Numbers").t(),controlType:"SyntheticRadio",controlClass:"controls-halfblock",controlOptions:{className:"btn-group",items:[{value:"1",label:e("Yes").t()},{value:"0",label:e("No").t()}],model:this.model,modelAttribute:"display.statistics.rowNumbers"}}),this.children.wrapResults=new r({label:e("Wrap Results").t(),controlType:"SyntheticRadio",controlClass:"controls-halfblock",controlOptions:{className:"btn-group",items:[{value:"1",label:e("Yes").t()},{value:"0",label:e("No").t()}],model:this.model,modelAttribute:"display.statistics.wrap"}}),this.children.dataOverlay=new r({label:e("Data Overlay").t(),controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{model:this.model,menuWidth:"narrow",items:[{value:"none",label:e("None").t()},{value:"heatmap",label:e("Heat map").t()},{value:"highlow",label:e("High and low values").t()}],modelAttribute:"display.statistics.overlay",toggleClassName:"btn"}}),this.model.get("dashboard")&&(this.children.count=new r({label:e("Rows Per Page").t(),controlType:"Text",controlClass:"controls-block",controlOptions:{model:this.model,menuWidth:"narrow",modelAttribute:"display.prefs.statistics.count"}}))},render:function(){return this.$el.html(""),this.$el.append(this.children.wrapResults.render().el),this.$el.append(this.children.rowNumbers.render().el),this.$el.append(this.children.drillDown.render().el),this.$el.append(this.children.dataOverlay.render().el),this.children.count&&this.$el.append(this.children.count.render().el),this}})}),define("views/shared/vizcontrols/components/Events",["underscore","module","views/Base","views/shared/controls/ControlGroup"],function(e,t,n,r){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments),this.showEventType=this.options.showEventType===!1?!1:!0,this.showEventType&&(this.children.eventType=new r({label:e("Display").t(),controlType:"SyntheticRadio",controlClass:"controls-thirdblock",controlOptions:{className:"btn-group",items:[{label:e("Raw").t(),value:"raw"},{label:e("List").t(),value:"list"},{label:e("Table").t(),value:"table"}],model:this.model,modelAttribute:"display.events.type"}})),this.children.rowNumbers=new r({label:e("Row Numbers").t(),controlType:"SyntheticRadio",controlClass:"controls-halfblock",controlOptions:{className:"btn-group",items:[{value:"1",label:e("Yes").t()},{value:"0",label:e("No").t()}],model:this.model,modelAttribute:"display.events.rowNumbers"}}),this.children.wrapResultsList=new r({label:e("Wrap Results").t(),controlType:"SyntheticRadio",controlClass:"controls-halfblock",controlOptions:{className:"btn-group",items:[{value:"1",label:e("Yes").t()},{value:"0",label:e("No").t()}],model:this.model,modelAttribute:"display.events.list.wrap"}}),this.children.wrapResultsTable=new r({label:e("Wrap Results").t(),controlType:"SyntheticRadio",controlClass:"controls-halfblock",controlOptions:{className:"btn-group",items:[{value:"1",label:e("Yes").t()},{value:"0",label:e("No").t()}],model:this.model,modelAttribute:"display.events.table.wrap"}}),this.children.maxlines=new r({label:e("Max Lines").t(),controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{model:this.model,menuWidth:"narrow",items:[{value:"5",label:e("5 lines").t()},{value:"10",label:e("10 lines").t()},{value:"20",label:e("20 lines").t()},{value:"50",label:e("50 lines").t()},{value:"100",label:e("100 lines").t()},{value:"200",label:e("200 lines").t()},{value:"0",label:e("All lines").t()}],modelAttribute:"display.events.maxLines",toggleClassName:"btn",nearestValue:!0}}),this.children.drilldownRaw=new r({label:e("Drilldown").t(),controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{menuWidth:"narrow",toggleClassName:"btn",items:[{value:"none",label:e("None").t()},{value:"inner",label:e("Inner").t()},{value:"outer",label:e("Outer").t()},{value:"full",label:e("Full").t()}],model:this.model,modelAttribute:"display.events.raw.drilldown"}}),this.children.drilldownList=new r({label:e("Drilldown").t(),controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{menuWidth:"narrow",toggleClassName:"btn",items:[{value:"none",label:e("None").t()},{value:"inner",label:e("Inner").t()},{value:"outer",label:e("Outer").t()},{value:"full",label:e("Full").t()}],model:this.model,modelAttribute:"display.events.list.drilldown"}}),this.children.drilldownTable=new r({label:e("Drilldown").t(),controlType:"SyntheticRadio",controlClass:"controls-halfblock",controlOptions:{className:"btn-group",items:[{value:"1",label:e("On").t()},{value:"0",label:e("Off").t()}],model:this.model,modelAttribute:"display.events.table.drilldown"}}),this.model.get("dashboard")&&(this.children.count=new r({label:e("Rows Per Page").t(),controlType:"Text",controlClass:"controls-block",controlOptions:{model:this.model,menuWidth:"narrow",modelAttribute:"display.prefs.events.count"}})),this.model.on("change:display.events.type",this.visibility,this),this.model.on("change:display.events.list.drilldown change:display.events.raw.drilldown",this.mediateDrilldown,this),this.model.on("change:display.events.list.wrap change:display.events.table.wrap",this.mediateWrap,this)},mediateDrilldown:function(){this.model.get("display.events.type")==="list"?this.model.set("display.events.raw.drilldown",this.model.get("display.events.list.drilldown")):this.model.set("display.events.list.drilldown",this.model.get("display.events.raw.drilldown"))},mediateWrap:function(){this.model.get("display.events.type")==="list"?this.model.set("display.events.table.wrap",this.model.get("display.events.list.wrap")):this.model.set("display.events.list.wrap",this.model.get("display.events.table.wrap"))},visibility:function(){switch(this.model.get("display.events.type")){case"list":this.children.wrapResultsList.$el.show(),this.children.wrapResultsTable.$el.hide(),this.children.rowNumbers.$el.show(),this.children.drilldownList.$el.show(),this.children.drilldownRaw.$el.hide(),this.children.drilldownTable.$el.hide();break;case"raw":this.children.wrapResultsList.$el.hide(),this.children.wrapResultsTable.$el.hide(),this.children.rowNumbers.$el.hide(),this.children.drilldownList.$el.hide(),this.children.drilldownRaw.$el.show(),this.children.drilldownTable.$el.hide();break;case"table":this.children.wrapResultsList.$el.hide(),this.children.wrapResultsTable.$el.show(),this.children.rowNumbers.$el.show(),this.children.drilldownList.$el.hide(),this.children.drilldownRaw.$el.hide(),this.children.drilldownTable.$el.show();break;default:}},render:function(){return this.showEventType&&this.$el.append(this.children.eventType.render().el),this.$el.append(this.children.rowNumbers.render().el),this.$el.append(this.children.wrapResultsList.render().el),this.$el.append(this.children.wrapResultsTable.render().el),this.$el.append(this.children.maxlines.render().el),this.$el.append(this.children.drilldownList.render().el),this.$el.append(this.children.drilldownRaw.render().el),this.$el.append(this.children.drilldownTable.render().el),this.children.count&&this.$el.append(this.children.count.render().el),this.visibility(),this}})}),define("views/shared/vizcontrols/components/General",["underscore","jquery","module","views/Base","views/shared/controls/ControlGroup","views/shared/vizcontrols/custom_controls/DrilldownRadioGroup","views/shared/vizcontrols/custom_controls/StackModeControlGroup","views/shared/vizcontrols/custom_controls/NullValueModeControlGroup","views/shared/vizcontrols/custom_controls/GaugeStyleControlGroup","views/shared/vizcontrols/custom_controls/SingleValueBeforeLabelControlGroup","views/shared/vizcontrols/custom_controls/SingleValueAfterLabelControlGroup","views/shared/vizcontrols/custom_controls/SingleValueUnderLabelControlGroup","views/shared/vizcontrols/custom_controls/MultiSeriesRadio","views/shared/vizcontrols/components/Statistics","views/shared/vizcontrols/components/Events"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){return r.extend({moduleId:n.id,className:"form form-horizontal",vizToGeneralComponents:{line:["nullValue","multiseries","drilldown"],area:["stack","nullValue","multiseries","drilldown"],column:["stack","multiseries","drilldown"],bar:["stack","multiseries","drilldown"],pie:["drilldown"],scatter:["drilldown"],radialGauge:["style"],fillerGauge:["style"],markerGauge:["style"],single:["before","after","under"],events:["eventGroup"],statistics:["statisticsGroup"]},initialize:function(t){r.prototype.initialize.apply(this,arguments);var n=this.vizToGeneralComponents[this.model.get("viz_type")];e.indexOf(n,"stack")>-1&&(this.children.stackMode=new o({model:this.model,controlClass:"controls-thirdblock"})),e.indexOf(n,"nullValue")>-1&&(this.children.nullValueMode=new u({model:this.model,controlClass:"controls-thirdblock"})),e.indexOf(n,"multiseries")>-1&&(this.children.multiSeries=new h({model:this.model})),e.indexOf(n,"drilldown")>-1&&(this.children.drilldown=new s({model:this.model,controlClass:"controls-halfblock"})),e.indexOf(n,"style")>-1&&(this.children.gaugeStyle=new a({model:this.model,controlClass:"controls-halfblock"})),e.indexOf(n,"before")>-1&&(this.children.beforeLabel=new f({model:this.model,controlClass:"controls-block"})),e.indexOf(n,"after")>-1&&(this.children.afterLabel=new l({model:this.model,controlClass:"controls-block"})),e.indexOf(n,"under")>-1&&(this.children.underLabel=new c({model:this.model,controlClass:"controls-block"})),e.indexOf(n,"eventGroup")>-1&&(this.children.events=new d({model:this.model})),e.indexOf(n,"statisticsGroup")>-1&&(this.children.statistics=new p({model:this.model}))},render:function(){return this.children.stackMode&&this.$el.append(this.children.stackMode.render().el),this.children.nullValueMode&&this.$el.append(this.children.nullValueMode.render().el),this.children.multiSeries&&this.$el.append(this.children.multiSeries.render().el),this.children.drilldown&&this.$el.append(this.children.drilldown.render().el),this.children.gaugeStyle&&this.$el.append(this.children.gaugeStyle.render().el),this.children.beforeLabel&&this.$el.append(this.children.beforeLabel.render().el),this.children.afterLabel&&this.$el.append(this.children.afterLabel.render().el),this.children.underLabel&&this.$el.append(this.children.underLabel.render().el),this.children.events&&this.$el.append(this.children.events.render().el),this.children.statistics&&this.$el.append(this.children.statistics.render().el),this}})}),define("views/shared/vizcontrols/custom_controls/AxisTitleControlGroup",["underscore","module","models/Base","views/shared/controls/ControlGroup","views/shared/controls/Control"],function(e,t,n,r,i){return r.extend({moduleId:t.id,initialize:function(){this.axisTitleVisibilityAttr=this.options.xAxis?"display.visualizations.charting.axisTitleX.visibility":"display.visualizations.charting.axisTitleY.visibility",this.axisTitleTextAttr=this.options.xAxis?"display.visualizations.charting.axisTitleX.text":"display.visualizations.charting.axisTitleY.text",this.titleStateModel=new n,this.setInitialTitleState(),this.axisTitleText=this.model.get(this.axisTitleTextAttr),this.options.label=e("Title").t(),this.options.controlClass="controls-block",this.options.controls=[{type:"SyntheticSelect",options:{className:i.prototype.className+" input-prepend",model:this.titleStateModel,modelAttribute:"state",toggleClassName:"btn",menuWidth:"narrow",items:[{value:"default",label:e("Default").t()},{value:"custom",label:e("Custom").t()},{value:"none",label:e("None").t()}]}},{type:"Text",options:{className:i.prototype.className+" input-prepend",model:this.model,modelAttribute:this.axisTitleTextAttr,inputClassName:this.options.inputClassName}}],r.prototype.initialize.call(this,this.options),this.showHideControl=this.childList[0],this.labelControl=this.childList[1],this.titleStateModel.on("change:state",this.handleTitleState,this),this.model.on("change:"+this.axisTitleTextAttr,function(){this.titleStateModel.get("state")!=="default"&&(this.axisTitleText=this.model.get(this.axisTitleTextAttr))},this)},setInitialTitleState:function(){this.model.get(this.axisTitleVisibilityAttr)==="collapsed"?this.titleStateModel.set({state:"none"}):this.model.get(this.axisTitleTextAttr)?this.titleStateModel.set({state:"custom"}):this.titleStateModel.set({state:"default"})},render:function(){return r.prototype.render.apply(this,arguments),this.handleTitleState(),this},handleTitleState:function(){var e=this.titleStateModel.get("state"),t={};e==="none"?(t[this.axisTitleVisibilityAttr]="collapsed",this.hideTitleTextInput()):e==="custom"?(t[this.axisTitleVisibilityAttr]="visible",t[this.axisTitleTextAttr]=this.axisTitleText,this.showTitleTextInput()):(t[this.axisTitleVisibilityAttr]="visible",t[this.axisTitleTextAttr]="",this.hideTitleTextInput()),this.model.set(t)},showTitleTextInput:function(){this.labelControl.insertAfter(this.showHideControl.$el),this.showHideControl.$el.addClass("input-prepend")},hideTitleTextInput:function(){this.labelControl.detach(),this.showHideControl.$el.removeClass("input-prepend")}})}),define("views/shared/vizcontrols/custom_controls/AxisScaleControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("Scale").t(),this.options.controlType="SyntheticRadio",this.options.controlOptions={modelAttribute:this.options.xAxis?"display.visualizations.charting.axisX.scale":"display.visualizations.charting.axisY.scale",model:this.model,className:"btn-group",items:[{label:e("Linear").t(),value:"linear"},{label:e("Log").t(),value:"log"}]},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/AxisIntervalControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("Interval").t(),this.options.controlType="Text",this.options.controlOptions={modelAttribute:this.options.xAxis?"display.visualizations.charting.axisLabelsX.majorUnit":"display.visualizations.charting.axisLabelsY.majorUnit",model:this.model,placeholder:e("optional").t(),inputClassName:"input-medium"},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/AxisMinValueControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("Min Value").t(),this.options.controlType="Text",this.options.controlOptions={modelAttribute:this.options.xAxis?"display.visualizations.charting.axisX.minimumNumber":"display.visualizations.charting.axisY.minimumNumber",model:this.model,placeholder:e("optional").t(),inputClassName:"input-medium"},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/AxisMaxValueControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("Max Value").t(),this.options.controlType="Text",this.options.controlOptions={modelAttribute:this.options.xAxis?"display.visualizations.charting.axisX.maximumNumber":"display.visualizations.charting.axisY.maximumNumber",model:this.model,placeholder:e("optional").t(),inputClassName:"input-medium"},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/LegendPlacementControlGroup",["jquery","underscore","module","views/shared/controls/ControlGroup"],function(e,t,n,r){return r.extend({moduleId:n.id,initialize:function(){this.options.label=t("Position").t(),this.options.controlType="SyntheticSelect",this.options.controlOptions={modelAttribute:"display.visualizations.charting.legend.placement",model:this.model,popdownOptions:this.options.popdownOptions,items:[{label:t("Right").t(),value:"right"},{label:t("Bottom").t(),value:"bottom"},{label:t("Left").t(),value:"left"},{label:t("Top").t(),value:"top"},{label:t("None").t(),value:"none"}],toggleClassName:"btn"},r.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/LegendTruncationControlGroup",["underscore","module","views/shared/controls/ControlGroup"],function(e,t,n){return n.extend({moduleId:t.id,initialize:function(){this.options.label=e("Truncation").t(),this.options.controlType="SyntheticRadio",this.options.controlOptions={modelAttribute:"display.visualizations.charting.legend.labelStyle.overflowMode",model:this.model,className:"btn-group",items:[{label:e("A...").t(),value:"ellipsisEnd",tooltip:e("Truncate End").t()},{label:e("A...Z").t(),value:"ellipsisMiddle",tooltip:e("Truncate Middle").t()},{label:e("...Z").t(),value:"ellipsisStart",tooltip:e("Truncate Start").t()}]},n.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/custom_controls/GaugeAutoRangesControlGroup",["underscore","module","models/Base","views/shared/controls/ControlGroup","views/shared/controls/SyntheticRadioControl"],function(e,t,n,r,i){var s=i.extend({initialize:function(){this.vizModel=this.options.vizModel,this.model.set({autoMode:this.vizModel.gaugeIsInAutoMode()?"1":"0"}),this.options.modelAttribute="autoMode",this.options.items=[{label:e("Automatic").t(),value:"1",tooltip:e("Uses base search to set color ranges.").t()},{label:e("Manual").t(),value:"0",tooltip:e("Manually set color ranges. Overrides search settings.").t()}],this._ranges='["0", "30", "70", "100"]',this._colors="[0x84E900, 0xFFE800, 0xBF3030]",this.model.on("change:autoMode",this.handleModeChange,this),i.prototype.initialize.call(this,this.options)},handleModeChange:function(){var e=this.model.get("autoMode")==="1";e?(this._ranges=this.vizModel.get("display.visualizations.charting.chart.rangeValues"),this._colors=this.vizModel.get("display.visualizations.charting.gaugeColors"),this.vizModel.set({"display.visualizations.charting.chart.rangeValues":"","display.visualizations.charting.gaugeColors":""})):this.vizModel.set({"display.visualizations.charting.chart.rangeValues":this._ranges,"display.visualizations.charting.gaugeColors":this._colors})}});return r.extend({moduleId:t.id,initialize:function(){var e=new s({model:this.model,vizModel:this.options.vizModel});this.options.controlClass="controls-halfblock",this.options.controls=[e],r.prototype.initialize.call(this,this.options)}})}),define("views/shared/vizcontrols/components/XAxis",["underscore","jquery","module","views/Base","views/shared/vizcontrols/custom_controls/AxisTitleControlGroup","views/shared/vizcontrols/custom_controls/DrilldownRadioGroup","views/shared/vizcontrols/custom_controls/AxisScaleControlGroup","views/shared/vizcontrols/custom_controls/AxisIntervalControlGroup","views/shared/vizcontrols/custom_controls/AxisMinValueControlGroup","views/shared/vizcontrols/custom_controls/AxisMaxValueControlGroup","views/shared/vizcontrols/custom_controls/LegendPlacementControlGroup","views/shared/vizcontrols/custom_controls/LegendTruncationControlGroup","views/shared/vizcontrols/custom_controls/StackModeControlGroup","views/shared/vizcontrols/custom_controls/NullValueModeControlGroup","views/shared/vizcontrols/custom_controls/GaugeStyleControlGroup","views/shared/vizcontrols/custom_controls/GaugeAutoRangesControlGroup","views/shared/vizcontrols/custom_controls/SingleValueBeforeLabelControlGroup","views/shared/vizcontrols/custom_controls/SingleValueAfterLabelControlGroup","views/shared/vizcontrols/custom_controls/SingleValueUnderLabelControlGroup"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){return r.extend({moduleId:n.id,className:"form form-horizontal",vizToGeneralComponents:{line:["title"],area:["title"],column:["title"],bar:["title"],pie:[],scatter:["title","scale","interval","min","max"],radialGauge:[],fillerGauge:[],markerGauge:[],single:[],events:[],statistics:[]},initialize:function(t){r.prototype.initialize.apply(this,arguments);var n=this.vizToGeneralComponents[this.model.get("viz_type")];e.indexOf(n,"title")>-1&&(this.children.title=new i({model:this.model,xAxis:!0})),e.indexOf(n,"scale")>-1&&(this.children.scale=new o({model:this.model,className:"scale control-group",controlClass:"controls-halfblock",xAxis:!0})),e.indexOf(n,"interval")>-1&&(this.children.interval=new u({model:this.model,controlClass:"controls-block",xAxis:!0})),e.indexOf(n,"min")>-1&&(this.children.min=new a({model:this.model,controlClass:"controls-block",xAxis:!0})),e.indexOf(n,"max")>-1&&(this.children.max=new f({model:this.model,controlClass:"controls-block",xAxis:!0})),this.model.get("display.visualizations.charting.axisX.scale")=="log"&&this.children.interval.$el.hide()},events:{"click .scale button":function(e){this.intervalVal=this.intervalVal||this.model.get("display.visualizations.charting.axisLabelsX.majorUnit"),t(e.currentTarget).data("value")=="log"?(this.children.interval.$el.hide(),this.model.set("display.visualizations.charting.axisLabelsX.majorUnit","")):(this.children.interval.$el.show(),this.model.set("display.visualizations.charting.axisLabelsX.majorUnit",this.intervalVal))}},render:function(){return this.children.title&&this.$el.append(this.children.title.render().el),this.children.scale&&this.$el.append(this.children.scale.render().el),this.children.interval&&this.$el.append(this.children.interval.render().el),this.children.min&&this.$el.append(this.children.min.render().el),this.children.max&&this.$el.append(this.children.max.render().el),this}})}),define("views/shared/vizcontrols/components/YAxis",["underscore","jquery","module","views/Base","views/shared/vizcontrols/custom_controls/AxisTitleControlGroup","views/shared/vizcontrols/custom_controls/AxisScaleControlGroup","views/shared/vizcontrols/custom_controls/AxisIntervalControlGroup","views/shared/vizcontrols/custom_controls/AxisMinValueControlGroup","views/shared/vizcontrols/custom_controls/AxisMaxValueControlGroup"],function(e,t,n,r,i,s,o,u,a){return r.extend({moduleId:n.id,className:"form form-horizontal",vizToYAxisComponents:{line:["title","scale","interval","min","max"],bar:["title","scale","interval","min","max"],area:["title","scale","interval","min","max"],column:["title","scale","interval","min","max"],scatter:["title","scale","interval","min","max"],pie:[],radialGauge:[],fillerGauge:[],markerGauge:[],single:[],events:[],statistics:[]},initialize:function(t){r.prototype.initialize.apply(this,arguments);var n=this.vizToYAxisComponents[this.model.get("viz_type")];e.indexOf(n,"title")>-1&&(this.children.title=new i({className:"y-axis-title control-group",model:this.model,xAxis:!1})),e.indexOf(n,"scale")>-1&&(this.children.scale=new s({model:this.model,className:"scale control-group",controlClass:"controls-halfblock"})),e.indexOf(n,"interval")>-1&&(this.children.interval=new o({model:this.model,controlClass:"controls-block"})),e.indexOf(n,"min")>-1&&(this.children.min=new u({model:this.model,controlClass:"controls-block"})),e.indexOf(n,"max")>-1&&(this.children.max=new a({model:this.model,controlClass:"controls-block"})),this.model.get("display.visualizations.charting.axisY.scale")=="log"&&this.children.interval.$el.hide()},events:{"click .scale button":function(e){this.intervalVal=this.intervalVal||this.model.get("display.visualizations.charting.axisLabelsY.majorUnit"),t(e.currentTarget).data("value")=="log"?(this.children.interval.$el.hide(),this.model.set("display.visualizations.charting.axisLabelsY.majorUnit","")):(this.children.interval.$el.show(),this.model.set("display.visualizations.charting.axisLabelsY.majorUnit",this.intervalVal))}},render:function(){return this.children.title&&this.$el.append(this.children.title.render().el),this.children.scale&&this.$el.append(this.children.scale.render().el),this.children.interval&&this.$el.append(this.children.interval.render().el),this.children.min&&this.$el.append(this.children.min.render().el),this.children.max&&this.$el.append(this.children.max.render().el),this}})}),define("views/shared/vizcontrols/components/Legend",["underscore","jquery","module","views/Base","views/shared/controls/ControlGroup","views/shared/vizcontrols/custom_controls/DrilldownRadioGroup","views/shared/vizcontrols/custom_controls/AxisScaleControlGroup","views/shared/vizcontrols/custom_controls/AxisIntervalControlGroup","views/shared/vizcontrols/custom_controls/AxisMinValueControlGroup","views/shared/vizcontrols/custom_controls/AxisMaxValueControlGroup","views/shared/vizcontrols/custom_controls/LegendPlacementControlGroup","views/shared/vizcontrols/custom_controls/LegendTruncationControlGroup","views/shared/vizcontrols/custom_controls/StackModeControlGroup","views/shared/vizcontrols/custom_controls/NullValueModeControlGroup","views/shared/vizcontrols/custom_controls/GaugeStyleControlGroup","views/shared/vizcontrols/custom_controls/GaugeAutoRangesControlGroup","views/shared/vizcontrols/custom_controls/SingleValueBeforeLabelControlGroup","views/shared/vizcontrols/custom_controls/SingleValueAfterLabelControlGroup","views/shared/vizcontrols/custom_controls/SingleValueUnderLabelControlGroup"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){return r.extend({moduleId:n.id,className:"form form-horizontal",vizToLegendComponents:{line:["placement","truncation"],bar:["placement","truncation"],area:["placement","truncation"],column:["placement","truncation"],scatter:["placement","truncation"],pie:[],radialGauge:[],fillerGauge:[],markerGauge:[],single:[],events:[],statistics:[]},initialize:function(t){r.prototype.initialize.apply(this,arguments);var n=this.vizToLegendComponents[this.model.get("viz_type")];e.indexOf(n,"placement")>-1&&(this.children.placement=new l({model:this.model,controlClass:"controls-block"})),e.indexOf(n,"truncation")>-1&&(this.children.truncation=new c({model:this.model,controlClass:"controls-thirdblock"}))},render:function(){return this.children.placement&&this.$el.append(this.children.placement.render().el),this.children.truncation&&this.$el.append(this.children.truncation.render().el),this}})}),define("views/shared/vizcontrols/components/color/ColorPicker",["underscore","jquery","module","views/shared/PopTart"],function(e,t,n,r){var i=["#7e9f44","#ebe42d","#d13b3b","#6cb8ca","#f7912c","#956e96","#c2da8a","#fac61d","#ebb7d0","#324969","#d85e3d","#a04558"];return r.extend({moduleId:n.id,className:"popdown-dialog color-picker-container",initialize:function(){r.prototype.initialize.apply(this,arguments),this.clone=this.model.clone(),this.on("shown",function(){this.$(".swatch").first().focus()})},events:{"click .swatch":function(e){var n=t(e.currentTarget).data().color,r="0x"+n.substring(1);this.clone.set({color:r}),this.$(".swatch-hex input").val(n.substring(1)),this.$(".big-swatch").css("background-color",n),e.preventDefault()},"click .color-picker-apply":function(e){this.model.set({color:this.clone.get("color"),shadedcolor:this.options.shadeColor(this.clone.get("color").substring(2),-40)}),this.model.trigger("color-picker-apply",this.options.index),this.hide(),e.stopPropagation()},"click .color-picker-cancel":function(e){this.hide(),e.stopPropagation()},"keyup .hex-input":function(e){var n=t(e.currentTarget).val();this.clone.set("color","0x"+n),this.$(".big-swatch").css("background-color","#"+n),e.preventDefault()}},render:function(){this.$el.html(r.prototype.template),this.$el.append(this._buttonTemplate),this.$(".popdown-dialog-body").addClass("color-picker-content");var e=t('<div class="clearfix"></div>').appendTo(this.$(".popdown-dialog-body"));e.append(this.compiledTemplate({model:this.clone,colors:i}))},template:'                <div class="swatches">                    <ul class="swatch-holder unstyled">                        <% _(colors).each(function(color) { %>                            <li>                                <a href="#" class="swatch" data-color="<%= color %>" style="background-color: <%= color %>"></a>                            </li>                        <% }) %>                    </ul>                </div>                <div class="big-swatch" data-color="<%- model.get("color").substring(2) %>" style="background-color: #<%- model.get("color").substring(2) %>;"></div>                <div class="swatch-hex">                    <div class="input-prepend views-shared-controls-textcontrol">                        <span class="add-on">#</span>                        <input type="text" class="hex-input" value="<%-model.get("color").substring(2) %>">                    </div>                </div>            ',_buttonTemplate:'                <div class="color-picker-buttons clearfix">                    <a href="#" class="color-picker-cancel btn pull-left">'+e("Cancel").t()+'</a>                    <a href="#" class="color-picker-apply btn btn-primary pull-right"> '+e("Apply").t()+"</a>                </div>            "})}),define("views/shared/vizcontrols/components/color/Ranges",["underscore","jquery","module","views/Base","views/shared/vizcontrols/components/color/ColorPicker","collections/Base"],function(e,t,n,r,i,s){return r.extend({className:"tab-pane clearfix",moduleId:n.id,palette:["0x7e9f44","0xebe42d","0xd13b3b","0x6cb8ca","0xf7912c","0x956e96","0xc2da8a","0xfac61d","0xebb7d0","0x324969","0xd85e3d","0xa04558"],initialize:function(){r.prototype.initialize.apply(this,arguments),this.collection={},this.collection.rows=new s,this.initRowsFromModel(),this.collection.rows.on("add remove",this.render,this),this.collection.rows.on("color-picker-apply",this.render,this),this.collection.rows.on("change",this.syncModel,this)},initRowsFromModel:function(){var t=this.model.rangesValuesToArray(),n=t.length>0?t:["0","30","70","100"],r=this.model.deserializeGaugeColorArray(),i=r.length>0?r:["0x84E900","0xFFE800","0xBF3030"];e(n).each(function(e,t){this.collection.rows.push({value:e,nextValue:n[t+1],color:t!=0?i[t-1]:void 0,shadedcolor:t!=0?this.shadeColor(i[t-1],-40):void 0})},this)},syncModel:function(){this.model.set({"display.visualizations.charting.chart.rangeValues":JSON.stringify(this.collection.rows.pluck("value")),"display.visualizations.charting.gaugeColors":"["+e(this.collection.rows.pluck("color")).filter(function(t){return!e.isUndefined(t)}).join(",")+"]"})},events:{"click .add-color-range":function(e){var t=this.palette[Math.floor(Math.random()*12)];this.collection.rows.push({value:this.options.prepopulateNewRanges?parseInt(this.collection.rows.last().get("value"),10)*2:"",nextValue:"",color:t,shadedcolor:this.shadeColor(t,-40)}),e.stopPropagation()},"keyup .range-value":e.debounce(function(e){var n=t(e.currentTarget),r=n.data().index;this.collection.rows.at(r).set("value",n.val());var i=this.$el.find('[data-prev="'+r+'"]');i&&i.text(n.val()+" to"),e.preventDefault()},300),"click .color-square":function(e){var n=t(e.currentTarget),r=n.css("background-color");this.children.colorPicker=new i({model:this.collection.rows.at(n.parent().siblings("input").data().index),shadeColor:this.shadeColor,onHiddenRemove:!0}),t("body").append(this.children.colorPicker.render().el),this.children.colorPicker.show(n),e.preventDefault()},"click .remove-range":function(e){var n=t(e.currentTarget).siblings("input").data().index;this.collection.rows.remove(this.collection.rows.at(n)),e.stopPropagation()}},shadeColor:function(e,t){var n=parseInt(e,16),r=(n&16711680)>>16,i=(n&65280)>>8,s=(n&255)>>0;return r+=Math.floor(t/255*r),i+=Math.floor(t/255*i),s+=Math.floor(t/255*s),((r<<16)+(i<<8)+s).toString(16)},render:function(){return this.syncModel(),this.$el.html(this.compiledTemplate({_:e,collection:this.collection.rows})),this},template:'                <div class="color-rows form-horizontal">                    <div class="from-color-group">                        <div class="control-group">                            <label class="lower-range-label control-label"><%- _("from").t() %></label>                            <div class="controls">                                <input class="first-row-lower range-value" value="<%- collection.at(0).get("value") %>" data-index=0 type="text">                            </div>                        </div>                    </div>                    <div class="to-color-group">                        <div class="control-group">                            <label class="control-label upper-range-label to-label"><%- _("to").t() %></label>                            <div class="controls right-input">                                <div class="input-append">                                    <input  class="first-row-upper range-value" value="<%- collection.at(1).get("value") %>" data-index=1 type="text">                                    <div class="add-on color-picker-add-on">                                        <a href="#" class="color-square" style="border-color: #<%- collection.at(1).get("shadedcolor")%>; background-color: #<%- collection.at(1).get("color").substring(2) %>;"></a>                                    </div>                                </div>                            </div>                        </div>                    </div>                    <% collection.each(function(model, i) { %>                        <% if(!(i==0 || i==1)) {%>                            <div class="extra-color-group">                                <div class="control-group">                                    <label class="upper-range-label control-label" data-prev="<%- i-1 %>"><%- collection.at(i-1).get("value")%>&nbsp;<span class="label-to"><%- _("to").t() %></span></label>                                    <div class="controls input-append">                                        <input  class="range-value" value="<%- model.get("value") %>" data-index=<%-i%> type="text">                                        <div class="add-on color-picker-add-on">                                            <a href="#" class="color-square" style="border-color: #<%- model.get("shadedcolor")%>; background-color: #<%- model.get("color").substring(2) %>;"></a>                                        </div>                                        <a class="remove-range btn-link" href="#"><i class="icon-x-circle"></i></a>                                    </div>                                </div>                            </div>                        <% } %>                    <% }); %>                </div>                <a href="#" class="add-color-range btn pull-right"> + <%- _("Add Range").t() %></a>            '})}),define("views/shared/vizcontrols/components/color/Master",["underscore","jquery","module","splunk.util","models/Base","views/Base","views/shared/controls/ControlGroup","views/shared/vizcontrols/custom_controls/GaugeAutoRangesControlGroup","views/shared/vizcontrols/components/color/Ranges"],function(e,t,n,r,i,s,o,u,a){return s.extend({moduleId:n.id,className:" form form-horizontal",controlClass:"controls-halfblock",vizToColorRangeComponents:{line:[],area:[],column:[],bar:[],pie:[],scatter:[],radialGauge:["range"],fillerGauge:["range"],markerGauge:["range"],single:[],events:[],statistics:[]},initialize:function(t){s.prototype.initialize.apply(this,arguments);var n=this.vizToColorRangeComponents[this.model.get("viz_type")];e.indexOf(n,"range")>-1&&(this.autoModeModel=new i,this.children.toggle=new u({model:this.autoModeModel,vizModel:this.model}),this.autoModeModel.on("change:autoMode",this.updateRangesVisibility,this)),this.children.colorRanges=new a({model:this.model})},render:function(){return this.children.toggle&&this.$el.append(this.children.toggle.render().el),this.$el.append(this.children.colorRanges.render().el),this.updateRangesVisibility(),this},remove:function(){this.autoModeModel.off(null,null,this)},updateRangesVisibility:function(){this.autoModeModel.get("autoMode")==="1"?this.children.colorRanges.$el.hide():this.children.colorRanges.$el.show()}})}),define("views/shared/vizcontrols/components/Master",["underscore","jquery","module","views/Base","views/shared/FlashMessages","views/shared/vizcontrols/components/General","views/shared/vizcontrols/components/XAxis","views/shared/vizcontrols/components/YAxis","views/shared/vizcontrols/components/Legend","views/shared/vizcontrols/components/color/Master"],function(e,t,n,r,i,s,o,u,a,f){return r.extend({moduleId:n.id,className:"tabbable tabs-left",initialize:function(t){r.prototype.initialize.apply(this,arguments),this.children.flashMessages=new i({model:this.model}),this.type=this.model.get("viz_type"),e.indexOf(this.model.components[this.type],"gen")>-1&&(this.children.general=new s({model:this.model})),e.indexOf(this.model.components[this.type],"x")>-1&&(this.children.xaxis=new o({model:this.model})),e.indexOf(this.model.components[this.type],"y")>-1&&(this.children.yaxis=new u({model:this.model})),e.indexOf(this.model.components[this.type],"leg")>-1&&(this.children.legend=new a({model:this.model})),e.indexOf(this.model.components[this.type],"ranges")>-1&&(this.children.ranges=new f({model:this.model}))},events:{"click a[data-toggle]":function(n){var r=t(n.currentTarget),i=r.data().type;e(this.children).each(function(e){e.$el.hide()},this),this.children[i].$el.show(),this.$el.find(".nav > li").removeClass("active"),r.parent().addClass("active"),n.preventDefault()}},render:function(){return this.$el.html(e(this.template).template({_:e,tabs:this.model.components[this.type]})),this.$(".tab-content").prepend(this.children.flashMessages.render().el),e(this.children).each(function(e){this.$(".tab-content").append(e.render().el),e.$el.hide()},this),this.children.general.$el.show(),this},template:'                <ul class="nav nav-tabs">                    <% if (_.indexOf(tabs, "gen")>-1) { %>                        <li class="active">                            <a href="#" data-toggle="tab" data-type="general"><%- _("General").t() %></a>                        </li>                    <% } %>                    <% if (_.indexOf(tabs, "x")>-1) { %>                        <li>                            <a href="#" data-toggle="tab" data-type="xaxis"><%- _("X-Axis").t() %></a>                        </li>                    <% } %>                    <% if (_.indexOf(tabs, "y")>-1) { %>                        <li>                            <a href="#" data-toggle="tab" data-type="yaxis"><%- _("Y-Axis").t() %></a>                        </li>                    <% } %>                    <% if (_.indexOf(tabs, "leg")>-1) { %>                        <li>                            <a href="#" data-toggle="tab" data-type="legend"><%- _("Legend").t() %></a>                        </li>                    <% } %>                    <% if (_.indexOf(tabs, "ranges")>-1) { %>                        <li>                            <a href="#" data-toggle="tab" data-type="ranges"><%- _("Color Ranges").t() %></a>                        </li>                    <% } %>                </ul>                <div class="tab-content"></div>            '})}),define("views/shared/vizcontrols/Format",["underscore","jquery","module","views/shared/PopTart","views/shared/vizcontrols/components/Master"],function(e,t,n,r,i){return r.extend({moduleId:n.id,options:{saveOnApply:!1},initialize:function(e){r.prototype.initialize.apply(this,arguments),this.children.visualizationControls&&this.children.visualizationControls.remove(),this.children.visualizationControls=new i({model:this.model.visualization})},events:{"click .viz-editor-apply":function(e){e.preventDefault(),this.applyChanges()},"click .viz-editor-cancel":function(e){this.hide(),e.preventDefault()},"keypress .viz-editor-apply":function(e){e.preventDefault(),this.applyChanges()},"keypress .viz-editor-cancel":function(e){this.hide(),e.preventDefault()},"keypress input:text":function(e){var n=13,r=t(e.target);e.keyCode==n&&(r.blur(),e.preventDefault(),this.applyChanges())}},applyChanges:function(){this.model.visualization.validate(),this.model.visualization.isValid()&&(this.model.report.entry.content.set(t.extend({},this.model.visualization.toJSON())),this.options.saveOnApply&&this.model.report.save(),this.hide())},render:function(){return this.$el.html(r.prototype.template),this.$el.append(this.template),this.$(".popdown-dialog-body").append(this.children.visualizationControls.render().el),this.$(".popdown-dialog-body").removeClass("popdown-dialog-padded"),this},template:'                    <a class="viz-editor-cancel btn pull-left" tabindex="0">'+e("Cancel").t()+'</a>                    <a class="viz-editor-apply btn btn-primary pull-right" tabindex="0"> '+e("Apply").t()+"</a>            "})}),define("models/services/search/IntentionsParser",["jquery","underscore","backbone","models/Base","util/splunkd_utils","splunk.util"],function(e,t,n,r,i,s){var o=":!:";return r.extend({url:"search/intentionsparser",sync:function(n,u,a){if(n!=="read")throw new Error("Sync operation not supported: "+n);a=e.extend(!0,{},a),a.type="POST";var f=a.data;t.isArray(f.field)&&(f.field=f.field.join(o),f.value=f.value.join(o));var l=a.data&&a.data.action?u.url:"search/parser",c=i.prepareSyncOptions(a,l);return c.data&&c.data.q&&(c.data.q=s.addLeadingSearchCommand(c.data.q,!0)),r.prototype.sync.call(this,"read",u,c)},fullSearch:function(){var e=this.get("fullSearch");if(e)return s.stripLeadingSearchCommand(e);var t=this.get("reportsSearch")||"",n=s.stripLeadingSearchCommand(this.get("eventsSearch")||"");return t&&(t=" | "+t),n+t},isReportsSearch:function(){var e=this.get("reportsSearch");return e?!0:!1}})}),define("models/Visualization",["jquery","underscore","models/Base","splunk.util"],function(e,t,n,r){return n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("change:display.visualizations.charting.axisY.scale",function(){this.get("display.visualizations.charting.chart")==="line"&&this.get("display.visualizations.charting.axisY.scale")==="log"&&this.set({"display.visualizations.charting.chart.stackMode":"default"})},this)},components:{single:["gen"],line:["gen","x","y","leg"],area:["gen","x","y","leg"],column:["gen","x","y","leg"],bar:["gen","x","y","leg"],pie:["gen"],scatter:["gen","x","y","leg"],radialGauge:["gen","ranges"],fillerGauge:["gen","ranges"],markerGauge:["gen","ranges"],statistics:["gen"],events:["gen"]},defaults:{"display.visualizations.charting.axisY.scale":"linear","display.visualizations.charting.axisX.scale":"linear","display.visualizations.charting.axisX.minimumNumber":"","display.visualizations.charting.axisX.maximumNumber":"","display.visualizations.charting.axisY.minimumNumber":"","display.visualizations.charting.axisY.maximumNumber":"","display.visualizations.charting.axisTitleX.text":"","display.visualizations.charting.axisTitleY.text":"","display.visualizations.charting.axisLabelsX.majorUnit":"","display.visualizations.charting.axisLabelsY.majorUnit":"","display.visualizations.charting.legend.placement":"right","display.visualizations.charting.legend.labelStyle.overflowMode":"ellipsisMiddle","display.visualizations.charting.chart.stackMode":"default","display.visualizations.charting.chart.nullValueMode":"zero","display.visualizations.charting.chart.sliceCollapsingThreshold":.01,"display.visualizations.charting.chart.rangeValues":'["0","30","70","100"]',"display.visualizations.charting.chart.style":"shiny","display.visualizations.charting.gaugeColors":[8710400,16771072,12529712],"display.prefs.events.count":"10","display.prefs.statistics.count":"10"},validation:{"display.visualizations.charting.axisX.minimumNumber":[{fn:"validateNumberOrAuto",required:!1},{fn:"validateXAxisExtremes",required:!1}],"display.visualizations.charting.axisX.maximumNumber":[{fn:"validateNumberOrAuto",required:!1},{fn:"validateXAxisExtremes",required:!1}],"display.visualizations.charting.axisY.minimumNumber":[{fn:"validateNumberOrAuto",required:!1},{fn:"validateYAxisExtremes",required:!1}],"display.visualizations.charting.axisY.maximumNumber":[{fn:"validateNumberOrAuto",required:!1},{fn:"validateYAxisExtremes",required:!1}],"display.visualizations.charting.axisLabelsX.majorUnit":[{fn:"validateNumberOrAuto",required:!1}],"display.visualizations.charting.axisLabelsY.majorUnit":[{fn:"validateNumberOrAuto",required:!1}],"display.visualizations.charting.axisY.scale":{fn:"validateYScaleAndStacking",required:!1},"display.visualizations.charting.chart.stackMode":{fn:"validateYScaleAndStacking",required:!1},"display.visualizations.charting.chart.sliceCollapsingThreshold":{pattern:"number",min:0,msg:t("Minimum Size must be a non-negative number.").t(),required:!1},"display.visualizations.charting.chart.rangeValues":{fn:"validateRangeValues",required:!1},"display.prefs.events.count":{pattern:"digits",min:1,msg:t("Rows Per Page must be a positive number.").t(),required:!0},"display.prefs.statistics.count":{pattern:"digits",min:1,msg:t("Rows Per Page must be a positive number.").t(),required:!0}},validateXAxisExtremes:function(e,n,r){var i=n==="display.visualizations.charting.axisX.minimumNumber"?parseFloat(e):parseFloat(r["display.visualizations.charting.axisX.minimumNumber"]),s=n==="display.visualizations.charting.axisX.maximumNumber"?parseFloat(e):parseFloat(r["display.visualizations.charting.axisX.maximumNumber"]);if(!t.isNaN(i)&&!t.isNaN(s)&&s<=i)return t("The X-Axis Min Value must be less than the Max Value.").t()},validateYAxisExtremes:function(e,n,r){var i=n==="display.visualizations.charting.axisY.minimumNumber"?parseFloat(e):parseFloat(r["display.visualizations.charting.axisY.minimumNumber"]),s=n==="display.visualizations.charting.axisY.maximumNumber"?parseFloat(e):parseFloat(r["display.visualizations.charting.axisY.maximumNumber"]);if(!t.isNaN(i)&&!t.isNaN(s)&&s<=i)return t("The Y-Axis Min Value must be less than the Max Value.").t()},validateYScaleAndStacking:function(e,n,r){if(r["display.visualizations.charting.chart"]==="line")return!1;var i=n==="display.visualizations.charting.axisY.scale"?e:r["display.visualizations.charting.axisY.scale"],s=n==="display.visualizations.charting.chart.stackMode"?e:r["display.visualizations.charting.chart.stackMode"];if(i==="log"&&s!=="default")return t("Log scale and stacking cannot be enabled at the same time.").t()},validateRangeValues:function(n){var r=t(n?JSON.parse(n):[]).map(parseFloat);if(t(r).any(t.isNaN))return t("All color ranges must be valid numbers.").t();var i=t.uniq(r),s=e.extend([],r).sort(function(e,t){return e-t});if(!t.isEqual(r,i)||!t.isEqual(r,s))return t("Color ranges must be entered from lowest to highest.").t()},validateNumberOrAuto:function(e,n,i){var s=parseFloat(e),o;switch(n){case"display.visualizations.charting.axisLabelsX.majorUnit":o="X-Axis Interval";break;case"display.visualizations.charting.axisLabelsY.majorUnit":o="Y-Axis Interval";break;case"display.visualizations.charting.axisX.minimumNumber":o="X-Axis Min Value";break;case"display.visualizations.charting.axisY.minimumNumber":o="Y-Axis Min Value";break;case"display.visualizations.charting.axisX.maximumNumber":o="X-Axis Max Value";break;case"display.visualizations.charting.axisY.maximumNumber":o="Y-Axis Max Value";break;default:o=n}if(n==="display.visualizations.charting.axisLabelsX.majorUnit"||n==="display.visualizations.charting.axisLabelsY.majorUnit"){if(e&&(t.isNaN(s)||s<=0)&&!e.match(/^(auto)$/))return r.sprintf(t('%s must be a positive number or "auto".').t(),o)}else if(e&&t.isNaN(s)&&!e.match(/^(auto)$/))return r.sprintf(t('%s must be a number or "auto".').t(),o)},attrToArray:function(e){var n=this.get(e);return n?t.values(JSON.parse(n)):[]},rangesValuesToArray:function(){return this.attrToArray("display.visualizations.charting.chart.rangeValues")},deserializeGaugeColorArray:function(){var e=this.get("display.visualizations.charting.gaugeColors");return e.charAt(0)!=="["||e.charAt(e.length-1)!=="]"?!1:r.stringToFieldList(e.substring(1,e.length-1))},gaugeIsInAutoMode:function(){return!this.get("display.visualizations.charting.chart.rangeValues")&&!this.get("display.visualizations.charting.gaugeColors")}},{CHARTING_ATTRS_FILTER:["^display.visualizations.charting...*"],SINGLE_VALUE_ATTRS_FILTER:["^singlevalue..*"]})}),define("views/shared/vizcontrols/Master",["underscore","backbone","module","views/Base","views/shared/controls/SyntheticSelectControl","views/shared/vizcontrols/Format","models/services/search/IntentionsParser","models/Visualization"],function(e,t,n,r,i,s,o,u){return r.extend({moduleId:n.id,options:{saveOnApply:!1},vizToAttrs:{line:{"display.visualizations.charting.chart":"line","display.visualizations.type":"charting","display.general.type":"visualizations"},area:{"display.visualizations.charting.chart":"area","display.visualizations.type":"charting","display.general.type":"visualizations"},column:{"display.visualizations.charting.chart":"column","display.visualizations.type":"charting","display.general.type":"visualizations"},bar:{"display.visualizations.charting.chart":"bar","display.visualizations.type":"charting","display.general.type":"visualizations"},pie:{"display.visualizations.charting.chart":"pie","display.visualizations.type":"charting","display.general.type":"visualizations"},scatter:{"display.visualizations.charting.chart":"scatter","display.visualizations.type":"charting","display.general.type":"visualizations"},radialGauge:{"display.visualizations.charting.chart":"radialGauge","display.visualizations.type":"charting","display.general.type":"visualizations"},fillerGauge:{"display.visualizations.charting.chart":"fillerGauge","display.visualizations.type":"charting","display.general.type":"visualizations"},markerGauge:{"display.visualizations.charting.chart":"markerGauge","display.visualizations.type":"charting","display.general.type":"visualizations"},single:{"display.visualizations.type":"singlevalue","display.general.type":"visualizations"},events:{"display.general.type":"events"},statistics:{"display.general.type":"statistics"}},visualizationGroupings:{events:{label:"g1",items:[{value:"events",label:e("Events").t(),icon:"list",description:e(" ").t()}]},statistics:{label:"g2",items:[{value:"statistics",label:e("Statistics Table").t(),icon:"table",description:e(" ").t()}]},visualizations:{label:"g3",items:[{value:"line",label:e("Line").t(),icon:"chart-line",description:e(" ").t()},{value:"area",label:e("Area").t(),icon:"chart-area",description:e(" ").t()},{value:"column",label:e("Column").t(),icon:"chart-column",description:e(" ").t()},{value:"bar",label:e("Bar").t(),icon:"chart-bar",description:e(" ").t()},{value:"pie",label:e("Pie").t(),icon:"chart-pie",description:e(" ").t()},{value:"scatter",label:e("Scatter").t(),icon:"chart-scatter",description:e(" ").t()},{value:"single",label:e("Single Value").t(),icon:"single-value",description:e(" ").t()},{value:"radialGauge",label:e("Radial Gauge").t(),icon:"gauge-radial",description:e(" ").t()},{value:"fillerGauge",label:e("Filler Gauge").t(),icon:"gauge-filler",description:e(" ").t()},{value:"markerGauge",label:e("Marker Gauge").t(),icon:"gauge-marker",description:e(" ").t()}]}},reportTree:{match:{"display.general.type":{visualizations:{match:{"display.visualizations.type":{singlevalue:{view:"single"},charting:{match:{"display.visualizations.charting.chart":{line:{view:"line"},area:{view:"area"},column:{view:"column"},bar:{view:"bar"},pie:{view:"pie"},scatter:{view:"scatter"},radialGauge:{view:"radialGauge"},fillerGauge:{view:"fillerGauge"},markerGauge:{view:"markerGauge"}}}}}}},statistics:{view:"statistics"},events:{view:"events"}}}},commandToChartType:{timechart:["line","area","column"],top:["column","bar","pie"],rare:["column","bar","pie"]},initialize:function(){r.prototype.initialize.apply(this,arguments);var t={bindToChangeOfSearch:!0};this.options=$.extend(!0,t,this.options),this.model.intentionsParser=new o,this.model.intentionsParser.on("change",this.render,this),this.model.visualization=new u,this.model.visualization.set({dashboard:this.options.dashboard}),this.setVisualizationFromReport(),this.setSyntheticSelectGroups(),this.model.report.entry.content.on("change:display.general.type",function(t,n,r){e.indexOf(this.options.vizTypes,n)>-1&&(this.setVisualizationFromReport(),this.setSyntheticSelectGroups(),this.render())},this),this.model.visualization.on("change:viz_type",function(){var e=this.model.visualization.get("viz_type");this.model.report.entry.content.set("viz_type",e),this.model.report.entry.content.set(this.vizToAttrs[e]),this.model.visualization.set(this.vizToAttrs[e]),this.options.saveOnApply&&this.model.report.save()},this),this.model.report.entry.content.on("change:search change:id",this.updateVizTypeVisability,this),this.options.bindToChangeOfSearch&&this.model.report.entry.content.on("change:search",this.intentionsFetch,this),this.intentionsFetch()},intentionsFetch:function(){this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),app:this.model.application.get("app"),owner:this.model.application.get("owner"),parse_only:!0}})},updateVizTypeVisability:function(){if(!this.children.visualizationType||!this.model.visualization.get("dashboard"))return;this.model.report.isPivotReport()&&!this.model.report.isNew()?(this.children.visualizationType.disable(),this.children.visualizationType.tooltip({animation:!1,title:e("Edit visualization with the pivot tool.").t(),container:"body"})):(this.children.visualizationType.enable(),this.children.visualizationType.tooltip("disable"))},setRecommendations:function(){if(this.model.intentionsParser.has("reportsSearch")){var t=this.model.intentionsParser.get("reportsSearch"),n=!1;if(t){var r=t.replace(/\s{2,}/g,":::").split(":::")[0];r&&(this.recommenedTypes=this.commandToChartType[r],this.recommenedTypes&&!!this.recommenedTypes.length&&e.chain(this.visualizationGroupings.visualizations.items).filter(function(e){return this.recommenedTypes.indexOf(e.value)>-1},this).each(function(t){this.children.visualizationType.$el.find("li a[data-value='"+t.value+"'] > span.link-description").text(e("Recommended").t()),n=!0},this).value()),n&&this.children.visualizationType.$el.find("li a[data-value='statistics'] > span.link-description").text(e("Recommended").t())}else this.children.visualizationType.$el.find("li a[data-value='events'] > span.link-description").text(e("Recommended").t())}},setVisualizationFromReport:function(){this.model.report.entry.content.unset("viz_type"),this.model.visualization.set($.extend({},this.model.report.entry.content.toJSON()));var e=this.setVizType(this.reportTree),t;t=e&&e.view?e.view:"column",this.model.visualization.set("viz_type",t)},setSyntheticSelectGroups:function(){var t=[],n=this.model.report.entry.content;this.children.visualizationType&&this.children.visualizationType.remove(),this.options.vizTypes&&e(this.options.vizTypes).each(function(e,n){t.push(this.visualizationGroupings[e])},this),t.length&&(this.children.visualizationType=new i({model:this.model.visualization,groupedItems:t,className:"btn-combo pull-left",toggleClassName:"btn-pill",modelAttribute:"viz_type",menuClassName:"viz-dropdown",popdownOptions:{attachDialogTo:"body"}}))},setVizType:function(t){if(t&&t.view)return t;if(t&&t.match){var n;e(t.match).each(function(e,t){n=e[this.model.report.entry.content.get(t)]},this);if(n)return this.setVizType(n)}},events:{"click .format":function(e){var t=$(e.currentTarget);this.setVisualizationFromReport(),this.children.format=new s({model:{report:this.model.report,visualization:this.model.visualization},onHiddenRemove:!0,saveOnApply:this.options.saveOnApply,ignoreClasses:["color-picker-container"]}),$("body").append(this.children.format.render().el),this.children.format.show(t),e.preventDefault()}},render:function(){return this.$el.empty(),this.setSyntheticSelectGroups(),this.children.visualizationType&&this.$el.append(this.children.visualizationType.render().el),this.setRecommendations(),this.updateVizTypeVisability(),this.$el.append(this.template),this},template:'                <div class="btn-group pull-left">                    <a class="btn-pill popdown-toggle format" href="#">                        <i class="icon-paintbrush"/><span class="link-label">'+e("Format").t()+'</span><span class="caret"></span>                    </a>                </div>            '})}),define("views/shared/reportcontrols/details/History",["module","views/Base"],function(e,t){return t.extend({moduleId:e.id,tagName:"span",initialize:function(){t.prototype.initialize.apply(this,arguments),this.model.entry.on("change:updated",this.render,this)},render:function(){return this.$el.html(this.compiledTemplate({model:this.model})),this},template:'                Created June 18, 2010. Modified <%- model.entry.get("updated") %>.            '})}),define("views/shared/reportcontrols/details/Creator",["underscore","module","views/Base","uri/route","splunk.util"],function(e,t,n,r,i){return n.extend({moduleId:t.id,tagName:"span",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.report.entry.content.on("change:display.page.pivot.dataModel",this.render,this)},render:function(){var t,n,s=this.model.application.get("root"),o=this.model.application.get("locale"),u=this.model.application.get("app");return this.model.report.openInView()==="pivot"?(t=r.pivot(s,o,u,{data:{s:this.model.report.id}}),n='<a href="'+t+'" >'+e("Pivot").t()+"</a>"):(t=r.search(s,o,u,{data:{s:this.model.report.id}}),n='<a href="'+t+'" >'+e("Search").t()+"</a>"),this.$el.html(this.compiledTemplate({_:e,splunkUtil:i,createdByAnchor:n})),this},template:'                <%= splunkUtil.sprintf(_("Created by %s.").t(), createdByAnchor) %>            '})}),define("views/shared/documentcontrols/details/App",["module","views/Base"],function(e,t){return t.extend({moduleId:e.id,tagName:"span",initialize:function(){t.prototype.initialize.apply(this,arguments),this.model.entry.acl.on("change:app",this.render,this)},render:function(){return this.$el.html(this.compiledTemplate({model:this.model})),this},template:'                <%- model.entry.acl.get("app") %>            '})}),define("models/Cron",["jquery","underscore","models/Base","splunk.util"],function(e,t,n,r){var i=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments)},defaults:{minute:"0",hour:"6",dayOfMonth:"*",month:"*",dayOfWeek:"1",cronType:"weekly",cron_schedule:"0 6 * * 1"},validation:{cron_schedule:function(n,i,s){var o=s["ui.type"]||"scheduled";if(o==="scheduled"&&s.cronType==="custom"){if(t.isUndefined(n)||e.trim(n).length===0)return t("Custom cron is required").t();if(!r.validateCronString(n))return t("Invalid cron").t()}}},setCronType:function(e){var t=this.get("minute"),n=this.get("hour"),r=this.get("dayOfMonth"),s=this.get("month"),o=this.get("dayOfWeek");if(s!=="*"){this.set("cronType",i.CRON_TYPES.CUSTOM,e);return}if(/^[0-6]$/.test(o)){if(t==="0"&&/^([0-9]|1[0-9]|2[0-3])$/.test(n)&&r==="*"){this.set("cronType",i.CRON_TYPES.WEEKLY,e);return}}else if(o==="*")if(/^([0-9]|[1-2][0-9]|3[0-1])$/.test(r)){if(/^([0-9]|1[0-9]|2[0-3])$/.test(n)&&t==="0"){this.set("cronType",i.CRON_TYPES.MONTHLY,e);return}}else if(r==="*"){if(/^([0-9]|1[0-9]|2[0-3])$/.test(n)&&t==="0"){this.set("cronType",i.CRON_TYPES.DAILY,e);return}if(n==="*"&&/^(0|15|30|45)$/.test(t)){this.set("cronType",i.CRON_TYPES.HOURLY,e);return}}this.set("cronType",i.CRON_TYPES.CUSTOM,e)},setDefaults:function(){switch(this.get("cronType")){case i.CRON_TYPES.HOURLY:this.set("minute","0");break;case i.CRON_TYPES.DAILY:this.set("hour","0");break;case i.CRON_TYPES.WEEKLY:this.set({dayOfWeek:"1",hour:"0"});break;case i.CRON_TYPES.MONTHLY:this.set({dayOfMonth:"1",hour:"0"})}},getCronString:function(){var e=this.get("minute"),t=this.get("hour"),n=this.get("dayOfMonth"),r=this.get("month"),s=this.get("dayOfWeek"),o=this.get("cron_schedule"),u=this.get("cronType");switch(u){case i.CRON_TYPES.HOURLY:return e+" * * * *";case i.CRON_TYPES.DAILY:return"0 "+t+" * * *";case i.CRON_TYPES.WEEKLY:return"0 "+t+" * * "+s;case i.CRON_TYPES.MONTHLY:return"0 "+t+" "+n+" * *";case i.CRON_TYPES.CUSTOM:return o}},getDayOfWeekName:function(){return i.getDayOfWeekNameFromNum(parseInt(this.get("dayOfWeek"),10))},getScheduleString:function(){switch(this.get("cronType")){case"hourly":return r.sprintf(t("Hourly, at %s minutes past the hour.").t(),this.get("minute"));case"daily":return r.sprintf(t("Daily, at %s:00.").t(),this.get("hour"));case"weekly":return r.sprintf(t("Weekly, %(dayOfWeek)s at %(hour)s:00.").t(),{dayOfWeek:this.getDayOfWeekName(),hour:this.get("hour")});case"monthly":return r.sprintf(t("Monthly, on day %(dayOfMonth)s at %(hour)s:00.").t(),{dayOfMonth:this.get("dayOfMonth"),hour:this.get("hour")});case"custom":return t("Cron Schedule.").t()}}},{createFromCronString:function(e){var n=e.split(/\s+/);if(!n||n.length!==5)throw r.sprintf(t("Invalid cron string: %s").t(),e);var s=new i({minute:n[0],hour:n[1],dayOfMonth:n[2],month:n[3],dayOfWeek:n[4],cron_schedule:n.join(" ")});return s.setCronType(),s},getDayOfWeekNameFromNum:function(e){switch(e){case 0:return t("Sunday").t();case 1:return t("Monday").t();case 2:return t("Tuesday").t();case 3:return t("Wednesday").t();case 4:return t("Thursday").t();case 5:return t("Friday").t();case 6:return t("Saturday").t();case 7:return t("Sunday").t()}},CRON_TYPES:{HOURLY:"hourly",DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",CUSTOM:"custom"}});return i}),define("views/shared/reportcontrols/details/Schedule",["underscore","module","views/Base","models/Cron","util/time_utils","splunk.util"],function(e,t,n,r,i,s){return n.extend({moduleId:t.id,tagName:"span",initialize:function(){n.prototype.initialize.apply(this,arguments);var t=e.debounce(this.render,0);this.model.entry.content.on("change:is_scheduled change:cron_schedule change:action.email change:action.script",t,this)},render:function(){var t=e("Not Applicable for Real-time Reports.").t();this.model.isRealTime()||(this.model.entry.content.get("is_scheduled")?(this.cronModel=r.createFromCronString(this.model.entry.content.get("cron_schedule")),t=this.cronModel.getScheduleString(),this.model.entry.content.get("action.email")||this.model.entry.content.get("action.script")?t+=s.sprintf(e(" Actions: %s.").t(),this.model.getStringOfActions()):t+=e(" No actions.").t()):t=e("Not scheduled.").t()),this.$el.html(t)}})}),define("models/services/search/TimeParser",["jquery","underscore","backbone","models/Base","util/splunkd_utils"],function(e,t,n,r,i){return r.extend({initialize:function(e){r.prototype.initialize.call(this,e)},sync:function(e,t,r){switch(e){case"read":var s=i.prepareSyncOptions(r,t.url);if(r.data.time===""){t.set({key:"",value:""});return}return n.sync.call(this,"read",t,s);default:throw"Operation not supported"}},url:"/services/search/timeparser",parse:function(e){if(!e)return{};var n=t.keys(e)[0],r=e[n];return{key:n,value:r}},idAttribute:"key"})}),define("collections/services/search/TimeParsers",["underscore","backbone","models/services/search/TimeParser","collections/Base","util/splunkd_utils"],function(e,t,n,r,i){return r.extend({model:n,intialize:function(){r.prototype.initialize.apply(this,arguments)},sync:function(e,n,r){var s={},o={data:{output_mode:"json"},traditional:!0};switch(e){case"read":return r&&r.data&&(s=$.extend(s,{app:r.data.app||undefined,owner:r.data.owner||undefined}),delete r.data.app,delete r.data.owner),o.url=i.fullpath(n.url,s),$.extend(!0,o,r||{}),t.sync.call(this,"read",n,o);default:throw"Operation not supported"}},url:"/services/search/timeparser",parse:function(e){var t,n=[];for(var r in e)t={},t[r]=e[r],n.push(t);return n}})}),define("models/TimeRange",["jquery","underscore","splunk.i18n","models/Base","collections/services/search/TimeParsers","util/splunkd_utils","util/time_utils"],function(e,t,n,r,i,s,o){return r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments),this.timeParsers=new i,this.associated.timeParsers=this.timeParsers,this.units=o.TIME_UNITS},defaults:{enableRealTime:!0},validation:{earliest:[{},{fn:"validateTime"}],latest:[{},{fn:"validateTime"}]},validateTime:function(e,n,r){var i=r.earliest||"",s=r.latest||"",u=this.get("enableRealTime"),a=o.isRealtime(i),f=o.isRealtime(s),l=o.stripRTSafe(i,!1),c=o.stripRTSafe(s,!0);if(l&&c&&l===c&&n==="latest")return t("You cannot have equivalent times.").t();if(!u){if(a&&f&&n==="latest"||a&&!f&&n==="earliest"||f&&!a&&n==="latest")return t("rt time values are not allowed").t()}else{if(a&&!f&&n==="latest")return t("You must set a rt value for latest time if you set a rt value for earliest time.").t();if(!a&&f&&n==="earliest")return t("You must set a rt value for earliest time if you set a rt value for latest time.").t()}},sync:function(n,r,i){var u=e.Deferred(),a=r,f=i,l,c,h=[],p={},d,v,m;switch(n){case"create":m=o.stripRTSafe((r.get("earliest")||"")+"",!1),m&&h.push(m),v=o.stripRTSafe((r.get("latest")||"")+"",!0),v&&h.push(v);if(!h.length)return i.success(r,p,i),r.trigger("sync",r,p,i),u.resolve.apply(this,[]),u.promise();return this.timeParsers.reset([]),this.timeParsersXHR=this.timeParsers.fetch({data:{time:h,output_time_format:"%s.%Q|%Y-%m-%dT%H:%M:%S.%Q%:z"},success:function(){var e=this.timeParsers.get(m),n=e?(e.get("value")||"").split("|"):[],r=n[0],i=n[1],l=this.timeParsers.get(v),c=l?(l.get("value")||"").split("|"):[],h=c[0],g=c[1];e&&(p.earliest_epoch=parseFloat(r)),l&&(p.latest_epoch=parseFloat(h)),i&&(p.earliest_iso=i,p.earliest_date=o.isoToDateObject(i)),g&&(p.latest_iso=g,p.latest_date=o.isoToDateObject(g));if(e&&l){var y=Math.round(p.earliest_epoch*1e3)/1e3,b=Math.round(p.latest_epoch*1e3)/1e3;y===b&&(d=s.createSplunkDMessage(s.ERROR,t("You cannot have equivalent times.").t())),y>b&&(d=s.createSplunkDMessage(s.ERROR,t("Earliest time cannot be greater than latest time.").t()));if(d){f.error&&f.error(a,d,f),a.trigger("error",a,d,f),u.reject.call(this,d,"error");return}}f.success(a,p,f),a.trigger("sync",a,p,f),u.resolve.apply(this,arguments)}.bind(this),error:function(){var e=s.createSplunkDMessage(s.ERROR,t("You have an invalid time in your range.").t());f.error&&f.error(a,e,f),a.trigger("error",a,e,f),u.reject.apply(this,arguments)}}),u.promise();default:throw"Operation not supported"}},getTimeParse:function(e){return o.parseTimeString(this.get(e))},isRealtime:function(e){return o.isRealtime(this.get(e))},isAbsolute:function(e){return o.isAbsolute(this.get(e))},isEpoch:function(e){return o.isEpoch(this.get(e))},isWholeDay:function(e){return o.timeAndJsDateIsWholeDay(this.get(e),this.get(e+"_date"))},latestIsNow:function(){return o.isNow(this.get("latest"))},hasNoEarliest:function(){return o.isEmpty(this.get("earliest"))},generateLabel:function(e){return o.generateLabel(e,this.get("earliest"),this.get("earliest_date"),this.get("latest"),this.get("latest_date"))},fetchAbort:function(){r.prototype.fetchAbort(),this.timeParsersXHR&&this.timeParsersXHR.state&&this.timeParsersXHR.state()==="pending"&&this.timeParsersXHR.abort()}})}),define("views/shared/delegates/ModalTimerangePicker",["jquery","underscore","views/shared/delegates/Base","views/shared/delegates/PopdownDialog","views/shared/Modal"],function(e,t,n,r,i){return n.extend({initialize:function(){var e={SLIDE_ANIMATION_DURATION:500};t.defaults(this.options,e),this.$visArea=this.options.$visArea,this.$slideArea=this.options.$slideArea,this.$contentWrapper=this.options.$contentWrapper,this.$timeRangePickerWrapper=this.options.$timeRangePickerWrapper,this.$modalParent=this.options.$modalParent,this.$timeRangePicker=this.options.$timeRangePicker,this.title=this.$(i.HEADER_TITLE_SELECTOR).html(),this.events={},this.events["click "+this.options.backButtonSelector]="closeTimeRangePicker",this.events["click "+this.options.activateSelector]="showTimeRangePicker",this.delegateEvents(this.events),this.$timeRangePicker.hide()},showTimeRangePicker:function(e){var n=this.$contentWrapper,r=this.$timeRangePickerWrapper,s=n.width();this.onBeforePaneAnimation(n,r);var o=r.width(),u=r.height();this.$modalParent.animate({width:o,marginLeft:-(2*s/3)},{duration:this.options.SLIDE_ANIMATION_DURATION}),this.$visArea.animate({height:u},{duration:this.options.SLIDE_ANIMATION_DURATION,complete:function(){this.onAfterPaneAnimation(n,r)}.bind(this)},this),this.$slideArea.animate({marginLeft:-s},{duration:this.options.SLIDE_ANIMATION_DURATION}),this.$el.animate({width:o},{duration:this.options.SLIDE_ANIMATION_DURATION}),this.$(i.HEADER_TITLE_SELECTOR).html(t("Select Time Range").t()),this.$(".btn.back").show(),this.$(".btn-primary").hide(),this.$(".btn.cancel").hide(),e&&e.preventDefault()},closeTimeRangePicker:function(e){var t=this.$timeRangePickerWrapper,n=this.$contentWrapper,r=n.width();this.onBeforePaneAnimation(t,n),this.$modalParent.animate({width:r,marginLeft:-(r/2)},{duration:this.options.SLIDE_ANIMATION_DURATION}),this.$visArea.animate({height:n.height()},{duration:this.options.SLIDE_ANIMATION_DURATION,complete:function(){this.onAfterPaneAnimation(t,n)}.bind(this)},this),this.$slideArea.animate({marginLeft:0},{duration:this.options.SLIDE_ANIMATION_DURATION}),this.$el.animate({width:r},{duration:this.options.SLIDE_ANIMATION_DURATION}),this.$(i.HEADER_TITLE_SELECTOR).html(this.title),this.$(".btn.back").hide(),this.$(".btn-primary").show(),this.$(".btn.cancel").show(),e&&e.preventDefault()},onBeforePaneAnimation:function(e,t){this.$visArea.css("overflow","hidden"),this.$visArea.css({height:e.height()+"px"}),t===this.$timeRangePickerWrapper&&this.$timeRangePicker.show(),t.css({height:"",visibility:""})},onAfterPaneAnimation:function(e,t){e===this.$timeRangePickerWrapper&&this.$timeRangePicker.hide(),this.$visArea.css("overflow",""),this.$visArea.css({height:""}),e.css({height:"2px",visibility:"hidden"})}})}),define("views/shared/ScheduleSentence",["jquery","module","underscore","views/Base","views/shared/controls/ControlGroup","views/shared/controls/SyntheticSelectControl"],function(e,t,n,r,i,s){return r.extend({moduleId:t.id,initialize:function(){r.prototype.initialize.apply(this,arguments);var t={lineOneLabel:"",lineTwoLabel:""};n.defaults(this.options,t);var o=function(e){var t=e.toString();return{label:t,value:t}},u=n.map(n.range(0,46,15),o),a=n.map(n.range(24),function(e){return{label:e+":00",value:e.toString()}}),f=n.map(n.range(1,32),o);this.children.timeRange=new i({className:"control-group",controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{modelAttribute:"cronType",model:this.model.cron,items:[{label:n("Run every hour").t(),value:"hourly"},{label:n("Run every day").t(),value:"daily"},{label:n("Run every week").t(),value:"weekly"},{label:n("Run every month").t(),value:"monthly"},{label:n("Run on Cron Schedule").t(),value:"custom"}],save:!1,toggleClassName:"btn",labelPosition:"outside",elastic:!0,popdownOptions:e.extend(!0,{},this.options.popdownOptions)},label:this.options.lineOneLabel}),this.children.hourly=new s({additionalClassNames:"schedule_hourly",modelAttribute:"minute",model:this.model.cron,items:u,save:!1,toggleClassName:"btn",labelPosition:"outside",elastic:!0,popdownOptions:e.extend(!0,{},this.options.popdownOptions)}),this.children.weekly=new s({additionalClassNames:"schedule_weekly",modelAttribute:"dayOfWeek",model:this.model.cron,items:[{label:n("Monday").t(),value:"1"},{label:n("Tuesday").t(),value:"2"},{label:n("Wednesday").t(),value:"3"},{label:n("Thursday").t(),value:"4"},{label:n("Friday").t(),value:"5"},{label:n("Saturday").t(),value:"6"},{label:n("Sunday").t(),value:"0"}],save:!1,toggleClassName:"btn",labelPosition:"outside",popdownOptions:e.extend(!0,{},this.options.popdownOptions)}),this.children.monthly=new s({menuClassName:"dropdown-menu-short",additionalClassNames:"schedule_monthly",modelAttribute:"dayOfMonth",model:this.model.cron,items:f,save:!1,toggleClassName:"btn",labelPosition:"outside",popdownOptions:e.extend(!0,{},this.options.popdownOptions)}),this.children.daily=new s({menuClassName:"dropdown-menu-short",additionalClassNames:"schedule_daily",modelAttribute:"hour",model:this.model.cron,items:a,save:!1,toggleClassName:"btn",labelPosition:"outside",popdownOptions:e.extend(!0,{},this.options.popdownOptions)}),this.children.scheduleOptions=new i({controls:[this.children.hourly,this.children.weekly,this.children.monthly,this.children.daily],label:this.options.lineTwoLabel}),this.children.cronSchedule=new i({controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"cron_schedule",model:this.model.cron},label:n("Cron Expression").t(),help:n("e.g. 00 18 *** (every day at 6PM).").t()}),this.model.cron.on("change:cronType",this.timeRangeToggle,this),this.model.cron.on("change:cronType",function(){this.model.cron.setDefaults()},this)},timeRangeToggle:function(){var e=this.children.scheduleOptions.$el.find(".pre_label"),t=this.children.scheduleOptions.$el.find(".hour_post_label"),n=this.children.scheduleOptions.$el.find(".weekly_pre_label"),r=this.children.scheduleOptions.$el.find(".monthly_pre_label"),i=this.children.scheduleOptions.$el.find(".daily_pre_label"),s=this.$el.find(".custom_time");this.children.hourly.$el.hide(),this.children.daily.$el.hide(),this.children.weekly.$el.hide(),this.children.monthly.$el.hide(),e.hide(),t.hide(),n.hide(),r.hide(),i.hide(),s.css("display","none");switch(this.model.cron.get("cronType")){case"hourly":this.children.scheduleOptions.$el.show(),this.children.hourly.$el.css("display",""),e.css("display",""),t.css("display","");break;case"daily":this.children.scheduleOptions.$el.show(),this.children.daily.$el.css("display",""),e.css("display","");break;case"weekly":this.children.scheduleOptions.$el.show(),this.children.weekly.$el.css("display",""),this.children.daily.$el.css("display",""),n.css("display",""),i.css("display","");break;case"monthly":this.children.scheduleOptions.$el.show(),this.children.monthly.$el.css("display",""),this.children.daily.$el.css("display",""),r.css("display",""),i.css("display","");break;case"custom":s.css("display",""),this.children.scheduleOptions.$el.hide()}},render:function(){return this.$el.append(this.children.timeRange.render().el),this.$el.append(this.children.scheduleOptions.render().el),this.children.scheduleOptions.$el.find(".schedule_hourly").before('<span class="pre_label">'+n("At ").t()+"</span>"),this.children.scheduleOptions.$el.find(".schedule_hourly").after('<span class="hour_post_label">'+n(" minutes past the hour").t()+"</span>"),this.children.scheduleOptions.$el.find(".schedule_weekly").before('<span class="weekly_pre_label">'+n("On ").t()+"</span>"),this.children.scheduleOptions.$el.find(".schedule_weekly .btn").width("75px"),this.children.scheduleOptions.$el.find(".schedule_monthly").before('<span class="monthly_pre_label">'+n("On day ").t()+"</span>"),this.children.scheduleOptions.$el.find(".schedule_monthly .btn").width("55px"),this.children.scheduleOptions.$el.find(".schedule_daily").before('<span class="daily_pre_label">'+n(" at ").t()+"</span>"),this.children.scheduleOptions.$el.find(".schedule_daily .btn").width("50px"),this.$el.append('<div class="custom_time"></div>'),this.$el.find(".custom_time").append(this.children.cronSchedule.render().el),this.timeRangeToggle(),this}})}),define("views/shared/reportcontrols/dialogs/schedule_dialog/step1/Schedule",["underscore","module","views/Base","views/shared/Modal","views/shared/ScheduleSentence","views/shared/controls/ControlGroup"],function(e,t,n,r,i,s){return n.extend({moduleId:t.id,className:"form form-horizontal",initialize:function(){n.prototype.initialize.apply(this,arguments);var t=this.model.inmem.entry.content.get("disabled")?e("Enable and Schedule Report").t():e("Schedule Report").t();this.children.name=new s({controlType:"Label",controlOptions:{modelAttribute:"name",model:this.model.inmem.entry},label:e("Report").t()}),this.children.scheduleCheck=new s({controlType:"SyntheticCheckbox",controlOptions:{modelAttribute:"scheduled_and_enabled",model:this.model.inmem},label:t}),this.children.scheduleSentence=new i({model:{cron:this.model.cron},lineOneLabel:e("Schedule").t(),popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}),this.model.inmem.on("change:scheduled_and_enabled",this.isScheduledToggle,this),this.model.timeRange.on("applied",function(){this.model.inmem.entry.content.set({"dispatch.earliest_time":this.model.timeRange.get("earliest"),"dispatch.latest_time":this.model.timeRange.get("latest")}),this.setLabel()},this),this.model.timeRange.on("change:earliest_epoch change:latest_epoch change:earliest change:latest",e.debounce(this.setLabel,0),this)},isScheduledToggle:function(){this.model.inmem.get("scheduled_and_enabled")?(this.$(".modal-btn-primary").html(e("Next").t()),this.children.scheduleSentence.$el.show(),this.$("div.timerange").show()):(this.children.scheduleSentence.$el.hide(),this.$("div.timerange").hide(),this.$(".modal-btn-primary").html(e("Save").t())),this.model.inmem.trigger("togglePrimaryButton")},setLabel:function(){var e=this.model.timeRange.generateLabel(this.collection);this.$el.find("span.time-label").text(e)},render:function(){return this.$el.append(this.children.name.render().el),this.model.inmem.entry.content.get("disabled")&&this.$el.append("<div>"+e("This report is currently disabled.").t()+"</div>"),this.$el.append(this.children.scheduleCheck.render().el),this.$el.append(this.children.scheduleSentence.render().el),this.$el.append('<div class="timerange" style="display: block;"><label class="control-label">'+e("Time Range").t()+"</label></div>"),this.$("div.timerange").append('<div class="controls"><a href="#" class="btn timerange-control"><span class="time-label"></span><span class="icon-triangle-right-small"></span></a></div>'),this.setLabel(),this.isScheduledToggle(),this}})}),define("views/shared/timerangepicker/dialog/Presets",["jquery","underscore","backbone","module","views/Base","util/time_utils"],function(e,t,n,r,i,s){return i.extend({moduleId:r.id,className:"accordion-inner",initialize:function(){this.label=t("Presets").t();var e={showRealTime:!0,showRealTimeOnly:!1,showRelative:!0,showAllTime:!0};t.defaults(this.options,e),i.prototype.initialize.call(this,arguments),this.collection&&this.collection.on("reset",this.render,this)},supportsRange:function(){var e=this.model.get("earliest"),t=this.model.get("latest");return s.generateAllTimeLabel(e,t)||s.findPresetLabel(this.collection,e,t)},events:{"click a":function(t){t.preventDefault();var n=e(t.currentTarget);this.model.save({earliest:n.data("earliest"),latest:n.data("latest")}),this.model.trigger("applied")}},render:function(){var e=this.options.showRelative&&!this.options.showRealTimeOnly?this.collection.filterToPeriod():!1,n=e&&e.length,r=this.options.showRelative&&!this.options.showRealTimeOnly?this.collection.filterToLast():!1,i=r&&r.length,s=t.template(this.template,{_:t,realTimePresets:this.options.showRealTime?this.collection.filterToRealTime():!1,periodPresets:e,hasPeriodPresets:n,lastPresets:r,hasLastPresets:i,otherPresets:this.options.showRealTimeOnly?!1:this.collection.filterToOther(),options:this.options,isAllTime:this.isAllTime,listElementPartial:this.listElementPartial});return this.$el.html(s),this},isAllTime:function(e){var t=!e.entry.content.get("earliest_time")||e.entry.content.get("earliest_time")=="0",n=!e.entry.content.get("latest_time")||e.entry.content.get("latest_time")=="now";return t&&n},listElementPartial:t.template('            <li><a href="#" data-earliest="<%- model.entry.content.get("earliest_time") || "" %>" data-latest="<%- model.entry.content.get("latest_time") || "" %>"><%- _(model.entry.content.get("label")).t() %></a></li>        '),template:'            <% if (realTimePresets && realTimePresets.length) { %>                <ul class="unstyled presets-group">                    <li><%- _("Real-time").t() %></li>                    <% _.each(realTimePresets, function(model) { %>                        <%= listElementPartial({model: model}) %>                    <% }); %>                </ul>                <div class="presets-divider-wrap"><div class="presets-divider"></div></div>            <% } %>            <% if (hasPeriodPresets && hasLastPresets) { %>                    <ul class="unstyled presets-group">                        <li><%- _("Relative").t() %></li>                        <% _.each(periodPresets, function(model) { %>                            <%= listElementPartial({model: model}) %>                        <% }); %>                    </ul>                    <ul class="unstyled presets-group">                        <li>&nbsp;</li>                        <% _.each(lastPresets, function(model) { %>                             <%= listElementPartial({model: model}) %>                        <% }); %>                    </ul>                    <div class="presets-divider-wrap"><div class="presets-divider"></div></div>            <% } else if (hasPeriodPresets) { %>                <ul class="unstyled presets-group">                    <li><%- _("Relative").t() %></li>                    <% _.each(periodPresets, function(model) { %>                        <%= listElementPartial({model: model}) %>                    <% }); %>                </ul>                <div class="presets-divider-wrap"><div class="presets-divider"></div></div>            <% } else if (hasLastPresets) { %>                <ul class="unstyled presets-group">                    <li><%- _("Relative").t() %></li>                    <% _.each(lastPresets, function(model) { %>                        <%= listElementPartial({model: model}) %>                   <% }); %>                </ul>                <div class="presets-divider-wrap"><div class="presets-divider"></div></div>            <% } %>            <% if (otherPresets && otherPresets.length) { %>                <ul class="unstyled presets-group">                    <li><%- _("Other").t() %></li>                    <% _.each(otherPresets, function(model) { %>                        <% if (!(isAllTime(model) && !options.showAllTime)) { %>                            <%= listElementPartial({model: model}) %>                        <% } %>                    <% }); %>                </ul>            <% } %>        '})}),define("views/shared/timerangepicker/dialog/Relative",["jquery","underscore","backbone","module","models/services/search/TimeParser","models/TimeRange","views/Base","views/shared/controls/SyntheticSelectControl","views/shared/FlashMessages","util/time_utils","util/splunkd_utils","splunk.i18n"],function(e,t,n,r,i,s,o,u,a,f,l,c){return o.extend({moduleId:r.id,className:"accordion-inner",initialize:function(n){o.prototype.initialize.call(this,arguments),this.label=t("Relative").t(),this.model={range:this.model,workingRange:new s(e.extend(!0,{},this.model.toJSON())),earliestTimeParser:new i({key:f.stripRTSafe(this.model.get("earliest"),!1),value:this.model.get("earliest_iso")}),latestTimeParser:new i({key:f.stripRTSafe(this.model.get("latest"),!0),value:this.model.get("latest_iso")})},this.rangeMap={s:{earliest:t("Beginning of second").t(),latest:t("Beginning of current second").t()},m:{earliest:t("Beginning of minute").t(),latest:t("Beginning of current minute").t()},h:{earliest:t("Beginning of hour").t(),latest:t("Beginning of current hour").t()},d:{earliest:t("Beginning of day").t(),latest:t("Beginning of today").t()},w:{earliest:t("First day of week").t(),latest:t("First day of this week").t()},mon:{earliest:t("First day of month").t(),latest:t("First day of this month").t()},q:{earliest:t("First day of quarter").t(),latest:t("First day of this quarter").t()},y:{earliest:t("First day of year").t(),latest:t("First day of this year").t()}},this.model.workingRange.set("relative_range_unit","s"),this.children.rangeTypeSelect=new u({model:this.model.workingRange,items:[{value:"s",label:t("Seconds Ago").t()},{value:"m",label:t("Minutes Ago").t()},{value:"h",label:t("Hours Ago").t()},{value:"d",label:t("Days Ago").t()},{value:"w",label:t("Weeks Ago").t()},{value:"mon",label:t("Months Ago").t()},{value:"q",label:t("Quarters Ago").t()},{value:"y",label:t("Years Ago").t()}],modelAttribute:"relative_range_unit",className:"btn-group timerangepicker-relative_range_unit",toggleClassName:"btn",menuWidth:"narrow",popdownOptions:{attachDialogTo:"body"},save:!1}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestTimeParser:this.model.earliestTimeParser,latestTimeParser:this.model.latestTimeParser}}),this.model.workingRange.on("change:relative_range_unit",function(){var e=this.model.workingRange.get("relative_range_unit");this.$(".earliest_snap_label .text").html(this.rangeMap[e].earliest),this.$(".latest_snap_label .text").html(this.rangeMap[e].latest),this.fetchEarliestTime(),this.fetchLatestTime()},this),this.model.workingRange.on("change:relative_earliest_snap_to change:relative_earliest_value",t.debounce(this.fetchEarliestTime,0),this),this.model.workingRange.on("change:relative_latest_snap_to",t.debounce(this.fetchLatestTime,0),this),this.model.earliestTimeParser.on("change",this.updateEarliestHint,this),this.model.earliestTimeParser.on("error",function(){this.$("#earliest_hint_"+this.cid).html(this.model.earliestTimeParser.error.get("messages")[0].message),this.disableApply()},this),this.model.latestTimeParser.on("change",this.updateLatestHint,this),this.model.latestTimeParser.on("error",function(){this.$("#latest_hint_"+this.cid).html(this.model.latestTimeParser.error.get("messages")[0].message),this.disableApply()},this),this.model.range.on("change:earliest change:latest prepopulate",t.debounce(this.prepopulate,0),this)},updateEarliestHint:function(){var e=f.isoToDateObject(this.model.earliestTimeParser.get("value"));this.$("#earliest_hint_"+this.cid).html(c.format_datetime_microseconds(f.jsDateToSplunkDateTimeWithMicroseconds(e),"short","full")),this.enableApply()},updateLatestHint:function(){var e=f.isoToDateObject(this.model.latestTimeParser.get("value"));this.$("#latest_hint_"+this.cid).html(c.format_datetime_microseconds(f.jsDateToSplunkDateTimeWithMicroseconds(e),"short","full")),this.enableApply()},prepopulate:function(){var e=this.model.range.getTimeParse("earliest"),t=this.model.range.getTimeParse("latest"),n={};if(!e)return;n.relative_earliest_value=e.amount,n.relative_earliest_snap_to=e.hasSnap?1:0,n.relative_latest_snap_to=t&&t.hasSnap?1:0,this.rangeMap.hasOwnProperty(e.unit)&&(n.relative_range_unit=e.unit),this.model.workingRange.set(n),this.$(".earliest_input").val(e.amount),this.$("[name=earliest_snap][value="+this.model.workingRange.get("relative_earliest_snap_to")+"]").prop("checked",!0),this.$("[name=latest_snap][value="+this.model.workingRange.get("relative_latest_snap_to")+"]").prop("checked",!0)},supportsRange:function(){return f.generateRelativeTimeLabel(this.model.range.get("earliest"),this.model.range.get("latest"))},getEarliestTime:function(){var e=this.model.workingRange.get("relative_earliest_value"),t=this.model.workingRange.get("relative_range_unit")||"s",n=this.model.workingRange.get("relative_earliest_snap_to");return e?"-"+e+t+(n?"@"+t:""):null},fetchEarliestTime:function(){var e=this.getEarliestTime(),t=f.stripRTSafe(this.model.earliestTimeParser.id,!1);e&&e!==t?this.model.earliestTimeParser.fetch({data:{time:e}}):this.model.earliestTimeParser.get("value")?this.updateEarliestHint():(this.$("#earliest_hint_"+this.cid).html(""),this.enableApply())},getLatestTime:function(){var e=this.model.workingRange.get("relative_range_unit")||"mon",t=this.model.workingRange.get("relative_latest_snap_to"),n="now";return t&&(n="@"+e),n},fetchLatestTime:function(){var e=this.getLatestTime(),t=this.model.latestTimeParser.id;e&&e!==t?this.model.latestTimeParser.fetch({data:{time:e}}):this.model.latestTimeParser.get("value")?this.updateLatestHint():this.$("#latest_hint_"+this.cid).html("")},events:{"keyup .earliest_input":function(e){this.model.workingRange.set("relative_earliest_value",this.$("#earliest_"+this.cid).val())},"change .earliest_snap":function(e){var t=parseInt(this.$("input:radio[name=earliest_snap]:checked").val(),10);this.model.workingRange.set("relative_earliest_snap_to",t)},"change .latest_snap":function(e){var t=parseInt(this.$("input:radio[name=latest_snap]:checked").val(),10);this.model.workingRange.set("relative_latest_snap_to",t)},"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}var n=this,r=this.getEarliestTime(),i=this.getLatestTime();if(!r){var s=l.createSplunkDMessage(l.ERROR,"Earliest cannot be blank.");return this.model.earliestTimeParser.trigger("error",this.model.earliestTimeParser,s),!1}this.disableApply(),this.model.workingRange.save({earliest:r,latest:i},{success:function(e){n.enableApply(),n.model.range.set({earliest:r,latest:i,earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.disableApply()}}),t.preventDefault()}},generateLabel:function(){return"Custom Time"},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{cid:this.cid,time:this.model.workingRange.get("relative_earliest_value")||"",rangeMap:this.rangeMap,selectedRange:this.model.workingRange.get("relative_range_unit")||"mon",_:t});return this.$el.html(e),this.$el.prepend(this.children.flashMessages.render().el),this.children.rangeTypeSelect.render().$el.insertAfter(this.$(".earliest_input")),this.model.latestTimeParser.isNew()&&this.fetchLatestTime(),this},template:'                <table class="form form-inline">                    <tbody class="relative-time-container" style="white-space:nowrap;">                        <tr>                            <td class="earliest_time">                                <table>                                    <tbody>                                        <tr>                                            <td>                                                <label class="control-label" for="earliest_<%- cid %>">                                                    <%- _("Earliest:").t() %>                                                </label>                                            </td>                                            <td>                                                <div class="input-append">                                                <input type="text" size="5" value="<%- time %>" class="earliest_input timerangepicker-relative-earliest-time" id="earliest_<%- cid %>"/>                                                </div>                                                <label for="earliest_no_snap_to_<%- cid %>" class="radio"><input type="radio" name="earliest_snap" class="earliest_snap" id="earliest_no_snap_to_<%- cid %>" value="0" checked="checked"/>                                                     <%- _("No Snap-to").t() %>                                                </label>                                                <label class="earliest_snap_label radio" for="earliest_snap_to_<%- cid %>"><input type="radio" name="earliest_snap" class="earliest_snap" id="earliest_snap_to_<%- cid %>" value="1"/>                                                <span class="text"><%= rangeMap[selectedRange].earliest %></span></label>                                            </td>                                        </tr>                                        <tr>                                            <td></td>                                            <td>                                                <span id="earliest_hint_<%- cid %>" class="help-block help-block-timestamp"></span>                                            </td>                                        </tr>                                    </tbody>                                </table>                            </td>                            <td class="latest_time">                                <table>                                    <tbody>                                        <tr>                                            <td>                                                <label class="control-label" for="<%- cid %>">                                                    <%- _("Latest:").t() %>                                                </label>                                            </td>                                            <td>                                                <label for="latest_no_snap_to_<%- cid %>" class="radio"><input type="radio" name="latest_snap" class="latest_snap" id="latest_no_snap_to_<%- cid %>" value="0" checked="checked"/>                                                   <%- _("now").t() %>                                                </label>                                                <label class="latest_snap_label radio" for="latest_snap_to_<%- cid %>"><input type="radio" name="latest_snap" class="latest_snap" id="latest_snap_to_<%- cid %>" value="1"/>                                                <span class="text"><%= rangeMap[selectedRange].latest %></span></label>                                            </td>                                        </tr>                                        <tr>                                            <td></td>                                            <td>                                                <span id="latest_hint_<%- cid %>" class="help-block help-block-timestamp"></span>                                            </td>                                        </tr>                                    </tbody>                                </table>                            </td>                            <td><button class="apply btn" id="apply_<%- cid %>">                                <%- _("Apply").t() %>                            </button></td>                        </tr>                    </tbody>                </table>            '})}),define("views/shared/timerangepicker/dialog/RealTime",["jquery","underscore","backbone","module","models/services/search/TimeParser","models/TimeRange","views/Base","views/shared/controls/SyntheticSelectControl","views/shared/FlashMessages","util/time_utils","splunk.i18n"],function(e,t,n,r,i,s,o,u,a,f,l){return o.extend({moduleId:r.id,className:"accordion-inner",initialize:function(n){o.prototype.initialize.call(this,arguments),this.label=t("Real-time").t(),this.model={range:this.model,workingRange:new s(e.extend(!0,{},this.model.toJSON())),earliestTimeParser:new i({key:f.stripRTSafe(this.model.get("earliest"),!1),value:this.model.get("earliest_iso")})},this.model.workingRange.set("realtime_range_type","s"),this.children.rangeTypeSelect=new u({model:this.model.workingRange,items:[{value:"s",label:t("Seconds Ago").t()},{value:"m",label:t("Minutes Ago").t()},{value:"h",label:t("Hours Ago").t()},{value:"d",label:t("Days Ago").t()},{value:"w",label:t("Weeks Ago").t()},{value:"mon",label:t("Months Ago").t()},{value:"q",label:t("Quarters Ago").t()},{value:"y",label:t("Years Ago").t()}],modelAttribute:"realtime_range_type",className:"btn-group timerangepicker-realtime_range_type",toggleClassName:"btn",menuWidth:"narrow",popdownOptions:{attachDialogTo:"body"},save:!1}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestTimeParser:this.model.earliestTimeParser}}),this.model.workingRange.on("change:realtime_range_type change:realtime_earliest_value",t.debounce(function(){this.fetchEarliestTime()}.bind(this),0),this),this.model.earliestTimeParser.on("change",this.updateEarliestHint,this),this.model.earliestTimeParser.on("error",function(){this.$("#hint_"+this.cid).html(this.model.earliestTimeParser.error.get("messages")[0].message),this.disableApply()},this),this.model.range.on("change:earliest change:latest prepopulate",t.debounce(this.prepopulate,0),this)},updateEarliestHint:function(){var e=f.isoToDateObject(this.model.earliestTimeParser.get("value"));this.$("#hint_"+this.cid).html(l.format_datetime_microseconds(f.jsDateToSplunkDateTimeWithMicroseconds(e),"short","full")),this.enableApply()},prepopulate:function(){var e=this.model.range.getTimeParse("earliest"),t={};if(!e)return;this.$(".earliest_input").val(e.amount),t.realtime_earliest_value=e.amount,t.realtime_range_type=e.unit,this.model.workingRange.set(t)},supportsRange:function(){var e=this.model.range.getTimeParse("earliest"),t=this.model.range.getTimeParse("latest");return e?e.isRealTime&&e.amount&&!e.snapUnit&&t.isRealTime&&t.isNow&&!t.snapUnit:!1},getEarliestTime:function(e){var t=this.model.workingRange.get("realtime_earliest_value"),n=this.model.workingRange.get("realtime_range_type")||"mon";return t?(e?"":"rt")+"-"+t+n:null},fetchEarliestTime:function(){var e=this.getEarliestTime(!0),t=f.stripRTSafe(this.model.earliestTimeParser.id,!1);e&&e!==t?this.model.earliestTimeParser.fetch({data:{time:e}}):this.model.earliestTimeParser.get("value")?this.updateEarliestHint():(this.$("#hint_"+this.cid).html(""),this.enableApply())},events:{"keyup .earliest_input":function(e){this.model.workingRange.set("realtime_earliest_value",this.$("#earliest_"+this.cid).val())},"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}var n=this,r=this.getEarliestTime();this.disableApply(),this.model.workingRange.save({earliest:r,latest:"rtnow"},{success:function(e){n.enableApply(),n.model.range.set({earliest:r,latest:"rtnow",earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{_:t,cid:this.cid,time:this.model.workingRange.get("realtime_earliest_value")||""});return this.$el.html(e),this.$el.prepend(this.children.flashMessages.render().el),this.children.rangeTypeSelect.render().$el.insertAfter(this.$(".earliest_input")),this},template:'                <table class="form form-inline">                    <tbody>                        <tr>                            <td>                                <label class="control-label" for="earliest_<%- cid %>"><%- _("Earliest:").t() %></label>                            </td>                            <td>                                <div class="input-append"><input type="text" size="5" value="<%- time %>" class="earliest_input timerangepicker-real-time-earliest-time" id="earliest_<%- cid %>"/></div>                            </td>                            <td>                                <label class="control-label"><%- _("Latest:").t() %></label>                            </td>                            <td>                                <span class="form-value">now</span>                            </td>                            <td><button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button></td>                        </tr>                        <tr>                            <td></td>                            <td>                                <span id="hint_<%- cid %>" class="help-block help-block-timestamp"></span>                            </td>                        </tr>                    </tbody>                </table>            '})}),define("models/DateInput",["jquery","underscore","models/Base","jquery.ui.datepicker","strftime"],function(e,t,n){var r=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d+)/,i=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments)},defaults:function(){var e=new Date;return this.convertDateToAttrsObject(e)},validation:{year:{required:!0,range:[1e3,9999],pattern:"digits",msg:t("Year must be a 4 digit number.").t()},month:{required:!0,range:[0,11],pattern:"digits",msg:t("Month must be a number between 0 and 11.").t()},day:{required:!0,range:[1,31],pattern:"digits",msg:t("Day must be a number between 1 and 31.").t()},hour:[{required:!0,range:[0,24],pattern:"digits",msg:t("Hour must be a number between 0 and 24.").t()},{fn:"validateFullTime"}],minute:[{required:!0,range:[0,59],pattern:"digits",msg:t("Minute must be a number between 0 and 59.").t()},{fn:"validateFullTime"}],second:[{required:!0,range:[0,59],pattern:"digits",msg:t("Second must be a number between 0 and 59.").t()},{fn:"validateFullTime"}],millisecond:[{required:!0,range:[0,999],pattern:"digits",msg:t("Millisecond must be a number between 0 and 999.").t()},{fn:"validateFullTime"}]},validateFullTime:function(e,n,r){if(r.hour===24&&(n==="minute"||n==="second"||n==="millisecond")&&e>0)return t("You cannot set the time greater than 24:00:00.000.").t()},setHoursMinSecFromStr:function(e,n){var r,i,s=e.split(":");if(s.length==3){var o=s[2].split(".");if(o.length==2)return this.set({hour:parseInt(s[0],10),minute:parseInt(s[1],10),second:parseInt(o[0],10),millisecond:parseInt(o[1],10)},n);r=t("Could not parse the time stamp given into second and millisecond.").t()}else r=t("Could not parse the time stamp given into hour, minute, second, and millisecond.").t();return i={second:r},this.trigger("validated",!1,this,i),this.trigger("validated:invalid",this,i),!1},setMonDayYearFromJSDate:function(e,t){return this.set({year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hour:0,minute:0,second:0,millisecond:0},t)},setFromJSDate:function(e,t){return this.set(this.convertDateToAttrsObject(e),t)},jsDate:function(){var e=this.get("year"),n=this.get("month"),r=this.get("day"),i=this.get("hour"),s=this.get("minute"),o=this.get("second"),u=this.get("millisecond");if(this.isValid(!0)&&!t.isUndefined(e)&&!t.isUndefined(n)&&!t.isUndefined(r)&&!t.isUndefined(i)&&!t.isUndefined(s)&&!t.isUndefined(o)&&!t.isUndefined(u))return new Date(e,n,r,i,s,o,u);throw"You have an invalid DateTime object for creating a JSDate."},strftime:function(e){return this.jsDate().strftime(e)},isoWithoutTZ:function(){return this.strftime("%Y-%m-%dT%H:%M:%S.%Q")},time:function(){return this.strftime("%H:%M:%S.%Q")},dateFormat:function(){return e.datepicker._defaults.dateFormat},formattedDate:function(){return e.datepicker.formatDate(this.dateFormat(),this.jsDate())},convertDateToAttrsObject:function(e){return{year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}},{createFromIsoString:function(e){var t=r.exec(e);if(!t||t.length!==8)throw"Invalid ISO string: "+e;var n=new i({year:parseInt(t[1],10),month:parseInt(t[2],10)-1,day:parseInt(t[3],10),hour:parseInt(t[4],10),minute:parseInt(t[5],10),second:parseInt(t[6],10),millisecond:parseInt(t[7],10)});if(!n.isValid(!0))throw"Invalid time encoded: "+e;return n}});return i}),define("views/shared/timerangepicker/dialog/daterange/BetweenDates",["jquery","underscore","backbone","module","models/DateInput","models/TimeRange","views/Base","views/shared/controls/DateControl","views/shared/FlashMessages"],function(e,t,n,r,i,s,o,u,a){return o.extend({tagName:"tbody",moduleId:r.id,initialize:function(){o.prototype.initialize.call(this,arguments),this.model={range:this.model,workingRange:new s},this.today=new Date,this.today.setHours(0,0,0,0),this.model.latestDateInput=new i,this.model.latestDateInput.setFromJSDate(this.today,{silent:!0}),this.yesterday=new Date,this.yesterday.setDate(this.yesterday.getDate()-1),this.yesterday.setHours(0,0,0,0),this.model.earliestDateInput=new i,this.model.earliestDateInput.setFromJSDate(this.yesterday,{silent:!0}),this.children.earliestTimeInput=new u({model:this.model.earliestDateInput,inputClassName:"timerangepicker-earliest-date",validate:!0}),this.children.latestTimeInput=new u({model:this.model.latestDateInput,inputClassName:"timerangepicker-latest-date",validate:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestDateInput:this.model.earliestDateInput,latestDateInput:this.model.latestDateInput}}),this.model.range.on("change:earliest_date change:latest_date prepopulate",t.debounce(this.prepopulate,0),this),this.model.earliestDateInput.on("validated:invalid",this.disableApply,this),this.model.earliestDateInput.on("validated:valid",this.enableApply,this),this.model.earliestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{}),this.model.workingRange.trigger("serverValidated",!0,this.model.workingRange,[])},this),this.model.latestDateInput.on("validated:invalid",this.disableApply,this),this.model.latestDateInput.on("validated:valid",this.enableApply,this),this.model.latestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{}),this.model.workingRange.trigger("serverValidated",!0,this.model.workingRange,[])},this)},prepopulate:function(){var e=this.model.range.get("earliest_date"),t=this.model.range.get("latest_date");!this.model.range.hasNoEarliest()&&e&&this.model.earliestDateInput.setFromJSDate(e,{validate:!0});if(t){var n=new Date(t.getTime());n.getHours()==0&&n.setDate(n.getDate()-1,{validate:!0}),this.model.latestDateInput.setFromJSDate(n,{validate:!0})}},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}this.model.earliestDateInput.setHoursMinSecFromStr("00:00:00.000",{silent:!0,validate:!0}),this.model.latestDateInput.setHoursMinSecFromStr("24:00:00.000",{silent:!0,validate:!0});var n=this,r=this.model.earliestDateInput.isoWithoutTZ(),i=this.model.latestDateInput.isoWithoutTZ();this.disableApply(),this.model.workingRange.save({earliest:r,latest:i},{success:function(e){n.enableApply(),n.model.range.set({earliest:e.get("earliest_epoch"),latest:e.get("latest_epoch"),earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},generateLabel:function(){var e=this.model.earliestDateInput.jsDate(),t=this.model.latestDateInput.jsDate();return t.setDate(t.getDate()-1),e.toDateString().slice(4,-5)+" - "+t.toDateString().slice(4,-5)},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var n=t.template(this.template,{_:t,cid:this.cid});return this.$el.html(n),this.$(".flash_messages").append(this.children.flashMessages.render().el),e(this.children.earliestTimeInput.render().el).prependTo(this.$(".earliest-date")),e(this.children.latestTimeInput.render().el).prependTo(this.$(".latest")),this},template:'                <tr><td class="flash_messages" colspan="4"></td></tr>                <tr>                    <td class="earliest-date"><span class="help-block"><%- _("00:00:00").t() %></span></td>                    <td><label class="control-label"><%- _("and").t() %></label></td>                    <td class="latest"><span class="help-block"><%- _("24:00:00").t() %></span></td>                    <td><button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button></td>                </tr>            '})}),define("views/shared/timerangepicker/dialog/daterange/BeforeDate",["jquery","underscore","backbone","module","models/DateInput","models/TimeRange","views/Base","views/shared/controls/DateControl","views/shared/FlashMessages"],function(e,t,n,r,i,s,o,u,a){return o.extend({tagName:"tbody",moduleId:r.id,initialize:function(){o.prototype.initialize.call(this,arguments),this.model={range:this.model,workingRange:new s,latestDateInput:new i},this.today=new Date,this.today.setHours(0,0,0,0),this.model.latestDateInput.setFromJSDate(this.today,{silent:!0}),this.children.latestTimeInput=new u({model:this.model.latestDateInput,validate:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,latestDateInput:this.model.latestDateInput}}),this.model.range.on("change:latest_date prepopulate",t.debounce(this.prepopulate,0),this),this.model.latestDateInput.on("validated:invalid",this.disableApply,this),this.model.latestDateInput.on("validated:valid",this.enableApply,this),this.model.latestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{}),this.model.workingRange.trigger("serverValidated",!0,this.model.workingRange,[])},this)},prepopulate:function(){var e=this.model.range.get("latest_date");e&&(this.model.latestDateInput.setFromJSDate(e,{validate:!0}),this.model.latestDateInput.setHoursMinSecFromStr("00:00:00.000",{silent:!0}))},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}this.model.latestDateInput.setHoursMinSecFromStr("00:00:00.000",{silent:!0,validate:!0});var n=this,r=this.model.latestDateInput.isoWithoutTZ();this.disableApply(),this.model.workingRange.save({earliest:"",latest:r},{success:function(e){n.enableApply(),n.model.range.set({earliest:"",latest:e.get("latest_epoch"),earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(0),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{_:t,cid:this.cid});return this.$el.html(e),this.$(".flash_messages").append(this.children.flashMessages.render().el),this.$(".latest_time").prepend(this.children.latestTimeInput.render().el),this},template:'                <tr>                <td class="flash_messages"></td>                <td class="latest_time"><span class="help-block"><%- _("00:00:00").t() %></span></td>                <td><button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button></td>                </tr>            '})}),define("views/shared/timerangepicker/dialog/daterange/AfterDate",["jquery","underscore","backbone","module","models/DateInput","models/TimeRange","views/Base","views/shared/controls/DateControl","views/shared/FlashMessages"],function(e,t,n,r,i,s,o,u,a){return o.extend({tagName:"tbody",moduleId:r.id,initialize:function(){o.prototype.initialize.call(this,arguments),this.model={range:this.model,workingRange:new s,earliestDateInput:new i},this.yesterday=new Date,this.yesterday.setDate(this.yesterday.getDate()-1),this.yesterday.setHours(0,0,0,0),this.model.earliestDateInput.setFromJSDate(this.yesterday,{silent:!0}),this.children.earliestTimeInput=new u({model:this.model.earliestDateInput,validate:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestDateInput:this.model.earliestDateInput}}),this.model.range.on("change:earliest_date prepopulate",t.debounce(this.prepopulate,0),this),this.model.earliestDateInput.on("validated:invalid",this.disableApply,this),this.model.earliestDateInput.on("validated:valid",this.enableApply,this),this.model.earliestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{}),this.model.workingRange.trigger("serverValidated",!0,this.model.workingRange,[])},this)},prepopulate:function(){var e=this.model.range.get("earliest_date");e&&!this.model.range.hasNoEarliest()&&(this.model.earliestDateInput.setFromJSDate(e,{validate:!0}),this.model.earliestDateInput.setHoursMinSecFromStr("00:00:00.000",{silent:!0}))},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}var n=this,r=this.model.earliestDateInput.isoWithoutTZ();this.disableApply(),this.model.workingRange.save({earliest:r,latest:"now"},{success:function(e){n.enableApply(),n.model.range.set({earliest:e.get("earliest_epoch"),latest:"now",earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{_:t,cid:this.cid});return this.$el.html(e),this.$(".flash_messages").append(this.children.flashMessages.render().el),this.$(".earliest_time").prepend(this.children.earliestTimeInput.render().el),this},template:'                <tr>                <td class="earliest_time"><span class="help-block"><%- _("00:00:00").t() %></span></td>                <td><button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button></td>                </tr>            '})}),define("views/shared/timerangepicker/dialog/daterange/Master",["jquery","underscore","backbone","module","views/Base","views/shared/controls/SyntheticSelectControl","views/shared/timerangepicker/dialog/daterange/BetweenDates","views/shared/timerangepicker/dialog/daterange/BeforeDate","views/shared/timerangepicker/dialog/daterange/AfterDate","views/shared/FlashMessages"],function(e,t,n,r,i,s,o,u,a,f){return i.extend({className:"accordion-inner",moduleId:r.id,initialize:function(e){i.prototype.initialize.call(this,arguments),this.label=t("Date Range").t(),this.children.rangeTypeSelect=new s({model:this.model,items:[{value:"between_dates",label:t("Between").t()},{value:"before_date",label:t("Before").t()},{value:"after_date",label:t("Since").t()}],modelAttribute:"range_type",className:"timerangepicker-range-type",toggleClassName:"btn",menuWidth:"narrow",popdownOptions:{attachDialogTo:"body"},save:!1});var n={model:this.model,parentCid:this.cid};this.children.betweenDates=new o(n),this.children.beforeDate=new u(n),this.children.afterDate=new a(n),this.model.on("change:range_type",function(){var e=this.model.get("range_type")||"";this.children.betweenDates.$el.hide(),this.children.beforeDate.$el.hide(),this.children.afterDate.$el.hide();switch(e){case"before_date":this.children.beforeDate.$el.show();break;case"after_date":this.children.afterDate.$el.show();break;default:this.children.betweenDates.$el.show()}},this),this.model.on("change:earliest change:latest prepopulate",t.debounce(this.prepopulate,0),this)},prepopulate:function(){var e=this.model.isAbsolute("earliest"),t=this.model.hasNoEarliest(),n=this.model.isAbsolute("latest");!t&&e&&n?this.model.set("range_type","between_dates"):t&&n?this.model.set("range_type","before_date"):e&&this.model.latestIsNow()&&this.model.set("range_type","after_date")},supportsRange:function(){var e=!1,t=!1,n=this.model.hasNoEarliest(),r=this.model.latestIsNow(),i=this.model.isWholeDay("earliest"),s=this.model.isWholeDay("latest");return n&&r?!1:i&&s||i&&r||n&&s},render:function(){this.$el.append(this.children.rangeTypeSelect.render().el);var e=t.template(this.template,{cid:this.cid});return this.$el.append(e),this.$(".date-range-container").append(this.children.betweenDates.render().el),this.$(".date-range-container").append(this.children.beforeDate.render().el),this.children.beforeDate.$el.hide(),this.$(".date-range-container").append(this.children.afterDate.render().el),this.children.afterDate.$el.hide(),this},template:'                    <table class="form form-inline date-range-container">                    </table>                '})}),define("views/shared/timerangepicker/dialog/dateandtimerange/timeinput/HoursMinutesSeconds",["jquery","underscore","backbone","module","views/Base"],function(e,t,n,r,i){return i.extend({tagName:"div",className:"view-time-range-picker-time-and-date-range-hours-minutes-seconds pull-left",moduleId:r.id,initialize:function(){i.prototype.initialize.call(this,arguments),this.model.on("attributeValidated:second",function(e,t,n){e?this.$("input").removeClass("error"):this.$("input").addClass("error")},this),this.model.on("change",this.updateTime,this)},events:{'keyup input[type="text"]':function(){this.model.off("change",this.updateTime,this),this.model.setHoursMinSecFromStr(this.$("input").val(),{validate:!0}),this.model.on("change",this.updateTime,this)}},updateTime:function(){var e=this.model.time();this.$("input").val(e).removeClass("error")},render:function(){var e=this.model.time(),n=t.template(this.template,{time:e});return this.$el.html(n),this},template:'            <input type="text" size="10" value="<%- time %>"/>            <span class="help-block"><%- _("HH:MM:SS.SSS").t() %></span>            '})}),define("views/shared/timerangepicker/dialog/dateandtimerange/timeinput/Master",["jquery","underscore","backbone","module","views/Base","views/shared/controls/DateControl","views/shared/timerangepicker/dialog/dateandtimerange/timeinput/HoursMinutesSeconds"],function(e,t,n,r,i,s,o){return i.extend({tagName:"table",className:"form form-inline pull-left",moduleId:r.id,initialize:function(){i.prototype.initialize.call(this,arguments),this.children.monthDayYear=new s({parentCid:this.cid,model:this.model.dateTime,className:"control pull-left",inputClassName:this.options.inputClassName||"date",validate:!0}),this.children.hoursMinutesSeconds=new o({model:this.model.dateTime})},render:function(){if(!this.el.innerHTML){var e=t.template(this.template,{_:t,cid:this.cid,label:this.options.label});this.$el.html(e),this.$("td").last().append(this.children.monthDayYear.render().el),this.$("td").last().append(this.children.hoursMinutesSeconds.render().el)}else this.children.monthDayYear.render(),this.children.hoursMinutesSeconds.render();return this},template:'                <tbody>                    <tr>                        <td>                            <label class="control-label" for="monthdayyear_<%- cid %>"><%- label %><%- _(":").t() %></label>                        </td>                        <td>                        </td>                    </tr>                </tbody>            '})}),define("views/shared/timerangepicker/dialog/dateandtimerange/Master",["jquery","underscore","backbone","module","models/DateInput","models/TimeRange","views/Base","views/shared/timerangepicker/dialog/dateandtimerange/timeinput/Master","views/shared/FlashMessages","util/time_utils"],function(e,t,n,r,i,s,o,u,a,f){return o.extend({className:"accordion-inner",moduleId:r.id,initialize:function(){o.prototype.initialize.call(this,arguments),this.model={range:this.model,workingRange:new s,earliestDateInput:new i,latestDateInput:new i},this.label=t("Date & Time Range").t(),this.earliest_errored=!1,this.latest_errored=!1,this.today=new Date,this.today.setHours(12,0,0,0),this.model.latestDateInput.setFromJSDate(this.today,{silent:!0}),this.yesterday=new Date,this.yesterday.setDate(this.yesterday.getDate()-1),this.yesterday.setHours(12,0,0,0),this.model.earliestDateInput.setFromJSDate(this.yesterday,{silent:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestDateInput:this.model.earliestDateInput,latestDateInput:this.model.latestDateInput}}),this.children.earliestTimeInput=new u({label:t("Earliest").t(),inputClassName:"date-earliest",model:{dateTime:this.model.earliestDateInput}}),this.children.latestTimeInput=new u({label:t("Latest").t(),inputClassName:"date-latest",model:{dateTime:this.model.latestDateInput}}),this.model.workingRange.on("sync error",this.enableApply,this),this.model.earliestDateInput.on("validated:invalid",function(){this.earliest_errored=!0,this.disableApply()},this),this.model.earliestDateInput.on("validated:valid",function(){this.earliest_errored=!1,this.enableApply()},this),this.model.latestDateInput.on("validated:invalid",function(){this.latest_errored=!0,this.disableApply()},this),this.model.latestDateInput.on("validated:valid",function(){this.latest_errored=!1,this.enableApply()},this),this.model.earliestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{})},this),this.model.latestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{})},this),this.model.range.on("change:earliest_iso change:latest_iso prepopulate",t.debounce(this.prepopulate,0),this)},remove:function(){o.prototype.remove.apply(this,arguments),this.model.workingRange.deepOff(),this.model.workingRange.fetchAbort()},prepopulate:function(){var e=this.model.range.get("earliest_iso"),t=this.model.range.get("latest_iso"),n=this.model.range.get("earliest_date"),r=this.model.range.get("latest_date");n&&this.model.earliestDateInput.setFromJSDate(n,{validate:!0}),r&&this.model.latestDateInput.setFromJSDate(r,{validate:!0})},supportsRange:function(){return f.generateDateTimeRangeLabel(this.model.range.get("earliest"),this.model.range.get("latest"))},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}if(!this.earliest_errored&&!this.latest_errored){var n=this,r=this.model.earliestDateInput.isoWithoutTZ(),i=this.model.latestDateInput.isoWithoutTZ();this.disableApply(),this.model.workingRange.save({earliest:r,latest:i},{success:function(e){n.enableApply(),n.model.range.set({earliest:e.get("earliest_epoch"),latest:e.get("latest_epoch"),earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}})}t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{_:t,cid:this.cid});return this.$el.html(e),this.children.flashMessages.render().$el.insertBefore(this.$(".apply")),this.children.earliestTimeInput.render().$el.insertBefore(this.$(".apply")),this.children.latestTimeInput.render().$el.insertBefore(this.$(".apply")),this},template:'                    <button class="apply btn pull-left" id="apply_<%- cid %>"><%- _("Apply").t() %></button>                '})}),define("views/shared/timerangepicker/dialog/advanced/timeinput/Hint",["jquery","underscore","backbone","module","views/Base","util/time_utils","splunk.i18n"],function(e,t,n,r,i,s,o){return i.extend({moduleId:r.id,initialize:function(){i.prototype.initialize.call(this,arguments),this.model.timeParser.on("error sync",this.render,this)},render:function(){var e=this.model.timeParser.error.get("messages"),n=s.isoToDateObject(this.model.timeParser.get("value")),r=e||isNaN(n.getTime()),i=t.template(this.template,{_:t,timeParser:this.model.timeParser,error:r,value:r||o.format_datetime_microseconds(s.jsDateToSplunkDateTimeWithMicroseconds(n),"short","full")});return this.$el.html(i),this},template:'            <% if (error) { %>                <%- _("Invalid time").t() %>            <% } else if (timeParser.get("value")) { %>                <%- value %>            <% } %>            '})}),define("views/shared/timerangepicker/dialog/advanced/timeinput/Master",["jquery","underscore","backbone","module","views/Base","views/shared/timerangepicker/dialog/advanced/timeinput/Hint","util/time_utils"],function(e,t,n,r,i,s,o){return i.extend({tagName:"table",className:"form form-inline pull-left",moduleId:r.id,initialize:function(){i.prototype.initialize.call(this,arguments),this.children.hint=new s({model:{timeParser:this.model.timeParser}}),this.model.working.on("change:"+this.options.modelAttribute,function(){this.update_value(),this.update_hint()},this)},events:{'keyup input[type="text"]':"update_hint",'focusout input[type="text"]':"update_hint"},update_hint:function(e){var t=o.stripRTSafe(this.$("input").val()||this.options.blankValue,this.options.isLatest)||"now";this.model.timeParser.fetch({data:{time:t}})},update_value:function(){var e=this.model.working.get(this.options.modelAttribute)||"";e!==this.options.blankValue&&this.$("input").val(e)},render:function(){var e=t.template(this.template,{_:t,cid:this.cid,label:this.options.label,time:this.model.working.get(this.options.modelAttribute)||""});return this.$el.html(e),this.$("#hint_"+this.cid).html(this.children.hint.render().el),this.update_hint(),this},template:'                <tbody>                    <tr>                        <td>                            <label class="control-label" for="<%- cid %>"><%- label %><%- _(":").t() %></label>                        </td>                        <td>                            <input type="text" size="20" value="<%- time %>" id="<%- cid %>"/>                            <span id="hint_<%- cid %>" class="help-block help-block-timestamp"></span>                        </td>                    </tr>                </tbody>            '})}),define("views/shared/timerangepicker/dialog/advanced/Master",["jquery","underscore","backbone","module","views/Base","models/services/search/TimeParser","models/TimeRange","views/shared/timerangepicker/dialog/advanced/timeinput/Master","views/shared/FlashMessages","uri/route","util/console","util/time_utils"],function(e,t,n,r,i,s,o,u,a,f,l,c){return i.extend({moduleId:r.id,className:"accordion-inner",initialize:function(){i.prototype.initialize.call(this,arguments),this.label=t("Advanced").t();var n=e.extend(!0,{enableRealTime:this.options.enableCustomAdvancedRealTime},this.model.timeRange.toJSON());this.model={appLocal:this.model.appLocal,application:this.model.application,range:this.model.timeRange,workingRange:new o(n),earliestTimeParser:new s({key:c.stripRTSafe(this.model.timeRange.get("earliest"),!1),value:this.model.timeRange.get("earliest_iso")}),latestTimeParser:new s({key:c.stripRTSafe(this.model.timeRange.get("latest"),!0),value:this.model.timeRange.get("latest_iso")})},this.children.earliestTimeInput=new u({model:{working:this.model.workingRange,timeParser:this.model.earliestTimeParser},label:t("Earliest").t(),blankValue:"0",modelAttribute:"earliest",isLatest:!1}),this.children.latestTimeInput=new u({model:{working:this.model.workingRange,timeParser:this.model.latestTimeParser},label:t("Latest").t(),blankValue:"",modelAttribute:"latest",isLatest:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestTimeParser:this.model.earliestTimeParser,latestTimeParser:this.model.latestTimeParser}}),this.model.range.on("change:earliest change:latest prepopulate",t.debounce(function(){this.model.workingRange.set({earliest:this.model.range.get("earliest"),latest:this.model.range.get("latest")})},0),this),this.model.workingRange.on("validated",function(e,t,n){e||this.enableApply()},this)},remove:function(){i.prototype.remove.apply(this,arguments),t.chain(this.model).omit(["appLocal","application","range"]).each(function(e){e.deepOff(),e.fetchAbort()})},supportsRange:function(){return!0},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}var n=this,r=this.children.earliestTimeInput.$("input").val()||"0",i=this.children.latestTimeInput.$("input").val()||"";this.disableApply(),this.model.workingRange.save({earliest:r,latest:i},{success:function(e){n.enableApply();var t=e.get("latest_date"),r=t?Date(t.getTime()):t;n.model.range.set({earliest:e.get("earliest"),latest:e.get("latest"),earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:r}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e="http://docs.splunk.com/";this.model.appLocal&&this.model.application?e=f.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.timerange.picker"):l.warn("The timerangepicker advanced view needs the AppLocal and Application model passed to it");var n=t.template(this.template,{_:t,cid:this.cid,docRoute:e});return this.$el.html(n),this.children.flashMessages.render().$el.insertBefore(this.$(".apply")),this.children.earliestTimeInput.render().$el.insertBefore(this.$(".apply")),this.children.latestTimeInput.render().$el.insertBefore(this.$(".apply")),this},template:'                    <button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button>                    <a href="<%- docRoute %>" target="_blank" title="<%- _("Splunk help").t() %>" class="btn-documentation" style="line-height:22px;"><%- _("Documentation").t() %> <i class="icon-external"></i></a>            '})}),define("views/shared/delegates/Accordion",["jquery","underscore","views/shared/delegates/Base"],function(e,t,n){return n.extend({initialize:function(){var e={group:".accordion-group",toggle:".accordion-toggle",body:".accordion-body",defaultGroup:".accordion-group:first-child",icon:".icon-accordion-toggle",inactiveIconClass:"icon-triangle-right-small",activeIconClass:"icon-triangle-down-small",activeClass:"active",speed:300};t.defaults(this.options,e),this.$(this.options.body).hide(),this.$(this.options.icon).addClass(this.options.inactiveIconClass),this.show(this.$(this.options.defaultGroup),!1)},events:{"click .accordion-toggle":"toggle"},toggle:function(t){t.preventDefault();var n=e(t.currentTarget).closest(this.options.group);if(n.hasClass(this.options.activeClass))return;this.trigger("toggle"),this.show(n,!0),this.trigger("toggled")},show:function(t,n){var r=this,i=e(t),s=this.$(this.options.group+"."+this.options.activeClass),o=function(){r.trigger("shown")},u=function(){r.trigger("hidden")};this.trigger("show"),this.trigger("hide"),s.removeClass(this.options.activeClass),i.addClass(this.options.activeClass),s.find(this.options.icon).addClass(this.options.inactiveIconClass).removeClass(this.options.activeIconClass),i.find(this.options.icon).addClass(this.options.activeIconClass).removeClass(this.options.inactiveIconClass),n?(s.find(this.options.body).slideUp({duration:this.options.speed,queue:!1,complete:u}),i.find(this.options.body).slideDown({duration:this.options.speed,queue:!1,complete:o})):(s.find(this.options.body).hide({duration:0,queue:!1,complete:u}),i.find(this.options.body).show({duration:0,queue:!1,complete:o}))}})}),define("views/shared/timerangepicker/dialog/Master",["jquery","underscore","backbone","module","models/services/authentication/User","views/Base","views/shared/timerangepicker/dialog/Presets","views/shared/timerangepicker/dialog/Relative","views/shared/timerangepicker/dialog/RealTime","views/shared/timerangepicker/dialog/daterange/Master","views/shared/timerangepicker/dialog/dateandtimerange/Master","views/shared/timerangepicker/dialog/advanced/Master","views/shared/delegates/Accordion"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){return s.extend({moduleId:r.id,className:"accordion view-new-time-range-picker-dialog",initialize:function(){this.model.user=this.model.user||new i;var n=this.model.user.canRTSearch(),r={showPresets:!0,showPresetsRealTime:n,showPresetsRealTimeOnly:!1,showPresetsRelative:!0,showPresetsAllTime:!0,showCustom:!0,showCustomRealTime:n,showCustomRelative:!0,showCustomDate:!0,showCustomDateTime:!0,showCustomAdvanced:!0,enableCustomAdvancedRealTime:n};t.defaults(this.options,r),s.prototype.initialize.call(this,arguments),this.renderedDfd=e.Deferred(),this.options.showPresets&&this.collection&&(this.children.presets=new o({collection:this.collection,model:this.model.timeRange,showRealTime:this.options.showPresetsRealTime,showRealTimeOnly:this.options.showPresetsRealTimeOnly,showRelative:this.options.showPresetsRelative,showAllTime:this.options.showPresetsAllTime})),this.options.showCustom&&(this.options.showCustomRelative&&(this.children.relative=new u({model:this.model.timeRange})),this.options.showCustomRealTime&&(this.children.realtime=new a({model:this.model.timeRange})),this.options.showCustomDate&&(this.children.daterange=new f({model:this.model.timeRange})),this.options.showCustomDateTime&&(this.children.dateandtimerange=new l({model:this.model.timeRange})),this.options.showCustomAdvanced&&(this.children.advanced=new c({model:{timeRange:this.model.timeRange,appLocal:this.model.appLocal,application:this.model.application},enableCustomAdvancedRealTime:this.options.enableCustomAdvancedRealTime}))),this.model.timeRange.on("change:earliest_epoch change:latest_epoch",t.debounce(this.onChange,0),this),this.collection.on("reset",this.onChange,this)},onChange:function(){e.when(this.renderedDfd).then(function(){return this.$el.is(":visible")?!1:this.children.accordion.show(this.getBestGroup(),!1)}.bind(this))},getBestGroup:function(){var e=!1;return t.each(this.children,function(t,n){if(e)return!1;e=t.supportsRange()?t:e},this),e=e||this.children.presets||this.children.advanced||this.children.daterange||this.children.dateandtimerange||this.children.relative||this.children.realtime,e.$el.closest(".accordion-group")},render:function(){var e=t.template(this.template,{cid:this.cid,panels:this.children});return this.$el.html(e),t.each(this.children,function(e,t){this.$("#"+t+"_"+this.cid+" .accordion-body").append(e.render().el)},this),this.children.accordion=new h({el:this.el,defaultGroup:this.getBestGroup()}),this.renderedDfd.resolve(),this},onShown:function(){this.$(".accordion-group.active a.accordion-toggle").focus()},template:'                <% _.each(panels, function(panel, key) { %>                 <div class="accordion-group" id="<%- key + "_" + cid %>">                    <div class="accordion-heading">                      <a class="accordion-toggle" href="#">                        <i class="icon-accordion-toggle"></i><%- panel.label %>                      </a>                    </div>                    <div class="accordion-body">                    </div>                </div>                <% }); %>             '})}),define("views/shared/reportcontrols/dialogs/schedule_dialog/step1/Master",["underscore","module","views/Base","views/shared/Modal","views/shared/delegates/ModalTimerangePicker","views/shared/reportcontrols/dialogs/schedule_dialog/step1/Schedule","views/shared/timerangepicker/dialog/Master","views/shared/FlashMessages"],function(e,t,n,r,i,s,o,u){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments),this.children.flashMessage=new u({model:this.model.cron}),this.children.scheduleView=new s({model:{application:this.model.application,inmem:this.model.inmem,cron:this.model.cron,timeRange:this.model.timeRange,user:this.model.user,appLocal:this.model.appLocal},collection:this.collection}),this.children.timeRangePickerView=new o({model:{timeRange:this.model.timeRange,user:this.model.user,appLocal:this.model.appLocal,application:this.model.application},collection:this.collection,showPresetsRealTime:!1,showCustomRealTime:!1,showCustomDate:!1,showCustomDateTime:!1,showPresetsAllTime:!0,enableCustomAdvancedRealTime:!1}),this.model.timeRange.on("applied",function(){this.timeRangeDelegate.closeTimeRangePicker()},this),this.model.inmem.on("togglePrimaryButton",this.togglePrimaryButton,this)},events:{"click .modal-btn-primary":function(e){this.model.inmem.get("scheduled_and_enabled")?this.model.inmem.trigger("next"):(this.model.inmem.entry.content.set("is_scheduled",0),this.model.inmem.save({},{success:function(e,t){this.model.inmem.trigger("saveSuccessNotScheduled")}.bind(this)})),e.preventDefault()}},togglePrimaryButton:function(){this.model.inmem.get("scheduled_and_enabled")?this.$(".modal-btn-primary").html(e("Next").t()):this.$(".modal-btn-primary").html(e("Save").t())},render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Edit Schedule").t()),this.$(r.BODY_SELECTOR).remove(),this.$(r.FOOTER_SELECTOR).before('<div class="vis-area"><div class="slide-area"><div class="content-wrapper schedule-wrapper"><div class="'+r.BODY_CLASS+'" >'+"</div>"+"</div>"+'<div class="timerange-picker-wrapper">'+"</div>"+"</div>"+"</div>"),this.$visArea=this.$(".vis-area").eq(0),this.$slideArea=this.$(".slide-area").eq(0),this.$scheduleWrapper=this.$(".schedule-wrapper").eq(0),this.$timeRangePickerWrapper=this.$(".timerange-picker-wrapper").eq(0),this.$modalParent=$(".schedule-modal").eq(0),this.$(r.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(r.BODY_SELECTOR).append(this.children.scheduleView.render().el),this.$timeRangePickerWrapper.append(this.children.timeRangePickerView.render().el),this.timeRangeDelegate=new i({el:this.el,$visArea:this.$visArea,$slideArea:this.$slideArea,$contentWrapper:this.$scheduleWrapper,$timeRangePickerWrapper:this.$timeRangePickerWrapper,$modalParent:this.$modalParent,$timeRangePicker:this.children.timeRangePickerView.$el,activateSelector:"a.timerange-control",backButtonSelector:"a.btn.back"}),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+e("Save").t()+"</a>"),this.$(r.FOOTER_SELECTOR).append('<a href="#" class="btn back modal-btn-back pull-left">'+e("Back").t()+"</a>"),this.$(".btn.back").hide(),this.togglePrimaryButton(),this}})}),define("views/shared/reportcontrols/dialogs/schedule_dialog/Step2",["underscore","module","views/Base","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/FlashMessages","splunk.util","uri/route","util/console","util/pdf_utils"],function(e,t,n,r,i,s,o,u,a,f){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments),this.deferredPdfAvailable=f.isPdfServiceAvailable(),this.children.flashMessage=new s({model:this.model.inmem});var t="http://docs.splunk.com/";this.model.appLocal&&this.model.application?t=u.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.alert.email"):a.warn("The schedule dialog step 2 view needs the AppLocal and Application model passed to it"),this.children.sendEmailBox=new i({controlType:"SyntheticCheckbox",controlOptions:{modelAttribute:"action.email",model:this.model.inmem.entry.content},label:e("Send Email").t(),help:o.sprintf(e("Email must be configured in System&nbsp;Settings > Alert&nbsp;Email&nbsp;Settings. %s").t(),' <a href="'+t+'" target="_blank">'+e("Learn More").t()+' <i class="icon-external"></i></a>')}),this.children.emailSubject=new i({controlType:"Text",controlOptions:{modelAttribute:"action.email.subject",model:this.model.inmem.entry.content,placeholder:e("Splunk Alert: $name$").t()},label:e("Subject").t()}),this.children.emailAddresses=new i({controlType:"Textarea",controlOptions:{modelAttribute:"action.email.to",model:this.model.inmem.entry.content},label:e("Email Addresses").t(),help:e("Comma separated list.").t()}),$.when(this.deferredPdfAvailable).then(function(t){var n=[{label:e("None").t(),value:"none"},{label:e("Inline").t(),value:"inline"},{label:e("CSV").t(),value:"csv"}];t&&n.push({label:e("PDF").t(),value:"pdf"}),this.children.emailResultsFormat=new i({controlType:"SyntheticRadio",controlOptions:{modelAttribute:"ui_include_results",model:this.model.inmem,items:n,elastic:!0},label:e("Include results").t()})}.bind(this)),this.children.runScriptBox=new i({controlType:"SyntheticCheckbox",controlOptions:{modelAttribute:"action.script",model:this.model.inmem.entry.content},label:e("Run a Script").t()}),this.children.scriptFilename=new i({controlType:"Text",controlOptions:{modelAttribute:"action.script.filename",model:this.model.inmem.entry.content},label:e("Filename").t(),help:e("Located in $SPLUNK_HOME/bin/scripts").t()}),this.model.inmem.entry.content.on("change:action.email",this.toggleEmail,this),this.model.inmem.entry.content.on("change:action.script",this.toggleScript,this)},events:{"click .btn-primary":function(e){var t=[];this.model.inmem.entry.content.get("action.email")&&t.push("email"),this.model.inmem.entry.content.get("action.script")&&t.push("script"),this.model.inmem.entry.content.set("actions",t.join(", ")),this.model.inmem.trigger("saveSchedule"),e.preventDefault()},"click .back":function(e){this.model.inmem.entry.content.trigger("back"),e.preventDefault()}},toggleEmail:function(){this.model.inmem.entry.content.get("action.email")?(this.children.emailSubject.$el.show(),this.children.emailAddresses.$el.show(),this.children.emailResultsFormat.$el.show()):(this.children.emailSubject.$el.hide(),this.children.emailAddresses.$el.hide(),this.children.emailResultsFormat.$el.hide())},toggleScript:function(){this.model.inmem.entry.content.get("action.script")?this.children.scriptFilename.$el.show():this.children.scriptFilename.$el.hide()},render:function(){$.when(this.deferredPdfAvailable).then(function(){this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Edit Schedule").t()),this.$(r.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL_JUSTIFIED);if(this.model.user.isFree()){var t=u.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.license.features");this.children.sendEmailBox.disable(),this.children.runScriptBox.disable(),this.$(r.BODY_FORM_SELECTOR).append(this.compiledTemplate({_:e,splunkUtil:o,link:' <a href="'+t+'" target="_blank">'+e("Learn More").t()+' <i class="icon-external"></i></a>'}))}return this.$(r.BODY_FORM_SELECTOR).append('<p class="control-heading">'+e("Enable Actions").t()+"</p>"),this.$(r.BODY_FORM_SELECTOR).append(this.children.sendEmailBox.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.emailSubject.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.emailAddresses.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.emailResultsFormat.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.runScriptBox.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.scriptFilename.render().el),this.$(r.FOOTER_SELECTOR).append('<a href="#" class="btn back pull-left">'+e("Back").t()+"</a>"),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_SAVE),this.toggleEmail(),this.toggleScript(),this}.bind(this))},template:'                <div class="alert alert-info">                    <i class="icon-alert"></i>                    <%= splunkUtil.sprintf(_("Scheduling Actions is an Enterprise-level feature. It is not available with Splunk Free. %s").t(), link) %>                </div>            '})}),define("views/shared/reportcontrols/dialogs/schedule_dialog/Master",["underscore","backbone","models/Cron","models/TimeRange","collections/services/data/ui/Times","views/shared/Modal","module","views/shared/reportcontrols/dialogs/schedule_dialog/step1/Master","views/shared/reportcontrols/dialogs/schedule_dialog/Step2"],function(e,t,n,r,i,s,o,u,a){return s.extend({moduleId:o.id,initialize:function(){s.prototype.initialize.apply(this,arguments),this.model={application:this.model.application,report:this.model.report,user:this.model.user,appLocal:this.model.appLocal,timeRange:new r({enableRealTime:!1}),inmem:this.model.report.clone(),cron:n.createFromCronString(this.model.report.entry.content.get("cron_schedule")||"0 6 * * 1")},this.collection=new i,this.collectionDeferred=this.collection.fetch({data:{app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),this.model.inmem.set({ui_include_results:"none",scheduled_and_enabled:!this.model.inmem.entry.content.get("disabled")&&this.model.inmem.entry.content.get("is_scheduled")}),this.transposeToUI(),this.children.step1=new u({model:{state:this.model.inmem.entry.content,application:this.model.application,inmem:this.model.inmem,cron:this.model.cron,timeRange:this.model.timeRange,user:this.model.user,appLocal:this.model.appLocal},collection:this.collection}),this.children.step2=new a({model:{inmem:this.model.inmem,application:this.model.application,user:this.model.user,appLocal:this.model.appLocal}}),this.model.inmem.on("next",function(){this.model.cron.validate()},this),this.model.inmem.entry.content.on("back",function(){this.children.step2.$el.hide(),this.children.step1.$el.show()},this),this.model.cron.on("validated",function(e,t,n){e&&(this.children.step1.$el.hide(),this.children.step2.$el.show())},this),this.model.inmem.on("saveSuccessNotScheduled",function(){this.model.report.entry.content.set("is_scheduled",0),this.hide()},this),this.model.inmem.on("saveSchedule",function(){this.trasposeFromUI(),this.model.inmem.entry.content.set("cron_schedule",this.model.cron.getCronString()),this.model.inmem.save({},{success:function(e,t){this.model.report.fetch(),this.hide()}.bind(this)})},this)},transposeToUI:function(){var e="none";this.model.inmem.entry.content.get("action.email.sendresults")&&(this.model.inmem.entry.content.get("action.email.inline")?e="inline":e=this.model.inmem.entry.content.get("action.email.format")),this.model.inmem.set("ui_include_results",e)},trasposeFromUI:function(){var e=this.model.inmem.get("ui_include_results");e==="none"?this.model.inmem.entry.content.set("action.email.sendresults",0):this.model.inmem.entry.content.set({"action.email.sendresults":1,"action.email.format":e==="inline"?"":e,"action.email.sendpdf":e==="pdf"?1:0,"action.email.inline":e==="inline"?1:0}),this.model.inmem.get("scheduled_and_enabled")&&this.model.inmem.entry.content.set({is_scheduled:1,disabled:0})},render:function(){this.$el.addClass("schedule-modal");var e=this.model.timeRange.save({earliest:this.model.inmem.entry.content.get("dispatch.earliest_time"),latest:this.model.inmem.entry.content.get("dispatch.latest_time")});$.when(e,this.collectionDeferred).then(function(){this.$el.append(this.children.step1.render().el),this.$el.append(this.children.step2.render().el),this.children.step2.$el.hide()}.bind(this))}})}),define("views/shared/reportcontrols/details/EditSchedule",["underscore","backbone","module","views/Base","views/shared/reportcontrols/dialogs/schedule_dialog/Master"],function(e,t,n,r,i){return r.extend({moduleId:n.id,tagName:"span",initialize:function(){r.prototype.initialize.apply(this,arguments)},events:{"click a.edit-schedule":function(e){this.children.scheduleDialog=new i({model:{report:this.model.report,application:this.model.application,user:this.model.user,appLocal:this.model.appLocal},onHiddenRemove:!0}),$("body").append(this.children.scheduleDialog.render().el),this.children.scheduleDialog.show(),e.preventDefault()}},render:function(){return this.$el.html(this.compiledTemplate({_:e})),this},template:'                <a class="edit-schedule" href="#"><%- _("Edit").t() %></a>            '})}),define("views/shared/reportcontrols/details/Acceleration",["underscore","module","views/Base","splunk.util"],function(e,t,n,r){return n.extend({moduleId:t.id,tagName:"span",initialize:function(){n.prototype.initialize.apply(this,arguments);var t=e.debounce(this.render,0);this.model.entry.content.on("change:auto_summarize change:auto_summarize.dispatch.earliest_time",t,this)},render:function(){return this.$el.html(this.compiledTemplate({model:this.model,_:e,splunkUtil:r})),this},convertSummarizeTime:function(t){switch(t){case"-1d@h":return e("1 Day").t();case"-7d@d":return e("1 Week").t();case"-1mon@d":return e("1 Month").t();case"-3mon@d":return e("3 Months").t();case"-1y@d":return e("1 Year").t();case"0":return e("All Time").t();default:return e("Custom").t()}},template:'                <% if (model.entry.content.get("auto_summarize")) { %>                    <%- splunkUtil.sprintf(_("Enabled. Summary Range: %s.").t(), this.convertSummarizeTime(model.entry.content.get("auto_summarize.dispatch.earliest_time"))) %>                <% } else { %>                    <%- _("Disabled.").t() %>                <% } %>            '})}),define("views/shared/reportcontrols/dialogs/AccelerationDialog",["underscore","backbone","module","models/services/search/IntentionsParser","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/FlashMessages","splunk.util"],function(e,t,n,r,i,s,o,u){return i.extend({moduleId:n.id,initialize:function(t){i.prototype.initialize.apply(this,arguments),this.model={searchJob:this.model.searchJob,report:this.model.report,inmem:this.model.report.clone(),application:this.model.application},this.model.searchJob||(this.model.intentionsParser=new r,this.intentionsParserDeferred=this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),timeline:!1,app:this.model.application.get("app"),owner:this.model.application.get("owner")}})),this.children.flashMessage=new o({model:this.model.inmem}),this.children.name=new s({controlType:"Label",controlOptions:{modelAttribute:"name",model:this.model.inmem.entry},label:e("Report").t()}),this.children.acceleration=new s({controlType:"SyntheticCheckbox",controlOptions:{modelAttribute:"auto_summarize",model:this.model.inmem.entry.content},label:u.sprintf(e("Accelerate %s").t(),this.model.report.isAlert()?e("Alert").t():e("Report").t()),help:e("Acceleration may increase storage and processing costs.").t()}),this.children.summary_range=new s({controlType:"SyntheticSelect",controlOptions:{modelAttribute:"auto_summarize.dispatch.earliest_time",model:this.model.inmem.entry.content,items:[{label:e("1 Day").t(),value:"-1d@h"},{label:e("7 Days").t(),value:"-7d@d"},{label:e("1 Month").t(),value:"-1mon@d"},{label:e("3 Months").t(),value:"-3mon@d"},{label:e("1 Year").t(),value:"-1y@d"},{label:e("All Time").t(),value:"0"}],save:!1,toggleClassName:"btn",labelPosition:"outside",elastic:!0,popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},label:e("Summary Range").t(),tooltip:e("Sets the range of time (relative to now) for which data is accelerated. Example: 1 Month accelerates the last 30 days of data in your reports.").t()}),this.model.inmem.entry.content.on("change:auto_summarize",function(){this.model.inmem.entry.content.get("auto_summarize")?(this.children.summary_range.$el.show(),this.model.inmem.entry.content.get("auto_summarize.dispatch.earliest_time")===""&&this.model.inmem.entry.content.set("auto_summarize.dispatch.earliest_time","-1d@h")):this.children.summary_range.$el.hide()},this),this.on("hidden",function(){this.model.inmem.get("updated")>this.model.report.get("updated")&&this.model.report.entry.content.set({auto_summarize:this.model.inmem.entry.content.get("auto_summarize"),"auto_summarize.dispatch.earliest_time":this.model.inmem.entry.content.get("auto_summarize.dispatch.earliest_time")})},this)},events:$.extend({},i.prototype.events,{"click .save.modal-btn-primary":function(e){this.model.inmem.save({},{success:function(e,t){this.model.report.fetch(),this.remove()}.bind(this)}),e.preventDefault()}}),render:function(){return this.$el.html(i.TEMPLATE),this.$(i.HEADER_TITLE_SELECTOR).html(e("Edit Acceleration").t()),this.$(i.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(i.BODY_SELECTOR).append(i.FORM_HORIZONTAL),$.when(this.intentionsParserDeferred).then(function(){var t=this.model.searchJob&&this.model.searchJob.canSummarize()||this.model.intentionsParser&&this.model.intentionsParser.get("canSummarize");t?(this.model.inmem.setAccelerationWarning(t),this.$(i.BODY_FORM_SELECTOR).append(this.children.name.render().el),this.$(i.BODY_FORM_SELECTOR).append(this.children.acceleration.render().el),this.$(i.BODY_FORM_SELECTOR).append(this.children.summary_range.render().el),this.model.inmem.entry.content.get("auto_summarize")?this.children.summary_range.$el.show():this.children.summary_range.$el.hide(),this.$(i.FOOTER_SELECTOR).append(i.BUTTON_CANCEL),this.$(i.FOOTER_SELECTOR).append('<a href="#" class="save btn btn-primary modal-btn-primary pull-right">'+e("Save").t()+"</a>")):(this.$(i.BODY_FORM_SELECTOR).append("<div>"+e("This report cannot be accelerated.").t()+"</div>"),this.$(i.FOOTER_SELECTOR).append(i.BUTTON_DONE))}.bind(this)),this}})}),define("views/shared/reportcontrols/details/EditAcceleration",["underscore","backbone","module","views/Base","views/shared/reportcontrols/dialogs/AccelerationDialog"],function(e,t,n,r,i){return r.extend({moduleId:n.id,tagName:"span",initialize:function(){r.prototype.initialize.apply(this,arguments)},events:{"click a.edit-acceleration":function(e){this.children.accelerationDialog=new i({model:{report:this.model.report,searchJob:this.model.searchJob,application:this.model.application},onHiddenRemove:!0}),$("body").append(this.children.accelerationDialog.render().el),this.children.accelerationDialog.show(),e.preventDefault()}},render:function(){return this.$el.html(this.compiledTemplate({_:e})),this},template:'                <a class="edit-acceleration" href="#"><%- _("Edit").t() %></a>            '})}),define("views/shared/documentcontrols/details/Permissions",["underscore","module","views/Base","util/splunkd_utils","splunk.util"],function(e,t,n,r,i){return n.extend({moduleId:t.id,tagName:"span",initialize:function(){n.prototype.initialize.apply(this,arguments);var t=e.debounce(this.render,0);this.model.entry.acl.on("change:sharing change:owner",t,this)},render:function(){var e=this.model.entry.acl.get("sharing"),t=this.model.entry.acl.get("owner"),n=r.getPermissionLabel(e,t);return this.$el.html(this.compiledTemplate({permissionString:n})),this},template:"               <%- permissionString %>            "})}),define("views/shared/documentcontrols/dialogs/permissions_dialog/ACL",["underscore","jquery","backbone","module","views/Base","views/shared/controls/SyntheticCheckboxControl"],function(e,t,n,r,i,s){return i.extend({moduleId:r.id,className:"push-margins",initialize:function(){i.prototype.initialize.apply(this,arguments),this.children.read=new i,this.children.write=new i,this.model.perms.on("change:Everyone.read",function(){this.toggleEveryone("read")},this),this.model.perms.on("change:Everyone.write",function(){this.toggleEveryone("write")},this)},appendRow:function(t){var n=t!=="Everyone"?"role":"";this.$("tbody").append('<tr class="'+t+'">                    <td class="role-name">'+e.escape(this.model.perms.get(t+".name"))+'</td>                    <td class="perms-read '+t+'-checkbox"></td>                    <td class="perms-write '+t+'-checkbox"></td>                </tr>'),this.children.readCheckbox=new s({modelAttribute:t+".read",model:this.model.perms,checkboxClassName:n+" read btn"}),this.children.writeCheckbox=new s({modelAttribute:t+".write",model:this.model.perms,checkboxClassName:n+" write btn"}),this.$("td.perms-read."+t+"-checkbox").append(this.children.readCheckbox.render().el),this.$("td.perms-write."+t+"-checkbox").append(this.children.writeCheckbox.render().el),this.children.read.children[t]=this.children.readCheckbox,this.children.write.children[t]=this.children.writeCheckbox},toggleEveryone:function(t){var n=this.model.perms.get("Everyone."+t),r=this.children[t];e.each(r.children,function(e,t){t!=="Everyone"&&(n?e.disable():e.enable())})},render:function(){return this.$el.html(this.compiledTemplate({_:e})),e(this.model.perms.toJSON()).each(function(e,t){var n=t.split("."),r=n[0],i=n[1];i==="name"&&this.appendRow(r)}.bind(this)),this.toggleEveryone("read"),this.toggleEveryone("write"),this},template:'            <table class="table table-striped table-condensed table-scroll table-border-row">                <thead>                    <tr>                        <td></td>                        <th class="perms-read"><%- _("Read").t() %></th>                        <th class="perms-write"><%- _("Write").t() %></th>                    </tr>                </thead>                <tbody>                </tbody>            </table>        '})}),define("views/shared/documentcontrols/dialogs/permissions_dialog/Master",["jquery","underscore","backbone","module","models/Base","models/ACLReadOnly","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/documentcontrols/dialogs/permissions_dialog/ACL","views/shared/FlashMessages","util/splunkd_utils"],function(e,t,n,r,i,s,o,u,a,f,l){return o.extend({moduleId:r.id,initialize:function(n){o.prototype.initialize.apply(this,arguments),this.model.perms=new i,this.model.inmem=new s(e.extend(!0,{},this.model.document.entry.acl.toJSON()));var r={nameLabel:t("Name").t(),nameKey:"name"};t.defaults(this.options,r),this.translateToPermsModel(),this.children.flashMessage=new f({model:{inmem:this.model.inmem,report:this.model.document,reportAcl:this.model.document.acl}}),this.children.name=new u({controlType:"Label",controlOptions:{modelAttribute:this.options.nameKey,model:this.model.nameModel},label:this.options.nameLabel}),this.children.owner=new u({controlType:"Label",controlOptions:{modelAttribute:"owner",model:this.model.inmem},label:t("Owner").t()}),this.children.app=new u({controlType:"Label",controlOptions:{modelAttribute:"app",model:this.model.inmem},label:t("App").t()}),this.children.display_for=new u({controlType:"SyntheticRadio",controlClass:"controls-thirdblock",controlOptions:{modelAttribute:"sharing",model:this.model.inmem,items:[{label:t("Owner").t(),value:l.USER,className:"user"},{label:t("App").t(),value:l.APP,className:"app"},{label:t("All Apps").t(),value:l.GLOBAL,className:"global"}],save:!1},label:t("Display For").t()}),this.children.acl=new a({model:{perms:this.model.perms},collection:this.collection}),this.model.inmem.on("change:sharing",function(){this.model.inmem.get("sharing")===l.USER?this.children.acl.$el.hide():this.children.acl.$el.show()},this)},events:e.extend({},o.prototype.events,{"click .btn-primary":function(e){this.translateFromPermsModel();var t=this.model.inmem.toDataPayload();this.model.document.acl.save({},{data:t,success:function(e,n){this.hide(),this.model.document.fetch({url:l.fullpath(this.model.document.url+"/"+encodeURIComponent(this.model.document.entry.get("name")),{sharing:t.sharing,app:this.model.inmem.get("app"),owner:t.owner}),success:function(){this.model.document.trigger("updateCollection")}.bind(this)})}.bind(this)}),e.preventDefault()}}),translateToPermsModel:function(){var e=this.model.inmem.permsToObj();this.model.perms.set("Everyone.name",t("Everyone").t()),this.model.perms.set("Everyone.read",t.indexOf(e.read,"*")!=-1),this.model.perms.set("Everyone.write",t.indexOf(e.write,"*")!=-1),this.collection.each(function(n,r){var i=n.entry.get("name"),s=r+1;this.model.perms.set("role_"+s+".name",i),this.model.perms.set("role_"+s+".read",t.indexOf(e.read,i)!=-1),this.model.perms.set("role_"+s+".write",t.indexOf(e.write,i)!=-1)},this)},translateFromPermsModel:function(){var e={read:[],write:[]};t(this.model.perms.toJSON()).each(function(t,n){var r=n.split("."),i=r[0],s=r[1];(s==="read"||s==="write")&&t&&(i==="Everyone"?e[s].push("*"):e[s].push(this.model.perms.get(i+".name")))}.bind(this)),this.model.inmem.set("perms",e)},setView:function(){this.model.inmem.get("can_share_user")||this.children.display_for.$(".user").attr("disabled",!0),this.model.inmem.get("can_share_app")||this.children.display_for.$(".app").attr("disabled",!0),this.model.inmem.get("can_share_global")||this.children.display_for.$(".global").attr("disabled",!0),this.model.inmem.get("modifiable")||this.children.display_for.$(".btn").attr("disabled",!0),this.model.inmem.get("sharing")==="user"?this.children.acl.$el.hide():this.children.acl.$el.show()},render:function(){return this.$el.html(o.TEMPLATE),this.$(o.HEADER_TITLE_SELECTOR).html(t("Edit Permissions").t()),this.$(o.BODY_SELECTOR).addClass("modal-body-scrolling"),this.$(o.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(o.BODY_SELECTOR).append(o.FORM_HORIZONTAL),this.$(o.BODY_FORM_SELECTOR).append(this.children.name.render().el),this.$(o.BODY_FORM_SELECTOR).append(this.children.owner.render().el),this.$(o.BODY_FORM_SELECTOR).append(this.children.app.render().el),this.$(o.BODY_FORM_SELECTOR).append(this.children.display_for.render().el),this.model.user.isFree()||this.$(o.BODY_FORM_SELECTOR).append(this.children.acl.render().el),this.$(o.FOOTER_SELECTOR).append(o.BUTTON_CANCEL),this.$(o.FOOTER_SELECTOR).append(o.BUTTON_SAVE),this.setView(),this}})}),define("views/shared/reportcontrols/details/EditPermissions",["underscore","backbone","module","views/Base","views/shared/documentcontrols/dialogs/permissions_dialog/Master"],function(e,t,n,r,i){return r.extend({moduleId:n.id,tagName:"span",initialize:function(){r.prototype.initialize.apply(this,arguments)},events:{"click a.edit-permissions":function(t){this.children.permissionsDialog=new i({model:{document:this.model.report,nameModel:this.model.report.entry,user:this.model.user},collection:this.collection,onHiddenRemove:!0,nameLabel:e("Report").t()}),$("body").append(this.children.permissionsDialog.render().el),this.children.permissionsDialog.show(),t.preventDefault()}},render:function(){return this.$el.html(this.compiledTemplate({_:e})),this},template:'                <a class="edit-permissions" href="#"><%- _("Edit").t() %></a>            '})}),define("views/shared/reportcontrols/details/Master",["underscore","jquery","views/Base","module","views/shared/reportcontrols/details/History","views/shared/reportcontrols/details/Creator","views/shared/documentcontrols/details/App","views/shared/reportcontrols/details/Schedule","views/shared/reportcontrols/details/EditSchedule","views/shared/reportcontrols/details/Acceleration","views/shared/reportcontrols/details/EditAcceleration","views/shared/documentcontrols/details/Permissions","views/shared/reportcontrols/details/EditPermissions","bootstrap.modal"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){return n.extend({moduleId:r.id,initialize:function(){n.prototype.initialize.apply(this,arguments),this.children.creatorView=new s({model:{report:this.model.report,application:this.model.application}}),this.children.appView=new o({model:this.model.report}),this.children.scheduleView=new u({model:this.model.report}),this.children.editScheduleView=new a({model:{report:this.model.report,application:this.model.application,user:this.model.user,appLocal:this.model.appLocal}}),this.children.accelerationView=new f({model:this.model.report}),this.children.editAccelerationView=new l({model:{report:this.model.report,searchJob:this.model.searchJob,application:this.model.application}}),this.children.permissionsView=new c({model:this.model.report}),this.children.editPermissionsView=new h({model:{report:this.model.report,user:this.model.user},collection:this.collection}),this.model.searchJob&&this.model.searchJob.on("prepared",function(){this.$("a.edit-acceleration").css("display","")},this)},render:function(){var t=this.model.report.entry.acl.get("can_write")&&(!this.model.report.entry.content.get("is_scheduled")||!!this.model.user.canScheduleSearch());return this.$el.html(this.compiledTemplate({_:e})),this.$("dd.creator").append(this.children.creatorView.render().el),this.$("dd.app").append(this.children.appView.render().el),this.$("dd.schedule").append(this.children.scheduleView.render().el),this.$("dd.acceleration").append(this.children.accelerationView.render().el),this.$("dd.permissions").append(this.children.permissionsView.render().el),t&&(this.model.user.canScheduleSearch()&&(this.model.report.isRealTime()||this.$("dd.schedule").append(this.children.editScheduleView.render().el),this.$("dd.acceleration").append(this.children.editAccelerationView.render().el)),this.model.report.entry.acl.get("can_change_perms")&&this.$("dd.permissions").append(this.children.editPermissionsView.render().el)),this.model.searchJob&&this.model.searchJob.isPreparing()&&this.$("a.edit-acceleration").css("display","none"),this.model.report.isPivotReport()&&(this.$("dt.acceleration").remove(),this.$("dd.acceleration").remove()),this},template:'            <dl class="list-dotted">                <!--TODO when these attributes exist-->                <!--<dt class="history"><%- _("History").t() %></dt>                    <dd class="history"></dd>-->                <dt class="creator"><%- _("Creator").t() %></dt>                    <dd class="creator"></dd>                <dt class="app"><%- _("App").t() %></dt>                    <dd class="app"></dd>                <dt class="schedule"><%- _("Schedule").t() %></dt>                    <dd class="schedule"></dd>                <dt class="acceleration"><%- _("Acceleration").t() %></dt>                    <dd class="acceleration"></dd>                <dt class="permissions"><%- _("Permissions").t() %></dt>                    <dd class="permissions"></dd>            </dl>        '})}),define("views/dashboards/panelcontrols/titledialog/Modal",["underscore","jquery","backbone","module","views/shared/controls/ControlGroup","views/shared/Modal","views/shared/FlashMessages"],function(e,t,n,r,i,s,o){return s.extend({moduleId:r.id,initialize:function(){s.prototype.initialize.apply(this,arguments);var t="display.general.title";this.model.workingReport=new n.Model,this.model.workingReport.set(t,this.model.report.entry.content.get(t,{tokens:!0})),this.children.flashMessages=new o({model:this.model.dashboard}),this.on("hide",this.model.dashboard.error.clear,this.model.dashboard.error),this.children.panelTitleControlGroup=new i({label:e("Title").t(),controlType:"Text",controlClass:"controls-block",controlOptions:{model:this.model.workingReport,modelAttribute:t,placeholder:"optional"}}),this.listenTo(this.model.report,"successfulSave",this.hide,this)},events:t.extend({},s.prototype.events,{"click .modal-btn-primary":"onSave"}),onSave:function(e){var t=this.model.workingReport.get("display.general.title");e.preventDefault(),this.model.report.trigger("saveTitle",t)},render:function(){this.$el.html(s.TEMPLATE),this.$(s.HEADER_TITLE_SELECTOR).html(e("Edit Title").t()),this.$(s.BODY_SELECTOR).prepend(this.children.flashMessages.render().el),this.$(s.BODY_SELECTOR).append(s.FORM_HORIZONTAL),this.$(s.BODY_FORM_SELECTOR).append(this.children.panelTitleControlGroup.render().el),this.$(s.FOOTER_SELECTOR).append(s.BUTTON_CANCEL),this.$(s.FOOTER_SELECTOR).append(s.BUTTON_SAVE)}})}),define("views/dashboards/PanelTimeRangePicker",["require","exports","module","underscore","views/Base","views/shared/controls/ControlGroup","util/console","uri/route","util/time_utils","splunkjs/mvc/tokenutils","bootstrap.tooltip"],function(e,t,n){var r=e("underscore"),i=e("views/Base"),s=e("views/shared/controls/ControlGroup"),o=e("util/console"),u=e("uri/route"),a=e("util/time_utils"),f=e("splunkjs/mvc/tokenutils");return e("bootstrap.tooltip"),i.extend({moduleId:t.id,initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.timeRange.on("applied",function(){this.updateReportTime(),this.updateTime()},this);var e=f.hasToken(this.model.report.get("dispatch.earliest_time")),t=e?"dashboard":"search";this.model.timeRange.set({useTimeFrom:t}),this.model.state.get("default_timerange")?this.children.timeScope=new s({label:r("Time Range Scope").t(),controlType:"SyntheticRadio",controlOptions:{className:"btn-group btn-group-2 time-range-scope-select",items:[{value:"dashboard",label:r("Dashboard").t(),tooltip:r("Use the time range set by the dashboard time range picker.").t()},{value:"search",label:r("Search").t(),tooltip:r("Override the dashboard time range picker by setting a time range for this Search.").t()}],model:this.model.timeRange,modelAttribute:"useTimeFrom",elastic:!0}}):this.model.timeRange.set("useTimeFrom","search"),this.listenTo(this.model.timeRange,"change:useTimeFrom",this.updateTokens,this)},updateReportTime:function(){this.model.report.set({"dispatch.earliest_time":this.model.timeRange.get("earliest"),"dispatch.latest_time":this.model.timeRange.get("latest")},{tokens:!0})},updateTokens:function(){this.toggleTimeRangePicker(),this.updateTime()},toggleTimeRangePicker:function(){this.model.timeRange.get("useTimeFrom")=="dashboard"?this.$(".timerange").hide():this.$(".timerange").show()},updateTime:function(){var e=this.model.timeRange.generateLabel(this.collection);this.$el.find("span.time-label").text(e)},render:function(){return this.children.timeScope&&this.children.timeScope.render().appendTo(this.el),this.$el.append('<div class="timerange" style="display: block;"><label class="control-label">'+r("Time Range").t()+"</label></div>"),this.$("div.timerange").append('<div class="controls"><a href="#" class="btn timerange-control"><span class="time-label"></span><span class="icon-triangle-right-small"></span></a></div>'),this.toggleTimeRangePicker(),this.updateTime(),this}})}),define("views/dashboards/panelcontrols/querydialog/Modal",["underscore","jquery","backbone","module","views/shared/controls/ControlGroup","views/shared/delegates/ModalTimerangePicker","views/shared/timerangepicker/dialog/Master","views/shared/Modal","models/TimeRange","collections/services/data/ui/Times","splunk.util","splunkjs/mvc/utils","views/Base","uri/route","splunkjs/mvc/simplexml/controller","util/time_utils","bootstrap.tooltip","util/console","splunkjs/mvc","views/shared/FlashMessages","views/dashboards/PanelTimeRangePicker","splunkjs/mvc/tokenawaremodel"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){function S(e,t){return t?[e.replace(/[\|\s]$/g,""),t.replace(/^[\|\s]/g,"")].join(" | "):e}return u.extend({moduleId:r.id,className:"modal edit-search-string",initialize:function(){u.prototype.initialize.apply(this,arguments),this.model.workingReport=new E(e.pick(this.model.report.entry.content.toJSON({tokens:!0}),["search","dispatch.earliest_time","dispatch.latest_time"]),{applyTokensByDefault:!0,retrieveTokensByDefault:!0}),this.children.title=new i({label:e("Title").t(),controlType:"Label",controlClass:"controls-block",controlOptions:{model:this.model.report.entry.content,modelAttribute:"display.general.title"}}),this.children.searchStringInput=new i({label:e("Search String").t(),controlType:"Textarea",controlClass:"controls-block",controlOptions:{model:this.model.workingReport,modelAttribute:"search"}}),this.model.report.isPivotReport()?this.children.searchStringInput.options.help='<a href="#" class="run-pivot">'+e("Run Pivot").t()+' <i class="icon-external"></i></a>':this.children.searchStringInput.options.help='<a href="#" class="run-search">'+e("Run Search").t()+' <i class="icon-external"></i></a>',this.collection=this.collection||{},this.collection.times=new f,this.collection.times.fetch({data:{app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),this.model.timeRange=new a,this.children.timeRangePickerView=new o({model:{state:this.model.workingReport,timeRange:this.model.timeRange,application:this.model.application,user:this.model.user,appLocal:this.model.appLocal},collection:this.collection.times}),this.model.timeRange.on("applied",function(){this.timeRangeDelegate.closeTimeRangePicker()},this),this.children.panelTimeRangePicker=new w({model:{timeRange:this.model.timeRange,report:this.model.workingReport,state:this.model.state},collection:this.collection.times}),this.children.flashMessages=new b({model:this.model.dashboard}),this.on("hide",this.model.dashboard.error.clear,this.model.dashboard.error),this.listenTo(this.model.report,"successfulSave",this.hide,this)},events:t.extend({},u.prototype.events,{"click .modal-btn-primary":function(e){e.preventDefault(),this.model.timeRange.get("useTimeFrom")=="dashboard"?this.model.workingReport.set({"dispatch.earliest_time":"$earliest$","dispatch.latest_time":"$latest$"},{tokens:!0}):this.model.workingReport.set({"dispatch.earliest_time":this.model.timeRange.get("earliest")||"0","dispatch.latest_time":this.model.timeRange.get("latest")||"now"});var t=this.model.workingReport.toJSON();g.log("Applying attributes to report model: %o",t),this.model.report.trigger("updateSearchString",t)},"click a.run-search":function(e){e.preventDefault();var t=this.model.workingReport.get("search",{tokens:!1}),n=this.model.report.entry.content;if(n.get("display.general.search.type")==="postprocess"){var r=y.Components.get(n.get("display.general.managerid")).parent.query.resolve();t=S(r,t)}if(!t)return;var i={q:t};this.model.workingReport.has("dispatch.earliest_time")&&(i.earliest=this.model.workingReport.get("dispatch.earliest_time",{tokens:!1}||"0"),i.latest=this.model.workingReport.get("dispatch.latest_time",{tokens:!1})||"now");var s=c.getPageInfo(),o=p.search(s.root,s.locale,s.app,{data:i});c.redirect(o,!0)},"click a.run-pivot":function(e){e.preventDefault();var t=this.model.workingReport.get("search",{tokens:!1}),n={q:t};if(!t)return;this.model.workingReport.has("dispatch.earliest_time")&&(n.earliest=this.model.workingReport.get("dispatch.earliest_time",{tokens:!1}),n.latest=this.model.workingReport.get("dispatch.latest_time",{tokens:!1}));var r=c.getPageInfo(),i=p.pivot(r.root,r.locale,r.app,{data:n});c.redirect(i,!0)}}),handleSubmitButtonState:function(e){this.$(u.FOOTER_SELECTOR).find(".btn-primary")[e.get("elementCreateType")==="pivot"?"addClass":"removeClass"]("disabled")},render:function(){this.$el.html(u.TEMPLATE),this.$(u.HEADER_TITLE_SELECTOR).html(e("Edit Search").t()),this.$(u.BODY_SELECTOR).remove(),this.$(u.FOOTER_SELECTOR).before('<div class="vis-area"><div class="slide-area"><div class="content-wrapper query-dialog-wrapper"><div class="'+u.BODY_CLASS+'" >'+"</div>"+"</div>"+'<div class="timerange-picker-wrapper">'+"</div>"+"</div>"+"</div>"),this.$visArea=this.$(".vis-area").eq(0),this.$slideArea=this.$(".slide-area").eq(0),this.$editSearchContent=this.$(".query-dialog-wrapper").eq(0),this.$timeRangePickerWrapper=this.$(".timerange-picker-wrapper").eq(0),this.$modalParent=this.$el,this.$(u.BODY_SELECTOR).prepend(this.children.flashMessages.render().el),this.$(u.BODY_SELECTOR).append(u.FORM_HORIZONTAL_JUSTIFIED),this.children.title.render().appendTo(this.$(u.BODY_FORM_SELECTOR)),this.children.searchStringInput.render().appendTo(this.$(u.BODY_FORM_SELECTOR));var t=this.model.timeRange.save({earliest:this.model.workingReport.get("dispatch.earliest_time",{tokens:!1}||"0"),latest:this.model.workingReport.get("dispatch.latest_time",{tokens:!1}||"now")});return t.done(e.bind(function(){this.$(u.BODY_FORM_SELECTOR).append(this.children.panelTimeRangePicker.render().el)},this)),this.$timeRangePickerWrapper.append(this.children.timeRangePickerView.render().el),this.timeRangeDelegate=new s({el:this.el,$visArea:this.$visArea,$slideArea:this.$slideArea,$contentWrapper:this.$editSearchContent,$timeRangePickerWrapper:this.$timeRangePickerWrapper,$modalParent:this.$modalParent,$timeRangePicker:this.children.timeRangePickerView.$el,activateSelector:"a.timerange-control",backButtonSelector:"a.btn.back"}),this.$(u.FOOTER_SELECTOR).append(u.BUTTON_CANCEL),this.$(u.FOOTER_SELECTOR).append(u.BUTTON_SAVE),this.$(u.FOOTER_SELECTOR).append('<a href="#" class="btn back modal-btn-back pull-left">'+e("Back").t()+"</a>"),this.$(".btn.back").hide(),this}})}),define("views/dashboards/panelcontrols/ReportDialog",["jquery","underscore","backbone","module","views/shared/controls/ControlGroup","views/shared/Modal","views/shared/FlashMessages","splunk.util","uri/route","collections/Reports","splunkjs/mvc/utils","splunk.config"],function(e,t,n,r,i,s,o,u,a,f,l,c){return s.extend({moduleId:r.id,initialize:function(){s.prototype.initialize.apply(this,arguments),this.model.workingReport=new n.Model,this.model.workingReport.set({title:""}),this.model.workingReport.set("id",this.model.report.get("id")),this.children.flashMessage=new o({model:this.model.dashboard}),this.on("hide",this.model.dashboard.error.clear,this.model.dashboard.error),this.listenTo(this.model.report,"successfulManagerChange",this.hide,this),this.controller=this.options.controller,this.controller.reportsCollection||this.controller.fetchCollection(),this.controller.reportsCollection.initialFetchDfd.done(t.bind(function(){this.ready=!0;var e=this.controller.reportsCollection.map(function(e){return{label:e.entry.get("name"),value:e.id}}),n=a.reports(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"));this.controller.reportsCollection.length===this.controller.reportsCollection.REPORTS_LIMIT?this.children.reportsControlGroup=new i({label:t("Select Report").t(),controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{model:this.model.workingReport,modelAttribute:"id",items:e,toggleClassName:"btn",popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},help:t("This does not contain all reports. Add a report that is not listed from ").t()+u.sprintf("<a href=%s>%s</a>.",n,t("Reports").t())}):this.children.reportsControlGroup=new i({label:t("Select Report").t(),controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{model:this.model.workingReport,modelAttribute:"id",items:e,toggleClassName:"btn",popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}})},this)),this.children.panelTitleControlGroup=new i({label:t("Panel Title").t(),controlType:"Text",controlClass:"controls-block",controlOptions:{model:this.model.workingReport,modelAttribute:"title",placeholder:"optional"}})},events:e.extend({},s.prototype.events,{"click .modal-btn-primary":"onSave"}),onSave:function(e){e.preventDefault(),this.model.report.trigger("updateReportID",this.model.workingReport.get("id"),this.model.workingReport.get("title"))},render:function(){this.$el.html(s.TEMPLATE),this.$(s.HEADER_TITLE_SELECTOR).html(t("Select a New Report").t()),this.$(s.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(s.BODY_SELECTOR).append(s.FORM_HORIZONTAL),this.$(s.BODY_FORM_SELECTOR).append(s.LOADING_HORIZONTAL),this.$(s.LOADING_SELECTOR).html(t("Loading...").t()),this.controller.reportsCollection.initialFetchDfd.done(t.bind(function(){this.$(s.LOADING_SELECTOR).remove(),this.$(s.BODY_FORM_SELECTOR).append(this.children.reportsControlGroup.render().el),this.$(s.BODY_FORM_SELECTOR).append(this.children.panelTitleControlGroup.render().el)},this)),this.$(s.FOOTER_SELECTOR).append(s.BUTTON_CANCEL),this.$(s.FOOTER_SELECTOR).append(s.BUTTON_SAVE)}})}),define("views/dashboards/panelcontrols/CreateReportDialog",["jquery","underscore","backbone","module","views/shared/controls/ControlGroup","views/shared/Modal","views/shared/FlashMessages"],function(e,t,n,r,i,s,o){return s.extend({moduleId:r.id,initialize:function(){s.prototype.initialize.apply(this,arguments),this.model.workingReport=new n.Model({name:this.model.report.entry.content.get("display.general.title")}),this.children.flashMessagesReport=new o({model:this.model.report}),this.children.flashMessagesDashboard=new o({model:this.model.dashboard}),this.on("hide",this.model.report.error.clear,this.model.report.error),this.on("hide",this.model.dashboard.error.clear,this.model.dashboard.error),this.children.reportNameControlGroup=new i({label:t("Report Title").t(),controlType:"Text",controlClass:"controls-block",controlOptions:{model:this.model.workingReport,modelAttribute:"name"}}),this.children.reportDescriptionControlGroup=new i({label:t("Description").t(),controlType:"Textarea",controlClass:"controls-block",controlOptions:{model:this.model.workingReport,modelAttribute:"description",placeholder:"optional"}}),this.listenTo(this.model.report,"successfulReportSave",this.hide,this)},events:e.extend({},s.prototype.events,{"click .modal-btn-primary":"onSave"}),onSave:function(e){e.preventDefault(),this.model.report.trigger("saveAsReport",this.model.workingReport.get("name"),this.model.workingReport.get("description"))},render:function(){this.$el.html(s.TEMPLATE),this.$(s.HEADER_TITLE_SELECTOR).html(t("Convert to Report").t()),this.$(s.BODY_SELECTOR).prepend(this.children.flashMessagesDashboard.render().el),this.$(s.BODY_SELECTOR).prepend(this.children.flashMessagesReport.render().el),this.$(s.BODY_SELECTOR).append(s.FORM_HORIZONTAL),this.$(s.BODY_FORM_SELECTOR).append(this.children.reportNameControlGroup.render().el),this.$(s.BODY_FORM_SELECTOR).append(this.children.reportDescriptionControlGroup.render().el),this.$(s.FOOTER_SELECTOR).append(s.BUTTON_CANCEL),this.$(s.FOOTER_SELECTOR).append(s.BUTTON_SAVE)}})}),define("views/ValidatingView",["jquery","backbone","underscore","views/Base","util/general_utils"],function(e,t,n,r,i){return r.extend({modelToControlGroupMap:{},dispose:function(){var e=r.prototype.dispose.call(this,arguments);return this.tearDownValidation(),e},setupValidation:function(e,r){if(n.isUndefined(e))throw"The model or collection you passed into views/Base.setupValidation is undefined";e instanceof t.Model?this._setupModelValidationListener(e):e instanceof t.Collection&&(e.each(function(e){this._setupModelValidationListener(e)}),e.on("add",function(e){this._setupModelValidationListener(e)},this),e.on("remove",function(e){e.off("validated",this._modelValidatedHandler,this)},this)),this.__flashMessagesHelper__=r,this.__flashMessagesHelper__.register(this)},tearDownValidation:function(){this.__flashMessagesHelper__&&this.__flashMessagesHelper__.unregister(this)},_setupModelValidationListener:function(e){e.on("validated",this._modelValidatedHandler,this)},_modelValidatedHandler:function(e,t,r){var s=[];if(this.modelToControlGroupMap){var o=i.invert(this.modelToControlGroupMap);o=n.reduce(n.keys(o||{}),function(e,t){return e[t]=void 0,e},{}),n(r).each(function(e,t){r[t]={message:e,label:""}}),n(r).each(function(e,t){var r=this.modelToControlGroupMap[t],i=e.message,s,u="";n.isUndefined(r)?s=i.replace(/\{(label)\}/g,t):(this.children[r].options.label&&(u=this.children[r].options.label),s=i.replace(/\{(label)\}/g,u||t),o[r]=s),e.message=s,e.label=u},this),n(o).each(function(e,t){n.isUndefined(e)?this.children[t].error(!1,""):this.children[t].error(!0,e)},this)}else n(r).each(function(e,t){e.message=e.message.replace(/\{(label)\}/g,t)});this.trigger("validated",e,t,r,this)}})}),define("views/shared/dialogs/DialogBase",["jquery","underscore","backbone","views/ValidatingView","module","bootstrap.transition","bootstrap.modal"],function(e,t,n,r,i){var s=13,o='input[type="text"], input[type="password"], textarea';return r.extend({moduleId:i.id,className:"modal fade",attributes:{tabIndex:-1},settings:undefined,bodyClassName:"modal-body-scrolling",initialize:function(e){r.prototype.initialize.call(this,e),e=e||{},this.$el.modal({show:!1,keyboard:!0}),t.isUndefined(e.bodyClassName)||(this.bodyClassName=e.bodyClassName),this.settings=new n.Model,this.settings.set("footerTemplate",this._footerTemplate),this.settings.set("headerTemplate",this._headerTemplate),this.settings.on("change:primaryButtonLabel change:cancelButtonLabel change:titleLabel",this.debouncedRender,this),this.$el.on("click.dialog",".btn-dialog-primary",t.bind(function(e){e.preventDefault(),this.primaryButtonClicked()},this)),this.$el.on("click.dialog",".btn-dialog-cancel",t.bind(function(e){e.preventDefault(),this.cancelButtonClicked()},this)),this.$el.on("click.dialog",".btn-dialog-close",t.bind(function(e){e.preventDefault(),this.closeButtonClicked()},this)),this.$el.on("keypress",t.bind(function(e){e.which===s&&this.submitKeyPressed(e)},this)),this.$el.on("shown",t.bind(function(e){if(e.target!==e.currentTarget)return;this.dialogShown()},this)),this.$el.on("hide",t.bind(function(e){if(e.target!==e.currentTarget)return;this.cleanup()},this)),this.$el.on("hidden",t.bind(function(e){if(e.target!==e.currentTarget)return;this.trigger("hidden")},this))},render:function(){this.$(".modal-header").detach(),this.$(".modal-body").detach(),this.$(".modal-footer").detach();var e=this.compiledTemplate({bodyClassName:this.bodyClassName,showFooter:this.shouldRenderFooter()});return this.$el.html(e),this.renderHeader(this.$(".modal-header")),this.renderBody(this.$(".modal-body")),this.shouldRenderFooter()&&this.renderFooter(this.$(".modal-footer")),this},hide:function(){this.$el.modal("hide")},show:function(){this.$el.modal("show")},primaryButtonClicked:function(){this.trigger("click:primaryButton",this)},cancelButtonClicked:function(){this.trigger("click:cancelButton",this)},closeButtonClicked:function(){this.trigger("click:closeButton",this)},submitKeyPressed:function(t){var n=e(t.target);n.is(o)&&(n.blur(),this.primaryButtonClicked())},dialogShown:function(){this.trigger("show"),t.debounce(function(){this.$("input:text:enabled:visible:first").focus()}.bind(this),0)();return},cleanup:function(){this.trigger("hide");return},shouldRenderFooter:function(){return this.settings.has("primaryButtonLabel")||this.settings.has("cancelButtonLabel")},renderBody:function(e){},renderHeader:function(e){e.html(this.settings.get("headerTemplate")),e.find(".text-dialog-title").html(this.settings.get("titleLabel"))},renderFooter:function(e){e.html(this.settings.get("footerTemplate"));var t=e.find(".btn-dialog-primary.label_from_data");this.settings.has("primaryButtonLabel")?(t.html(this.settings.get("primaryButtonLabel")),t.show()):(t.html(""),t.hide());var n=e.find(".btn-dialog-cancel.label_from_data");this.settings.has("cancelButtonLabel")?(n.html(this.settings.get("cancelButtonLabel")),n.show()):(n.html(""),n.hide())},template:'                <div class="modal-header"></div>                <div class="modal-body <%- bodyClassName %>"></div>                <% if (showFooter) { %>                    <div class="modal-footer"></div>                <% } %>            ',_footerTemplate:'                <a href="#" class="btn btn-dialog-cancel label_from_data pull-left" data-dismiss="modal"></a>                <a href="#" class="btn btn-primary btn-dialog-primary label_from_data pull-right"></a>            ',_headerTemplate:'                <button type="button" class="close btn-dialog-close" data-dismiss="modal">x</button>                <h3 class="text-dialog-title"></h3>            '})}),define("views/shared/dialogs/TextDialog",["jquery","underscore","views/shared/dialogs/DialogBase","module","views/shared/FlashMessages"],function(e,t,n,r,i){return n.extend({moduleId:r.id,_text:"",initialize:function(e){n.prototype.initialize.call(this,e),this.settings.set("primaryButtonLabel",t("Ok").t()),this.settings.set("cancelButtonLabel",t("Cancel").t()),this.options.flashModel&&(this.children.flashMessages=new i({model:this.options.flashModel}),this.on("hide",this.options.flashModel.error.clear,this.options.flashModel.error)),this.on("hidden",this.remove,this),this.doDefault=!0},primaryButtonClicked:function(){n.prototype.primaryButtonClicked.call(this),this.doDefault&&this.hide()},setText:function(e){this._text=e,this.debouncedRender()},closeDialog:function(){this.hide(),this.remove()},preventDefault:function(){this.doDefault=!1},renderBody:function(e){e.html(this.bodyTemplate),e.find(".text-dialog-placeholder").html(this._text),this.children.flashMessages&&e.find(".text-dialog-placeholder").prepend(this.children.flashMessages.render().el)},bodyTemplate:'                <span class="text-dialog-placeholder"></span>            '})}),define("views/dashboards/panelcontrols/Master",["underscore","views/Base","models/Base","jquery","module","views/shared/controls/SyntheticSelectControl","views/shared/delegates/Popdown","views/shared/reportcontrols/details/Master","collections/services/authorization/Roles","models/Application","views/dashboards/panelcontrols/titledialog/Modal","views/dashboards/panelcontrols/querydialog/Modal","views/dashboards/panelcontrols/ReportDialog","views/dashboards/panelcontrols/CreateReportDialog","uri/route","util/console","splunk.util","views/shared/dialogs/TextDialog","bootstrap.tooltip"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=t.extend({moduleId:i.id,initialize:function(e){t.prototype.initialize.apply(this,arguments),this.model.report.on("change:id",this.updateReportView,this),this.model.report.entry.content.on("change",this.updateReportView,this),this.collection=this.collection||{},this.collection.roles=new a({}),this.collection.roles.fetch()},onChangeElementTitle:function(e){e.preventDefault(),this.children.titleDialogModal=new l({model:{report:this.model.working,dashboard:this.model.dashboard},onHiddenRemove:!0}),r("body").append(this.children.titleDialogModal.render().el),this.children.titleDialogModal.show(),this.children.popdown.hide()},onChangeSearchString:function(e){e.preventDefault();if(r(e.currentTarget).is(".disabled"))return;this.children.queryDialogModal=new c({model:{report:this.model.report,appLocal:this.model.appLocal,application:this.model.application,user:this.model.user,dashboard:this.model.dashboard,state:this.model.state},onHiddenRemove:!0}),r("body").append(this.children.queryDialogModal.render().el),this.children.queryDialogModal.show(),this.children.popdown.hide()},updateReportView:function(){this.debouncedRender()},render:function(){var e,t={};return this.model.report.get("id")?e=this.model.report.isPivotReport()?"icon-report-pivot":"icon-report-search":e=this.model.report.isPivotReport()?"icon-pivot":"icon-search-thin",t.panelClass=e,this.$el.html(this.compiledTemplate(t)),this.children.popdown=new o({el:this.el,mode:"dialog"}),this._renderPanelControls(),this},_renderPanelControls:function(){this.$(".dropdown-menu").html(e.template(this._panelControlsTemplate,{_:e}));var t;this.model.report.get("id")?t=this.model.report.isPivotReport()?e("PIVOT REPORT").t():e("SEARCH REPORT").t():t=this.model.report.isPivotReport()?e("INLINE PIVOT").t():e("INLINE SEARCH").t();var n=e.template('<li class="panelType"><%- panelType %></li>',{panelType:t});if(this.model.report.get("id")){var i=e.template('<ul class="report_actions"><%= panelTypeLI %><li><a class="viewPanelReport" href="#"><%- reportName %><span class="icon-triangle-right-small"></span></a></li></ul>',{panelTypeLI:n,reportName:this.model.report.entry.get("name")});this.$(".panel_actions").before(i),this.$(".panel_actions").prepend('<li><a href="#" class="changeElementTitle">'+e("Edit Title").t()+"</a></li>")}else{var s=r('<li><a class="convertToReport" href="#">'+e("Convert to Report").t()+"</a></li>"),o=r('<li><a href="#" class="changeSearchString">'+e("Edit Search String").t()+"</a></li>");this.model.report.entry.content.get("display.general.search.type")==="global"&&(s.find("a").addClass("disabled").tooltip({animation:!1,title:e("Cannot convert global search to report.").t()}),o.find("a").addClass("disabled").tooltip({animation:!1,title:e("Cannot edit global search.").t()})),this.$(".panel_actions").prepend(s),this.$(".panel_actions").prepend(o),this.$(".panel_actions").prepend('<li><a href="#" class="changeElementTitle">'+e("Edit Title").t()+"</a></li>"),this.$(".panel_actions").prepend(n)}},_panelControlsTemplate:'                <div class="arrow"></div>                <ul class="panel_actions">                    <li><a class="deletePanel" href="#"><%- _("Delete").t() %></a></li>                </ul>        ',template:'            <a class="dropdown-toggle btn-pill" href="#">                    <span class="<%- panelClass %>"></span><span class="caret"></span>            </a>            <div class="dropdown-menu">            </div>        ',onDelete:function(t){t.preventDefault(),this.children.dialog=new g({id:"modal_delete",flashModel:this.model.dashboard}),this.model.report.on("successfulDelete",this.children.dialog.closeDialog,this.children.dialog),this.children.dialog.settings.set("primaryButtonLabel",e("Delete").t()),this.children.dialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.dialog.on("click:primaryButton",this._dialogDeleteHandler,this),this.children.dialog.settings.set("titleLabel",e("Delete").t()),this.children.dialog.setText(m.sprintf(e("Are you sure you want to delete %s?").t(),"<em>"+e.escape(this.model.report.entry.content.get("display.general.title"))+"</em>")),r("body").append(this.children.dialog.render().el),this.children.dialog.show(),this.children.popdown.hide()},_dialogDeleteHandler:function(e){e.preventDefault(),this.model.report.trigger("deleteReport"),v.log("deleteReport event triggered")},onViewPanelReport:function(t){t.preventDefault(),t.stopPropagation();var n="",i,s,o=this.model.application.get("root"),a=this.model.application.get("locale"),f=this.model.application.get("app");i=d.report(o,a,f,{data:{s:this.model.report.get("id")}}),this.model.report.isPivotReport()?(n=this.pivotReportDetailsTemplate,s=d.pivot(o,a,f,{data:{s:this.model.report.get("id")}})):(n=this.searchReportDetailsTemplate,s=d.search(o,a,f,{data:{s:this.model.report.get("id")}})),this.$(".dropdown-menu").html(e.template(n,{viewReportLink:i,editReportLink:s,_:e})),this.children.reportDetails&&this.children.reportDetails.remove(),this.children.reportDetails=new u({model:{report:this.model.report,application:this.model.application,appLocal:this.model.appLocal,user:this.model.user},collection:this.collection.roles}),this.$(".reportDetails").prepend(r("<li/>").addClass("reportDetailsView").append(this.children.reportDetails.render().el));var l=this.model.report.entry.content.get("description");l&&this.$(".reportDetails").prepend(r("<li/>").addClass("report-description").text(l)),this.$(".reportDetails").prepend(r("<li/>").addClass("report-name").text(this.model.report.entry.get("name"))),this.$(".dropdown-menu").addClass("show-details"),r(window).trigger("resize")},searchReportDetailsTemplate:'            <div class="arrow"></div>            <a class="dialogBack btn" href="#"><span class="icon-triangle-left-small"/> <%- _("Back").t() %></a>            <ul class="reportDetails">                <li><a href="<%- viewReportLink %>" class="viewSearchReport"><%- _("View").t() %></a></li>                <li><a href="<%- editReportLink %>" class="openSearchReport"><%- _("Open in Search").t() %></a></li>                <li><a href="#" class="cloneSearchReport"><%- _("Clone to an Inline Search").t() %></a></li>            </ul>            <ul class="reportActions">                <li><a href="#" class="selectNewReport"><%- _("Select New Report").t() %></a></li>                <li><a href="#" class="useReportFormatting"><%- _("Use Report\'s Formatting for this Content").t() %></a></li>            </ul>        ',pivotReportDetailsTemplate:'            <div class="arrow"></div>            <a class="dialogBack btn" href="#"><span class="icon-triangle-left-small"/> <%- _("Back").t() %></a>            <ul class="reportDetails">                <li><a href="<%- viewReportLink %>" class="viewPivotReport"><%- _("View").t() %></a></li>                <li><a href="<%- editReportLink %>" class="openPivotReport"><%- _("Open in Pivot").t() %></a></li>                <li><a href="#" class="clonePivotReport"><%- _("Clone to an Inline Pivot").t() %></a></li>            </ul>            <ul class="reportActions">                <li><a class="selectNewReport"><%- _("Select New Report").t() %></a></li>                <li><a class="useReportFormatting"><%- _("Use Report\'s Formatting for this Content").t() %></a></li>            </ul>        ',onDialogBack:function(e){e.preventDefault(),e.stopPropagation(),this._renderPanelControls(),this.$(".dropdown-menu").removeClass("show-details"),r(window).trigger("resize")},tbd:function(e){e.preventDefault(),alert("Coming soon to a Splunk near you!")},convertToInlineSearch:function(t){t.preventDefault(),this.children.dialog=new g({id:"modal_inline",flashModel:this.model.dashboard}),this.children.dialog.settings.set("primaryButtonLabel",e("Clone to Inline Search").t()),this.children.dialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.dialog.on("click:primaryButton",this._convertToInlineSearch,this),this.model.report.on("successfulManagerChange",this.children.dialog.closeDialog,this.children.dialog),this.children.dialog.settings.set("titleLabel",e("Clone to Inline Search").t()),this.children.dialog.setText("<div>                <p>"+e("The report will be cloned to an inline search.").t()+"</p>                <p>"+e("The inline search:").t()+"                </p><ul>                <li>"+e("Cannot be scheduled.").t()+"</li>                <li>"+e("Will run every time the dashboard is loaded.").t()+"</li>                <li>"+e("Will use the permissions of the dashboard.").t()+"</li>                </ul>                </div>"),r("body").append(this.children.dialog.render().el),this.children.dialog.show(),this.children.popdown.hide()},convertToInlinePivot:function(t){t.preventDefault(),this.children.dialog=new g({id:"modal_inline",flashModel:this.model.dashboard}),this.children.dialog.settings.set("primaryButtonLabel",e("Clone to Inline Pivot").t()),this.children.dialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.dialog.on("click:primaryButton",this._convertToInlineSearch,this),this.model.report.on("successfulManagerChange",this.children.dialog.closeDialog,this.children.dialog),this.children.dialog.settings.set("titleLabel",e("Clone to Inline Pivot").t()),this.children.dialog.setText("<div>                <p>"+e("The report will be cloned to an inline pivot.").t()+"</p>                <p>"+e("The inline pivot:").t()+"                </p><ul>                <li>"+e("Cannot be scheduled.").t()+"</li>                <li>"+e("Will run every time the dashboard is loaded.").t()+"</li>                <li>"+e("Will use the permissions of the dashboard.").t()+"</li>                </ul>                </div>"),r("body").append(this.children.dialog.render().el),this.children.dialog.show(),this.children.popdown.hide()},_convertToInlineSearch:function(e){e.preventDefault(),this.model.report.trigger("makeInline"),v.log("makeInline event triggered")},useReportFormatting:function(t){t.preventDefault(),this.children.dialog=new g({id:"modal_use_report_formatting",flashModel:this.model.dashboard}),this.children.dialog.settings.set("primaryButtonLabel",e("Use Report's Formatting").t()),this.children.dialog.settings.set("cancelButtonLabel",e("Cancel").t()),this.children.dialog.on("click:primaryButton",this._useReportFormatting,this),this.model.report.on("successfulReportFormatting",this.children.dialog.closeDialog,this.children.dialog),this.children.dialog.settings.set("titleLabel",e("Use Report's Formatting").t()),this.children.dialog.setText(e("This will change the content's formatting to the report's formatting. Are you sure you want use the report's formatting?").t()),r("body").append(this.children.dialog.render().el),this.children.dialog.show(),this.children.popdown.hide()},_useReportFormatting:function(e){e.preventDefault(),this.model.report.trigger("useReportFormatting"),v.log("useReportFormatting event triggered")},selectNewReport:function(e){e.preventDefault(),this.children.newReportDialog=new h({model:{report:this.model.report,dashboard:this.model.dashboard,application:this.model.application},controller:this.options.controller,onHiddenRemove:!0}),r("body").append(this.children.newReportDialog.render().el),this.children.newReportDialog.show(),this.children.popdown.hide()},convertToReport:function(e){e.preventDefault();if(r(e.currentTarget).is(".disabled"))return;this.children.createReportDialog=new p({model:{report:this.model.report,dashboard:this.model.dashboard},onHiddenRemove:!0}),r("body").append(this.children.createReportDialog.render().el),this.children.createReportDialog.show(),this.children.popdown.hide()},events:{"click a.deletePanel":"onDelete","click a.viewPanelReport":"onViewPanelReport","click a.changeElementTitle":"onChangeElementTitle","click a.changeSearchString":"onChangeSearchString","click a.dialogBack":"onDialogBack","click a.cloneSearchReport":"convertToInlineSearch","click a.clonePivotReport":"convertToInlinePivot","click a.selectNewReport":"selectNewReport","click a.convertToReport":"convertToReport","click a.useReportFormatting":"useReportFormatting","click a":function(e){var t=r(e.currentTarget).attr("href");t&&t[t.length-1]!=="#"&&(e.preventDefault(),window.open(t))},"click li.reportDetailsView a":function(e){this.children.popdown.hide()}}});return b}),define("splunkjs/mvc/simplexml/paneleditor",["require","exports","module","../mvc","../basesplunkview","views/shared/vizcontrols/Master","views/dashboards/panelcontrols/Master","../savedsearchmanager","../searchmanager","splunkjs/mvc/utils","underscore","splunk.config","models/Base","util/console","./controller","../tokenawaremodel","models/DashboardReport"],function(e,t,n){var r=e("../mvc"),i=e("../basesplunkview"),s=e("views/shared/vizcontrols/Master"),o=e("views/dashboards/panelcontrols/Master"),u=e("../savedsearchmanager"),a=e("../searchmanager"),f=e("splunkjs/mvc/utils"),l=e("underscore"),c=e("splunk.config"),h=e("models/Base"),p=e("util/console"),d=e("./controller"),v=e("../tokenawaremodel"),m=e("models/DashboardReport"),g=m.extend({initialize:function(e,t){m.prototype.initialize.apply(this,arguments),this._report=t.report,this.entry.content=new v({},{applyTokensByDefault:!0,retrieveTokensByDefault:!0}),this.setFromSplunkD(this._report.toSplunkD()),this.contentSyncer=f.syncModels({source:this._report.entry.content,dest:this.entry.content,auto:"push"}),this.entrySyncer=f.syncModels({source:this._report.entry,dest:this.entry,auto:"push"})},save:function(e,t){return e&&this.set(e,t),this._report.entry.set(this.entry.toJSON()),this._report.entry.content.set(this.entry.content.toJSON({tokens:!0})),this._report.saveXML(t)},syncOff:function(){this.contentSyncer.destroy(),this.entrySyncer.destroy(),this.off()}}),y=i.extend({className:"panel-editor",initialize:function(){this.children=this.children||{},i.prototype.initialize.call(this),this.model=this.model||{},this.model.report=this.model.report||new m,this.model.working=new g({},{report:this.model.report}),this.model.application=d.model.app,this.manager=this.options.manager,this._instantiateChildren(),this.bindToComponent(this.manager,this.onManagerChange,this),this.listenTo(this.model.report,"makeInline",this._makePanelInline,this),this.listenTo(this.model.report,"useReportFormatting",this._useReportFormatting,this),this.listenTo(this.model.report,"updateReportID",this._updateReportID,this),this.listenTo(this.model.report,"saveAsReport",this._saveAsReport,this),this.listenTo(this.model.report,"updateSearchString",this._updateSearchManager,this),this.listenTo(this.model.report,"deleteReport",this._deleteReport,this),this.listenTo(this.model.working,"saveTitle",this._saveTitle,this),this.model.user=d.model.user,this.model.appLocal=d.model.appLocal},_instantiateChildren:function(){this.children.vizControl=new s({model:{report:this.model.working,application:this.model.application},vizTypes:["events","statistics","visualizations"],saveOnApply:!0,dashboard:!0}),this.children.panelControl=new o({model:{report:this.model.report,working:this.model.working,application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,dashboard:d.model.view,state:d.getStateModel()},controller:d})},remove:function(){this.model.working.syncOff(),this._removeChildren(),i.prototype.remove.apply(this,arguments)},_removeChildren:function(){this.children.vizControl.remove(),this.children.panelControl.remove()},_updateSearchManager:function(e){var t=this.model.report.toSplunkD();this.model.report.entry.content.set(e);var n=this.model.report.saveXML();n.done(l.bind(function(){this.model.report.trigger("successfulSave");var e=r.Components.get(this.manager);e.query&&e.query.set("search",this.model.report.entry.content.get("search",{tokens:!0}),{tokens:!0,silent:!1}),e.search&&e.search.set({earliest_time:this.model.report.entry.content.get("dispatch.earliest_time",{tokens:!0}),latest_time:this.model.report.entry.content.get("dispatch.latest_time",{tokens:!0})},{tokens:!0})},this)),n.fail(l.bind(function(){this.model.report.setFromSplunkD(t,{silent:!1})},this))},onManagerChange:function(){this._removeChildren(),this._instantiateChildren(),this.render()},render:function(){return this.$el.append(this.children.panelControl.render().el),this.$el.append(this.children.vizControl.render().el),this},_makePanelInline:function(){var e=this.model.report.toSplunkD(),t=this.model.report.entry.get("name"),n=this.model.report.get("id");delete this.model.report.id,this.model.report.unset("id",{silent:!0}),this.model.report.entry.unset("name",{silent:!0});var r=this.model.report.saveXML();r.fail(l.bind(function(){this.model.report.setFromSplunkD(e,{silent:!1})},this)),r.done(l.bind(function(){this.model.report.trigger("successfulManagerChange"),new a({id:this.manager,latest_time:this.model.report.entry.content.get("dispatch.latest_time"),earliest_time:this.model.report.entry.content.get("dispatch.earliest_time"),search:this.model.report.entry.content.get("search"),app:f.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0},{replace:!0}),this.model.report.set({id:n},{silent:!0}),this.model.report.unset("id",{silent:!1}),this.model.report.entry.set({name:t},{silent:!0}),this.model.report.entry.unset("name",{silent:!1})},this))},_useReportFormatting:function(){var e=this.model.report.toSplunkD(),t=this.model.report.fetch({},{silent:!0});t.done(l.bind(function(){var t=this.model.report.toSplunkD(),n=this.model.report.saveXML({clearOptions:!0});n.fail(l.bind(function(){this.model.report.setFromSplunkD(e,{silent:!1})},this)),n.done(l.bind(function(){this.model.report.setFromSplunkD(e,{silent:!0}),this.model.report.setFromSplunkD(t,{silent:!1}),this.model.report.trigger("successfulReportFormatting")},this))},this))},_updateReportID:function(e,t){var n=this.model.report.toSplunkD();e&&(this.model.report.set({id:e},{silent:!0}),this.model.report.entry.set({id:e},{silent:!0}),this.model.report.id=e),t&&this.model.report.entry.content.set({"display.general.title":t});var r=this.model.report.fetch({},{silent:!0});r.done(l.bind(function(){var e=this.model.report.saveXML();e.fail(l.bind(function(){this.model.report.setFromSplunkD(n,{silent:!1})},this)),e.done(l.bind(function(){this.model.report.trigger("successfulManagerChange"),new u({id:this.manager,searchname:this.model.report.entry.get("name"),app:f.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0},{replace:!0})},this))},this))},_saveAsReport:function(e,t){var n=this.model.report.toSplunkD();this.model.report.entry.content.set({name:e,description:t,"display.general.title":e}),this.model.report.entry.set({name:e},{silent:!0}),this.model.report.entry.content.get("display.general.search.type")==="postprocess"&&this.model.report.entry.content.set("search",r.Components.get(this.manager).query.resolve());var i=this.model.report.save({},{data:{app:f.getCurrentApp(),owner:c.USERNAME}});i.done(l.bind(function(){var t=this.model.report.saveXML();t.fail(l.bind(function(){this.model.report.destroy(),this.model.report.unset("id",{silent:!0}),this.model.report.setFromSplunkD(n,{silent:!1})},this)),t.done(l.bind(function(){this.model.report.trigger("successfulReportSave"),new u({id:this.manager,searchname:e,app:f.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0},{replace:!0})},this))},this))},_saveTitle:function(e){var t=this.model.report.toSplunkD();this.model.working.entry.content.set({"display.general.title":e});var n=this.model.working.save();n.fail(l.bind(function(){this.model.report.setFromSplunkD(t,{silent:!1})},this)),n.done(l.bind(function(){this.model.working.trigger("successfulSave"),this.model.report.entry.content.set({"display.general.title":""},{silent:!1}),this.model.report.entry.content.set({"display.general.title":e},{silent:!1})},this))},_deleteReport:function(){var e=this.model.report.deleteXML();e.done(l.bind(function(){this.model.report.trigger("successfulDelete"),this.model.report.trigger("removedPanel")},this))}});return y}),define("splunkjs/mvc/simplexml/element/base",["require","underscore","jquery","backbone","../../basesplunkview","../../../mvc","../../utils","../controller","models/DashboardReport","util/console","../../progressbarview","../../refreshtimeindicatorview","../../resultslinkview","../paneleditor","../../savedsearchmanager","../../postprocessmanager","../../messages"],function(e){var t=e("underscore"),n=e("jquery"),r=e("backbone"),i=e("../../basesplunkview"),s=e("../../../mvc"),o=e("../../utils"),u=e("../controller"),a=e("models/DashboardReport"),f=e("util/console"),l=e("../../progressbarview"),c=e("../../refreshtimeindicatorview"),h=e("../../resultslinkview"),p=e("../paneleditor"),d=e("../../savedsearchmanager"),v=e("../../postprocessmanager"),m=e("../../messages"),g=!1,y={},b=(new a).fetch(),w=i.extend({initialVisualization:"#abstract",configure:function(){this.options.settingsOptions=t.extend({retainUnmatchedTokens:!0},this.options.settingsOptions||{}),this.options=t.extend(this.options,{id:this.id,manager:this.options.managerid,title:this.$("h3").text()}),g&&this.options.settingsOptions.tokens!==!0&&f.warn("element created without tokens=true: "+this.id),i.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.visualization=null,this.model=new a,this.managerid=this.options.managerid,this.settings._sync=o.syncModels(this.settings,this.model.entry.content,{auto:!0,prefix:"display.general.",include:["id","title","manager","managerid"]}),this.bindToComponent(this.managerid,this.onManagerChange,this);var e=this.typeModel=new r.Model({type:this.initialVisualization});this.reportReady=n.Deferred(),this.listenTo(this.typeModel,"change",this.createVisualization,this),this.listenTo(u.getStateModel(),"change:edit",this.onEditModeChange,this),this.reportReady.done(t.bind(function(){this.listenTo(this.model.entry.content,"change:display.general.type change:display.visualizations.type change:display.events.type",function(t){var n=t.get("display.general.type"),r=["display",n,"type"].join("."),i=t.get(r),s=i?[n,i].join(":"):n;e.set("type",y.hasOwnProperty(s)?s:n)},this),this.listenTo(this.settings,"change:title",this.updateTitle,this),this.listenTo(this.model,"removedPanel",this.remove,this)},this))},remove:function(){this._removeVisualization(),t([this.refreshTime,this.panelEditor]).chain().filter(t.identity).invoke("remove"),this.settings&&this.settings._sync&&this.settings._sync.destroy(),s.Components.get("dashboard").removeElement(this.id),i.prototype.remove.call(this)},onManagerChange:function(e,n){var r=this;if(n instanceof d){var i=n.get("searchname"),s=u.getStateModel().app,o=!this.model.entry.content.has("display.general.type");this.model.id=["","servicesNS",s.get("owner"),s.get("app"),"saved","searches",encodeURIComponent(i)].join("/"),this.model.fetch().done(function(){o&&r.model.entry.content.set(r._initialVisualizationToAttributes()),r.reportReady.resolve(r.model)}).fail(function(e){f.error("Failed to load saved search",arguments),e.status===404&&r.showErrorMessage(t("Warning: saved search not found: ").t()+JSON.stringify(i))})}else n?b.done(function(e){r.model.entry.content.has("display.general.type")||(r.model.entry.content.set(e.entry[0].content),r.initialVisualization!=="#abstract"&&r.model.entry.content.set(r._initialVisualizationToAttributes()));var t="inline";n instanceof v?(t="postprocess",r.model.entry.content.set("fullSearch",n.query.resolve())):n.has("metadata")&&n.get("metadata").global&&(t="global"),r.model.entry.content.set("display.general.search.type",t),r.model.entry.content.set({search:n.get("search",{tokens:!0}),"dispatch.earliest_time":n.get("earliest_time",{tokens:!0}),"dispatch.latest_time":n.get("latest_time",{tokens:!0})},{tokens:!0}),r.reportReady.resolve(r.model)}):b.done(function(e){r.model.entry.content.has("display.general.type")||(r.model.entry.content.set(e.entry[0].content),r.initialVisualization!=="#abstract"&&r.model.entry.content.set(r._initialVisualizationToAttributes())),r.reportReady.resolve(r.model)})},showErrorMessage:function(e){this._removeInitialPlaceholder();var t=this.$(".panel-body>.msg");t.length||(t=n('<div class="msg"></div>').appendTo(this.$(".panel-body"))),m.render({level:"error",icon:"warning-sign",message:e},t)},_initialVisualizationToAttributes:function(){var e=this.initialVisualization.split(":"),t={"display.general.type":e[0]};return e.length>1&&(t[["display",e[0],"type"].join(".")]=e[1]),t},onEditModeChange:function(e){var n=this._debouncedOnEditModeChange;n||(n=this._debouncedOnEditModeChange=t.debounce(t.bind(this._onEditModeChange,this),0)),this.reportReady.done(function(){n(e)})},_onEditModeChange:function(e){e.get("edit")?(this.refreshTime&&(this.refreshTime.remove(),this.refreshTime=null),this.updateTitle(),this.createPanelElementEditor()):(this.panelEditor&&(this.panelEditor.remove(),this.panelEditor=null),this.createRefreshTimeIndicator(),this.updateTitle())},createPanelElementEditor:function(){this.panelEditor&&(this.panelEditor.remove(),this.panelEditor=null),this.panelEditor=new p({manager:this.managerid,model:{report:this.model}}),this.$el.prepend(this.panelEditor.render().el)},createRefreshTimeIndicator:function(){this.refreshTime||(this.refreshTime=(new c({id:t.uniqueId(this.id+"-refreshtime"),el:n('<div class="refresh-time-indicator pull-right"></div>').prependTo(this.$(".panel-head")),manager:this.managerid})).render())},createVisualization:function(e){var r=this._debouncedCreateViz;r||(r=this._debouncedCreateViz=t.debounce(t.bind(this._createVisualization,this),0)),n.when(this.reportReady).then(function(){r(e===!0)})},_removeVisualization:function(){this.visualization&&(this.visualization.panelClassName&&this.$el.removeClass(this.visualization.panelClassName),this.visualization.off(),this.visualization.remove(),this.visualization=null),this.resultsLink&&(this.resultsLink.off(),this.resultsLink.remove(),this.resultsLink=null)},_removeInitialPlaceholder:function(){this.$(".panel-body > .msg, .panel-body > .initial-placeholder").remove()},_createVisualization:function(e){var r=!this.visualization;this._removeInitialPlaceholder(),this._removeVisualization();var i=this.typeModel.get("type"),o=y[i];if(!o){this.showErrorMessage(t("Unsupported visualization type: ").t()+JSON.stringify(i));return}var u={el:n("<div></div>").appendTo(this.$(".panel-body")),reportModel:this.model.entry.content,managerid:this.settings.get("manager"),id:t.uniqueId(this.id+"-viz-")};if(r||e)u=t.extend({},this.options,u);u.settingsOptions&&(u.settingsOptions.retainUnmatchedTokens=!1),g&&(u.settingsOptions||{}).tokens!==!0&&f.warn("viz created without tokens=true: "+u.id),this.visualization=(new o(u)).render(),this.visualization.panelClassName&&this.$el.addClass(this.visualization.panelClassName);if(i.indexOf("events")===0){var a=s.Components.getInstance(this.settings.get("manager"));a.search.set("status_buckets",300)}this.trigger("create:visualization",this.visualization),r&&this.model.entry.content.set(t.defaults(this.model.entry.content.toJSON({tokens:!0}),this.visualization.reportDefaults));if(typeof this.visualization.getResultsLinkOptions=="function"){var l=this.visualization.getResultsLinkOptions(this.options)||{};this.resultsLink=(new h(t.extend({},l,this.options,{id:t.uniqueId(this.id+"-resultslink"),el:n('<div class="view-results pull-left"></div>').appendTo(this.$(".panel-footer")),manager:this.managerid,model:this.model}))).render()}this.visualization.on("all",this.trigger,this)},getVisualization:function(e){var t=n.Deferred();return e&&t.done(e),this.visualization?t.resolve(this.visualization):this.once("create:visualization",t.resolve,t),t.promise()},render:function(){return this.createPanelStructure(),this.progressBar||(this.progressBar=(new l({id:t.uniqueId(this.id+"-progressbar"),manager:this.managerid,el:n('<div class="progress-container pull-right"></div>').prependTo(this.$(".panel-footer"))})).render()),this.createRefreshTimeIndicator(),this.createVisualization(),this.onEditModeChange(u.getStateModel()),this},createPanelStructure:function(){this.$(".panel-head").length||n('<div class="panel-head"></div>').prependTo(this.$el);var e=this.$(".panel-head>h3");e.length||n("<h3></h3>").prependTo(this.$(".panel-head")),this.updateTitle(),this.$(".panel-body").length||n('<div class="panel-body"></div>').appendTo(this.$el);var t=n('<div class="initial-placeholder"></div>').addClass("placeholder-"+this.initialVisualization.replace(/\W+/,"-"));t.appendTo(this.$(".panel-body")),this.$("panel-footer").length||n('<div class="panel-footer"></div>').appendTo(this.$el)},updateTitle:function(){var e=this.settings.get("title")||"";u.getStateModel().get("edit")&&!e?this.$(".panel-head>h3").empty().append(n('<span class="untitled">'+t("Untitled Panel").t()+"</span>")):this.$(".panel-head>h3").text(e)},getExportParams:function(e){var t=s.Components.get(this.managerid),n={};return t&&!(t instanceof v)&&t.job&&t.job.sid&&(n[e]=t.job.sid),n}},{registerVisualization:function(e,t){y[e]=t},getVisualization:function(e){var t=y[e];return t||(t=y[e.split(":")[0]]),t}});return w}),define("splunkjs/mvc/simplexml/dialog/addpanel/inline",["require","underscore","jquery","views/Base","views/shared/controls/ControlGroup","util/console","../../../utils","uri/route","util/time_utils","views/dashboards/PanelTimeRangePicker","bootstrap.tooltip"],function(e){var t=e("underscore"),n=e("jquery"),r=e("views/Base"),i=e("views/shared/controls/ControlGroup"),s=e("util/console"),o=e("../../../utils"),u=e("uri/route"),a=e("util/time_utils"),f=e("views/dashboards/PanelTimeRangePicker");return e("bootstrap.tooltip"),r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments),this.children.searchField=new i({controlType:"Textarea",controlOptions:{modelAttribute:"search",model:this.model.report},label:t("Search String").t(),help:'<a href="#" class="run-search">'+t("Run Search").t()+' <i class="icon-external"></i></a>'}),this.listenTo(this.model.report,"change:elementCreateType",this.onModeChange,this),this.children.panelTimeRangePicker=new f({model:{timeRange:this.model.timeRange,report:this.model.report,state:this.model.state},collection:this.collection}),this.model.report.set({"dispatch.earliest_time":this.model.timeRange.get("earliest"),"dispatch.latest_time":this.model.timeRange.get("latest")},{tokens:!0})},events:{"click a.run-search":function(e){e.preventDefault();var t=this.model.report.get("search"),n={q:t},r=o.getPageInfo();if(!t)return;this.model.report.has("dispatch.earliest_time")&&(n.earliest=this.model.report.get("dispatch.earliest_time"),n.latest=this.model.report.get("dispatch.latest_time")),o.redirect(u.search(r.root,r.locale,r.app,{data:n}),!0)}},onModeChange:function(){var e=this.model.report.get("elementCreateType")==="inline"?"show":"hide";this.$el[e]()},render:function(){return this.children.searchField.render().appendTo(this.el),this.children.panelTimeRangePicker.render().appendTo(this.el),this.onModeChange(),this}})}),define("splunkjs/mvc/simplexml/dialog/addpanel/report",["require","underscore","jquery","views/Base","views/shared/controls/ControlGroup","../../../utils","util/time_utils","models/Cron","splunk.util","uri/route","collections/services/SavedSearches","views/shared/Modal"],function(e){var t=e("underscore"),n=e("jquery"),r=e("views/Base"),i=e("views/shared/controls/ControlGroup"),s=e("../../../utils"),o=e("util/time_utils"),u=e("models/Cron"),a=e("splunk.util"),f=e("uri/route"),l=e("collections/services/SavedSearches"),c=e("views/shared/Modal");return r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments),this.children.reportPlaceholder=new r,this.controller=this.options.controller,this.controller.reportsCollection||this.controller.fetchCollection(),this.controller.reportsCollection.initialFetchDfd.done(t.bind(function(){var e=this.controller.reportsCollection.map(function(e){return{label:e.entry.get("name"),value:e.id}}),n=s.getPageInfo(),r=f.reports(n.root,n.locale,n.app);this.controller.reportsCollection.length===this.controller.reportsCollection.REPORTS_LIMIT?this.children.report=new i({label:"",controlType:"SyntheticSelect",controlOptions:{className:"btn-group add-panel-report",toggleClassName:"btn",model:this.model,modelAttribute:"savedSearch",items:e,popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},help:t("This does not contain all reports. Add a report that is not listed from ").t()+a.sprintf("<a href=%s>%s</a>.",r,t("Reports").t())}):this.children.report=new i({label:"",controlType:"SyntheticSelect",controlOptions:{className:"btn-group add-panel-report",toggleClassName:"btn",model:this.model,modelAttribute:"savedSearch",items:e,popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}}),this.model.set("savedSearch",e[0].value)},this)),this.children.searchField=new i({controlType:"Textarea",controlOptions:{modelAttribute:"savedSearchString",model:this.model},label:t("Search String").t(),help:'<a href="#" class="run-search">'+t("Run Search").t()+' <i class="icon-external"></i></a>'}),this.children.timerangeField=new i({controlType:"Label",controlOptions:{modelAttribute:"savedSearchTimerange",model:this.model},label:t("Time Range").t()}),this.children.schedule=new i({controlType:"Label",controlOptions:{modelAttribute:"savedSearchSchedule",model:this.model},label:t("Schedule").t()}),this.children.permissions=new i({controlType:"Label",controlOptions:{modelAttribute:"savedSearchPermissions",model:this.model},label:t("Permissions").t()}),this.model.set("savedSearchString","..."),this.listenTo(this.model,"change:elementCreateType",this.onModeChange,this),this.listenTo(this.model,"change:savedSearch",this.searchSelected,this)},events:{"click a.run-search":function(e){e.preventDefault();var t=this.model.get("savedSearch");if(!t)return;var n=s.getPageInfo(),r=f.search(n.root,n.locale,n.app,{data:{s:t}});s.redirect(r,!0)}},searchSelected:function(){var e=this.model.get("savedSearch"),n=this.controller.reportsCollection.get(e);this.model.set("savedSearchName",n.entry.get("name")),this.model.set("savedSearchString",n.entry.content.get("search"));var r=n.entry.content.get("dispatch.earliest_time"),i=n.entry.content.get("dispatch.latest_time"),s="statistics",f;n.entry.content.has("display.general.type")&&(s=n.entry.content.get("display.general.type"),f=["display",s,"type"].join("."),n.entry.content.has(f)&&(s=[s,n.entry.content.get(f)].join(":"))),this.model.set("savedSearchVisualization",s),this.model.set("savedSearchTimerange",o.generateLabel(this.collection.timeRanges,r,null,i,null));var l=t("Never").t();if(n.entry.content.get("is_scheduled")){var c=u.createFromCronString(n.entry.content.get("cron_schedule"));l=c.getScheduleString()}this.model.set("savedSearchSchedule",l),this.model.set("savedSearchPermissions",a.sprintf(t("%s. Owned by %s.").t(),n.entry.acl.get("perms")?t("Shared").t():t("Not Shared").t(),n.entry.acl.get("owner")))},onModeChange:function(){this.$el[this.model.get("elementCreateType")==="saved"?"show":"hide"](),this.model.get("elementCreateType")==="saved"&&this.controller.reportsCollection.initialFetchDfd.readyState!==4&&this.$(c.LOADING_SELECTOR).length===0&&(this.$el.append(c.LOADING_HORIZONTAL),this.$(c.LOADING_SELECTOR).html(t("Loading...").t()))},render:function(){return this.children.reportPlaceholder.render().appendTo(this.el),this.controller.reportsCollection.initialFetchDfd.done(t.bind(function(){this.$(c.LOADING_SELECTOR).length>0&&this.$(c.LOADING_SELECTOR).remove(),this.children.report.render().appendTo(this.children.reportPlaceholder.el),this.searchSelected(),this.children.searchField.render().appendTo(this.el),this.children.searchField.$("textarea").attr("readonly","readonly"),this.children.timerangeField.render().appendTo(this.el),this.children.schedule.render().appendTo(this.el),this.children.permissions.render().appendTo(this.el),this.onModeChange()},this)),this}})}),define("splunkjs/mvc/simplexml/dialog/addpanel/pivot",["require","underscore","views/Base","../../../utils","uri/route"],function(e){var t=e("underscore"),n=e("views/Base"),r=e("../../../utils"),i=e("uri/route");return n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:elementCreateType",this.onModeChange,this)},render:function(){if(!this.el.innerHTML){var e=r.getPageInfo();this.$el.html(t.template(this.template,{pivotLink:i.data_models(e.root,e.locale,e.app)}))}return this.onModeChange(),this},onModeChange:function(){var e=this.model.get("elementCreateType")==="pivot"?"show":"hide";this.$el[e]()},template:'<label class="control-label"></label><div class="controls">'+t("Use the Pivot tool to summarize Data Model information and add it as a dashboard panel. You'll need to know the name of this dashboard when you save from the Pivot tool.").t()+"</div>"})}),define("splunkjs/mvc/simplexml/dialog/addpanel/master",["require","exports","module","underscore","jquery","splunkjs/mvc","views/Base","views/shared/controls/ControlGroup","../../controller","./inline","./report","./pivot","util/console"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("splunkjs/mvc"),o=e("views/Base"),u=e("views/shared/controls/ControlGroup"),a=e("../../controller"),f=e("./inline"),l=e("./report"),c=e("./pivot"),h=e("util/console");return o.extend({moduleId:t.id,className:"add-panel",initialize:function(){o.prototype.initialize.call(this,arguments),this.children.panelTitleControlGroup=new u({label:r("Content Title").t(),controlType:"Text",controlClass:"controls-block",controlOptions:{model:this.model.report,modelAttribute:"title",placeholder:"optional"}}),this.children.elementCreateType=new u({label:r("Content Type").t(),controlType:"SyntheticRadio",controlClass:"controls-thirdblock",controlOptions:{className:"btn-group btn-group-3 add-panel-select",items:[{value:"inline",label:'<i class="icon-search-thin"></i>',tooltip:r("Inline Search").t()},{value:"pivot",label:'<i class="icon-pivot"></i>',tooltip:r("Inline Pivot").t()},{value:"saved",label:'<i class="icon-report"></i>',tooltip:r("Report").t()}],model:this.model.report,modelAttribute:"elementCreateType"}});var e=a.collection.times;this.children.inline=new f({model:this.model,collection:{timeRanges:e}}),this.children.report=new l({model:this.model.report,collection:{timeRanges:e},controller:this.options.controller}),this.children.pivot=new c({model:this.model.report})},render:function(){return this.$el.append(this.children.panelTitleControlGroup.render().el),this.$el.append(this.children.elementCreateType.render().el),this.$el.append(this.children.inline.render().el),this.$el.append(this.children.pivot.render().el),this.$el.append(this.children.report.render().el),this}})}),define("splunkjs/mvc/simplexml/dialog/addpanel",["require","exports","module","underscore","jquery","splunkjs/mvc","views/shared/Modal","models/Base","../../utils","../controller","../element/base","../mapper","./addpanel/master","../../searchmanager","../../savedsearchmanager","util/console","views/shared/timerangepicker/dialog/Master","models/TimeRange","views/shared/delegates/ModalTimerangePicker","../controller","uri/route","views/shared/FlashMessages"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("splunkjs/mvc"),o=e("views/shared/Modal"),u=e("models/Base"),a=e("../../utils"),f=e("../controller"),l=e("../element/base"),c=e("../mapper"),h=e("./addpanel/master"),p=e("../../searchmanager"),d=e("../../savedsearchmanager"),v=e("util/console"),m=e("views/shared/timerangepicker/dialog/Master"),g=e("models/TimeRange"),y=e("views/shared/delegates/ModalTimerangePicker"),b=e("../controller"),w=e("uri/route"),E=e("views/shared/FlashMessages"),S=u.extend({defaults:{elementCreateType:"inline","dispatch.earliest_time":"0","dispatch.latest_time":"now"},validation:{search:{fn:"validateSearchQuery"}},validateSearchQuery:function(e,t,n){if(n.elementCreateType==="inline"&&!e)return"Search string is required."},sync:function(e,t,n){v.log("NewPanelModel.sync(%o, %o, %o)",e,t,n);if(e!=="create")throw new Error("Unsupported sync method: "+e);if(!t.isValid())return!1;var o=i.Deferred(),u=this.get("elementCreateType"),h,m=1;do h="element"+m++;while(s.Components.has(h));var g=u==="saved"?this.get("savedSearchVisualization")||"visualizations:charting":"visualizations:charting",y=c.get(g);return f.getStateModel().view.addElement(h,{type:y.tagName,title:this.get("title"),search:{type:u,search:this.get("search"),earliest_time:this.get("dispatch.earliest_time"),latest_time:this.get("dispatch.latest_time"),name:this.get("savedSearchName")}}).done(r.bind(function(){var e=s.Components.get("dashboard").createNewElement({title:this.get("title"),id:h}),t=r.uniqueId("new-search");switch(u){case"inline":new p({id:t,search:this.get("search"),earliest_time:this.get("dispatch.earliest_time")||"0",latest_time:this.get("dispatch.latest_time")||"now",app:a.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0,runOnSubmit:!0},{tokens:!0});break;case"saved":new d({id:t,searchname:this.get("savedSearchName"),app:a.getCurrentApp(),auto_cancel:90,status_buckets:0,preview:!0,timeFormat:"%s.%Q",wait:0})}var n=l.extend({initialVisualization:g}),i=new n({id:h,managerid:t,el:e},{tokens:!0});i.render(),o.resolve()},this)),o.promise()}});return o.extend({moduleId:t.id,className:"modal add-panel",initialize:function(){o.prototype.initialize.apply(this,arguments),this.model=this.model||{},this.model.report=new S;var e=this.model.timeRange=new g({earliest:"0",latest:"now"}),t=f.model.app,n=f.model.user,r=f.model.appLocal,i=f.collection.times;this.children.addPanel=new h({model:{report:this.model.report,timeRange:e,state:b.getStateModel()},collection:{times:i},controller:this.options.controller}),this.children.timeRangePickerView=new m({model:{timeRange:e,user:n,appLocal:r,application:t},collection:i}),this.children.flashMessages=new E({model:this.model.report}),e.on("applied",function(){this.timeRangeDelegate.closeTimeRangePicker()},this),this.listenTo(this.model.report,"change:elementCreateType",this.handleSubmitButtonState,this)},events:{"click a.modal-btn-primary":function(e){if(this.model.report.get("elementCreateType")==="pivot")return;e.preventDefault(),f.getStateModel().set("edit",!1);var t=this;this.model.timeRange.get("useTimeFrom")=="dashboard"&&this.model.report.set({"dispatch.earliest_time":"$earliest$","dispatch.latest_time":"$latest$"},{tokens:!0});var n=this.model.report.save();n?n.done(function(){setTimeout(function(){f.getStateModel().set("edit",!0)},250),t.hide()}):f.getStateModel().set("edit",!0)},hide:function(e){e.target===this.el&&this.remove()}},handleSubmitButtonState:function(e){if(this.model.report.get("elementCreateType")==="pivot"){var t=a.getPageInfo();this.$(o.FOOTER_SELECTOR).find(".btn-primary").replaceWith('<a href="'+w.data_models(t.root,t.locale,t.app)+'" class="btn btn-primary modal-btn-primary">'+r("Go to Pivot").t()+"</a>")}else this.$(o.FOOTER_SELECTOR).find(".btn-primary").replaceWith('<a href="#" class="btn btn-primary modal-btn-primary">'+r("Add Panel").t()+"</a>")},setLabel:function(){var e=this.model.timeRange.generateLabel(this.collection);this.$el.find("span.time-label").text(e)},render:function(){return this.$el.html(o.TEMPLATE),this.$(o.HEADER_TITLE_SELECTOR).html(r("Add Panel").t()),this.$(o.BODY_SELECTOR).remove(),this.$(o.FOOTER_SELECTOR).before('<div class="vis-area"><div class="slide-area"><div class="content-wrapper add-panel-wrapper"><div class="'+o.BODY_CLASS+'" >'+"</div>"+"</div>"+'<div class="timerange-picker-wrapper">'+"</div>"+"</div>"+"</div>"),this.$(o.BODY_SELECTOR).prepend(this.children.flashMessages.render().el),this.$(o.BODY_SELECTOR).append(o.FORM_HORIZONTAL_JUSTIFIED),this.$visArea=this.$(".vis-area").eq(0),this.$slideArea=this.$(".slide-area").eq(0),this.$addpanelContent=this.$(".add-panel-wrapper").eq(0),this.$timeRangePickerWrapper=this.$(".timerange-picker-wrapper").eq(0),this.$(o.BODY_FORM_SELECTOR).append(this.children.addPanel.render().el),this.$timeRangePickerWrapper.append(this.children.timeRangePickerView.render().el),this.$modalParent=this.$el,this.timeRangeDelegate=new y({el:this.el,$visArea:this.$visArea,$slideArea:this.$slideArea,$contentWrapper:this.$addpanelContent,$timeRangePickerWrapper:this.$timeRangePickerWrapper,$modalParent:this.$modalParent,$timeRangePicker:this.children.timeRangePickerView.$el,activateSelector:"a.timerange-control",backButtonSelector:"a.btn.back"}),this.$(o.FOOTER_SELECTOR).append(o.BUTTON_CANCEL),this.$(o.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+r("Add Panel").t()+"</a>"),this.$(o.FOOTER_SELECTOR).append('<a href="#" class="btn back modal-btn-back pull-left">'+r("Back").t()+"</a>"),this.$(".btn.back").hide(),this}})}),define("splunkjs/mvc/simpleform/input/base",["require","underscore","jquery","../../basesplunkview","../../tokenutils"],function(e){var t=e("underscore"),n=e("jquery"),r=e("../../basesplunkview"),i=e("../../tokenutils"),s=r.extend({options:{submitOnChange:!1},initialize:function(e){this.configure(),this.settings.enablePush("value"),this.settings.on("change:label",this.renderLabel,this),e=e||{},this.inputId=e.inputId||t.uniqueId((this.id||"input")+"_")},handleChange:function(){this.settings.set("value",this.getValue())},submit:function(){this.trigger("change",this)},hasValue:function(){var e=this.settings.get("value"),t=this.settings.get("default");return e!==undefined&&e!==null||t===undefined||e===t},setValue:function(e){throw"setValue not implemented"},getValue:function(){throw"getValue not implemented"},renderLabel:function(){var e=this.$("label");e.length||(e=n("<label></label>").appendTo(this.el)),e.attr("for",this.inputId);if(this.settings.has("label"))e.text(this.settings.get("label"));else{var t=e.text();t&&this.settings.set("label",t)}},val:function(e){return arguments.length>=1&&this.setValue(e),this.getValue()},on:function(){return this._applyToWrappedView("on",arguments)},off:function(){return this._applyToWrappedView("off",arguments)},trigger:function(){return this._applyToWrappedView("trigger",arguments)},_applyToWrappedView:function(e,t){var n=this._getWrappedView();return n===this?r.prototype[e].apply(this,t):n[e].apply(n,t)},_getWrappedView:function(){return this}});return s}),define("views/shared/timerangepicker/Master",["jquery","underscore","module","views/Base","views/shared/timerangepicker/dialog/Master","views/shared/delegates/Popdown","collections/SplunkDsBase","splunk.util","util/console"],function(e,t,n,r,i,s,o,u,a){return r.extend({moduleId:n.id,className:"btn-group",initialize:function(n){var s={timerangeClassName:"btn"};t.defaults(this.options,s),r.prototype.initialize.call(this,n),this.children.dialog=new i(e.extend({model:{timeRange:this.model.timeRange,user:this.model.user,appLocal:this.model.appLocal,application:this.model.application},collection:this.collection},this.options.dialogOptions||{})),this.collection&&this.collection.on("reset",function(){a.log("timerangepicker setting label because of collection reset"),this.setLabel()},this),this.listenToModels(),this.model.timeRange.trigger("prepopulate")},listenToModels:function(){this.model.timeRange.on("change:earliest change:latest",t.debounce(this.timeRangeChange,0),this),this.model.timeRange.on("applied",this.timeRangeApplied,this),this.model.timeRange.on("change:earliest_epoch change:latest_epoch change:earliest change:latest",t.debounce(this.setLabel,0),this),this.model.state.on("change:dispatch.earliest_time change:dispatch.latest_time",t.debounce(this.stateChange,0),this)},stopListeningToModels:function(){this.model.timeRange.off(null,null,this),this.model.state.off(null,null,this)},stateChange:function(){this.stopListeningToModels();var e=this.model.timeRange.get("enableRealTime");this.model.timeRange.clear({silent:!0}),this.model.timeRange.set({enableRealTime:e}),this.model.timeRange.save({earliest:this.model.state.get("dispatch.earliest_time"),latest:this.model.state.get("dispatch.latest_time")},{wait:!0,success:function(e,t){this.listenToModels(),this.setLabel()}.bind(this),error:function(e,t){this.listenToModels(),this.setLabel()}.bind(this)})},timeRangeChange:function(){this.stopListeningToModels(),this.model.state.set({"dispatch.earliest_time":this.model.timeRange.get("earliest"),"dispatch.latest_time":this.model.timeRange.get("latest")}),this.listenToModels()},timeRangeApplied:function(){this.children.popdown.hide(),this.model.state.trigger("applied",{silent:u.normalizeBoolean(this.model.state.get("disable_timerange_trigger"))})},setLabel:function(){var e=this.model.timeRange.generateLabel(this.collection||new o);this.$el.children("a").find(".time-label").text(t(e).t())},render:function(){return this.$el.html(this.compiledTemplate({options:this.options})),this.$(".popdown-dialog").append(this.children.dialog.render().el),this.children.popdown=new s({el:this.el,toggle:"> a",mode:"dialog",attachDialogTo:"body",ignoreClasses:["ui-datepicker","ui-datepicker-header","dropdown-menu"]}),this.children.popdown.on("shown",function(){if(this.children.dialog.$(".accordion-group.active").length){this.children.dialog.onShown();return}var e="presets";this.children.dialog.children[e].$el.closest(".accordion-group").find(".accordion-toggle").first().click(),this.children.dialog.onShown()},this),this.setLabel(),this},template:'                <a class=" splBorder splBorder-nsew splBackground-primary <%- options.timerangeClassName %>" href="#"><span class="time-label"></span><span class="caret"></span></a>                <div class="popdown-dialog">                    <div class="arrow"></div>                </div>                '})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/timerange-picker.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/timerangeview",["require","exports","module","underscore","./mvc","backbone","./basesplunkview","util/console","views/shared/timerangepicker/Master","models/TimeRange","./tokenutils","./utils","splunk.config","./sharedmodels","css!../css/timerange-picker"],function(e,t,n){var r=e("underscore"),i=e("./mvc"),s=e("backbone"),o=e("./basesplunkview"),u=e("util/console"),a=e("views/shared/timerangepicker/Master"),f=e("models/TimeRange"),l=e("./tokenutils"),c=e("./utils"),h=e("splunk.config"),p=e("./sharedmodels");e("css!../css/timerange-picker");var d=o.extend({moduleId:n.id,className:"splunk-timerange",options:{"default":undefined,managerid:null,earliest_time:undefined,latest_time:undefined,preset:undefined,value:undefined},initialize:function(){var e=this;this.configure(),this.settings.enablePush("value"),this.settings.enablePush("earliest_time"),this.settings.enablePush("latest_time"),this._initializeValue();var t=this.settings.get("value");this._state=new s.Model({"dispatch.earliest_time":t!==undefined?t.earliest_time:"","dispatch.latest_time":t!==undefined?t.latest_time:""});var n=p.get("app"),i=p.get("user"),o=p.get("appLocal"),u=this._timesCollection=p.get("times");this._pickerDfd=$.when(u.dfd,i.dfd,o.dfd).done(function(){if(e.settings.get("timepicker"))e.timepicker=e.settings.get("timepicker"),e._state=e.timepicker.model.state,e.settings.unset("timepicker");else{var t=new f;t.save({earliest:e._state.get("dispatch.earliest_time"),latest:e._state.get("dispatch.latest_time")}),e.timepicker=new a({className:"controls",model:{state:e._state,timeRange:t,user:i,appLocal:o,application:n},collection:u})}e._state.on("change:dispatch.earliest_time change:dispatch.latest_time",r.debounce(e._onTimeRangeChange),e)}),this._timesCollection.on("change reset",this._onTimePresetUpdate,this),this.settings.on("change:preset",this._onTimePresetUpdate,this),this.settings.on("change:value",function(t,n,r){e.val(n||{earliest_time:"",latest_time:""})}),this.on("change",function(){e.settings.set("value",e._getTimeRange())}),this.settings.on("change:default",this._onDefaultChange,this),this.bindToComponentSetting("managerid",this._onManagerChange,this),this.settings.get("value")===undefined&&e._onTimePresetUpdate()},_initializeValue:function(){var e=this,t=this.settings.get("value");t!==undefined?this.settings.set({earliest_time:t.earliest_time,latest_time:t.latest_time}):this.settings.get("earliest_time")!==undefined||this.settings.get("latest_time")!==undefined?this.settings.set("value",{earliest_time:this.settings.get("earliest_time"),latest_time:this.settings.get("latest_time")}):this.settings.set({value:undefined,earliest_time:undefined,latest_time:undefined}),this.settings.on("change:value",function(t,n,r){n&&e.settings.set({earliest_time:n.earliest_time,latest_time:n.latest_time})}),this.settings.on("change:earliest_time change:latest_time",r.debounce(function(){var t=r.clone(e.settings.get("value"));t.earliest_time=e.settings.get("earliest_time"),t.latest_time=e.settings.get("latest_time"),e.settings.set("value",t)}),this);if(l.isToken(this.settings.get("value",{tokens:!0}))){var n=l.getTokens(this.settings.get("value",{tokens:!0}))[0],i=function(t){return e.settings.get(t,{tokens:!0})===e.settings.get(t,{tokens:!1})};i("earliest_time")&&this.settings.set("earliest_time","$"+n.namespace+":"+n.name+".earliest_time$",{tokens:!0}),i("latest_time")&&this.settings.set("latest_time","$"+n.namespace+":"+n.name+".latest_time$",{tokens:!0})}this.settings.get("value")===undefined&&this.settings.set("value",this.settings.get("default"))},_onDefaultChange:function(e,t,n){var i=this.settings.previous("default"),s=this.settings.get("default"),o=this.settings.get("value");s!==undefined&&(r.isEqual(o,i)||o===undefined)&&this.settings.set("value",s)},_onTimePresetUpdate:function(){var e=this.settings.get("preset");if(!e)return;this._presetInFlightCancelled=!1;var t=this;$.when(this._pickerDfd).done(function(){var n=t._timesCollection.find(function(t){return t.entry.content.get("label")===e});n?t._presetInFlightCancelled||t.val({earliest_time:n.entry.content.get("earliest_time"),latest_time:n.entry.content.get("latest_time")}):(u.warn('Could not find matching preset "'+e+'" for time range view.'),t.val({earliest_time:"0",latest_time:"now"}))})},_onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.manager=t,t.search&&(this.listenTo(t.search,"change:earliest_time change:latest_time",r.debounce(this._onManagerTimeRangeChange)),this._onManagerTimeRangeChange())},_onManagerTimeRangeChange:function(){var e=this.val();e.earliest_time=this.manager.search.get("earliest_time")||e.earliest_time,e.latest_time=this.manager.search.get("latest_time")||e.latest_time,this._setTimeRange(e)},_onTimeRangeChange:function(e,t,n){(!n||n&&!n._self)&&this.trigger("change",this._getTimeRange(),this)},render:function(){var e=this;return $.when(this._pickerDfd).done(function(){e.timepicker.render(),e.$el.append(e.timepicker.el)}),this},val:function(e){if(arguments.length===0)return this._getTimeRange();e=e||{earliest_time:undefined,latest_time:undefined};var t=this.val();this._setTimeRange(e);var n=this.val();return r.isEqual(n,t)||this.trigger("change",n,this),this._presetInFlightCancelled=!0,this._getTimeRange()},_setTimeRange:function(e){this._state.set({"dispatch.earliest_time":e.earliest_time,"dispatch.latest_time":e.latest_time},{_self:!0})},_getTimeRange:function(){return{earliest_time:this._state.get("dispatch.earliest_time"),latest_time:this._state.get("dispatch.latest_time")}},remove:function(){var e=this;$.when(this._pickerDfd).done(function(){e.timepicker.remove()}),i.Components.revokeInstance(this.id),o.prototype.remove.apply(this,arguments)}});return d}),define("splunkjs/mvc/simpleform/input/timerange",["require","underscore","jquery","./base","../../simplexml/controller","../../mvc","../../timerangeview"],function(e){var t=e("underscore"),n=e("jquery"),r=e("./base"),i=e("../../simplexml/controller"),s=e("../../mvc"),o=e("../../timerangeview"),u={earliest_time:undefined,latest_time:undefined},a=r.extend({events:{"click .remove-timerange-picker a":function(e){e.preventDefault(),this.remove()}},initialize:function(){var e=t.defaults({el:n('<div class="splunk-view"></div>').appendTo(this.el),id:t.uniqueId(this.id+"-input")},this.options);this.picker=new o(e),this.picker.on("change",this.handleChange,this),this.options.settings=this.picker.settings,r.prototype.initialize.call(this),this._isGlobalTimeRangeInput()&&i.getStateModel().on("change:edit",this._onEditStateChange,this)},hasValue:function(){var e=this.settings.get("value")||u,n=this.settings.get("default"),r=this.settings.get("preset");return!t.isEqual(e,u)||!n&&!r},updateValueWithDefault:function(){var e=this.settings.get("default"),t=this.settings.get("preset");return e?this.val(e):t&&this.picker._onTimePresetUpdate(),this},handleChange:function(e,t){e=e||u,this._isGlobalTimeRangeInput()&&(e=this.val(),i.getStateModel().set("default_timerange",{earliestTime:e.earliest_time,latestTime:e.latest_time})),r.prototype.handleChange.apply(this,arguments)},_onEditStateChange:function(e){this._isGlobalTimeRangeInput()&&(e.get("edit")?(n('<div class="remove-timerange-picker"><a href="#"><i class="icon-x-circle"></i></a></div>').appendTo(this.picker.$el),n('<div class="timerange-edit-hint"></div>').html(t('Select default time range above. Time range only applies to <i class="icon-search-thin"></i> Inline Searches.').t()).appendTo(this.picker.$el)):(this.$(".remove-timerange-picker").remove(),this.$(".timerange-edit-hint").remove()))},_isGlobalTimeRangeInput:function(){return this.settings.has("isGlobal")?this.settings.get("isGlobal")===!0:this.settings.get("earliest_time",{tokens:!0})==="$earliest$"&&this.settings.get("latest_time",{tokens:!0})==="$latest$"},remove:function(){this.picker.remove(),s.Components.revokeInstance(this.id),r.prototype.remove.apply(this,arguments),this._isGlobalTimeRangeInput()&&(i.getStateModel().off(null,null,this),i.getStateModel().set("default_timerange",null))},getValue:function(){return this.picker.val()},setValue:function(e){return this.picker.val(e)},render:function(){return this.renderLabel(),this.picker.render(),this._onEditStateChange(i.getStateModel()),this.handleChange(this.val(),this.picker),this},_getWrappedView:function(){return this.picker}});return a}),define("views/shared/documentcontrols/dialogs/TitleDescriptionDialog",["underscore","backbone","module","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/FlashMessages"],function(e,t,n,r,i,s){return r.extend({moduleId:n.id,initialize:function(t){r.prototype.initialize.apply(this,arguments),this.model={inmem:this.model.clone(),report:this.model},this.children.flashMessage=new s({model:this.model.inmem}),this.children.titleField=new i({controlType:"Label",controlOptions:{modelAttribute:"name",model:this.model.inmem.entry},label:e("Title").t()}),this.children.descriptionField=new i({controlType:"Textarea",controlOptions:{modelAttribute:"description",model:this.model.inmem.entry.content,placeholder:e("optional").t()},label:e("Description").t()}),this.on("hidden",function(){this.model.inmem.get("updated")>this.model.report.get("updated")&&this.model.report.entry.content.set("description",this.model.inmem.entry.content.get("description"))},this)},events:$.extend({},r.prototype.events,{"click .btn-primary":function(e){this.model.inmem.save({},{success:function(e,t){this.hide()}.bind(this)}),e.preventDefault()}}),render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Edit Description").t()),this.$(r.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.$(r.BODY_FORM_SELECTOR).append(this.children.titleField.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.descriptionField.render().el),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_SAVE),this}})}),define("views/shared/documentcontrols/dialogs/DeleteDialog",["underscore","backbone","module","models/Report","views/shared/Modal","views/shared/FlashMessages","uri/route","splunk.util"],function(e,t,n,r,i,s,o,u){return i.extend({moduleId:n.id,initialize:function(e){i.prototype.initialize.apply(this,arguments),this.children.flashMessage=new s({model:this.model.report})},events:$.extend({},i.prototype.events,{"click .btn-primary":function(e){var t=this.model.report.destroy({wait:!0});$.when(t).then(function(){this.hide(),this.options.deleteRedirect&&(this.model.report.isAlert()?window.location=o.alerts(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app")):window.location=o.reports(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app")))}.bind(this)),e.preventDefault()}}),render:function(){return this.$el.html(i.TEMPLATE),this.$(i.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.model.report.isAlert()?this.$(i.HEADER_TITLE_SELECTOR).html(e("Delete Alert").t()):this.$(i.HEADER_TITLE_SELECTOR).html(e("Delete Report").t()),this.$(i.BODY_SELECTOR).append("<span>"+u.sprintf(e("Are you sure you want to delete %s?").t(),"<em>"+e.escape(this.model.report.entry.get("name"))+"</em>")+"</span>"),this.$(i.FOOTER_SELECTOR).append(i.BUTTON_CANCEL),this.$(i.FOOTER_SELECTOR).append(this.compiledTemplate({_:e})),this},template:'            <a href="#" class="btn btn-primary"><%- _("Delete").t() %></a>        '})}),define("views/dashboards/table/controls/ConvertSuccess",["jquery","underscore","module","views/shared/Modal","uri/route","views/shared/documentcontrols/dialogs/permissions_dialog/Master"],function(e,t,n,r,i,s){return r.extend({moduleId:n.id,options:{refreshOnDismiss:!1},initialize:function(){r.prototype.initialize.apply(this,arguments),this.options.refreshOnDismiss&&this.on("hide hidden",function(){window.location.reload()})},events:e.extend({},r.prototype.events,{"click .edit-perms":function(n){n.preventDefault();var r=this,i=r.model,o=r.collection.roles;t.defer(function(){var t=new s({model:{document:i.dashboard,nameModel:i.dashboard.entry.content,user:i.user},collection:o,nameLabel:"Dashboard",nameKey:"label",onHiddenRemove:!0});r.options.refreshOnDismiss&&t.on("hide hidden",function(){window.location.reload()}),e("body").append(t.render().el),t.show()}),r.options.refreshOnDismiss&&r.off("hide hidden"),r.hide(),r.remove()}}),render:function(){this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(t("Dashboard has been converted.").t()),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL);var e=this.model.dashboard.entry.acl.get("app"),n=this.model.dashboard.entry.get("name"),s=i.page(this.model.application.get("root"),this.model.application.get("locale"),e,n),o=i.page(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),this.model.dashboard.entry.get("name")),u="/manager/"+e+"/data/ui/views/"+n+"?action=edit&ns="+e+"&redirect_override="+encodeURIComponent(o);return this.$(r.BODY_FORM_SELECTOR).append(t.template(this.messageTemplate,{dashboardLink:s,_:t})),this.$(r.FOOTER_SELECTOR).append(t.template(this.buttonTemplate,{dashboardLink:s,editLink:u,_:t})),this.$(r.FOOTER_SELECTOR).append(""),this},buttonTemplate:'<a href="<%= editLink %>" class="btn edit-panels"><%- _("Edit HTML").t() %></a><a href="<%= dashboardLink %>" class="btn btn-primary modal-btn-primary"><%- _("View").t() %></a>',messageTemplate:'<p><%- _("You may now view your dashboard, change additional settings, or edit the HTML.").t() %></p><p><%- _("Additional Settings").t() %>:<ul><li><a href="#" class="edit-perms"><%- _("Permissions").t() %></a></li></ul></p>'})}),define("views/shared/delegates/PairedTextControls",["jquery","underscore","backbone","views/shared/controls/TextControl","views/shared/delegates/Base"],function(e,t,n,r,i){return i.extend({transformFunction:undefined,initialize:function(e){e=e||{},this.sourceDelegate=e.sourceDelegate,this.destDelegate=e.destDelegate,this.transformFunction=e.transformFunction;if(!(this.sourceDelegate instanceof r&&this.destDelegate instanceof r))throw new Error("SourceDelegate and destDelegate must be TextControls");this.enablePairing()},enablePairing:function(){this.sourceDelegate.on("keyup",this.sourceChangeHandler,this),this.destDelegate.on("keyup",this.destChangeHandler,this)},disablePairing:function(){this.sourceDelegate.off("keyup",this.sourceChangeHandler,this)},sourceChangeHandler:function(e,t){var n=t;this.transformFunction&&(n=this.transformFunction(t)),this.destDelegate.setValue(n)},destChangeHandler:function(e,t){e.keyCode!=9&&e.keyCode!=16&&(this.disablePairing(),this.destDelegate.off("keyup",this.destChangeHandler))}})}),define("views/dashboards/table/controls/ConvertDashboard",["underscore","jquery","module","views/shared/Modal","views/shared/controls/ControlGroup","models/Base","models/Dashboard","views/shared/FlashMessages","views/dashboards/table/controls/ConvertSuccess","views/shared/delegates/PairedTextControls","views/shared/controls/TextControl","util/splunkd_utils","uri/route","util/xml_utils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d={NEW:0,REPLACE:1};return r.extend({moduleId:n.id,initialize:function(){var t=this;r.prototype.initialize.apply(this,arguments),this.model.perms=new s({perms:"private"}),this.model.convertMode=new s({mode:d.NEW}),this.children.flashMessages=new u({model:{dashboard:this.model.dashboard,dashboardMeta:this.model.dashboard.meta}}),this.model.dashboard.meta.set({label:this.model.dashboard.meta.get("label")+e(" HTML").t()}),this.children.titleTextControl=new l({modelAttribute:"label",model:this.model.dashboard.meta,placeholder:"optional",save:!1}),this.children.filenameTextControl=new l({modelAttribute:"name",model:this.model.dashboard.entry.content,save:!1}),this.children.filenameTextControl.setValue(c.nameFromString(this.model.dashboard.meta.get("label"))),this.pairedTextControls=new f({sourceDelegate:this.children.titleTextControl,destDelegate:this.children.filenameTextControl,transformFunction:c.nameFromString}),this.children.mode=new i({controlType:"SyntheticRadio",controlClass:"controls-halfblock",controlOptions:{className:"btn-group btn-group-2",modelAttribute:"mode",model:this.model.convertMode,items:[{label:e("Create New").t(),value:d.NEW},{label:e("Replace Current").t(),value:d.REPLACE}],save:!1},label:e("Dashboard").t(),help:e("Recommended").t()}),this.children.title=new i({controls:this.children.titleTextControl,label:e("Title").t()}),this.children.filename=new i({controls:this.children.filenameTextControl,label:e("ID").t(),help:e("Can only contain letters, numbers and underscores.").t(),tooltip:e("The ID is used as the filename on disk. Cannot be changed later.").t()}),this.children.description=new i({controlType:"Textarea",controlOptions:{modelAttribute:"description",model:this.model.dashboard.meta,placeholder:e("optional").t(),save:!1},label:e("Description").t()}),this.children.permissions=new i({controlType:"SyntheticRadio",controlClass:"controls-halfblock",controlOptions:{className:"btn-group btn-group-2",modelAttribute:"perms",model:this.model.perms,items:[{label:e("Private").t(),value:"private"},{label:e("Shared").t(),value:"shared"}],save:!1},label:e("Permissions").t()}),this.model.convertMode.on("change:mode",function(){t.children.flashMessages.flashMsgCollection.reset(),t.model.convertMode.get("mode")===d.NEW?(t.children.title.show(),t.children.filename.show(),t.children.description.show(),t.children.permissions.show()):(t.children.flashMessages.flashMsgCollection.add({type:"warning",html:e("This change cannot be undone.").t()}),t.children.title.hide(),t.children.filename.hide(),t.children.description.hide(),t.children.permissions.hide())})},events:t.extend({},r.prototype.events,{"click a.modal-btn-primary":function(e){e.preventDefault(),this.submit()}}),submit:function(){var n=this,r=n.model.dashboard,i=n.model.currentDashboard,s=n.model.application,o=n.model.user,u=h.page(s.get("root"),s.get("locale"),i.entry.acl.get("app"),i.entry.get("name"))+"/converttohtml",f=n.collection&&n.collection.dashboards;if(this.model.convertMode.get("mode")===d.NEW){r.meta.validate();if(r.meta.isValid()){var l=r.meta.toJSON();r.entry.content.set("eai:data",i.entry.content.get("eai:data")),r.entry.content.set("eai:type","views"),r.meta.set(l),r.meta.apply(),t.post(u,{xmlString:r.entry.content.get("eai:data"),newViewID:r.entry.content.get("name")}).done(function(t){r.entry.content.set("eai:type","html"),r.entry.content.set("eai:data",t),r.save({},{data:s.getPermissions(n.model.perms.get("perms"))}).done(function(){f&&n.collection.dashboards.add(n.model.dashboard),e.defer(function(){var e=new a({model:{dashboard:r,application:s,user:o},collection:n.collection});e.render().show()}),n.hide(),n.remove()})})}}else t.post(u,{xmlString:i.entry.content.get("eai:data")}).done(function(t){i.entry.content.set("eai:type","html"),i.entry.content.set("eai:data",t),i.save().done(function(){f&&i.trigger("updateCollection"),e.defer(function(){var e=new a({model:{dashboard:i,application:s},collection:n.collection,refreshOnDismiss:!f});e.render().show()}),n.hide(),n.remove()})})},render:function(){var t=h.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.html.dashboard");return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Convert Dashboard to HTML").t()),this.$(r.BODY_SELECTOR).prepend(this.children.flashMessages.render().el),this.$(r.BODY_SELECTOR).append("<p>"+e("HTML dashboards cannot be edited using Splunk's visual editors.").t()+"<br />"+e("Integrated PDF generation is not available for HTML dashboards.").t()+"<br />"+"<a href="+t+">"+e("Learn More").t()+' <i class="icon-external"></i></a></p>'),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.$(r.BODY_FORM_SELECTOR).append(this.children.mode.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.title.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.filename.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.description.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.permissions.render().el),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+e("Convert Dashboard").t()+"</a>"),this}})}),define("models/services/ScheduledView",["jquery","underscore","backbone","models/SplunkDBase","models/Base","backbone_validation"],function(e,t,n,r,i,s){var o=r.extend({defaults:{is_scheduled:!1,"action.email.subject":"Splunk Alert: $name$",cron_schedule:"0 6 * * 1"},initialize:function(){r.prototype.initialize.apply(this,arguments)},url:function(){return"scheduled/views/"+this.viewName},findByName:function(e,n,r){this.viewName=e,this.id="scheduled/views/"+e;var i=this.fetch({data:{app:n,owner:r}});return i.done(t.bind(this.applyDefaultsIfNotScheduled,this)),i},applyDefaultsIfNotScheduled:function(){this.entry.content.get("is_scheduled")||this.entry.content.set(this.defaults)}});return o.Entry=o.Entry.extend({}),o.Entry.Content=o.Entry.Content.extend({validation:{"action.email.to":[{fn:"validateEmailList"}],"action.email.subject":{required:!0,msg:t("Subject is empty").t()}},validateEmailList:function(e,n,r){if(r.is_scheduled){if(!e)return t("Email Address list is empty").t();if(t(e.split(/\s*,\s*/)).any(function(e){return!s.patterns.email.test(e)}))return t("Email Address list is invalid").t()}}}),o}),define("views/dashboards/table/controls/SchedulePDF",["module","jquery","underscore","backbone","util/console","util/pdf_utils","models/services/ScheduledView","models/Cron","views/Base","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/ScheduleSentence","views/shared/FlashMessages","uri/route"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=a.extend({render:function(){this.el.innerHTML||this.$el.html(n.template(this.template,{label:this.options.label||"",controlClass:this.options.controlClass||"",body:n.template(this.options.body||"")(this.model?this.model.toJSON?this.model.toJSON():this.model:{})}));var e=this.$(".controls");return n.each(this.options.children,function(t){t.render().appendTo(e)}),this},template:'<label class="control-label"><%- label %></label><div class="controls <%- controlClass %>"><%= body %></div>'});return f.extend({moduleId:e.id,className:"modal schedule-pdf",initialize:function(){f.prototype.initialize.apply(this,arguments),this.model.inmem=new o.Entry.Content(this.model.scheduledView.entry.content.toJSON()),this.model.inmem.get("action.email.papersize")||s.getEmailAlertSettings().done(n.bind(function(e){this.model.inmem.get("action.email.papersize")||this.model.inmem.set("action.email.papersize",e.entry.content.get("reportPaperSize"))},this)),this.model.inmem.get("action.email.paperorientation")||s.getEmailAlertSettings().done(n.bind(function(e){this.model.inmem.get("action.email.paperorientation")||this.model.inmem.set("action.email.paperorientation",e.entry.content.get("reportPaperOrientation"))},this));var e=this.model.cron=u.createFromCronString(this.model.inmem.get("cron_schedule")||"0 6 * * 1");this.listenTo(e,"change",function(){this.model.inmem.set("cron_schedule",e.getCronString())},this);var t=p.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.alert.email");this.children.flashMessages=new h({model:{scheduledView:this.model.scheduledView,content:this.model.inmem}}),this.children.name=new l({controlType:"Label",controlOptions:{modelAttribute:"label",model:this.model.dashboard.entry.content},label:n("Dashboard").t()}),this.children.schedule=new l({controlType:"SyntheticCheckbox",controlOptions:{modelAttribute:"is_scheduled",model:this.model.inmem,save:!1},label:n("Schedule PDF").t()}),this.conditionalControls=[this.children.scheduleSentence=new c({model:{cron:this.model.cron},lineOneLabel:n("Schedule").t(),popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}}),this.children.emailAddresses=new l({controlType:"Textarea",controlOptions:{modelAttribute:"action.email.to",model:this.model.inmem,save:!1},label:n("Email Addresses").t(),help:n("Comma separated list.").t()+"<br/>"+n("Email must be configured in System&nbsp;Settings > Alert&nbsp;Email&nbsp;Settings.").t()+" <a href="+t+">"+n("Learn More").t()+' <i class="icon-external"></i></a>'}),this.children.emailSubject=new l({controlType:"Text",controlOptions:{modelAttribute:"action.email.subject",model:this.model.inmem,save:!1},label:n("Email Subject Line").t()}),this.children.paperSize=new l({className:"control-group",controlType:"SyntheticSelect",controlOptions:{modelAttribute:"action.email.papersize",model:this.model.inmem,items:[{label:n("A2").t(),value:"a2"},{label:n("A3").t(),value:"a3"},{label:n("A4").t(),value:"a4"},{label:n("A5").t(),value:"a5"},{label:n("Letter").t(),value:"letter"},{label:n("Legal").t(),value:"legal"}],save:!1,toggleClassName:"btn",popdownOptions:{attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"}},label:n("Paper Size").t()}),this.children.paperLayout=new l({controlType:"SyntheticRadio",controlOptions:{modelAttribute:"action.email.paperorientation",model:this.model.inmem,items:[{label:n("Portrait").t(),value:"portrait"},{label:n("Landscape").t(),value:"landscape"}],save:!1},label:n("Paper Layout").t()}),this.children.previewLinks=new d({body:'<div class="preview-actions"><div class="test-email"><a href="#" class="action-send-test">'+n("Send Test Email").t()+"</a></div> "+'<a href="#" class="action-preview">'+n("Preview PDF").t()+"</a>"+"</div>"})],this.model.inmem.on("change:is_scheduled",this._toggle,this)},events:t.extend({},f.prototype.events,{"click .action-send-test":function(e){e.preventDefault(),this.model.inmem.validate();if(this.model.inmem.isValid()){var t=this.$(".test-email"),r=this.children.flashMessages.flashMsgCollection;t.html(n("Sending...").t()),s.sendTestEmail(this.model.dashboard.entry.get("name"),this.model.dashboard.entry.acl.get("app"),this.model.inmem.get("action.email.to"),{paperSize:this.model.inmem.get("action.email.papersize"),paperOrientation:this.model.inmem.get("action.email.paperorientation")}).done(function(){t.html('<i class="icon-check"></i> '+n("Email sent.").t())}).fail(function(e){t.html('<span class="error"><i class="icon-warning-sign"></i> '+n("Failed!").t()+"</span>"),e&&r.add({type:"warning",html:n("Sending the test email failed: ").t()+n.escape(e)})}).always(function(){setTimeout(function(){t.html('<a href="#" class="action-send-test">'+n("Send Test Email").t()+"</a>")},5e3)})}},"click .action-preview":function(e){e.preventDefault();var t="",n=this.model.inmem.get("action.email.paperorientation"),r=this.model.inmem.get("action.email.papersize")||"a2";n==="landscape"&&(t="-landscape"),s.getRenderURL(this.model.dashboard.entry.get("name"),this.model.dashboard.entry.acl.get("app"),{"paper-size":r+t}).done(function(e){window.open(e)})},"click .modal-btn-primary":function(e){e.preventDefault(),this.model.inmem.validate();if(this.model.inmem.isValid())if(this.model.inmem.get("is_scheduled")==0&&this.model.scheduledView.entry.content.get("is_scheduled")===!1)this.hide();else{this.model.scheduledView.entry.content.set(this.model.inmem.toJSON());var t=this;this.model.scheduledView.save({},{success:function(){t.hide()}})}}}),_toggle:function(){n.chain(this.conditionalControls).pluck("$el").invoke(this.model.inmem.get("is_scheduled")?"show":"hide")},render:function(){return this.$el.html(f.TEMPLATE),this.$(f.HEADER_TITLE_SELECTOR).html(n("Edit PDF Schedule").t()),this.$(f.BODY_SELECTOR).prepend(this.children.flashMessages.render().el),this.$(f.BODY_SELECTOR).append(f.FORM_HORIZONTAL),this.$(f.BODY_FORM_SELECTOR).append(this.children.name.render().el),this.$(f.BODY_FORM_SELECTOR).append(this.children.schedule.render().el),n.each(this.conditionalControls,function(e){this.$(f.BODY_FORM_SELECTOR).append(e.render().el)},this),this.$(f.FOOTER_SELECTOR).append(f.BUTTON_CANCEL),this.$(f.FOOTER_SELECTOR).append(f.BUTTON_SAVE),this._toggle(),this}})}),define("views/dashboards/table/controls/CloneSuccess",["underscore","module","views/shared/Modal","uri/route","views/shared/documentcontrols/dialogs/permissions_dialog/Master","views/dashboards/table/controls/SchedulePDF","models/services/ScheduledView"],function(e,t,n,r,i,s,o){return n.extend({moduleId:t.id,events:$.extend({},n.prototype.events,{"click .edit-perms":function(t){t.preventDefault();var n=this.model,r=this.collection.roles;e.defer(function(){var e=new i({model:{document:n.dashboard,nameModel:n.dashboard.entry.content,user:n.user},collection:r,nameLabel:"Dashboard",nameKey:"label",onHiddenRemove:!0});$("body").append(e.render().el),e.show()}),this.hide(),this.remove()},"click .schedule-pdf":function(t){t.preventDefault();var n=this.model,r=function(){var e=new s({model:{scheduledView:n.scheduledView,dashboard:n.dashboard,application:n.application,appLocal:n.appLocal},onHiddenRemove:!0});$("body").append(e.render().el),e.show()};if(!this.model.scheduledView){var i=n.scheduledView=new o,u=i.findByName(this.model.dashboard.entry.get("name"),this.model.application.get("app"),this.model.application.get("owner"));u.done(r)}else e.defer(r);this.hide(),this.remove()}}),render:function(){this.$el.html(n.TEMPLATE),this.$(n.HEADER_TITLE_SELECTOR).html(e("Dashboard has been cloned.").t()),this.$(n.BODY_SELECTOR).append(n.FORM_HORIZONTAL);var t=r.page(this.model.application.get("root"),this.model.application.get("locale"),this.model.dashboard.entry.acl.get("app"),this.model.dashboard.entry.get("name")),i=this.model.dashboard.entry.acl.get("can_change_perms"),s=this.model.user.canScheduleSearch()&&!this.model.user.isFree()&&(this.model.dashboard.isSimpleXML()||this.model.dashboard.isAdvanced()&&this.model.state.get("pdfgen_type")==="deprecated");return this.$(n.BODY_FORM_SELECTOR).append(e.template(this.messageTemplate,{dashboardLink:t,canChangePerms:i,canSchedule:s})),this.$(n.FOOTER_SELECTOR).append(e.template(this.buttonTemplate,{dashboardLink:t,_:e})),this.$(n.FOOTER_SELECTOR).append(""),this},buttonTemplate:'<a href="<%= dashboardLink %>/edit" class="btn edit-panels"><%- _("Edit Panels").t() %></a><a href="<%= dashboardLink %>" class="btn btn-primary modal-btn-primary"><%- _("View").t() %></a>',messageTemplate:'<p><%- _("You may now view your dashboard, change additional settings, or edit the panels.").t() %></p><p><% if(canChangePerms || canSchedule){ %><%- _("Additional Settings").t() %>:<ul><% if(canChangePerms) { %><li><a href="#" class="edit-perms"><%- _("Permissions").t() %><% } %></a></li><% if(canSchedule) { %><li><a href="#" class="schedule-pdf"><%- _("Schedule PDF Delivery").t() %><% } %></a></li></ul><% } %></p>'})}),define("views/dashboards/table/controls/CloneDashboard",["underscore","module","views/shared/Modal","views/shared/controls/ControlGroup","models/Base","models/Dashboard","views/shared/FlashMessages","util/splunkd_utils","views/dashboards/table/controls/CloneSuccess","views/shared/delegates/PairedTextControls","views/shared/controls/TextControl"],function(e,t,n,r,i,s,o,u,a,f,l){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.perms=new i({clonePermissions:!1}),this.children.flashMessages=new o({model:{dashboard:this.model.dashboard,dashboardMeta:this.model.dashboard.meta}}),this.model.dashboard.meta.set({label:this.model.dashboard.meta.get("label")+e(" Clone").t()}),this.children.titleTextControl=new l({modelAttribute:"label",model:this.model.dashboard.meta,placeholder:"optional",save:!1}),this.children.filenameTextControl=new l({modelAttribute:"name",model:this.model.dashboard.entry.content,save:!1}),this.children.filenameTextControl.setValue(u.nameFromString(this.model.dashboard.meta.get("label"))),this.pairedTextControls=new f({sourceDelegate:this.children.titleTextControl,destDelegate:this.children.filenameTextControl,transformFunction:u.nameFromString}),this.children.title=new r({controls:this.children.titleTextControl,label:e("Title").t()}),this.children.filename=new r({controls:this.children.filenameTextControl,label:e("ID").t(),help:e("Can only contain letters, numbers and underscores.").t(),tooltip:e("The ID is used as the filename on disk. Cannot be changed later.").t()}),this.children.description=new r({controlType:"Textarea",controlOptions:{modelAttribute:"description",model:this.model.dashboard.meta,placeholder:e("optional").t(),save:!1},label:e("New Description").t()}),this.children.permissions=new r({controlType:"SyntheticRadio",controlClass:"controls-halfblock",controlOptions:{className:"btn-group btn-group-2",modelAttribute:"clonePermissions",model:this.model.perms,items:[{label:e("Private").t(),value:!1},{label:e("Clone").t(),value:!0}],save:!1},label:e("Permissions").t()})},events:$.extend({},n.prototype.events,{"click a.modal-btn-primary":function(e){e.preventDefault(),this.submit()}}),createSuccess:function(){this.collection&&this.collection.dashboards&&this.collection.dashboards.add(this.model.dashboard),e.defer(function(){var e=new a({model:{dashboard:this.model.dashboard,application:this.model.application,scheduledView:this.model.scheduledView,appLocal:this.model.appLocal,state:this.model.state,user:this.model.user},collection:this.collection});e.render().show()}.bind(this)),this.hide(),this.remove()},submit:function(){var e=this.model.dashboard;e.meta.validate();if(e.meta.isValid()){e.entry.content.get("eai:type")==="views"&&e.meta.apply();var t=this.model.perms.get("clonePermissions"),n={app:this.model.application.get("app")};n.owner=t&&this.model.acl.get("sharing")!==u.USER?u.NOBODY:this.model.application.get("owner"),e.save({},{data:n,success:function(n,r){if(t){var i=this.model.acl.toDataPayload();i.owner=this.model.application.get("owner"),e.acl.save({},{data:i,success:function(e,t){this.createSuccess()}.bind(this)})}else this.createSuccess()}.bind(this)})}},render:function(){this.$el.html(n.TEMPLATE),this.$(n.HEADER_TITLE_SELECTOR).html(e("Clone").t()),this.$(n.BODY_SELECTOR).prepend(this.children.flashMessages.render().el),this.$(n.BODY_SELECTOR).append(n.FORM_HORIZONTAL),this.$(n.BODY_FORM_SELECTOR).append(this.children.title.render().el),this.$(n.BODY_FORM_SELECTOR).append(this.children.filename.render().el),this.$(n.BODY_FORM_SELECTOR).append(this.children.description.render().el);var t=this.model.acl.get("sharing");return(t===u.APP&&this.model.dashboard.entry.acl.get("can_share_app")||t===u.GLOBAL&&this.model.dashboard.entry.acl.get("can_share_global"))&&this.$(n.BODY_FORM_SELECTOR).append(this.children.permissions.render().el),this.$(n.FOOTER_SELECTOR).append(n.BUTTON_CANCEL),this.$(n.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+e("Clone Dashboard").t()+"</a>"),this}})}),define("splunkjs/mvc/simplexml/dialog/dashboardtitle",["underscore","backbone","module","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/FlashMessages"],function(e,t,n,r,i,s){return r.extend({moduleId:n.id,initialize:function(t){r.prototype.initialize.apply(this,arguments),this.workingModel=this.model.clone(),this.children.flashMessage=new s({model:this.model}),this.children.titleField=new i({controlType:"Text",controlOptions:{modelAttribute:"label",model:this.workingModel,placeholder:"optional"},label:e("Title").t()}),this.children.descriptionField=new i({controlType:"Textarea",controlOptions:{modelAttribute:"description",model:this.workingModel,placeholder:"optional"},label:e("Description").t()})},events:$.extend({},r.prototype.events,{"click .btn-primary":function(e){this.model.set("label",this.workingModel.get("label")),this.model.set("description",this.workingModel.get("description")),this.hide(),e.preventDefault()}}),render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Edit Title or Description").t()),this.$(r.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.$(r.BODY_FORM_SELECTOR).append(this.children.titleField.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.descriptionField.render().el),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_SAVE),this}})}),define("splunkjs/mvc/simplexml/editdashboard/editmenu",["module","jquery","underscore","models/classicurl","views/shared/PopTart","views/shared/documentcontrols/dialogs/TitleDescriptionDialog","views/shared/documentcontrols/dialogs/permissions_dialog/Master","views/shared/documentcontrols/dialogs/DeleteDialog","uri/route","bootstrap.modal","models/Dashboard","views/dashboards/table/controls/ConvertDashboard","views/dashboards/table/controls/CloneDashboard","views/dashboards/table/controls/SchedulePDF","views/shared/dialogs/TextDialog","splunk.util","../dialog/dashboardtitle","models/services/ScheduledView","../../utils","models/ACLReadOnly"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){return i.extend({moduleId:e.id,className:"dropdown-menu",initialize:function(){i.prototype.initialize.apply(this,arguments);var e={button:!0,showOpenActions:!0,deleteRedirect:!1};n.defaults(this.options,e)},events:{"click a.edit-panels":function(e){e.preventDefault(),this.hide(),this.remove(),this.model.state.set("edit",!0)},"click a.schedule-pdf":function(e){e.preventDefault();if(t(e.currentTarget).is(".disabled"))return;this.hide(),this.remove();var n=new p({model:{scheduledView:this.model.scheduledView,dashboard:this.model.dashboard,application:this.model.application,appLocal:this.model.state.appLocal},onHiddenRemove:!0});n.render().appendTo(t("body")),n.show()},"click a.delete":function(e){e.preventDefault(),this.hide(),this.remove();var t=new d({id:"modal-delete-dashboard"});t.dialogShown=function(){this.trigger("show"),n.debounce(function(){this.$(".btn-primary:first").focus()}.bind(this),0)();return},t.settings.set("primaryButtonLabel",n("Delete").t()),t.settings.set("cancelButtonLabel",n("Cancel").t()),t.settings.set("titleLabel",n("Delete").t()),t.setText(v.sprintf(n("Are you sure you want to delete %s?").t(),"<em>"+n.escape(this.model.state.get("label")!==""?this.model.state.get("label"):this.model.dashboard.entry.get("name"))+"</em>")),t.render().appendTo(document.body),t.once("click:primaryButton",function(){this.model.dashboard.destroy().done(function(){var e=y.getPageInfo();y.redirect(a.page(e.root,e.locale,e.app,"dashboards"))})},this),t.on("hidden",function(){t.remove()},this),t.show()},"click a.edit-title-desc":function(e){e.preventDefault(),this.hide(),this.remove(),this.children.titleDialog=new m({model:this.model.state,onHiddenRemove:!0}),t("body").append(this.children.titleDialog.render().el),this.children.titleDialog.show()},"click a.edit-perms":function(e){e.preventDefault(),this.hide(),this.remove(),this.children.permissionsDialog=new o({model:{document:this.model.dashboard,nameModel:this.model.dashboard.entry.content,user:this.model.state.user},collection:this.collection,nameLabel:"Dashboard",nameKey:"label",onHiddenRemove:!0}),t("body").append(this.children.permissionsDialog.render().el),this.children.permissionsDialog.show()},"click a.convert-to-html":function(e){e.preventDefault(),this.hide(),this.remove();var n=new l;n.meta.set(this.model.dashboard.meta.toJSON());var r=this.children.convertDialog=new c({model:{dashboard:n,currentDashboard:this.model.dashboard,application:this.model.application,user:this.model.state.user},collection:{roles:this.collection},onHiddenRemove:!0});t("body").append(r.render().el),r.show()},"click a.clone":function(e){e.preventDefault(),this.hide(),this.remove();var n=new l;n.fetch({success:function(){this.model.dashboard.entry.content.get("eai:type")==="html"?n.setHTML(this.model.dashboard.entry.content.get("eai:data")):n.setXML(this.model.dashboard.entry.content.get("eai:data")),n.meta.set(this.model.dashboard.meta.toJSON());var e=this.children.cloneDialog=new h({model:{dashboard:n,acl:new b(t.extend(!0,{},this.model.dashboard.entry.acl.toJSON())),application:this.model.application,appLocal:this.model.state.appLocal,state:this.model.state,user:this.model.state.user},collection:{roles:this.collection},onHiddenRemove:!0});t("body").append(e.render().el),e.show()}.bind(this)})}},render:function(){var e=this.model.application.toJSON(),t={dashboard:this.model.dashboard.isDashboard(),editLinkViewMode:a.manager(e.root,e.locale,e.app,["data","ui","views",e.page],{data:{action:"edit",ns:e.app,redirect_override:a.page(e.root,e.locale,e.app,e.page)}}),editLinkEditMode:a.manager(e.root,e.locale,e.app,["data","ui","views",e.page],{data:{action:"edit",ns:e.app,redirect_override:a.page(e.root,e.locale,e.app,e.page)+"/edit"}}),dashboardType:this.model.dashboard.getViewType(),editable:this.model.state.get("editable"),canWrite:this.model.dashboard.entry.acl.canWrite(),canCangePerms:this.model.dashboard.entry.acl.get("can_change_perms"),canEditHtml:this.model.state.user.canEditViewHtml(),removable:this.model.dashboard.entry.acl.get("removable"),isXML:this.model.dashboard.isXML(),isForm:this.model.dashboard.isForm(),isSimpleXML:this.model.dashboard.isSimpleXML(),isHTML:this.model.dashboard.isHTML(),canSchedulePDF:this.model.state.user.canScheduleSearch()&&!this.model.state.user.isFree()&&(this.model.dashboard.isSimpleXML()||this.model.dashboard.isAdvanced()&&this.model.state.get("pdfgen_type")==="deprecated"),isPdfServiceAvailable:this.model.state.get("pdf_available"),showAddTRP:!this.model.state.get("default_timerange"),_:n},r=this.compiledTemplate(t);return this.$el.html(i.prototype.template_menu),this.$el.append(r),this},template:'                <% if (canWrite && (editable || (!isHTML || canEditHtml) || (isSimpleXML && canEditHtml))) { %>                    <ul class="first-group">                        <% if(editable) { %>                        <li><a href="#" class="edit-panels"><%- _("Edit Panels").t() %></a></li>                        <% } %>                        <% if (!isHTML || canEditHtml) { %>                        <li><a href="<%- editLinkViewMode %>" class="edit-source"><%- _("Edit Source").t() %> <span class="dashboard-source-type"><%= dashboardType %></span></a></li>                        <% } %>                        <% if (isSimpleXML && canEditHtml) { %>                        <li><a href="#" class="convert-to-html"><%- _("Convert to HTML").t() %></a></li>                        <% } %>                    </ul>                    <% } %>                    <% if(canCangePerms || (canWrite && isXML) || canSchedulePDF) { %>                    <ul class="second-group">                        <% if(isXML && canWrite) { %>                        <li><a href="#" class="edit-title-desc"><%- _("Edit Title or Description").t() %></a></li>                        <% } %>                        <% if(canCangePerms) { %>                            <li><a href="#" class="edit-perms"><%- _("Edit Permissions").t() %></a></li>                        <% } %>                        <% if(canSchedulePDF) { %>                        <li>                        <% if(isForm) {%>                            <a class="schedule-pdf disabled" href="#" title="<%- _("You cannot schedule PDF delivery for a dashboard with form elements.").t() %>">                        <% } else { %>                            <a class="schedule-pdf" href="#">                        <% } %>                                <%- _("Schedule PDF Delivery").t() %>                            </a>                        </li>                        <% } %>                    </ul>                    <% } %>                    <% if ((!isHTML || canEditHtml) || (canWrite && removable)) { %>                    <ul class="third-group">                        <% if (!isHTML || canEditHtml) { %>                        <li><a href="#" class="clone"><%- _("Clone").t() %></a></li>                        <% } %>                        <% if(canWrite && removable) { %>                        <li><a href="#" class="delete"><%- _("Delete").t() %></a></li>                        <% } %>                    </ul>                <% } %>            '})}),define("splunkjs/mvc/simplexml/editdashboard/moreinfomenu",["module","jquery","underscore","models/classicurl","views/shared/PopTart","views/shared/documentcontrols/dialogs/TitleDescriptionDialog","views/shared/documentcontrols/dialogs/permissions_dialog/Master","views/shared/documentcontrols/dialogs/DeleteDialog","uri/route","bootstrap.modal","util/splunkd_utils","views/dashboards/table/controls/SchedulePDF","models/services/ScheduledView","models/Cron"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){return i.extend({moduleId:e.id,className:"dropdown-menu more-info popdown-dialog",initialize:function(){i.prototype.initialize.apply(this,arguments);var e={button:!0,showOpenActions:!0,deleteRedirect:!1};n.defaults(this.options,e)},events:{"click .edit-schedule":function(e){e.preventDefault(),this.hide(),this.remove(),this.children.schedulePDF=new c({model:{scheduledView:this.model.scheduledView,dashboard:this.model.dashboard,application:this.model.application,appLocal:this.model.state.appLocal},onHiddenRemove:!0}),t("body").append(this.children.schedulePDF.render().el),this.children.schedulePDF.show()},"click a.edit-permissions":function(e){e.preventDefault(),this.hide(),this.remove(),this.children.permissionsDialog=new o({model:{document:this.model.dashboard,nameModel:this.model.dashboard.entry.content,user:this.model.state.user},collection:this.collection,nameLabel:"Dashboard",nameKey:"label",onHiddenRemove:!0}),t("body").append(this.children.permissionsDialog.render().el),this.children.permissionsDialog.show()}},render:function(){var e=this.model.scheduledView.entry.content.get("is_scheduled"),t="-",r=[],s=this.model.dashboard.entry.acl.get("sharing"),o=this.model.dashboard.entry.acl.get("owner"),u=l.getPermissionLabel(s,o),a=this.model.dashboard.entry.acl.get("app");if(e){var f=this.model.scheduledView.entry.content.get("cron_schedule"),c=f?p.createFromCronString(f):null;if(c)switch(c.get("cronType")){case"hourly":t=n("Sent Hourly").t();break;case"daily":t=n("Sent Daily").t();break;case"weekly":t=n("Sent Weekly").t();break;case"monthly":t=n("Sent Monthly").t();break;case"custom":t=n("Sent on a custom schedule").t()}r=(this.model.scheduledView.entry.content.get("action.email.to")||"").split(/\s*,\s*/)}var h={_:n,isScheduled:e,schedule:t,recipients:n(r).chain().filter(n.identity).map(function(e){return['<a href="mailto:',encodeURIComponent(e),'">',n.escape(e),"</a>"].join("")}).value(),shared:this.model.dashboard.entry.acl.get("perms"),owner:o,permissionString:u,canChangePerms:this.model.dashboard.entry.acl.get("can_change_perms"),canSchedulePDF:this.model.state.user.canScheduleSearch()&&!this.model.state.user.isFree()&&(this.model.dashboard.isSimpleXML()&&!this.model.dashboard.isForm()||this.model.dashboard.isAdvanced()&&this.model.state.get("pdfgen_type")==="deprecated"),isPdfServiceAvailable:this.model.state.get("pdf_available"),appString:a},d=this.compiledTemplate(h);return this.$el.html(i.prototype.template_menu),this.$el.append(d),this},template:'                <div class="popdown-dialog-body">                    <div>                        <dl class="list-dotted">                            <dt class="app"><%- _("App").t() %></dt>                            <dd>                                <%= appString %>                            </dd>                            <dt class="schedule"><%- _("Schedule").t() %></dt>                            <dd>                                <% if(isScheduled) { %>                                    <%= schedule %> <%- _("to").t() %>                                     <%= recipients.join(", ") %>.                                <% } else { %>                                    <%- _("Not scheduled").t() %>.                                <% } %>                                 <% if(canSchedulePDF && isPdfServiceAvailable) { %>                                    <a href="#" class="edit-schedule"><%- _("Edit").t() %></a>                                <% } %>                             </dd>                            <dt class="permissions"><%- _("Permissions").t() %></dt>                            <dd class="edit-permissions">                                <%- _(permissionString).t() %>                                <% if(canChangePerms) { %>                                    <a href="#" class="edit-permissions"><%- _("Edit").t() %></a>                                <% } %>                         </dl>                    </div>                </div>            '})}),define("splunkjs/mvc/simplexml/editdashboard/menuview",["require","exports","module","underscore","jquery","views/Base","../dialog/addpanel","util/pdf_utils","models/Dashboard","../controller","util/console","../../../mvc","../../utils","uri/route","../../simpleform/input/timerange","splunk.config","util/splunkd_utils","./editmenu","./moreinfomenu"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("views/Base"),o=e("../dialog/addpanel"),u=e("util/pdf_utils"),a=e("models/Dashboard"),f=e("../controller"),l=e("util/console"),c=e("../../../mvc"),h=e("../../utils"),p=e("uri/route"),d=e("../../simpleform/input/timerange"),v=e("splunk.config"),m=e("util/splunkd_utils"),g=e("./editmenu"),y=e("./moreinfomenu"),b=s.extend({moduleId:n.id,className:"edit-menu",initialize:function(){s.prototype.initialize.apply(this,arguments),this.model.state.on("change:edit",this.onEditModeChange,this),this.model.state.on("change:editable change:pdf_available",this.render,this),this.model.state.on("change:default_timerange",this.handleDefaultTimeRangeChange,this),this.model.state.user.on("change",this.render,this),this._ready=!1;var e=this;r.defer(function(){e._ready=!0})},events:{"click a.edit-btn":function(e){e.preventDefault();var t=i(e.currentTarget);if(this.children.editMenu&&this.children.editMenu.shown){this.children.editMenu.hide();return}this.children.moreInfoMenu&&this.children.moreInfoMenu.shown&&this.children.moreInfoMenu.hide(),t.addClass("active"),this.children.editMenu=new g({model:{application:this.model.application,dashboard:this.model.dashboard,state:this.model.state,scheduledView:this.model.scheduledView},collection:this.collection,showOpenActions:this.options.showOpenActions,deleteRedirect:this.options.deleteRedirect,onHiddenRemove:!0}),i("body").append(this.children.editMenu.render().el),this.children.editMenu.show(t),this.children.editMenu.on("hide",function(){t.removeClass("active")},this)},"click a.more-info-btn":function(e){e.preventDefault();var t=i(e.currentTarget);if(this.children.moreInfoMenu&&this.children.moreInfoMenu.shown){this.children.moreInfoMenu.hide();return}this.children.editMenu&&this.children.editMenu.shown&&this.children.editMenu.hide(),t.addClass("active"),this.children.moreInfoMenu=new y({model:{application:this.model.application,dashboard:this.model.dashboard,state:this.model.state,scheduledView:this.model.scheduledView},collection:this.collection,onHiddenRemove:!0}),i("body").append(this.children.moreInfoMenu.render().el),this.children.moreInfoMenu.show(t),this.children.moreInfoMenu.on("hide",function(){t.removeClass("active")},this)},"click a.edit-done":function(e){e.preventDefault(),this.model.state.set("edit",!1)},"click a.add-panel":function(e){e.preventDefault(),this.children.addPanelDialog=new o({controller:this.options.controller}),this.children.addPanelDialog.render().appendTo(i("body")).show()},"click a.add-trp":function(e){e.preventDefault();var t=i('<div class="input input-timerangepicker" id="field3"><label>&nbsp;</label></div>'),n=i("body>.dashboard-body>.fieldset"),r=n.find(".form-submit");r.length?t.insertBefore(r):t.appendTo(n);var s="timerange",o=1;while(c.Components.has(s))s="timerange"+o++;var u=(new d({id:"timerange",isGlobal:!0,earliest_time:"$earliest$",latest_time:"$latest$",el:t},{tokens:!0})).render();u.on("change",function(){var e=c.Components.getInstance("default"),t=c.Components.getInstance("submitted");t.set(e.toJSON())}),f.trigger("formupdate")},"click a.print-dashboard":function(e){e.preventDefault(),window.print()},"click a.generate-pdf":function(e){e.preventDefault();var t=this.model.dashboard.entry.get("name"),n=this.model.dashboard.entry.acl.get("app"),i={},s=0;r.map(c.Components.get("dashboard").getElementIds(),function(e){var t=c.Components.get(e);t&&t.getExportParams&&r.extend(i,t.getExportParams("sid_"+s)),s++}),u.isPdfServiceAvailable().done(function(e,r){if(r==="pdfgen"){var s=f.model.view.getFlattenedXML({useLoadjob:!1,indent:!1});l.DEBUG_ENABLED&&l.log(s),u.downloadReportFromXML(s,n,i)}else r==="deprecated"&&u.getRenderURL(t,n,i).done(function(e){window.open(e)})})}},onEditModeChange:function(){var e=this.model.state.get("edit");this.$(".dashboard-view-controls")[e?"hide":"show"](),this.$(".dashboard-edit-controls")[e?"show":"hide"]()},handleDefaultTimeRangeChange:function(e){if(this._ready&&this.model.state.get("edit")){var t=i("body>.dashboard-body>.fieldset").children().length>0,n=e.get("default_timerange"),r;n&&(r=n),this.model.dashboard.saveFormSettings(t,n,r)}this.render()},render:function(){var e=this.model.application.toJSON(),t={dashboard:this.model.dashboard.isDashboard(),editLinkViewMode:p.manager(e.root,e.locale,e.app,["data","ui","views",e.page],{data:{action:"edit",ns:e.app,redirect_override:p.page(e.root,e.locale,e.app,e.page)}}),editLinkEditMode:p.manager(e.root,e.locale,e.app,["data","ui","views",e.page],{data:{action:"edit",ns:e.app,redirect_override:p.page(e.root,e.locale,e.app,e.page)+"/edit"}}),dashboardType:this.model.dashboard.getViewType(),editable:this.model.state.get("editable"),canWrite:this.model.dashboard.entry.acl.canWrite(),removable:this.model.dashboard.entry.links.get("remove")?!0:!1,isSimpleXML:this.model.dashboard.isSimpleXML(),isHTML:this.model.dashboard.isHTML(),isPdfServiceAvailable:this.model.state.get("pdf_available"),showAddTRP:!this.model.state.get("default_timerange"),_:r};return this.$el.html(this.compiledTemplate(t)),this.$(".generate-pdf").tooltip({animation:!1,title:r("Export PDF").t()}),this.$(".print-dashboard").tooltip({animation:!1,title:r("Print").t()}),this.onEditModeChange(),this},template:'            <span class="dashboard-view-controls">                <% if(canWrite) { %>                    <div class="btn-group">                        <a class="btn edit-btn" href="#"><%- _("Edit").t() %> <span class="caret"></span></a>                        <a class="btn more-info-btn" href="#"><%- _("More Info").t() %> <span class="caret"></span></a>                    </div>                <% }else{ %>                    <div class="btn-group">                        <a class="btn edit-btn" href="#"><%- _("Edit").t() %> <span class="caret"></span></a>                    </div>                <% } %>                <div class="btn-group">                    <% if(isSimpleXML && isPdfServiceAvailable) { %>                        <a class="btn generate-pdf" href="#"><i class="icon-export icon-large"></i></a>                    <% } %>                        <a class="btn print-dashboard" href="#"><i class="icon-print icon-large"></i></a>                </div>            </span>            <span class="dashboard-edit-controls" style="display:none;">                <div class="btn-group">                    <a class="btn add-panel" href="#"><i class="icon-plus"></i> <%- _("Add Panel").t() %></a>                     <% if(showAddTRP) { %>                        <a class="btn add-trp" href="#"><i class="icon-clock"></i> <%- _("Add Time Range Picker").t() %></a>                     <% } %>                    <a class="btn edit-source" href="<%- editLinkEditMode %>"><i class="icon-code"></i> <%- _("Edit Source").t() %></a>                 </div>                <a class="btn btn-primary edit-done" href="#"><%- _("Done").t() %></a>            </span>        '});return b}),define("splunkjs/mvc/simplexml/editdashboard/master",["require","exports","module","underscore","jquery","views/Base","collections/services/authorization/Roles","./menuview"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("views/Base"),o=e("collections/services/authorization/Roles"),u=e("./menuview");return s.extend({className:"splunk-dashboard-controls",initialize:function(){s.prototype.initialize.apply(this,arguments),this.rolesCollection=new o,this.rolesCollection.fetch(),this.children.menuView=new u({model:{state:this.model.state,dashboard:this.model.dashboard,application:this.model.application,scheduledView:this.model.scheduledView},collection:this.rolesCollection,controller:this.options.controller})},render:function(){return this.$el.append(this.children.menuView.render().el),this}})}),define("splunkjs/mvc/simplexml/dragndrop",["require","backbone","underscore","jquery","util/console"],function(e){var t=e("backbone"),n=e("underscore"),r=e("jquery"),i=e("util/console"),s=r.Deferred(),o=document.createElement("div"),u="draggable"in o||"ondragstart"in o&&"ondrop"in o,a=!1,f=a?"sortable5":"sortable";return a?(i.log("loading html5 sortable"),e(["splunkjs/contrib/jquery.sortable.html5"],s.resolve)):(i.log("loading jquery ui sortable"),e(["jquery.ui.sortable"],s.resolve)),t.View.extend({render:function(){return s.done(this.startDragAndDrop.bind(this)),this},events:{"mouseover .drag-handle":function(e){r(e.target).parents(".dashboard-panel").addClass("drag-hover")},"mouseout .drag-handle":function(e){r(e.target).parents(".dashboard-panel").removeClass("drag-hover")}},startDragAndDrop:function(){this.$el.addClass("dragndrop-enabled"),n.defer(this.enableDragAndDrop.bind(this))},enableDragAndDrop:function(){var e=this,t,s=n.debounce(e.updateDimensions.bind(this),0),o=this.enableDragAndDrop.bind(this),u=n.once(function(){i.log("sort STOP");if(t){try{t[f]("destroy")}catch(s){}n.defer(o),e.trigger("sortupdate"),t=null,r(window).trigger("resize")}});this.createNewDropRow(),t=this.$(".dashboard-row")[f]({handle:".drag-handle",connectWith:this.$(".dashboard-row"),placeholder:{element:function(){return r('<div class="sortable-placeholder"><div class="dashboard-panel"></div></div>')},update:function(t,n){e.updateRow(n.parents(".dashboard-row"))}},tolerance:"pointer"}).on("sort",function(e){s()}).on("sortupdate",function(e){u()}).on("stop",function(e){u()}),s(),r(window).trigger("resize")},destroy:function(){this.$el.removeClass("dragndrop-enabled"),this.cleanupEmptyRows();try{this.$(".dashboard-row")[f]("destroy")}catch(e){}this.updateDimensions()},updateRow:function(e){var t=r(e).children().not(".ui-sortable-helper"),i=String(Math.floor(1e4/t.not(".sortable-dragging").length)/100)+"%";t.css({width:i});var s=r(e).find(".dashboard-panel");s.css({"min-height":100}).css({"min-height":n.max(n.map(s,function(e){return r(e).height()}))})},updateDimensions:function(){n(this.$(".dashboard-row")).each(this.updateRow)},createNewDropRow:function(){this.cleanupEmptyRows(),this.$(".dashboard-row").after(r('<div class="dashboard-row empty"></div>')),this.$(".dashboard-row").first().before(r('<div class="dashboard-row empty"></div>'))},cleanupEmptyRows:function(){this.$(".dashboard-row").each(function(){var e=r(this);(e.is(":empty")||e.html().match(/^\s+$/))&&e.remove()}),this.$(".dashboard-row.empty").removeClass("empty")},getItemOrder:function(){return n(this.$(".dashboard-row")).map(function(e){return n(r(e).find(".dashboard-panel")).map(function(e){return n(r(e).find(".dashboard-element")).map(function(e){return r(e).attr("id")})})})}})}),define("splunkjs/mvc/simpleform/fieldsetview",["require","exports","module","underscore","jquery","views/Base","../simplexml/controller"],function(e,t){var n=e("underscore"),r=e("jquery"),i=e("views/Base"),s=e("../simplexml/controller");return i.extend({moduleId:t.id,className:"fieldset",initialize:function(){s.on("formupdate",this.render,this),i.prototype.initialize.apply(this,arguments)},render:function(){return n.any(this.$el.find("label"),function(e){var t=r(e).text();return!!r.trim(t)})?this.$el.removeClass("hide-label"):this.$el.addClass("hide-label"),this}})}),define("splunkjs/mvc/simplexml/dashboard/title",["require","underscore","jquery","backbone"],function(e){var t=e("underscore"),n=e("jquery"),r=e("backbone"),i=r.View.extend({initialize:function(){this.model.on("change:edit change:label",this.render,this)},render:function(){return this.model.has("label")||this.model.set({label:this.$el.text()},{silent:!0}),this.$(".edit-label").remove(),this.$el.text(t(this.model.get("label")).t()),this.model.get("edit")&&n('<span class="edit-label">'+t("Edit").t()+": </span>").prependTo(this.$el),this}});return i}),define("splunkjs/mvc/simplexml/dashboard/description",["require","underscore","backbone"],function(e){var t=e("underscore"),n=e("backbone");return n.View.extend({initialize:function(){this.listenTo(this.model,"change:description",this.render,this),this.listenTo(this.model,"change:edit",this.render,this)},render:function(){if(this.model.has("description")){var e=t(this.model.get("description")||"").t(),n=this.model.get("edit");this.$el.text(e)[e&&!n?"show":"hide"]()}return this}})}),define("splunkjs/mvc/simplexml/dashboard/row",["require","underscore","jquery","backbone"],function(e){var t=e("underscore"),n=e("jquery"),r=e("backbone");return r.View.extend({events:{cellRemoved:"onContentChange"},initialize:function(){this.listenTo(this.model,"change:edit",this.onEditStateChange,this)},onEditStateChange:function(){this.$el.off("DOMSubtreeModified");if(!this.model.get("edit")&&this.$(".dashboard-panel").length>1){var e=t.debounce(this.alignItemHeights.bind(this),1e3);this.$el.bind("DOMSubtreeModified",e),e()}},onContentChange:function(){this.$el.off("DOMSubtreeModified");var e=this.$(".dashboard-cell");if(e.length===0)return this.remove();e.css({width:String(100/e.length)+"%"}).find(".panel-element-row").each(function(){var e=n(this).find(".dashboard-element");e.css({width:String(100/e.length)+"%"})}),e.length>1&&this.alignItemHeights(),this.onEditStateChange()},alignItemHeights:function(){var e=this.$el,r=e.find(".dashboard-panel");r.css({"min-height":0}).css({"min-height":t.max(t.map(r,function(e){return n(e).height()}))})},render:function(){return this.onEditStateChange(),this}})}),define("splunkjs/mvc/simplexml/dashboard/panel",["require","jquery","backbone"],function(e){var t=e("jquery"),n=e("backbone");return n.View.extend({initialize:function(){this.listenTo(this.model,"change:edit",this.onEditStateChange,this)},onEditStateChange:function(e){e.get("edit")?(this._dragHandle||(this._dragHandle=t('<div class="drag-handle"><div class="handle-inner"></div></div>')),this._dragHandle.prependTo(this.el)):this._dragHandle&&this._dragHandle.detach()},render:function(){return this.onEditStateChange(this.model),this}})}),define("splunkjs/mvc/simplexml/dashboard",["require","../basesplunkview","../mvc","underscore","jquery","./controller","./editdashboard/master","./dragndrop","util/console","../simpleform/fieldsetview","./dashboard/title","./dashboard/description","./dashboard/row","./dashboard/panel","models/services/ScheduledView"],function(e){var t=e("../basesplunkview"),n=e("../mvc"),r=e("underscore"),i=e("jquery"),s=e("./controller"),o=e("./editdashboard/master"),u=e("./dragndrop"),a=e("util/console"),f=e("../simpleform/fieldsetview"),l=e("./dashboard/title"),c=e("./dashboard/description"),h=e("./dashboard/row"),p=e("./dashboard/panel"),d=e("models/services/ScheduledView"),v=t.extend({initialize:function(){this.model=s.getStateModel(),this.model.scheduledView=new d,this.scheduledViewDfd=i.Deferred(),s.onViewModelLoad(function(){var e=this.model.scheduledView.findByName(this.model.view.entry.get("name"),this.model.app.get("app"),this.model.app.get("owner"));e.done(r.bind(this.scheduledViewDfd.resolve,this.scheduledViewDfd)),e.fail(r.bind(this.scheduledViewDfd.reject,this.scheduledViewDfd))},this),this.editControls=new o({model:{state:this.model,dashboard:this.model.view,application:this.model.app,scheduledView:this.model.scheduledView},controller:s}),this.model.on("change:edit",this.onEditStateChange,this)},render:function(){var e=this.model;this.rows=r.map(this.$(".dashboard-row"),function(t){return(new h({el:t,model:e})).render()}),this.titleView=(new l({model:this.model,el:this.$(".dashboard-header h2")})).render();var t=this.$("p.description");t.length||(t=i('<p class="description"></p>').appendTo(this.$(".dashboard-header")).hide()),this.descriptionView=(new c({el:t,model:e})).render();var n=this.$el.children(".fieldset");n.length||(n=i('<div class="fieldset"></div>').insertAfter(this.$(".dashboard-header"))),this.fieldsetView=(new f({el:n})).render();var s=i('<div class="edit-dashboard-menu pull-right"></div>').prependTo(this.$(".dashboard-header"));return i.when(this.scheduledViewDfd).then(function(){this.editControls.render().appendTo(s)}.bind(this)),this.panels=r(this.$(".dashboard-panel")).map(function(t){return(new p({el:t,model:e})).render()}),this.onEditStateChange(),r.defer(function(){i("body").removeClass("preload")}),this.model.view.captureItemOrder(this.getItemOrder()),this},getController:function(){return s},getStateModel:function(){return this.model},getItemOrder:function(){return r(this.$(".dashboard-row")).map(function(e){return r(i(e).find(".dashboard-panel")).map(function(e){return r(i(e).find(".dashboard-element")).map(function(e){return i(e).attr("id")})})})},getElementIds:function(){return r.flatten(this.getItemOrder())},enterEditMode:function(){this.leaveEditMode(),this.model.get("editable")?(a.log("Entering edit mode"),this.dragnDrop=new u({el:this.el}),this.model.view.captureItemOrder(this.getItemOrder()),this.dragnDrop.on("sortupdate",r.debounce(this.updatePanelOrder,0),this),this.dragnDrop.render()):(a.log("Aborting edit mode: Dashboard is not editable"),this.model.set("edit",!1))},updatePanelOrder:function(){this.model.view.setItemOrder(this.getItemOrder())},leaveEditMode:function(){this.dragnDrop&&(this.dragnDrop.off(),this.dragnDrop.destroy(),this.updatePanelOrder(),this.dragnDrop=null)},onEditStateChange:function(){this.model.get("edit")?s.onViewModelLoad(this.enterEditMode,this):this.leaveEditMode()},removeElement:function(e){var t=this.$("#"+e),n=t.parents(".dashboard-row");if(t.siblings(".dashboard-element").length)t.remove();else{var r=t.parents(".panel-element-row");r.siblings(".panel-element-row").length?r.remove():t.parents(".dashboard-cell").remove()}n.trigger("cellRemoved")},createNewElement:function(e){var t=i(r.template(this.rowTemplate,e));return t.appendTo(this.$el),this.rows.push((new h({el:t,model:this.model})).render()),this.panels.push((new p({el:t.find(".dashboard-panel"),model:this.model})).render()),t.find(".dashboard-element")},rowTemplate:'  <div class="dashboard-row">                            <div class="dashboard-cell" style="width: 100%;">                                <div class="dashboard-panel clearfix">                                    <div class="panel-element-row">                                        <div class="dashboard-element" id="<%= id %>" style="width: 100%">                                            <div class="panel-head"><h3><%- title %></h3></div>                                            <div class="panel-body"></div>                                        </div>                                    </div>                                </div>                            </div>                        </div>'});return v}),define("views/shared/results_table/ResultsTableHeader",["jquery","underscore","module","views/Base"],function(e,t,n,r){return r.extend({moduleId:n.id,tagName:"thead",render:function(){var e={};t(this.options.columnTypes).each(function(t,n){e[n]=this.columnTypeToClassName(t)},this);var n=this.compiledTemplate({rowNumbers:this.options.rowNumbers,fields:this.options.fields,sortKeyAttribute:this.options.sortKeyAttribute,columnClasses:e});return this.$el.html(n),this},highlightColumn:function(e){this.options.rowNumbers&&e++,this.$("th").eq(e).addClass("highlighted")},unHighlightColumn:function(e){this.options.rowNumbers&&e++,this.$("th").eq(e).removeClass("highlighted")},columnTypeToClassName:function(e){return e==="number"?"numeric":e==="timestamp"?"timestamp":""},template:'            <tr class="">                <% if(rowNumbers) { %>                    <th class="row-number"></th>                <% } %>                <% _(fields).each(function(field) { %>                    <th class="sorts <%- columnClasses[field] %>" <%- sortKeyAttribute %>="<%- field %>">                    <a href="#"><%- field %><i class="icon-sorts "></i></a>                    </th>                <% }) %>            </tr>        '})}),define("views/shared/results_table/renderers/BaseCellRenderer",["require","exports","module","underscore","backbone"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=function(){this.initialize.apply(this,arguments)};return r.extend(s.prototype,i.Events,{initialize:function(){},canRender:function(e){throw new Error("Must implement method canRender.")},setup:function(e,t){},teardown:function(e,t){},render:function(e,t){}}),s.prototype.constructor=s,s.extend=i.Model.extend,s}),define("views/shared/results_table/ResultsTableRow",["jquery","underscore","module","views/Base","./renderers/BaseCellRenderer"],function(e,t,n,r,i){var s=r.extend({moduleId:n.id,tagName:"tr",render:function(){return this.$el.attr(s.ROW_INDEX_ATTR,this.options.rowIndex),this.options.hasOwnProperty("rowNumber")&&this.$el.append(e('<td class="row-number"></td>').text(this.options.rowNumber)),this.generateCells(),this},remove:function(){return this.disposeCells(),r.prototype.remove.call(this)},generateCells:function(){this.disposeCells();var n=this._renderedCells=[],r,o=this.getCellRenderers(),u;t(this.options.cells).each(function(t){var a=e("<td></td>");a.attr(s.CELL_INDEX_ATTR,t.index),r={$td:a};for(var f=0,l=o.length;f<l;f++){u=o[f];if(u instanceof i){if(u.canRender(t)){u.setup(a,t),u.render(a,t),r.cellData=t,r.cellRenderer=u;break}}else if(typeof u=="function"&&u(a,t))break}this.$el.append(a),n.push(r)},this)},disposeCells:function(){if(!this._renderedCells)return;t(this._renderedCells).each(function(e){e.cellRenderer&&e.cellRenderer.teardown(e.$td,e.cellData),e.$td.remove()},this),this._renderedCells=null},getCellRenderers:function(){return this.options.table?this.options.table.getCellRenderers():[]},highlightRow:function(){this.$el.addClass("highlighted")},unHighlightRow:function(){this.$el.removeClass("highlighted")},highlightCell:function(e,t){var n=this.options.hasOwnProperty("rowNumber"),r=this.$("td"),i=this.options.numRowSplits,s=n?r.slice(0,i+1):r.slice(0,i);s.addClass("highlighted"),e.addClass("highlighted")},unHighlightCell:function(e,t){var n=this.options.hasOwnProperty("rowNumber"),r=this.$("td"),i=this.options.numRowSplits,s=n?r.slice(0,i+1):r.slice(0,i);s.removeClass("highlighted"),e.removeClass("highlighted")}},{ROW_INDEX_ATTR:"data-row-index",CELL_INDEX_ATTR:"data-cell-index",MV_SUBCELL_CLASSNAME:"multivalue-subcell",MV_INDEX_ATTR:"data-mv-index"});return s}),define("views/shared/delegates/ColumnSort",["jquery","underscore","backbone","views/shared/delegates/Base"],function(e,t,n,r){var i={SORTABLE_ROW:"sorts",NOT_SORTABLE_CLASS:"not-sortable",SORT_DISABLED_CLASS:"sort-disabled",SORTED_CLASS:"active",ASCENDING:"asc",DESCENDING:"desc",SORT_KEY_ATTR:"data-sort-key",SORT:"sort"},s="th."+i.SORTABLE_ROW,o="i.icon-sorts";return r.extend({events:function(){var e={};return e["click "+s]="onColumnHeaderClick",e}(),initialize:function(){this.model||(this.model=new n.Model);var r={sortKeyAttr:"sortKey",sortDirAttr:"sortDirection"};this.options=e.extend(!0,r,this.options),this.autoUpdate=!!this.options.autoUpdate,this.autoUpdate&&this.model.on("change:"+this.options.sortKeyAttr+" change:"+this.options.sortDirAttr,t.debounce(function(){this.update()},0),this)},update:function(e){e=e||this.$el;var t=e.find(s),n=this.model.get(this.options.sortKeyAttr),r=t.filter("["+i.SORT_KEY_ATTR+'="'+n+'"]'),u=this.model.get(this.options.sortDirAttr);t.removeClass(i.SORTED_CLASS).find(o).removeClass(i.ASCENDING+" "+i.DESCENDING),r.addClass(i.SORTED_CLASS).find(o).addClass(u==="asc"?i.ASCENDING:i.DESCENDING)},onColumnHeaderClick:function(t){t.preventDefault();var n=e(t.currentTarget);if(n.hasClass(i.NOT_SORTABLE_CLASS)||n.hasClass(i.SORT_DISABLED_CLASS))return;var r=n.attr(i.SORT_KEY_ATTR),s=n.find(o).hasClass(i.DESCENDING)?"asc":"desc",u={};u[this.options.sortKeyAttr]=r,u[this.options.sortDirAttr]=s,this.model.set(u),this.trigger(i.SORT,r,s)}},i)}),define("views/shared/delegates/DetachedTableHeader",["jquery","underscore","views/shared/delegates/Base"],function(e,t,n){return n.extend({syncColumnWidths:function(){if(!this.$table)return;var n=this.$table.find("thead > tr"),r=n.find("th"),i=this.$headerTable.find("thead > tr"),s=i.find("th"),o=!1,u=[];this.$table.css("table-layout",this.options.defaultLayout),this.options.flexWidthColumn!==!1&&(o=r.eq(this.options.flexWidthColumn)),r.not(o[0]).css("width",""),t(r).each(function(t,n){if(o&&t===o[0])return;var r=e(t),i={width:r[0].clientWidth-parseFloat(r.css("padding-right"))-parseFloat(r.css("padding-left")),index:n};u.push(i)},this),this.$headerTable.width(this.$table.outerWidth()),t.each(u,function(e){var t=r.eq(e.index),n=s.eq(e.index);t.width(e.width),n.width(e.width)}),this.$table.css("table-layout","fixed")}})}),define("views/shared/delegates/TableDock",["jquery","underscore","views/shared/delegates/DetachedTableHeader"],function(e,t,n){return n.extend({awake:!0,touch:!1,initialize:function(e){var r={table:"> table",offset:0,dockScrollBar:!0,flexWidthColumn:-1,defaultLayout:"auto"};t.defaults(this.options,r),n.prototype.initialize.call(this,e),this.disabled=!1,this.dockedScrollHidden=!0,this.left=0,this.scrollLeft=!1,this.eventNS="table-dock-"+this.cid,this.awake&&this.bindListeners()},bindListeners:function(){var n=t.debounce(this.handleWindowResize,50);e(window).on("resize."+this.eventNS,t(n).bind(this)),e(window).on("scroll."+this.eventNS,t(this.handleWindowScroll).bind(this)),this.options.dockScrollBar&&this.$el.on("scroll."+this.eventNS,t(this.handleContainerScroll).bind(this))},unbindListeners:function(){e(window).off("resize."+this.eventNS),e(window).off("scroll."+this.eventNS),this.options.dockScrollBar&&this.$el.off("."+this.eventNS)},destroy:function(){this.unbindListeners()},update:function(){this._updateDebounced||(this._updateDebounced=t.debounce(this._update)),this._updateDebounced()},_update:function(){if(!this.awake){this.touch=!0;return}this.$table=this.$(this.options.table).first(),this.updateHeaders(),this.options.dockScrollBar&&this.updateScroll(),this.$table.is(":visible")?this.syncMeasurements():t.defer(this.syncMeasurements.bind(this))},syncMeasurements:function(){this.scrollLeft=!1,this.syncColumnWidths(),this.options.dockScrollBar&&this.syncScrollWidths(),this.handleWindowScroll(),this.options.dockScrollBar&&this.handleContainerScroll(),this.trigger("updated",this.$headerTable)},disable:function(){this.disabled=!0,this.$disable&&this.$disable.show()},enable:function(){this.disabled=!1,this.$disable&&this.$disable.hide()},updateHeaders:function(){this.$header&&this.$header.remove(),this.$header=e('<div class="header-table-docked" style="display:none"><table></table><div class="disable"></div></div>').css({top:this.options.offset,left:this.left,right:0}),this.$disable=this.$header.find("> .disable")[this.disabled?"show":"hide"](),this.$headerTable=this.$header.find("> table"),this.$headerTable.attr("class",this.$table.attr("class")),this.$table.find("> thead").clone().appendTo(this.$headerTable),this.$header.prependTo(this.el),this.$headerTable.on("click","th",function(t){t.preventDefault(),t.stopPropagation();var n=e(t.currentTarget).prevAll().length+1;this.$table.find("> thead > tr > th:nth-child("+n+")").click()}.bind(this)),this.$headerTable.on("click","th a",function(e){e.preventDefault()})},updateScroll:function(){this.$dockedScroll&&this.$dockedScroll.remove(),this.$dockedScroll=e("<div />").addClass("table-scroll-bar-docked").hide().appendTo(this.$el).css("left",this.$el.position().left),this.$dockedScroll.on("scroll",t(this.handleDockedScrollChange).bind(this))},handleWindowResize:function(){if(!this.$table||!this.$table.is(":visible"))return;this.syncColumnWidths(),this.options.dockScrollBar&&(this.updateDockedScrollBar(),this.syncScrollWidths())},handleWindowScroll:function(t){if(!this.$table||!this.$table.is(":visible"))return;var n=e(window).scrollTop(),r=this.$table.offset().top;n>=r-this.options.offset?this.$header.is(":visible")||this.$header.css("top",this.options.offset).show():(this.$header.css("top","-1000px").width(),this.$header.hide()),this.options.dockScrollBar&&this.updateDockedScrollBar()},handleContainerScroll:function(){if(!this.$table)return;var e=this.$el.scrollLeft();if(this.scrollLeft===e)return;this.$headerTable.css("marginLeft",-e+"px"),this.$dockedScroll.scrollLeft(e),this.scrollLeft=e},handleDockedScrollChange:function(){var e=this.$el.scrollLeft(),t=this.$dockedScroll.scrollLeft();e!==t&&(this.$headerTable.css("marginLeft",-t+"px"),this.$el.scrollLeft(t))},syncColumnWidths:function(){n.prototype.syncColumnWidths.apply(this,arguments),this.left=this.$el.position().left,this.$header.css({left:this.left})},syncScrollWidths:function(){if(!this.$table||!this.$table[0])return;var t=parseFloat(this.$table[0].scrollWidth),n=e("<div />").width(t).height(1);this.$dockedScroll.html(n)},updateDockedScrollBar:function(){var t=e(window).scrollTop(),n=this.$table.offset().top,r=e(window).height(),i=this.$el.outerHeight();if(n+i>t+r){if(!this.dockedScrollHidden)return;this.$dockedScroll.show(),this.dockedScrollHidden=!1,this.handleContainerScroll()}else this.dockedScrollHidden||(this.$dockedScroll.hide(),this.dockedScrollHidden=!0)},wake:function(){return this.awake=!0,this.bindListeners(),this.touch?t.defer(this.update.bind(this)):(t.defer(this.handleWindowResize.bind(this)),t.defer(this.handleWindowScroll.bind(this)),this.options.dockScrollBar&&t.defer(this.handleContainerScroll.bind(this))),this},sleep:function(){return this.awake=!1,this.unbindListeners(),this},remove:function(){return n.prototype.remove.apply(this),e(window).off("resize."+this.eventNS),e(window).off("scroll."+this.eventNS),this}})}),define("views/shared/delegates/TableHeadStatic",["jquery","underscore","views/shared/delegates/DetachedTableHeader"],function(e,t,n){return n.extend({awake:!0,touch:!1,initialize:function(e){var r={headerContainer:"> .header-table-static",scrollContainer:"> .scroll-table-wrapper",table:"> .scroll-table-wrapper > table",offset:0,flexWidthColumn:-1,defaultLayout:"auto"};t.defaults(this.options,r),n.prototype.initialize.call(this,e),this.awake&&this.bindListeners()},bindListeners:function(){var n=t.debounce(this.handleWindowResize,50);e(window).on("resize."+this.cid,t(n).bind(this)),e(this.$(this.options.scrollContainer)).on("scroll."+this.cid,t(this.handleContainerScroll).bind(this))},unbindListeners:function(){e(window).off("resize."+this.cid),e(this.$(this.options.scrollContainer)).off("scroll."+this.cid)},destroy:function(){this.unbindListeners()},remove:function(){return n.prototype.remove.apply(this),e(window).off("resize."+this.cid),this},update:function(){if(!this.awake){this.touch=!0;return}this.$scrollContainer=this.$(this.options.scrollContainer),this.$table=this.$(this.options.table).first(),this.$headerContainer=this.$(this.options.headerContainer),this.$headerContainer.empty();var n=e('<div class="header-table-wrapper"></div>').appendTo(this.$headerContainer);n.css({"margin-right":this.$scrollContainer[0].offsetWidth-this.$scrollContainer[0].clientWidth}),this.$headerTable=e("<table>"),this.$headerTable.attr("class",this.$table.attr("class")).width(this.$table.outerWidth()).css("table-layout","fixed"),this.$table.find("> thead").clone().css("visibility","visible").appendTo(this.$headerTable),n.prepend(this.$headerTable),this.$table.find("thead").css("visibility","hidden"),this.$headerTable.on("click","th",function(t){t.preventDefault(),t.stopPropagation();var n=e(t.currentTarget).prevAll().length+1;this.$table.find("> thead > tr > th:nth-child("+n+")").click()}.bind(this)),this.$headerTable.on("click","th a",function(e){e.preventDefault()}),this.scrollLeft=0;var r=t(function(){this.syncColumnWidths(),this.handleContainerScroll(),this.trigger("updated",this.$headerTable)}).bind(this);this.$table.is(":visible")?r():t.defer(r)},handleContainerScroll:function(){if(!this.$table)return;var e=this.$scrollContainer.scrollLeft();e!==this.scrollLeft&&(this.$headerTable.css("marginLeft",-e+"px"),this.scrollLeft=e)},handleWindowResize:function(){if(!this.$table)return;this.syncColumnWidths()},wake:function(){return this.awake=!0,this.bindListeners(),this.touch?t.defer(this.update.bind(this)):(t.defer(this.handleWindowResize.bind(this)),t.defer(this.handleContainerScroll.bind(this))),this},sleep:function(){return this.awake=!1,this.unbindListeners(),this}})}),define("helpers/grid/RowIterator",["underscore","backbone"],function(e,t){var n=function(){return!1},r=function(t){t=t||{},this.offset=parseInt(t.offset,10)||0,this.expandedTest=t.expandedTest||n,this.eachRow=e(this.eachRow).bind(this)};return r.prototype={eachRow:function(n,r,i){i=i||null;var s=function(e,t){var n=t+this.offset+1,s=this.expandedTest(e,t,n);r.apply(i,[e,t,n,s])};n instanceof t.Collection?n.each(s,this):e(n).each(s,this)}},r}),Splunk.namespace("Splunk.Print"),Splunk.Print=$.klass({START_EVENT:"PrintStart",END_EVENT:"PrintEnd",PAGE_EVENT:"PrintPage",PAGE_WIDTH:$.browser.msie&&$.browser.version in{"6.0":!0,"7.0":!0,"8.0":!0}?"700px":"800px",WINDOW_PRINT_END_EVENT_DELAY:1e3,initialize:function(){this.logger=Splunk.Logger.getLogger("Splunk.Print"),$(document).bind(this.START_EVENT,this.onPrintStart.bind(this)),$(document).bind(this.END_EVENT,this.onPrintEnd.bind(this)),$(document).bind(this.PAGE_EVENT,this.onPrintPage.bind(this)),window.onbeforeprint!==undefined&&this.bindIEPrintEvents()},onPrintEnd:function(e){this.logger.info("Splunk.Print.END_EVENT fired")},onPrintPage:function(e){var t=$("body")[0].style,n=window.pageXOffset,r=window.pageYOffset,i=function(){$("body").addClass("print").css({width:this.PAGE_WIDTH,"min-width":0}),window.scrollTo(0,document.body.offsetHeight)}.bind(this),s=function(){$("body").removeClass("print"),t.width="",t["min-width"]="",window.scrollTo(n,r)};this.logger.info("Splunk.Print.PAGE_EVENT fired");if($.browser.msie)i(),$(document).trigger(this.START_EVENT),window.print(),s(),$(document).trigger(this.END_EVENT);else if(this.isChromeThirteenPlus()){var o=!1;$(window).bind("blur.splunkPrint",function(){o=!0,$(window).bind("focus.splunkPrint",function(){s(),$(document).trigger(this.END_EVENT),$(window).unbind(".splunkPrint")}.bind(this))}.bind(this)),i(),setTimeout(function(){$(document).trigger(this.START_EVENT)}.bind(this),0),setTimeout(function(){window.print(),setTimeout(function(){o||(s(),$(window).unbind(".splunkPrint"),$(document).trigger(this.END_EVENT))}.bind(this),this.WINDOW_PRINT_END_EVENT_DELAY)}.bind(this),0)}else i(),setTimeout(function(){$(document).trigger(this.START_EVENT)}.bind(this),0),setTimeout(function(){window.print(),setTimeout(function(){s(),$(document).trigger(this.END_EVENT)}.bind(this),this.WINDOW_PRINT_END_EVENT_DELAY)}.bind(this),0)},onPrintStart:function(e){this.logger.info("Splunk.Print.START_EVENT fired")},bindIEPrintEvents:function(){window.attachEvent&&(window.attachEvent("onbeforeprint",function(){$("body").css("width",this.PAGE_WIDTH),$(document).trigger(this.START_EVENT)}.bind(this)),window.attachEvent("onafterprint",function(){$("body").css("width",""),$(document).trigger(this.START_EVENT)}.bind(this)))},isChromeThirteenPlus:function(){var e=/chrome\/(\d+)/i,t=e.exec(navigator.userAgent);return!!(t&&parseInt(t[1],10)>=13)}}),Splunk.Print.instance=null,Splunk.Print.getInstance=function(){return Splunk.Print.instance||(Splunk.Print.instance=new Splunk.Print),Splunk.Print.instance},define("splunk.print",["jquery","lowpro","splunk","splunk.logger"],function(e){return function(){var t,n;return t||e.Splunk.Print}}(this)),define("helpers/Printer",["jquery","backbone","splunk.print"],function(e,t,n){var r=e.extend({},t.Events,{PRINT_START:n.prototype.START_EVENT,PRINT_END:n.prototype.END_EVENT,printPage:function(){e(document).trigger(n.prototype.PAGE_EVENT)},onDomReady:function(){var t=n.getInstance();e(document).on(n.prototype.START_EVENT,function(){r.trigger(r.PRINT_START)}),e(document).on(n.prototype.END_EVENT,function(){r.trigger(r.PRINT_END)})}});return e(function(){r.onDomReady()}),r}),function(e,t,n){(function(e){typeof define=="function"&&define.amd?define("jquery.sparkline",["jquery"],e):jQuery&&!jQuery.fn.sparkline&&e(jQuery)})(function(r){var i={},s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j=0;s=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:n,normalRangeMax:n,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:n,chartRangeMax:n,chartRangeMinX:n,chartRangeMaxX:n,tooltipFormat:new u('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:n,nullColor:n,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,colorMap:n,tooltipFormat:new u('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new u('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:n,thresholdValue:0,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,tooltipFormat:new u("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:n,tooltipFormat:new u("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new u('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:n,targetColor:"#4a2",chartRangeMax:n,chartRangeMin:n,tooltipFormat:new u("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},O='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',o=function(){var e,t;return e=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(e.prototype=r.extend(new arguments[0],arguments[arguments.length-1]),e._super=arguments[0].prototype):e.prototype=arguments[arguments.length-1],arguments.length>2&&(t=Array.prototype.slice.call(arguments,1,-1),t.unshift(e.prototype),r.extend.apply(r,t))):e.prototype=arguments[0],e.prototype.cls=e,e},r.SPFormatClass=u=o({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(e,t){this.format=e,this.fclass=t},render:function(e,t,r){var i=this,s=e,o,u,a,f,l;return this.format.replace(this.fre,function(){var e;return u=arguments[1],a=arguments[3],o=i.precre.exec(u),o?(l=o[2],u=o[1]):l=!1,f=s[u],f===n?"":a&&t&&t[a]?(e=t[a],e.get?t[a].get(f)||f:t[a][f]||f):(p(f)&&(r.get("numberFormatter")?f=r.get("numberFormatter")(f):f=y(f,l,r.get("numberDigitGroupCount"),r.get("numberDigitGroupSep"),r.get("numberDecimalMark"))),f)})}}),r.spformat=function(e,t){return new u(e,t)},a=function(e,t,n){return e<t?t:e>n?n:e},f=function(e,n){var r;return n===2?(r=t.floor(e.length/2),e.length%2?e[r]:(e[r-1]+e[r])/2):e.length%2?(r=(e.length*n+n)/4,r%1?(e[t.floor(r)]+e[t.floor(r)-1])/2:e[r-1]):(r=(e.length*n+2)/4,r%1?(e[t.floor(r)]+e[t.floor(r)-1])/2:e[r-1])},l=function(e){var t;switch(e){case"undefined":e=n;break;case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:t=parseFloat(e),e==t&&(e=t)}return e},c=function(e){var t,n=[];for(t=e.length;t--;)n[t]=l(e[t]);return n},h=function(e,t){var n,r,i=[];for(n=0,r=e.length;n<r;n++)e[n]!==t&&i.push(e[n]);return i},p=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},y=function(e,t,n,i,s){var o,u;e=(t===!1?parseFloat(e).toString():e.toFixed(t)).split(""),o=(o=r.inArray(".",e))<0?e.length:o,o<e.length&&(e[o]=s);for(u=o-n;u>0;u-=n)e.splice(u,0,i);return e.join("")},d=function(e,t,n){var r;for(r=t.length;r--;){if(n&&t[r]===null)continue;if(t[r]!==e)return!1}return!0},v=function(e){var t=0,n;for(n=e.length;n--;)t+=typeof e[n]=="number"?e[n]:0;return t},g=function(e){return r.isArray(e)?e:[e]},m=function(t){var n,r;if(e.createStyleSheet)try{e.createStyleSheet().cssText=t;return}catch(i){r=!0}n=e.createElement("style"),n.type="text/css",e.getElementsByTagName("head")[0].appendChild(n),r?e.styleSheets[e.styleSheets.length-1].cssText=t:n[typeof e.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=t},r.fn.simpledraw=function(t,i,s,o){var u,a;if(s&&(u=this.data("_jqs_vcanvas")))return u;if(r.fn.sparkline.canvas===!1)return!1;if(r.fn.sparkline.canvas===n){var f=e.createElement("canvas");if(!f.getContext||!f.getContext("2d")){if(!e.namespaces||!!e.namespaces.v)return r.fn.sparkline.canvas=!1,!1;e.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),r.fn.sparkline.canvas=function(e,t,n,r){return new H(e,t,n)}}else r.fn.sparkline.canvas=function(e,t,n,r){return new P(e,t,n,r)}}return t===n&&(t=r(this).innerWidth()),i===n&&(i=r(this).innerHeight()),u=r.fn.sparkline.canvas(t,i,this,o),a=r(this).data("_jqs_mhandler"),a&&a.registerCanvas(u),u},r.fn.cleardraw=function(){var e=this.data("_jqs_vcanvas");e&&e.reset()},r.RangeMapClass=b=o({init:function(e){var t,n,r=[];for(t in e)e.hasOwnProperty(t)&&typeof t=="string"&&t.indexOf(":")>-1&&(n=t.split(":"),n[0]=n[0].length===0?-Infinity:parseFloat(n[0]),n[1]=n[1].length===0?Infinity:parseFloat(n[1]),n[2]=e[t],r.push(n));this.map=e,this.rangelist=r||!1},get:function(e){var t=this.rangelist,r,i,s;if((s=this.map[e])!==n)return s;if(t)for(r=t.length;r--;){i=t[r];if(i[0]<=e&&i[1]>=e)return i[2]}return n}}),r.range_map=function(e){return new b(e)},w=o({init:function(e,t){var n=r(e);this.$el=n,this.options=t,this.currentPageX=0,this.currentPageY=0,this.el=e,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!t.get("disableTooltips"),this.highlightEnabled=!t.get("disableHighlight")},registerSparkline:function(e){this.splist.push(e),this.over&&this.updateDisplay()},registerCanvas:function(e){var t=r(e.canvas);this.canvas=e,this.$canvas=t,t.mouseenter(r.proxy(this.mouseenter,this)),t.mouseleave(r.proxy(this.mouseleave,this)),t.click(r.proxy(this.mouseclick,this))},reset:function(e){this.splist=[],this.tooltip&&e&&(this.tooltip.remove(),this.tooltip=n)},mouseclick:function(e){var t=r.Event("sparklineClick");t.originalEvent=e,t.sparklines=this.splist,this.$el.trigger(t)},mouseenter:function(t){r(e.body).unbind("mousemove.jqs"),r(e.body).bind("mousemove.jqs",r.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new E(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){r(e.body).unbind("mousemove.jqs");var t=this.splist,n=t.length,i=!1,s,o;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(o=0;o<n;o++)s=t[o],s.clearRegionHighlight()&&(i=!0);i&&this.canvas.render()},mousemove:function(e){this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,this.tooltip&&this.tooltip.updatePosition(e.pageX,e.pageY),this.updateDisplay()},updateDisplay:function(){var e=this.splist,t=e.length,n=!1,i=this.$canvas.offset(),s=this.currentPageX-i.left,o=this.currentPageY-i.top,u,a,f,l,c;if(!this.over)return;for(f=0;f<t;f++)a=e[f],l=a.setRegionHighlight(this.currentEl,s,o),l&&(n=!0);if(n){c=r.Event("sparklineRegionChange"),c.sparklines=this.splist,this.$el.trigger(c);if(this.tooltip){u="";for(f=0;f<t;f++)a=e[f],u+=a.getCurrentRegionTooltip();this.tooltip.setContent(u)}this.disableHighlight||this.canvas.render()}l===null&&this.mouseleave()}}),E=o({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var n=t.get("tooltipClassname","jqstooltip"),i=this.sizeStyle,s;this.container=t.get("tooltipContainer")||e.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),r("#jqssizetip").remove(),r("#jqstooltip").remove(),this.sizetip=r("<div/>",{id:"jqssizetip",style:i,"class":n}),this.tooltip=r("<div/>",{id:"jqstooltip","class":n}).appendTo(this.container),s=this.tooltip.offset(),this.offsetLeft=s.left,this.offsetTop=s.top,this.hidden=!0,r(window).unbind("resize.jqs scroll.jqs"),r(window).bind("resize.jqs scroll.jqs",r.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=r(window).scrollTop(),this.scrollLeft=r(window).scrollLeft(),this.scrollRight=this.scrollLeft+r(window).width(),this.updatePosition()},getSize:function(e){this.sizetip.html(e).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(e){if(!e){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(e),this.tooltip.html(e).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(e,t){if(e===n){if(this.mousex===n)return;e=this.mousex-this.offsetLeft,t=this.mousey-this.offsetTop}else this.mousex=e-=this.offsetLeft,this.mousey=t-=this.offsetTop;if(!this.height||!this.width||this.hidden)return;t-=this.height+this.tooltipOffsetY,e+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),e<this.scrollLeft?e=this.scrollLeft:e+this.width>this.scrollRight&&(e=this.scrollRight-this.width),this.tooltip.css({left:e,top:t})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=n,r(window).unbind("resize.jqs scroll.jqs")}}),M=function(){m(O)},r(M),B=[],r.fn.sparkline=function(t,i){return this.each(function(){var s=new r.fn.sparkline.options(this,i),o=r(this),u,a;u=function(){var i,u,a,f,l,c,h;if(t==="html"||t===n){h=this.getAttribute(s.get("tagValuesAttribute"));if(h===n||h===null)h=o.html();i=h.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else i=t;u=s.get("width")==="auto"?i.length*s.get("defaultPixelsPerValue"):s.get("width");if(s.get("height")==="auto"){if(!s.get("composite")||!r.data(this,"_jqs_vcanvas"))f=e.createElement("span"),f.innerHTML="a",o.html(f),a=r(f).innerHeight()||r(f).height(),r(f).remove(),f=null}else a=s.get("height");s.get("disableInteraction")?l=!1:(l=r.data(this,"_jqs_mhandler"),l?s.get("composite")||l.reset():(l=new w(this,s),r.data(this,"_jqs_mhandler",l)));if(s.get("composite")&&!r.data(this,"_jqs_vcanvas")){r.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),r.data(this,"_jqs_errnotify",!0));return}c=new(r.fn.sparkline[s.get("type")])(this,i,s,u,a),c.render(),l&&l.registerSparkline(c)};if(r(this).html()&&!s.get("disableHiddenCheck")&&r(this).is(":hidden")||!r(this).parents("body").length){if(!s.get("composite")&&r.data(this,"_jqs_pending"))for(a=B.length;a;a--)B[a-1][0]==this&&B.splice(a-1,1);B.push([this,u]),r.data(this,"_jqs_pending",!0)}else u.call(this)})},r.fn.sparkline.defaults=s(),r.sparkline_display_visible=function(){var e,t,n,i=[];for(t=0,n=B.length;t<n;t++)e=B[t][0],r(e).is(":visible")&&!r(e).parents().is(":hidden")?(B[t][1].call(e),r.data(B[t][0],"_jqs_pending",!1),i.push(t)):!r(e).closest("html").length&&!r.data(e,"_jqs_pending")&&(r.data(B[t][0],"_jqs_pending",!1),i.push(t));for(t=i.length;t;t--)B.splice(i[t-1],1)},r.fn.sparkline.options=o({init:function(e,t){var n,s,o,u;this.userOptions=t=t||{},this.tag=e,this.tagValCache={},s=r.fn.sparkline.defaults,o=s.common,this.tagOptionsPrefix=t.enableTagOptions&&(t.tagOptionsPrefix||o.tagOptionsPrefix),u=this.getTagSetting("type"),u===i?n=s[t.type||o.type]:n=s[u],this.mergedOptions=r.extend({},o,n,t)},getTagSetting:function(e){var t=this.tagOptionsPrefix,r,s,o,u;if(t===!1||t===n)return i;if(this.tagValCache.hasOwnProperty(e))r=this.tagValCache.key;else{r=this.tag.getAttribute(t+e);if(r===n||r===null)r=i;else if(r.substr(0,1)==="["){r=r.substr(1,r.length-2).split(",");for(s=r.length;s--;)r[s]=l(r[s].replace(/(^\s*)|(\s*$)/g,""))}else if(r.substr(0,1)==="{"){o=r.substr(1,r.length-2).split(","),r={};for(s=o.length;s--;)u=o[s].split(":",2),r[u[0].replace(/(^\s*)|(\s*$)/g,"")]=l(u[1].replace(/(^\s*)|(\s*$)/g,""))}else r=l(r);this.tagValCache.key=r}return r},get:function(e,t){var r=this.getTagSetting(e),s;return r!==i?r:(s=this.mergedOptions[e])===n?t:s}}),r.fn.sparkline._base=o({disabled:!1,init:function(e,t,i,s,o){this.el=e,this.$el=r(e),this.values=t,this.options=i,this.width=s,this.height=o,this.currentRegion=n},initTarget:function(){var e=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),e))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(e,t){},setRegionHighlight:function(e,t,r){var i=this.currentRegion,s=!this.options.get("disableHighlight"),o;return t>this.canvasWidth||r>this.canvasHeight||t<0||r<0?null:(o=this.getRegion(e,t,r),i!==o?(i!==n&&s&&this.removeHighlight(),this.currentRegion=o,o!==n&&s&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==n?(this.removeHighlight(),this.currentRegion=n,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(e){},getCurrentRegionTooltip:function(){var e=this.options,t="",i=[],s,o,a,f,l,c,h,p,d,v,m,g,y,b;if(this.currentRegion===n)return"";s=this.getCurrentRegionFields(),m=e.get("tooltipFormatter");if(m)return m(this,e,s);e.get("tooltipChartTitle")&&(t+='<div class="jqs jqstitle">'+e.get("tooltipChartTitle")+"</div>\n"),o=this.options.get("tooltipFormat");if(!o)return"";r.isArray(o)||(o=[o]),r.isArray(s)||(s=[s]),h=this.options.get("tooltipFormatFieldlist"),p=this.options.get("tooltipFormatFieldlistKey");if(h&&p){d=[];for(c=s.length;c--;)v=s[c][p],(b=r.inArray(v,h))!=-1&&(d[b]=s[c]);s=d}a=o.length,y=s.length;for(c=0;c<a;c++){g=o[c],typeof g=="string"&&(g=new u(g)),f=g.fclass||"jqsfield";for(b=0;b<y;b++)if(!s[b].isNull||!e.get("tooltipSkipNull"))r.extend(s[b],{prefix:e.get("tooltipPrefix"),suffix:e.get("tooltipSuffix")}),l=g.render(s[b],e.get("tooltipValueLookups"),e),i.push('<div class="'+f+'">'+l+"</div>")}return i.length?t+i.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(e,n){var r=n.get("highlightColor"),i=n.get("highlightLighten"),s,o,u,f;if(r)return r;if(i){s=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e);if(s){u=[],o=e.length===4?16:1;for(f=0;f<3;f++)u[f]=a(t.round(parseInt(s[f+1],16)*o*i),0,255);return"rgb("+u.join(",")+")"}}return e}}),S={changeHighlight:function(e){var t=this.currentRegion,n=this.target,i=this.regionShapes[t],s;i&&(s=this.renderRegion(t,e),r.isArray(s)||r.isArray(i)?(n.replaceWithShapes(i,s),this.regionShapes[t]=r.map(s,function(e){return e.id})):(n.replaceWithShape(i,s),this.regionShapes[t]=s.id))},render:function(){var e=this.values,t=this.target,n=this.regionShapes,i,s,o,u;if(!this.cls._super.render.call(this))return;for(o=e.length;o--;){i=this.renderRegion(o);if(i)if(r.isArray(i)){s=[];for(u=i.length;u--;)i[u].append(),s.push(i[u].id);n[o]=s}else i.append(),n[o]=i.id;else n[o]=null}t.render()}},r.fn.sparkline.line=x=o(r.fn.sparkline._base,{type:"line",init:function(e,t,n,r,i){x._super.init.call(this,e,t,n,r,i),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(e,t,r){var i,s=this.regionMap;for(i=s.length;i--;)if(s[i]!==null&&t>=s[i][0]&&t<=s[i][1])return s[i][2];return n},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.yvalues[e]===null,x:this.xvalues[e],y:this.yvalues[e],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:e}},renderHighlight:function(){var e=this.currentRegion,t=this.target,r=this.vertices[e],i=this.options,s=i.get("spotRadius"),o=i.get("highlightSpotColor"),u=i.get("highlightLineColor"),a,f;if(!r)return;s&&o&&(a=t.drawCircle(r[0],r[1],s,n,o),this.highlightSpotId=a.id,t.insertAfterShape(this.lastShapeId,a)),u&&(f=t.drawLine(r[0],this.canvasTop,r[0],this.canvasTop+this.canvasHeight,u),this.highlightLineId=f.id,t.insertAfterShape(this.lastShapeId,f))},removeHighlight:function(){var e=this.target;this.highlightSpotId&&(e.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(e.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var e=this.values,n=e.length,r=this.xvalues,i=this.yvalues,s=this.yminmax,o,u,a,f,l;for(o=0;o<n;o++)u=e[o],a=typeof e[o]=="string",f=typeof e[o]=="object"&&e[o]instanceof Array,l=a&&e[o].split(":"),a&&l.length===2?(r.push(Number(l[0])),i.push(Number(l[1])),s.push(Number(l[1]))):f?(r.push(u[0]),i.push(u[1]),s.push(u[1])):(r.push(o),e[o]===null||e[o]==="null"?i.push(null):(i.push(Number(u)),s.push(Number(u))));this.options.get("xvalues")&&(r=this.options.get("xvalues")),this.maxy=this.maxyorg=t.max.apply(t,s),this.miny=this.minyorg=t.min.apply(t,s),this.maxx=t.max.apply(t,r),this.minx=t.min.apply(t,r),this.xvalues=r,this.yvalues=i,this.yminmax=s},processRangeOptions:function(){var e=this.options,t=e.get("normalRangeMin"),r=e.get("normalRangeMax");t!==n&&(t<this.miny&&(this.miny=t),r>this.maxy&&(this.maxy=r)),e.get("chartRangeMin")!==n&&(e.get("chartRangeClip")||e.get("chartRangeMin")<this.miny)&&(this.miny=e.get("chartRangeMin")),e.get("chartRangeMax")!==n&&(e.get("chartRangeClip")||e.get("chartRangeMax")>this.maxy)&&(this.maxy=e.get("chartRangeMax")),e.get("chartRangeMinX")!==n&&(e.get("chartRangeClipX")||e.get("chartRangeMinX")<this.minx)&&(this.minx=e.get("chartRangeMinX")),e.get("chartRangeMaxX")!==n&&(e.get("chartRangeClipX")||e.get("chartRangeMaxX")>this.maxx)&&(this.maxx=e.get("chartRangeMaxX"))},drawNormalRange:function(e,r,i,s,o){var u=this.options.get("normalRangeMin"),a=this.options.get("normalRangeMax"),f=r+t.round(i-i*((a-this.miny)/o)),l=t.round(i*(a-u)/o);this.target.drawRect(e,f,s,l,n,this.options.get("normalRangeColor")).append()},render:function(){var e=this.options,i=this.target,s=this.canvasWidth,o=this.canvasHeight,u=this.vertices,a=e.get("spotRadius"),f=this.regionMap,l,c,h,p,d,v,m,g,y,w,E,S,T,N,C,k,L,A,O,M,_,D,P,H,B;if(!x._super.render.call(this))return;this.scanValues(),this.processRangeOptions(),P=this.xvalues,H=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2)return;p=d=0,l=this.maxx-this.minx===0?1:this.maxx-this.minx,c=this.maxy-this.miny===0?1:this.maxy-this.miny,h=this.yvalues.length-1,a&&(s<a*4||o<a*4)&&(a=0);if(a){_=e.get("highlightSpotColor")&&!e.get("disableInteraction");if(_||e.get("minSpotColor")||e.get("spotColor")&&H[h]===this.miny)o-=t.ceil(a);if(_||e.get("maxSpotColor")||e.get("spotColor")&&H[h]===this.maxy)o-=t.ceil(a),p+=t.ceil(a);if(_||(e.get("minSpotColor")||e.get("maxSpotColor"))&&(H[0]===this.miny||H[0]===this.maxy))d+=t.ceil(a),s-=t.ceil(a);if(_||e.get("spotColor")||e.get("minSpotColor")||e.get("maxSpotColor")&&(H[h]===this.miny||H[h]===this.maxy))s-=t.ceil(a)}o--,e.get("normalRangeMin")!==n&&!e.get("drawNormalOnTop")&&this.drawNormalRange(d,p,o,s,c),m=[],g=[m],N=C=null,k=H.length;for(B=0;B<k;B++)y=P[B],E=P[B+1],w=H[B],S=d+t.round((y-this.minx)*(s/l)),T=B<k-1?d+t.round((E-this.minx)*(s/l)):s,C=S+(T-S)/2,f[B]=[N||0,C,B],N=C,w===null?B&&(H[B-1]!==null&&(m=[],g.push(m)),u.push(null)):(w<this.miny&&(w=this.miny),w>this.maxy&&(w=this.maxy),m.length||m.push([S,p+o]),v=[S,p+t.round(o-o*((w-this.miny)/c))],m.push(v),u.push(v));L=[],A=[],O=g.length;for(B=0;B<O;B++)m=g[B],m.length&&(e.get("fillColor")&&(m.push([m[m.length-1][0],p+o]),A.push(m.slice(0)),m.pop()),m.length>2&&(m[0]=[m[0][0],m[1][1]]),L.push(m));O=A.length;for(B=0;B<O;B++)i.drawShape(A[B],e.get("fillColor"),e.get("fillColor")).append();e.get("normalRangeMin")!==n&&e.get("drawNormalOnTop")&&this.drawNormalRange(d,p,o,s,c),O=L.length;for(B=0;B<O;B++)i.drawShape(L[B],e.get("lineColor"),n,e.get("lineWidth")).append();if(a&&e.get("valueSpots")){M=e.get("valueSpots"),M.get===n&&(M=new b(M));for(B=0;B<k;B++)D=M.get(H[B]),D&&i.drawCircle(d+t.round((P[B]-this.minx)*(s/l)),p+t.round(o-o*((H[B]-this.miny)/c)),a,n,D).append()}a&&e.get("spotColor")&&H[h]!==null&&i.drawCircle(d+t.round((P[P.length-1]-this.minx)*(s/l)),p+t.round(o-o*((H[h]-this.miny)/c)),a,n,e.get("spotColor")).append(),this.maxy!==this.minyorg&&(a&&e.get("minSpotColor")&&(y=P[r.inArray(this.minyorg,H)],i.drawCircle(d+t.round((y-this.minx)*(s/l)),p+t.round(o-o*((this.minyorg-this.miny)/c)),a,n,e.get("minSpotColor")).append()),a&&e.get("maxSpotColor")&&(y=P[r.inArray(this.maxyorg,H)],i.drawCircle(d+t.round((y-this.minx)*(s/l)),p+t.round(o-o*((this.maxyorg-this.miny)/c)),a,n,e.get("maxSpotColor")).append())),this.lastShapeId=i.getLastShapeId(),this.canvasTop=p,i.render()}}),r.fn.sparkline.bar=T=o(r.fn.sparkline._base,S,{type:"bar",init:function(e,i,s,o,u){var f=parseInt(s.get("barWidth"),10),p=parseInt(s.get("barSpacing"),10),d=s.get("chartRangeMin"),v=s.get("chartRangeMax"),m=s.get("chartRangeClip"),g=Infinity,y=-Infinity,w,E,S,x,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z;T._super.init.call(this,e,i,s,o,u);for(C=0,k=i.length;C<k;C++){q=i[C],w=typeof q=="string"&&q.indexOf(":")>-1;if(w||r.isArray(q))H=!0,w&&(q=i[C]=c(q.split(":"))),q=h(q,null),E=t.min.apply(t,q),S=t.max.apply(t,q),E<g&&(g=E),S>y&&(y=S)}this.stacked=H,this.regionShapes={},this.barWidth=f,this.barSpacing=p,this.totalBarWidth=f+p,this.width=o=i.length*f+(i.length-1)*p,this.initTarget(),m&&(D=d===n?-Infinity:d,P=v===n?Infinity:v),N=[],x=H?[]:N;var W=[],X=[];for(C=0,k=i.length;C<k;C++)if(H){B=i[C],i[C]=I=[],W[C]=0,x[C]=X[C]=0;for(j=0,F=B.length;j<F;j++)q=I[j]=m?a(B[j],D,P):B[j],q!==null&&(q>0&&(W[C]+=q),g<0&&y>0?q<0?X[C]+=t.abs(q):x[C]+=q:x[C]+=t.abs(q-(q<0?y:g)),N.push(q))}else q=m?a(i[C],D,P):i[C],q=i[C]=l(q),q!==null&&N.push(q);this.max=_=t.max.apply(t,N),this.min=M=t.min.apply(t,N),this.stackMax=y=H?t.max.apply(t,W):_,this.stackMin=g=H?t.min.apply(t,N):M,s.get("chartRangeMin")!==n&&(s.get("chartRangeClip")||s.get("chartRangeMin")<M)&&(M=s.get("chartRangeMin")),s.get("chartRangeMax")!==n&&(s.get("chartRangeClip")||s.get("chartRangeMax")>_)&&(_=s.get("chartRangeMax")),this.zeroAxis=A=s.get("zeroAxis",!0),M<=0&&_>=0&&A?O=0:A==0?O=M:M>0?O=M:O=_,this.xaxisOffset=O,L=H?t.max.apply(t,x)+t.max.apply(t,X):_-M,this.canvasHeightEf=A&&M<0?this.canvasHeight-2:this.canvasHeight-1,M<O?(U=H&&_>=0?y:_,R=(U-O)/L*this.canvasHeight,R!==t.ceil(R)&&(this.canvasHeightEf-=2,R=t.ceil(R))):R=this.canvasHeight,this.yoffset=R,r.isArray(s.get("colorMap"))?(this.colorMapByIndex=s.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=s.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new b(this.colorMapByValue))),this.range=L},getRegion:function(e,r,i){var s=t.floor(r/this.totalBarWidth);return s<0||s>=this.values.length?n:s},getCurrentRegionFields:function(){var e=this.currentRegion,t=g(this.values[e]),n=[],r,i;for(i=t.length;i--;)r=t[i],n.push({isNull:r===null,value:r,color:this.calcColor(i,r,e),offset:e});return n},calcColor:function(e,t,i){var s=this.colorMapByIndex,o=this.colorMapByValue,u=this.options,a,f;return this.stacked?a=u.get("stackedBarColor"):a=t<0?u.get("negBarColor"):u.get("barColor"),t===0&&u.get("zeroColor")!==n&&(a=u.get("zeroColor")),o&&(f=o.get(t))?a=f:s&&s.length>i&&(a=s[i]),r.isArray(a)?a[e%a.length]:a},renderRegion:function(e,i){var s=this.values[e],o=this.options,u=this.xaxisOffset,a=[],f=this.range,l=this.stacked,c=this.target,h=e*this.totalBarWidth,p=this.canvasHeightEf,v=this.yoffset,m,g,y,b,w,E,S,x,T,N;s=r.isArray(s)?s:[s],S=s.length,x=s[0],b=d(null,s),N=d(u,s,!0);if(b)return o.get("nullColor")?(y=i?o.get("nullColor"):this.calcHighlightColor(o.get("nullColor"),o),m=v>0?v-1:v,c.drawRect(h,m,this.barWidth-1,0,y,y)):n;w=v;for(E=0;E<S;E++){x=s[E];if(l&&x===u){if(!N||T)continue;T=!0}f>0?g=t.floor(p*(t.abs(x-u)/f))+1:g=1,x<u||x===u&&v===0?(m=w,w+=g):(m=v-g,v-=g),y=this.calcColor(E,x,e),i&&(y=this.calcHighlightColor(y,o)),a.push(c.drawRect(h,m,this.barWidth-1,g-1,y,y))}return a.length===1?a[0]:a}}),r.fn.sparkline.tristate=N=o(r.fn.sparkline._base,S,{type:"tristate",init:function(e,t,i,s,o){var u=parseInt(i.get("barWidth"),10),a=parseInt(i.get("barSpacing"),10);N._super.init.call(this,e,t,i,s,o),this.regionShapes={},this.barWidth=u,this.barSpacing=a,this.totalBarWidth=u+a,this.values=r.map(t,Number),this.width=s=t.length*u+(t.length-1)*a,r.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new b(this.colorMapByValue))),this.initTarget()},getRegion:function(e,n,r){return t.floor(n/this.totalBarWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===n,value:this.values[e],color:this.calcColor(this.values[e],e),offset:e}},calcColor:function(e,t){var n=this.values,r=this.options,i=this.colorMapByIndex,s=this.colorMapByValue,o,u;return s&&(u=s.get(e))?o=u:i&&i.length>t?o=i[t]:n[t]<0?o=r.get("negBarColor"):n[t]>0?o=r.get("posBarColor"):o=r.get("zeroBarColor"),o},renderRegion:function(e,n){var r=this.values,i=this.options,s=this.target,o,u,a,f,l,c;o=s.pixelHeight,a=t.round(o/2),f=e*this.totalBarWidth,r[e]<0?(l=a,u=a-1):r[e]>0?(l=0,u=a-1):(l=a-1,u=2),c=this.calcColor(r[e],e);if(c===null)return;return n&&(c=this.calcHighlightColor(c,i)),s.drawRect(f,l,this.barWidth-1,u-1,c,c)}}),r.fn.sparkline.discrete=C=o(r.fn.sparkline._base,S,{type:"discrete",init:function(e,i,s,o,u){C._super.init.call(this,e,i,s,o,u),this.regionShapes={},this.values=i=r.map(i,Number),this.min=t.min.apply(t,i),this.max=t.max.apply(t,i),this.range=this.max-this.min,this.width=o=s.get("width")==="auto"?i.length*2:this.width,this.interval=t.floor(o/i.length),this.itemWidth=o/i.length,s.get("chartRangeMin")!==n&&(s.get("chartRangeClip")||s.get("chartRangeMin")<this.min)&&(this.min=s.get("chartRangeMin")),s.get("chartRangeMax")!==n&&(s.get("chartRangeClip")||s.get("chartRangeMax")>this.max)&&(this.max=s.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=s.get("lineHeight")==="auto"?t.round(this.canvasHeight*.3):s.get("lineHeight"))},getRegion:function(e,n,r){return t.floor(n/this.itemWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===n,value:this.values[e],offset:e}},renderRegion:function(e,n){var r=this.values,i=this.options,s=this.min,o=this.max,u=this.range,f=this.interval,l=this.target,c=this.canvasHeight,h=this.lineHeight,p=c-h,d,v,m,g;return v=a(r[e],s,o),g=e*f,d=t.round(p-p*((v-s)/u)),m=i.get("thresholdColor")&&v<i.get("thresholdValue")?i.get("thresholdColor"):i.get("lineColor"),n&&(m=this.calcHighlightColor(m,i)),l.drawLine(g,d,g,d+h,m)}}),r.fn.sparkline.bullet=k=o(r.fn.sparkline._base,{type:"bullet",init:function(e,r,i,s,o){var u,a,f;k._super.init.call(this,e,r,i,s,o),this.values=r=c(r),f=r.slice(),f[0]=f[0]===null?f[2]:f[0],f[1]=r[1]===null?f[2]:f[1],u=t.min.apply(t,r),a=t.max.apply(t,r),i.get("base")===n?u=u<0?u:0:u=i.get("base"),this.min=u,this.max=a,this.range=a-u,this.shapes={},this.valueShapes={},this.regiondata={},this.width=s=i.get("width")==="auto"?"4.0em":s,this.target=this.$el.simpledraw(s,o,i.get("composite")),r.length||(this.disabled=!0),this.initTarget()},getRegion:function(e,t,r){var i=this.target.getShapeAt(e,t,r);return i!==n&&this.shapes[i]!==n?this.shapes[i]:n},getCurrentRegionFields:function(){var e=this.currentRegion;return{fieldkey:e.substr(0,1),value:this.values[e.substr(1)],region:e}},changeHighlight:function(e){var t=this.currentRegion,n=this.valueShapes[t],r;delete this.shapes[n];switch(t.substr(0,1)){case"r":r=this.renderRange(t.substr(1),e);break;case"p":r=this.renderPerformance(e);break;case"t":r=this.renderTarget(e)}this.valueShapes[t]=r.id,this.shapes[r.id]=t,this.target.replaceWithShape(n,r)},renderRange:function(e,n){var r=this.values[e],i=t.round(this.canvasWidth*((r-this.min)/this.range)),s=this.options.get("rangeColors")[e-2];return n&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(0,0,i-1,this.canvasHeight-1,s,s)},renderPerformance:function(e){var n=this.values[1],r=t.round(this.canvasWidth*((n-this.min)/this.range)),i=this.options.get("performanceColor");return e&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(0,t.round(this.canvasHeight*.3),r-1,t.round(this.canvasHeight*.4)-1,i,i)},renderTarget:function(e){var n=this.values[0],r=t.round(this.canvasWidth*((n-this.min)/this.range)-this.options.get("targetWidth")/2),i=t.round(this.canvasHeight*.1),s=this.canvasHeight-i*2,o=this.options.get("targetColor");return e&&(o=this.calcHighlightColor(o,this.options)),this.target.drawRect(r,i,this.options.get("targetWidth")-1,s-1,o,o)},render:function(){var e=this.values.length,t=this.target,n,r;if(!k._super.render.call(this))return;for(n=2;n<e;n++)r=this.renderRange(n).append(),this.shapes[r.id]="r"+n,this.valueShapes["r"+n]=r.id;this.values[1]!==null&&(r=this.renderPerformance().append(),this.shapes[r.id]="p1",this.valueShapes.p1=r.id),this.values[0]!==null&&(r=this.renderTarget().append(),this.shapes[r.id]="t0",this.valueShapes.t0=r.id),t.render()}}),r.fn.sparkline.pie=L=o(r.fn.sparkline._base,{type:"pie",init:function(e,n,i,s,o){var u=0,a;L._super.init.call(this,e,n,i,s,o),this.shapes={},this.valueShapes={},this.values=n=r.map(n,Number),i.get("width")==="auto"&&(this.width=this.height);if(n.length>0)for(a=n.length;a--;)u+=n[a];this.total=u,this.initTarget(),this.radius=t.floor(t.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(e,t,r){var i=this.target.getShapeAt(e,t,r);return i!==n&&this.shapes[i]!==n?this.shapes[i]:n},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===n,value:this.values[e],percent:this.values[e]/this.total*100,color:this.options.get("sliceColors")[e%this.options.get("sliceColors").length],offset:e}},changeHighlight:function(e){var t=this.currentRegion,n=this.renderSlice(t,e),r=this.valueShapes[t];delete this.shapes[r],this.target.replaceWithShape(r,n),this.valueShapes[t]=n.id,this.shapes[n.id]=t},renderSlice:function(e,r){var i=this.target,s=this.options,o=this.radius,u=s.get("borderWidth"),a=s.get("offset"),f=2*t.PI,l=this.values,c=this.total,h=a?2*t.PI*(a/360):0,p,d,v,m,g;m=l.length;for(v=0;v<m;v++){p=h,d=h,c>0&&(d=h+f*(l[v]/c));if(e===v)return g=s.get("sliceColors")[v%s.get("sliceColors").length],r&&(g=this.calcHighlightColor(g,s)),i.drawPieSlice(o,o,o-u,p,d,n,g);h=d}},render:function(){var e=this.target,r=this.values,i=this.options,s=this.radius,o=i.get("borderWidth"),u,a;if(!L._super.render.call(this))return;o&&e.drawCircle(s,s,t.floor(s-o/2),i.get("borderColor"),n,o).append();for(a=r.length;a--;)r[a]&&(u=this.renderSlice(a).append(),this.valueShapes[a]=u.id,this.shapes[u.id]=a);e.render()}}),r.fn.sparkline.box=A=o(r.fn.sparkline._base,{type:"box",init:function(e,t,n,i,s){A._super.init.call(this,e,t,n,i,s),this.values=r.map(t,Number),this.width=n.get("width")==="auto"?"4.0em":i,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var e=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==n&&e.push({field:"lo",value:this.loutlier}),this.routlier!==n&&e.push({field:"ro",value:this.routlier}),this.lwhisker!==n&&e.push({field:"lw",value:this.lwhisker}),this.rwhisker!==n&&e.push({field:"rw",value:this.rwhisker}),e},render:function(){var e=this.target,r=this.values,i=r.length,s=this.options,o=this.canvasWidth,u=this.canvasHeight,a=s.get("chartRangeMin")===n?t.min.apply(t,r):s.get("chartRangeMin"),l=s.get("chartRangeMax")===n?t.max.apply(t,r):s.get("chartRangeMax"),c=0,h,p,d,v,m,g,y,b,w,E,S;if(!A._super.render.call(this))return;if(s.get("raw"))s.get("showOutliers")&&r.length>5?(p=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6]):(h=r[0],v=r[1],m=r[2],g=r[3],y=r[4]);else{r.sort(function(e,t){return e-t}),v=f(r,1),m=f(r,2),g=f(r,3),d=g-v;if(s.get("showOutliers")){h=y=n;for(w=0;w<i;w++)h===n&&r[w]>v-d*s.get("outlierIQR")&&(h=r[w]),r[w]<g+d*s.get("outlierIQR")&&(y=r[w]);p=r[0],b=r[i-1]}else h=r[0],y=r[i-1]}this.quartiles=[v,m,g],this.lwhisker=h,this.rwhisker=y,this.loutlier=p,this.routlier=b,S=o/(l-a+1),s.get("showOutliers")&&(c=t.ceil(s.get("spotRadius")),o-=2*t.ceil(s.get("spotRadius")),S=o/(l-a+1),p<h&&e.drawCircle((p-a)*S+c,u/2,s.get("spotRadius"),s.get("outlierLineColor"),s.get("outlierFillColor")).append(),b>y&&e.drawCircle((b-a)*S+c,u/2,s.get("spotRadius"),s.get("outlierLineColor"),s.get("outlierFillColor")).append()),e.drawRect(t.round((v-a)*S+c),t.round(u*.1),t.round((g-v)*S),t.round(u*.8),s.get("boxLineColor"),s.get("boxFillColor")).append(),e.drawLine(t.round((h-a)*S+c),t.round(u/2),t.round((v-a)*S+c),t.round(u/2),s.get("lineColor")).append(),e.drawLine(t.round((h-a)*S+c),t.round(u/4),t.round((h-a)*S+c),t.round(u-u/4),s.get("whiskerColor")).append(),e.drawLine(t.round((y-a)*S+c),t.round(u/2),t.round((g-a)*S+c),t.round(u/2),s.get("lineColor")).append(),e.drawLine(t.round((y-a)*S+c),t.round(u/4),t.round((y-a)*S+c),t.round(u-u/4),s.get("whiskerColor")).append(),e.drawLine(t.round((m-a)*S+c),t.round(u*.1),t.round((m-a)*S+c),t.round(u*.9),s.get("medianColor")).append(),s.get("target")&&(E=t.ceil(s.get("spotRadius")),e.drawLine(t.round((s.get("target")-a)*S+c),t.round(u/2-E),t.round((s.get("target")-a)*S+c),t.round(u/2+E),s.get("targetColor")).append(),e.drawLine(t.round((s.get("target")-a)*S+c-E),t.round(u/2),t.round((s.get("target")-a)*S+c+E),t.round(u/2),s.get("targetColor")).append()),e.render()}}),_=o({init:function(e,t,n,r){this.target=e,this.id=t,this.type=n,this.args=r},append:function(){return this.target.appendShape(this),this}}),D=o({_pxregex:/(\d+)(px)?\s*$/i,init:function(e,t,n){if(!e)return;this.width=e,this.height=t,this.target=n,this.lastShapeId=null,n[0]&&(n=n[0]),r.data(n,"_jqs_vcanvas",this)},drawLine:function(e,t,n,r,i,s){return this.drawShape([[e,t],[n,r]],i,s)},drawShape:function(e,t,n,r){return this._genShape("Shape",[e,t,n,r])},drawCircle:function(e,t,n,r,i,s){return this._genShape("Circle",[e,t,n,r,i,s])},drawPieSlice:function(e,t,n,r,i,s,o){return this._genShape("PieSlice",[e,t,n,r,i,s,o])},drawRect:function(e,t,n,r,i,s){return this._genShape("Rect",[e,t,n,r,i,s])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(e,t){r(t).html(e)},_calculatePixelDims:function(e,t,n){var i;i=this._pxregex.exec(t),i?this.pixelHeight=i[1]:this.pixelHeight=r(n).height(),i=this._pxregex.exec(e),i?this.pixelWidth=i[1]:this.pixelWidth=r(n).width()},_genShape:function(e,t){var n=j++;return t.unshift(n),new _(this,n,e,t)},appendShape:function(e){alert("appendShape not implemented")},replaceWithShape:function(e,t){alert("replaceWithShape not implemented")},insertAfterShape:function(e,t){alert("insertAfterShape not implemented")},removeShapeId:function(e){alert("removeShapeId not implemented")},getShapeAt:function(e,t,n){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),P=o(D,{init:function(t,i,s,o){P._super.init.call(this,t,i,s),this.canvas=e.createElement("canvas"),s[0]&&(s=s[0]),r.data(s,"_jqs_vcanvas",this),r(this.canvas).css({display:"inline-block",width:t,height:i,verticalAlign:"top"}),this._insert(this.canvas,s),this._calculatePixelDims(t,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=o,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n,r(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(e,t,r){var i=this.canvas.getContext("2d");return e!==n&&(i.strokeStyle=e),i.lineWidth=r===n?1:r,t!==n&&(i.fillStyle=t),i},reset:function(){var e=this._getContext();e.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n},_drawShape:function(e,t,r,i,s){var o=this._getContext(r,i,s),u,a;o.beginPath(),o.moveTo(t[0][0]+.5,t[0][1]+.5);for(u=1,a=t.length;u<a;u++)o.lineTo(t[u][0]+.5,t[u][1]+.5);r!==n&&o.stroke(),i!==n&&o.fill(),this.targetX!==n&&this.targetY!==n&&o.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawCircle:function(e,r,i,s,o,u,a){var f=this._getContext(o,u,a);f.beginPath(),f.arc(r,i,s,0,2*t.PI,!1),this.targetX!==n&&this.targetY!==n&&f.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e),o!==n&&f.stroke(),u!==n&&f.fill()},_drawPieSlice:function(e,t,r,i,s,o,u,a){var f=this._getContext(u,a);f.beginPath(),f.moveTo(t,r),f.arc(t,r,i,s,o,!1),f.lineTo(t,r),f.closePath(),u!==n&&f.stroke(),a&&f.fill(),this.targetX!==n&&this.targetY!==n&&f.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawRect:function(e,t,n,r,i,s,o){return this._drawShape(e,[[t,n],[t+r,n],[t+r,n+i],[t,n+i],[t,n]],s,o)},appendShape:function(e){return this.shapes[e.id]=e,this.shapeseq.push(e.id),this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n=this.shapeseq,r;this.shapes[t.id]=t;for(r=n.length;r--;)n[r]==e&&(n[r]=t.id);delete this.shapes[e]},replaceWithShapes:function(e,t){var n=this.shapeseq,r={},i,s,o;for(s=e.length;s--;)r[e[s]]=!0;for(s=n.length;s--;)i=n[s],r[i]&&(n.splice(s,1),delete this.shapes[i],o=s);for(s=t.length;s--;)n.splice(o,0,t[s].id),this.shapes[t[s].id]=t[s]},insertAfterShape:function(e,t){var n=this.shapeseq,r;for(r=n.length;r--;)if(n[r]===e){n.splice(r+1,0,t.id),this.shapes[t.id]=t;return}},removeShapeId:function(e){var t=this.shapeseq,n;for(n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}delete this.shapes[e]},getShapeAt:function(e,t,n){return this.targetX=t,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var e=this.shapeseq,t=this.shapes,n=e.length,r=this._getContext(),i,s,o;r.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(o=0;o<n;o++)i=e[o],s=t[i],this["_draw"+s.type].apply(this,s.args);this.interact||(this.shapes={},this.shapeseq=[])}}),H=o(D,{init:function(t,n,i){var s;H._super.init.call(this,t,n,i),i[0]&&(i=i[0]),r.data(i,"_jqs_vcanvas",this),this.canvas=e.createElement("span"),r(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:n,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(t,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,s='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",s),this.group=r(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(e,t,r,i,s){var o=[],u,a,f,l,c,h,p;for(p=0,h=t.length;p<h;p++)o[p]=""+t[p][0]+","+t[p][1];return u=o.splice(0,1),s=s===n?1:s,a=r===n?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+r+'" ',f=i===n?' filled="false"':' fillColor="'+i+'" filled="true" ',l=o[0]===o[o.length-1]?"x ":"",c='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+e+'" '+a+f+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+u+" l "+o.join(", ")+" "+l+'e">'+" </v:shape>",c},_drawCircle:function(e,t,r,i,s,o,u){var a,f,l;return t-=i,r-=i,a=s===n?' stroked="false" ':' strokeWeight="'+u+'px" strokeColor="'+s+'" ',f=o===n?' filled="false"':' fillColor="'+o+'" filled="true" ',l='<v:oval  id="jqsshape'+e+'" '+a+f+' style="position:absolute;top:'+r+"px; left:"+t+"px; width:"+i*2+"px; height:"+i*2+'px"></v:oval>',l},_drawPieSlice:function(e,r,i,s,o,u,a,f){var l,c,h,p,d,v,m,g;if(o===u)return"";u-o===2*t.PI&&(o=0,u=2*t.PI),c=r+t.round(t.cos(o)*s),h=i+t.round(t.sin(o)*s),p=r+t.round(t.cos(u)*s),d=i+t.round(t.sin(u)*s);if(c===p&&h===d){if(u-o<t.PI)return"";c=p=r+s,h=d=i}return c===p&&h===d&&u-o<t.PI?"":(l=[r-s,i-s,r+s,i+s,c,h,p,d],v=a===n?' stroked="false" ':' strokeWeight="1px" strokeColor="'+a+'" ',m=f===n?' filled="false"':' fillColor="'+f+'" filled="true" ',g='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+e+'" '+v+m+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+r+","+i+" wa "+l.join(", ")+' x e">'+" </v:shape>",g)},_drawRect:function(e,t,n,r,i,s,o){return this._drawShape(e,[[t,n],[t,n+i],[t+r,n+i],[t+r,n],[t,n]],s,o)},reset:function(){this.group.innerHTML=""},appendShape:function(e){var t=this["_draw"+e.type].apply(this,e.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n=r("#jqsshape"+e),i=this["_draw"+t.type].apply(this,t.args);n[0].outerHTML=i},replaceWithShapes:function(e,t){var n=r("#jqsshape"+e[0]),i="",s=t.length,o;for(o=0;o<s;o++)i+=this["_draw"+t[o].type].apply(this,t[o].args);n[0].outerHTML=i;for(o=1;o<e.length;o++)r("#jqsshape"+e[o]).remove()},insertAfterShape:function(e,t){var n=r("#jqsshape"+e),i=this["_draw"+t.type].apply(this,t.args);n[0].insertAdjacentHTML("afterEnd",i)},removeShapeId:function(e){var t=r("#jqsshape"+e);this.group.removeChild(t[0])},getShapeAt:function(e,t,n){var r=e.id.substr(8);return r},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math),define("views/shared/results_table/renderers/NullCellRenderer",["require","exports","module","underscore","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("./BaseCellRenderer");return i.extend({canRender:function(e){return r.isNull(e.value)||r.isEqual(e.value,[])},render:function(e,t){e.html("&nbsp;")}})}),define("views/shared/results_table/renderers/NumberCellRenderer",["require","exports","module","underscore","../ResultsTableRow","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("../ResultsTableRow"),s=e("./BaseCellRenderer");return s.extend({canRender:function(e){return e.columnType==="number"},setup:function(e,t){e.addClass("numeric")},teardown:function(e,t){e.removeClass("numeric with-overlay")},render:function(e,t){t=r.extend({floatValue:parseFloat(t.value),heatValue:t.dataOverlay==="heatmap"?Math.min(Math.max(Math.ceil(t.value/t.heatDelta*1e3)/1e3,-1),1):null,MV_SUBCELL_CLASSNAME:i.MV_SUBCELL_CLASSNAME,MV_INDEX_ATTR:i.MV_INDEX_ATTR},t),t.dataOverlay==="highlow"||t.dataOverlay==="heatmap"?e.addClass("with-overlay"):e.removeClass("with-overlay"),e.html(r.template(this.template,t))},template:'            <% if (dataOverlay === "heatmap") { %>                <div class="overlay-cell">                    <div class="overlay-cell-value heat-value" style="opacity: <%- heatValue %>; filter: alpha(opacity=<%- heatValue * 100 %>);"></div>                </div>            <% } else if (dataOverlay === "highlow") { %>                <% if (floatValue === extremes.min) { %>                    <div class="overlay-cell">                        <div class="overlay-cell-value min-value"></div>                    </div>                <% } else if (floatValue === extremes.max) { %>                    <div class="overlay-cell">                        <div class="overlay-cell-value max-value"></div>                    </div>                <% } else { %>                    <div class="overlay-cell">                        <div class="overlay-cell-value no-value"></div>                    </div>                <% } %>            <% } %>            <% if (_.isArray(value)) { %>                <% _(value).each(function(subValue, i) { %>                    <div class="<%- MV_SUBCELL_CLASSNAME %>" <%- MV_INDEX_ATTR %>="<%- i %>">                        <%- subValue %>                    </div>                <% }) %>            <% } else { %>                <%- value %>            <% } %>        '})}),define("views/shared/results_table/renderers/SparklineCellRenderer",["require","exports","module","jquery","underscore","jquery.sparkline","./BaseCellRenderer"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("jquery.sparkline"),o=e("./BaseCellRenderer"),u={type:"line",lineColor:"#65A637",highlightSpotColor:null,minSpotColor:null,maxSpotColor:null,spotColor:null,fillColor:null};return o.extend({canRender:function(e){return i.isArray(e.value)&&e.value[0]==="##__SPARKLINE__##"},render:function(e,t){var n=i.extend({},u,t.sparklineFormat);e.sparkline(i.isArray(t.value)?i.map(t.value.slice(1),function(e){return e&&parseFloat(e)||0}):[],n)}})}),define("views/shared/results_table/renderers/StringCellRenderer",["require","exports","module","underscore","../ResultsTableRow","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("../ResultsTableRow"),s=e("./BaseCellRenderer");return s.extend({canRender:function(e){return!0},render:function(e,t){t=r.extend({MV_SUBCELL_CLASSNAME:i.MV_SUBCELL_CLASSNAME,MV_INDEX_ATTR:i.MV_INDEX_ATTR},t),e.html(r.template(this.template,t))},template:'            <% if (_.isArray(value)) { %>                <% _(value).each(function(subValue, i) { %>                    <div class="<%- MV_SUBCELL_CLASSNAME %>" <%- MV_INDEX_ATTR %>="<%- i %>">                        <%- subValue %>                    </div>                <% }) %>            <% } else { %>                <%- value %>            <% } %>        '})}),define("views/shared/results_table/renderers/TimeCellRenderer",["require","exports","module","underscore","splunk.i18n","util/time_utils","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("splunk.i18n"),s=e("util/time_utils"),o=e("./BaseCellRenderer");return o.extend({canRender:function(e){return e.columnType==="timestamp"},setup:function(e,t){e.addClass("timestamp")},teardown:function(e,t){e.removeClass("timestamp")},render:function(e,t){t=r.extend({formattedValue:t.value!=="ALL"?i.format_date(s.isoToDateObject(t.value),t.timestampFormat):t.value},t),e.html(r.template(this.template,t))},template:"            <%- formattedValue %>        "})}),define("views/shared/results_table/ResultsTableMaster",["jquery","underscore","module","views/Base","./ResultsTableHeader","./ResultsTableRow","views/shared/delegates/ColumnSort","views/shared/delegates/TableDock","views/shared/delegates/TableHeadStatic","helpers/grid/RowIterator","helpers/Printer","splunk.util","util/general_utils","util/time_utils","util/math_utils","jquery.sparkline","./renderers/BaseCellRenderer","./renderers/NullCellRenderer","./renderers/NumberCellRenderer","./renderers/SparklineCellRenderer","./renderers/StringCellRenderer","./renderers/TimeCellRenderer","util/console"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){var x=/^[^_]|^_time$|^_raw$/,T={year:"YYYY",month:"YYYY-MM",day:"YYYY-MM-dd",hour:"YYYY-MM-dd HH:00",minute:"YYYY-MM-dd HH:mm:00",second:"YYYY-MM-dd HH:mm:ss"},N=["display.statistics.wrap","display.statistics.rowNumbers","display.statistics.overlay","display.statistics.sparkline.format"],C="."+s.MV_SUBCELL_CLASSNAME,k=13;return r.extend({moduleId:n.id,events:{"mouseover tbody td":function(t){this.handleCellMouseover(e(t.target))},"mouseout tbody td":function(t){this.handleCellMouseout(e(t.target))},"click tbody td":function(t){t.preventDefault(),this.handleCellClick(e(t.target),t)},"keypress tbody td":function(t){t.which===k&&(t.preventDefault(),this.handleCellClick(e(t.target),t))},"keypress tbody tr":function(t){t.which===k&&(t.preventDefault(),this.handleCellClick(e(t.target).find("td").first(),t))}},initialize:function(n){r.prototype.initialize.call(this,n);if(this.options.enableStaticHeader&&this.options.enableTableDock!==!1)throw new Error("Static header and docking header cannot be enabled at the same time");var i={sortKeyAttr:"sortKey",sortDirAttr:"sortDirection",countAttr:"count",offsetAttr:"offset",numRowSplits:1};this.options=e.extend(!0,i,this.options),this.rawFields=[],this.rawRows=[],this.dataFields=[],this.dataRows=[],this.columnTypes={},this.fieldHeatDeltas={},this.fieldExtremes={},this.fieldTimestampFormats={},this.sparklineFormatSettings={},this._cellRenderers=[],this.children.columnSort=new o({el:this.el,model:this.model.metadata,autoUpdate:!0,sortKeyAttr:this.options.sortKeyAttr,sortDirAttr:this.options.sortDirAttr}),this.options.enableTableDock!==!1&&(this.children.tableDock=new u({el:this.el,offset:this.options.tableDockOffset})),this.model.results.on("change",t.debounce(this.handleResultsChange,0),this),this.model.format.on("change",this.handleFormatChange,this),this.updateFormatSettings(),this.readResults(),this.options.disable&&this.$el.addClass("table-disabled"),this.options.enableStaticHeader&&l.on(l.PRINT_END,function(){this.children.staticHead.update()},this),this.addCellRenderer(new w),this.addCellRenderer(new E),this.addCellRenderer(new y),this.addCellRenderer(new b),this.addCellRenderer(new g)},addCellRenderer:function(e){if(!(typeof e=="function"||e instanceof m))throw new Error("Parameter cellRenderer must be a function or an instance of views/shared/results_table/renderers/BaseCellRenderer.");this._cellRenderers.unshift(e)},removeCellRenderer:function(e){if(!(typeof e=="function"||e instanceof m))throw new Error("Parameter cellRenderer must be a function or an instance of views/shared/results_table/renderers/BaseCellRenderer.");var t=this._cellRenderers;for(var n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);break}},getCellRenderers:function(){return this._cellRenderers.concat()},remove:function(){return l.off(null,null,this),r.prototype.remove.apply(this,arguments)},handleResultsChange:function(){this.readResults(),this.render()},readResults:function(){this.rawFields=this.getFieldList(),this.rawRows=this.model.results.get("rows")||[],this.dataFields=t(this.rawFields).filter(this.isDataField,this),this.dataRows=t(this.rawRows).map(function(e){return t(e).filter(function(e,t){return this.isDataField(this.rawFields[t])},this)},this)},handleFormatChange:function(){var e=this.model.format.changedAttributes();if(t(e).chain().pick(N).isEmpty().value()){e.hasOwnProperty("display.statistics.drilldown")&&this.updateDrilldownClasses();return}this.updateFormatSettings(),this.debouncedRender()},render:function(){this.options.enableStaticHeader&&!this.el.innerHTML&&(this.$el.html(this.staticHeaderTemplate),this.children.staticHead=new a({el:this.el,flexWidthColumn:!1}));var t=this.compiledTemplate({wrapResults:c.normalizeBoolean(this.model.format.get("display.statistics.wrap")),numDataColumns:this.dataFields.length}),n=e(t);this.disposeOfChildren();if(this.dataFields.length>0&&this.dataRows.length>0){S.debug("rendering results table with data:",{fields:this.dataFields,rows:this.dataRows});var r=this.resultsAsColumns();this.updateColumnTypes(r),this.insertHeader(n,this.dataFields),this.insertRows(n,this.dataFields,this.dataRows,r),this.children.columnSort.update(n)}return this.options.enableStaticHeader?(this.$(".scroll-table-wrapper").html(n),this.children.staticHead.update()):this.$el.html(n),e.sparkline_display_visible(),this.children.tableDock&&this.children.tableDock.update(),this.options.disable&&(this.$tableDisabled=e('<div class="table-disabled-screen"></div>'),this.$el.append(this.$tableDisabled)),this.updateDrilldownClasses(),this.trigger("rendered"),this.reflow(),this},reflow:function(){r.prototype.reflow.apply(this,arguments),this.$tableDisabled&&this.$tableDisabled.width(this.$el[0].scrollWidth)},handleCellMouseover:function(e){var t=this.model.format.get("display.statistics.drilldown"),n=c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers"));if(t==="none")return;var r=e.closest("td"),i=this.getCellInfo(r),s=this.children["row_"+i.rowIndex];if(!s)return;if(t==="cell"){if(r.find(C).length>0&&!e.is(C))return;this.children.header.highlightColumn(i.cellIndex),this.children.tableDock&&this.children.tableDock.$headerTable.find("th").eq(parseInt(i.cellIndex,10)+(n?1:0)).addClass("highlighted"),this.children.staticHead&&this.children.staticHead.$headerTable.find("th").eq(parseInt(i.cellIndex,10)+(n?1:0)).addClass("highlighted"),s.highlightCell(e,i.cellIndex)}else s.highlightRow()},handleCellMouseout:function(e){var t=this.model.format.get("display.statistics.drilldown"),n=c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers"));if(t==="none")return;var r=e.closest("td"),i=this.getCellInfo(r),s=this.children["row_"+i.rowIndex];if(!s)return;if(t==="cell"){if(r.find(C).length>0&&!e.is(C))return;this.children.header.unHighlightColumn(i.cellIndex),this.children.tableDock&&this.children.tableDock.$headerTable.find("th").eq(parseInt(i.cellIndex,10)+(n?1:0)).removeClass("highlighted"),this.children.staticHead&&this.children.staticHead.$headerTable.find("th").eq(parseInt(i.cellIndex,10)+(n?1:0)).removeClass("highlighted"),s.unHighlightCell(e,i.cellIndex)}else s.unHighlightRow()},handleCellClick:function(e,t){var n=this.model.format.get("display.statistics.drilldown");if(n==="none")return;var r=e.closest("td"),i=r.find(C).length>0;if(n==="cell"&&i&&!e.is(C))return;var s=this.getCellInfo(r),o=!!t.ctrlKey||!!t.metaKey;i&&(s.mvIndex=this.getMultiValueIndex(e)),this.emitDrilldownEvent(s,o,t)},emitDrilldownEvent:function(e,n,r){if(e.rowIndex===undefined||e.cellIndex===undefined)return;var i=e.rowIndex,s=e.cellIndex,o=this.dataFields[0],u=this.isTimeField(o),a=this.dataRows[i][0],f={modifierKey:n,name:o,value:u?c.getEpochTimeFromISO(a):a};if(u){var l=this.getSpanSeriesForTimeField(o);l&&(f._span=parseInt(l[s],10))}var h=t.isArray(this.dataRows[i][s]);if(s>this.options.numRowSplits-1||h)f.name2=this.dataFields[s],f.value2=h?this.dataRows[i][s][e.mvIndex||0]:this.dataRows[i][s];var p={};t(this.dataRows[i]).each(function(e,t){p["row."+this.dataFields[t]]=e},this),f.rowContext=p,f.rowIndex=parseInt(i,10),f.cellIndex=parseInt(s,10),f.originalEvent=r,this.trigger("cellClick",f)},insertHeader:function(e,t){this.children.header=new i({rowNumbers:c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers")),fields:t,columnTypes:this.columnTypes,sortKeyAttribute:o.SORT_KEY_ATTR}),e.find("thead").replaceWith(this.children.header.render().$el)},insertRows:function(e,n,r,i){var o=this.model.format.get("display.statistics.overlay"),u=c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers"));o==="heatmap"?this.updateHeatDeltas(i):o==="highlow"&&this.updateExtremes(i),t(this.columnTypes).contains("timestamp")&&this.updateFieldTimestampFormats(n,r,i);var a=new f({offset:this.model.metadata.get(this.options.offsetAttr)}),l=e.find("tbody");a.eachRow(r,function(e,t,r){var i={table:this,cells:this.generateCellObjects(e,n,o),dataOverlay:o,rowIndex:t,numRowSplits:this.options.numRowSplits};u&&(i.rowNumber=r);var a=this.children["row_"+t]=new s(i);l.append(a.render().$el)},this)},generateCellObjects:function(e,n,r){return t(e).map(function(e,t){var i=n[t];return{value:e,field:i,dataOverlay:r,columnType:this.columnTypes[i]||"string",heatDelta:this.fieldHeatDeltas[i],extremes:this.fieldExtremes[i],timestampFormat:this.fieldTimestampFormats[i],sparklineFormat:this.sparklineFormatSettings[i],index:t}},this)},disposeOfChildren:function(){t(this.children).each(function(e,t){if(t==="header"||t.substr(0,4)==="row_")e.dispose(),delete this.children[t]},this)},resultsAsColumns:function(){var e={},n=this.model.results.get("rows")||[];return t(this.getFieldList()).each(function(r,i){e[r]=t(n).pluck(i)}),e},updateDrilldownClasses:function(){var e=this.model.format.get("display.statistics.drilldown"),t=this.$(".table"),n=t.find("tbody > tr"),r=t.find("tbody > tr > td");e==="none"?(t.removeClass("table-drilldown table-drilldown-row table-drilldown-cell"),r.removeAttr("tabindex"),n.removeAttr("tabindex")):e==="cell"?(t.addClass("table-drilldown table-drilldown-cell").removeClass("table-drilldown-row"),r.attr("tabindex","0"),n.removeAttr("tabindex")):(t.addClass("table-drilldown table-drilldown-row").removeClass("table-drilldown-cell"),n.attr("tabindex","0"),r.removeAttr("tabindex"))},updateFormatSettings:function(){var e=this.sparklineFormatSettings={};this.model.format.has("display.statistics.sparkline.format")&&t.extend(e,this.model.format.get("display.statistics.sparkline.format"))},updateColumnTypes:function(e){this.columnTypes={},t(e).each(function(e,t){if(!this.isDataField(t))return;this.isTimeField(t)?this.columnTypes[t]="timestamp":this.columnTypes[t]=h.valuesAreNumeric(e)?"number":"string"},this)},updateHeatDeltas:function(e){var n=this.getAllNumericValues(e),r=h.getPercentiles(n.sort(function(e,t){return e-t}),.05,.95),i=Math.max(Math.abs(r.lower),Math.abs(r.upper));this.fieldHeatDeltas={},t(e).each(function(e,t){this.columnTypes[t]==="number"&&(this.fieldHeatDeltas[t]=i)},this)},updateExtremes:function(e){var n=this.getAllNumericValues(e),r={min:t(n).chain().without(null).min().value(),max:t(n).max()};this.fieldExtremes={},t(e).each(function(e,t){this.columnTypes[t]==="number"&&(this.fieldExtremes[t]=r)},this)},getAllNumericValues:function(e){var n=function(e){return d.strictParseFloat(e)||null};return t(e).chain().filter(function(e,t){return this.columnTypes[t]==="number"},this).flatten().map(n).value()},updateFieldTimestampFormats:function(e,n,r){this.fieldTimestampFormats={},t(e).each(function(e,t){if(this.isTimeField(e))if(this.isBucketedTimeField(e)){var n=p.determineLabelGranularity(r[e]);this.fieldTimestampFormats[e]=T[n]}else this.fieldTimestampFormats[e]=T.second},this)},getFieldList:function(){return t(this.model.results.get("fields")||[]).map(function(e){return t(e).isString()?e:e.name})},isDataField:function(e){return x.test(e)},isTimeField:function(e){return e in{_time:!0,earliest_time:!0,latest_time:!0}},isBucketedTimeField:function(e){return e==="_time"},getSpanSeriesForTimeField:function(e){var t="_span";return this.resultsAsColumns()[t]},getCellInfo:function(e){return{cellIndex:e.attr(s.CELL_INDEX_ATTR),rowIndex:e.closest("tr").attr(s.ROW_INDEX_ATTR)}},getMultiValueIndex:function(e){return e.attr(s.MV_INDEX_ATTR)},template:'            <table class="table table-chrome table-striped <%= wrapResults ? "wrapped-results" : "not-wrapped-results" %> <%= numDataColumns === 1 ? \'single-column-table\' : \'\' %>">                <thead></thead>                <tbody></tbody>            </table>        ',staticHeaderTemplate:'            <div class="header-table-static"></div>            <div class="scroll-table-wrapper"></div>        '},{TIMESTAMP_FORMATS:T})}),define("splunkjs/mvc/drilldown",["require","underscore","jquery","./utils","splunk.util","uri/route","util/console","splunk.util","./sharedmodels","models/services/search/IntentionsParser","util/general_utils"],function(e){var t=e("underscore"),n=e("jquery"),r=e("./utils"),i=e("splunk.util"),s=e("uri/route"),o=e("util/console"),u=e("splunk.util"),a=e("./sharedmodels"),f=e("models/services/search/IntentionsParser"),l=e("util/general_utils"),c={intentionsParser:new f,applyPivotDrilldownIntention:function(e,i,s){var o,f,l,h=a.get("app"),p=s.query.resolve({qualified:!0}),d=n.Deferred(),v=s.job.properties().searchEarliestTime,m=s.job.properties().searchLatestTime,g={q:p,namespace:r.getCurrentApp()},y=[];return!v&&s.job.properties().earliestTime&&(v=u.getEpochTimeFromISO(s.job.properties().earliestTime)),!m&&s.job.properties().latestTime&&(m=u.getEpochTimeFromISO(s.job.properties().latestTime)),c.intentionsParser.clear({silent:!0}),e.type==="legendClick"?e.hasOwnProperty("name")&&e.hasOwnProperty("value")?o=c.intentionsParser.fetch({data:{q:p,action:"fieldvalue",field:e.name,value:e.value,fieldMetaData:JSON.stringify(s.job.properties().fieldMetadataResults),app:h.get("app"),owner:h.get("owner")}}):o=c.intentionsParser.fetch({data:{q:p,action:"keyword",field:e.name2,fieldMetaData:JSON.stringify(s.job.properties().fieldMetadataResults),app:h.get("app"),owner:h.get("owner")}}):(e._span&&c.intentionsParser.set({"dispatch.earliest_time":e.value,"dispatch.latest_time":JSON.stringify(parseFloat(e.value)+e._span)},{silent:!0}),i==="row"?(f=t(e.rowContext).keys().map(function(e){return e.replace("row.","")}),l=t(e.rowContext).values()):e.name==="_time"?(f=e.name2,l=e.value2):e.name&&e.name2?(f=[e.name,e.name2],l=[e.value,e.value2]):e.name?(f=e.name,l=e.value):(f=e.name2,l=e.value2),o=c.intentionsParser.fetch({data:{q:p,action:"fieldvalue",field:f||"",value:l||"",fieldMetaData:JSON.stringify(s.job.properties().fieldMetadataResults),app:h.get("app"),owner:h.get("owner")}})),o.done(function(){d.resolve({q:c.intentionsParser.get("fullSearch"),earliest:c.intentionsParser.get("dispatch.earliest_time")||v||0,latest:c.intentionsParser.get("dispatch.latest_time")||m||"now"})}),d},applyDrilldownIntention:function(e,t,s){var o=s.query.resolve({qualified:!0});if(l.isValidPivotSearch(o))return c.applyPivotDrilldownIntention(e,t,s);var a=n.Deferred(),f=s.job.properties().searchEarliestTime,h=s.job.properties().searchLatestTime,p={q:o,namespace:r.getCurrentApp()},d=[];return!f&&s.job.properties().earliestTime&&(f=u.getEpochTimeFromISO(s.job.properties().earliestTime)),!h&&s.job.properties().latestTime&&(h=u.getEpochTimeFromISO(s.job.properties().latestTime)),e.name==="_time"?(e.hasOwnProperty("_span")?(f=parseInt(e.value,10),h=f+parseInt(e._span,10)):(f=parseInt(e.value,10),h=f+1),d.push(["_time",[f,h].join("-")])):d.push([e.name,e.value]),t!=="all"&&t!=="cell"||!e.hasOwnProperty("name2")?d.push(d[0]):d.push([e.name2,e.value2]),p.intentions=JSON.stringify([{arg:{vals:d},flags:["keepevents"],name:"drilldown"}]),n.ajax({url:i.make_full_url("parser/parse"),data:p,type:"post",dataType:"json",async:!1,success:function(e){var t={q:i.stripLeadingSearchCommand(e.search)||p.q};f!==undefined&&(t.earliest=f),h!==undefined&&(t.latest=h),a.resolve(t)},error:function(e,t,n){a.reject(n)}}),a.promise()},handleDrilldown:function(e,t,n,i){c.applyDrilldownIntention(e,t,n).done(function(t){var n=r.getPageInfo(),o=s.search(n.root,n.locale,n.app,{data:t});r.redirect(o,e.modifierKey,i)})}};return c}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/paginator.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/paginatorview",["require","exports","module","underscore","./mvc","./basesplunkview","./settings","css!../css/paginator.css"],function(e,t,n){var r=e("underscore"),i=e("./mvc"),s=e("./basesplunkview"),o=e("./settings"),u=0,a=10;e("css!../css/paginator.css");var f=s.extend({moduleId:n.id,className:"splunk-paginator",events:{"click a":"onPageClick"},options:{itemCount:-1,page:u,pageSize:a},initialize:function(){this.configure(),this.settings.on("change",this.render,this)},hide:function(){this.$el.css("display","none")},render:function(e){this.$el.empty();var t=this.settings.get("pageSize"),n=this.settings.get("itemCount");if(n<=t)return this;var i=this.settings.get("page"),s=Math.ceil(n/t),o=Math.min(10,s);i>s&&(i=s,this.settings.set({page:i}));var u,a;u=Math.max(0,i-o/2),a=Math.min(s,u+o)-1,u=Math.max(0,a-o+1);var f=function(e){return"<a href='#' data-page='"+e+"'/>"},l='<a href="#" class="disabled"/>',c='<a href="#" class="selected"/>',h=this.$el,p=$(i==0?l:f("prev"),h);p.html("&laquo; "+r("prev").t()).appendTo(h);var d;for(d=u;d<=a;++d)p=$(d==i?c:f(d)),p.text(d+1).appendTo(h);return p=$(i==a?l:f("next"),h),p.html(r("next").t()+" &raquo;").appendTo(h),this},show:function(){this.$el.css("display","")},onPageClick:function(e){e.stopPropagation(),e.preventDefault();if($(e.currentTarget).is(".selected,.disabled"))return;var t=$(e.currentTarget).attr("data-page"),n=this.settings.get("page");switch(t){case"prev":e.shiftKey?n=0:n-=1;break;case"next":if(e.shiftKey){var r=this.settings.get("itemCount"),i=this.settings.get("pageSize");n=parseInt(r/i,10)-(r%i==0?1:0)}else n+=1;break;default:n=parseInt(t,10)}this.settings.set({page:n})}});return f}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/results-table.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/tableview",["require","exports","module","jquery","underscore","./mvc","./utils","splunk.util","backbone","./basesplunkview","views/shared/results_table/ResultsTableMaster","./messages","./drilldown","./paginatorview","views/shared/results_table/renderers/BaseCellRenderer","util/console","splunk.util","./tokenawaremodel","css!../css/results-table"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("./mvc"),o=e("./utils"),u=e("splunk.util"),a=e("backbone"),f=e("./basesplunkview"),l=e("views/shared/results_table/ResultsTableMaster"),c=e("./messages"),h=e("./drilldown"),p=e("./paginatorview"),d=e("views/shared/results_table/renderers/BaseCellRenderer"),v=e("util/console"),m=e("splunk.util"),g=e("./tokenawaremodel");e("css!../css/results-table");var y=/(["'].*?["']|[^"',\s]+)(?=\s*|\s*,|\s*$)/g,b=/^["']|["|']$/g,w=f.extend({moduleId:n.id,className:"splunk-table",options:{data:"preview",drilldown:"row",drilldownRedirect:!0,pagerPosition:"bottom",fields:[],pageSize:10},normalizeOptions:function(e){e.hasOwnProperty("count")&&this.settings.set("pageSize",parseInt(this.options.count,10)),e.hasOwnProperty("wrap")&&this.settings.set("wrap",u.normalizeBoolean(e.wrap)?"1":"0"),e.hasOwnProperty("rowNumbers")?this.settings.set("displayRowNumbers",u.normalizeBoolean(e.rowNumbers)?"1":"0"):e.hasOwnProperty("displayRowNumbers")&&this.settings.set("displayRowNumbers",u.normalizeBoolean(e.displayRowNumbers)?"1":"0"),e.hasOwnProperty("overlay")&&this.settings.set("dataOverlayMode",e["display.statistics.overlay"]),e.hasOwnProperty("drilldown")&&(e.drilldown==="all"?this.settings.set("drilldown","cell"):e.drilldown==="off"?this.settings.set("drilldown","none"):this.settings.set("drilldown",e.drilldown));if(e.format){var t={};i.each(e.format,function(e,n){i.each(e,function(e){e.type==="sparkline"&&(t[n]=e.options)})}),i(t).isEmpty()||this.settings.set({"sparkline.format":t})}},initialize:function(e){this.configure(),this.model=this.options.reportModel||g._createReportModel(),this.normalizeOptions(e),this.settings._sync=o.syncModels(this.settings,this.model,{auto:!0,alias:{displayRowNumbers:"display.statistics.rowNumbers",dataOverlayMode:"display.statistics.overlay",pageSize:"display.prefs.statistics.count"},prefix:"display.statistics.",include:["displayRowNumbers","dataOverlayMode","pageSize","stripedRows","drilldown","sortKey","sortDirection","overlay","count","sparkline.format","wrap","fields"],exclude:["drilldownRedirect"]});var t=this.results=new a.Model({rows:[],fields:[]}),n=this.metadata=new a.Model({pageSize:this.settings.get("pageSize")||10,offset:0}),u=this.table=new l({enableTableDock:!1,el:r("<div></div>").appendTo(this.el),model:{results:t,metadata:n,format:this.model}});this.listenTo(this.table,"rendered",function(){this.trigger("rendered",this)},this),this.settings._syncMeta=o.syncModels(this.settings,this.metadata,{include:["sortKey","sortDirection","pageSize"],auto:"push"}),n.on("change",this.applyFetchOptions,this);if(this.options.showPager!==!1){var f=r("<div></div>")[this.options.pagerPosition==="bottom"?"appendTo":"prependTo"](this.el),c=this.paginator=new p({id:i.uniqueId(this.id+"-paginator"),el:f,pageSize:n.get("pageSize")});c.settings.on("change:page",function(){var e=n.get("pageSize"),t=c.settings.get("page");this.metadata.set("offset",e*t)},this)}this.transformFieldsToArray(),this.listenTo(this.settings,"change:fields",this.onFieldsChanged),u.on("cellClick",this.emitDrilldownEvent,this),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.manager||this.onManagerChange(s.Components,null)},emitDrilldownEvent:function(e){var t={},n=this.manager;i.extend(t,{"click.name":e.name,"click.value":e.value}),e.hasOwnProperty("name2")?i.extend(t,{"click.name2":e.name2,"click.value2":e.value2}):i.extend(t,{"click.name2":e.name,"click.value2":e.value}),i.extend(t,e.rowContext);var r=this.resultsModel?this.resultsModel.data().rows:null;if(r&&e.rowIndex<r.length){var s=r[e.rowIndex],o=this.resultsModel.data().fields;i(o).each(function(e,n){e="row."+e,e in t||(t[e]=s[n])})}if(n.job){var u=n.job.properties().searchEarliestTime,a=n.job.properties().searchLatestTime;!u&&n.job.properties().earliestTime&&(u=m.getEpochTimeFromISO(n.job.properties().earliestTime)),!a&&n.job.properties().latestTime&&(a=m.getEpochTimeFromISO(n.job.properties().latestTime)),i.extend(t,{earliest:u||"",latest:a||""})}else i.extend(t,{earliest:"",latest:""});var f=!1,l=i.once(i.bind(this.drilldown,this,e)),c=function(){f=!0};this.trigger("drilldown click",{field:e.name2||e.name,data:t,event:e,preventDefault:c,drilldown:l},this);var h=e.rowIndex,p=e.cellIndex,d=this.collection.at(h);if(d){var v=e.hasOwnProperty("name2")?e.name2:e.name,g=e.hasOwnProperty("value2")?e.value2:e.value,y=e.originalEvent;this.trigger("clicked:row click:row",{model:d,index:h,originalEvent:y,event:y,component:this,preventDefault:c,drilldown:l},this),this.trigger("clicked:cell click:cell",{model:d,index:h,column:p,key:v,value:g,originalEvent:y,event:y,component:this,preventDefault:c,drilldown:l},this)}this.settings.get("drilldown")!=="none"&&this.settings.get("drilldownRedirect")&&!f&&l()},drilldown:function(e,t){h.handleDrilldown(e,this.settings.get("drilldown"),this.manager,t)},onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.resultsModel&&(this.resultsModel.off(null,null,this),this.resultsModel=null);if(!t){this.renderMessage("no-search");return}this.renderMessage("empty"),this.manager=t,this.resultsModel=this.manager.data(this.settings.get("data"),{autofetch:!0,output_mode:"json_rows",show_empty_fields:"True",count:this.metadata.get("pageSize"),offset:this.metadata.get("offset")}),this.manager.on("search:start",this.onSearchStart,this),this.manager.on("search:progress",this.onSearchProgress,this),this.manager.on("search:cancelled",this.onSearchCancelled,this),this.manager.on("search:fail",this.onSearchFailed,this),this.manager.on("search:error",this.onSearchError,this),this.manager.on("search:done",this.onSearchDone,this),this.resultsModel.on("data",this.renderResults,this),this.resultsModel.on("error",this.onSearchError,this);var n=t.get("data");n&&(this.onSearchStart(n),this.onSearchProgress({content:n}),n.isDone&&this.onSearchDone({content:n})),this.manager.replayLastSearchEvent(this)},_showMessages:function(){this.$(".msg").show(),this.table.$el.hide(),this.paginator&&this.paginator.$el.hide()},_hideMessages:function(){this.$(".msg").hide(),this.table.$el.show(),this.paginator&&this.paginator.$el.show()},renderMessage:function(e){var t=this.$(".msg");t.length||(t=r('<div class="msg"></div>').appendTo(this.$el)),c.render(e,t),this._showMessages(),this.trigger("rendered",this)},onSearchStart:function(){this._searchRunning=!0,this.clearResults(),this.renderMessage("waiting"),this.paginator&&this.paginator.settings.set("page",0)},onSearchDone:function(e){this._searchRunning=!1;var t=((e||{}).content||{}).resultPreviewCount||0;this.updateCount(t)},onSearchProgress:function(e){e=e||{};var t=e.content||{},n=t.resultPreviewCount||0;n>0&&this.updateCount(n)},onSearchCancelled:function(){this.renderMessage("cancelled")},onSearchError:function(e,t){var n=c.getSearchErrorMessage(t)||e;this.renderMessage({level:"error",icon:"warning-sign",message:n})},onSearchFailed:function(e,t){var n=c.getSearchFailureMessage(e);this.renderMessage({level:"error",icon:"warning-sign",message:n})},applyFetchOptions:function(){if(!this.resultsModel)return;var e={count:this.metadata.get("pageSize"),offset:this.metadata.get("offset")};this.metadata.has("sortKey")&&(e.search=["|","sort",this.metadata.get("sortDirection")==="desc"?"-":"",JSON.stringify(this.metadata.get("sortKey"))].join(" ")),this.resultsModel.set(e)},updateCount:function(e){e===0&&(this.clearResults(),this._searchRunning?this.renderMessage("waiting"):this.renderMessage("no-results")),this.paginator&&this.paginator.settings.set("itemCount",e)},onFieldsChanged:function(){this.transformFieldsToArray(),this.renderResults()},transformFieldsToArray:function(){var e=this.settings.get("fields");i.isString(e)&&(e=r.trim(e),e[0]==="["&&e.slice(-1)==="]"?e=JSON.parse(e):e=i.map(e.match(y),function(e){return e.replace(b,"")}),this.settings.set("fields",e,{silent:!0}))},renderResults:function(){var e,t;if(!this.resultsModel||!this.resultsModel.hasData())return;this.collection=this.resultsModel.collection();if(this.settings.has("fields")&&!i.isEmpty(this.settings.get("fields"))){t=this.settings.get("fields");var n={},r=this.resultsModel.data().fields;i(t).contains("*")&&(t=i(t).chain().map(function(e){return e==="*"?i(r).select(function(e){return!i(t).contains(e)}):e}).flatten().unique().value()),i(r).each(function(e,t){n[e]=t}),e=i(this.resultsModel.data().rows).map(function(e){return i(t).map(function(t){return n.hasOwnProperty(t)?e[n[t]]:null})})}else e=this.resultsModel.data().rows,t=this.resultsModel.data().fields;this.results.set({rows:e,fields:t}),this._hideMessages()},clearResults:function(){this.paginator&&this.paginator.settings.set("itemCount",0),this.results.set({rows:[],fields:[]})},render:function(){return this.table.render(),this.paginator&&this.paginator.render(),this},remove:function(){this.table&&this.table.remove(),this.paginator&&this.paginator.remove(),this.settings&&(this.settings.off(),this.settings._sync&&this.settings._sync.destroy(),this.settings._syncMeta&&this.settings._syncMeta.destroy()),f.prototype.remove.call(this)}});return w.BaseCellRenderer=d,w}),define("splunkjs/mvc/simplexml/element/table",["require","underscore","jquery","backbone","../../../mvc","./base","../../tableview","util/console","../mapper","splunk.util"],function(e){var t=e("underscore"),n=e("jquery"),r=e("backbone"),i=e("../../../mvc"),s=e("./base"),o=e("../../tableview"),u=e("util/console"),a=e("../mapper"),f=e("splunk.util"),l=a.extend({tagName:"table",map:function(e,n,r){n.options.wrap=String(f.normalizeBoolean(e.get("display.statistics.wrap",r))),n.options.rowNumbers=String(f.normalizeBoolean(e.get("display.statistics.rowNumbers",r))),n.options.dataOverlayMode=e.get("display.statistics.overlay",r),n.options.drilldown=e.get("display.statistics.drilldown",r),n.options.count=e.get("display.prefs.statistics.count",r),n.options.labelField=null,n.options.valueField=null;var i=e.get("display.statistics.fields",r);n.tags.fields=t.isArray(i)?t.isEmpty(i)?null:JSON.stringify(i):i==="[]"?null:i,n.options.drilldown===!1?delete n.options.drilldown:n.options.drilldown===!0&&(n.options.drilldown="row")}});a.register("statistics",l);var c=o.extend({panelClassName:"table",prefix:"display.statistics.",reportDefaults:{"display.general.type":"statistics","display.prefs.statistics.count":10,"display.statistics.drilldown":"cell"},getResultsLinkOptions:function(e){return{}}});s.registerVisualization("statistics",c);var h=s.extend({initialVisualization:"statistics"});return h}),Splunk.Legend={_numLabels:0,_targetMap:new Object,_targetList:new Array,_labelMap:new Object,_labelList:new Array,_isLabelMapValid:!0,_timeoutID:0,_listeners:new Object,numLabels:function(){return this._validateLabelMap(),this._numLabels},register:function(e){if(!e)throw new Error("Parameter id must be non-null.");var t=this._targetMap[e];if(t)return;t=new Object,this._targetMap[e]=t,this._targetList.push(t)},unregister:function(e){var t=this._targetMap[e];if(!t)return;for(var n=this._targetList.length-1;n>=0;n--)if(this._targetList[n]==t){this._targetList.splice(n,1);break}delete this._targetMap[e],this._invalidateLabelMap()},setLabels:function(e,t){var n=this._targetMap[e];if(!n)return;n.labels=t,this._invalidateLabelMap()},getLabelIndex:function(e){this._validateLabelMap();var t=this._labelMap[e];return t!=null?t:-1},addEventListener:function(e,t){var n=this._listeners[e];n||(n=this._listeners[e]=new Array);var r=n.length;for(var i=0;i<r;i++)if(n[i]==t)return;n.push(t)},removeEventListener:function(e,t){var n=this._listeners[e];if(!n)return;var r=n.length;for(var i=0;i<r;i++)if(n[i]==t){n.splice(i,1);return}},dispatchEvent:function(e){var t=this._listeners[e];if(t){t=t.concat();var n,r=new Array,i=arguments.length;for(n=1;n<i;n++)r.push(arguments[n]);var s=t.length,o;for(n=0;n<s;n++){o=t[n];try{o.apply(null,r)}catch(u){}}}},_invalidateLabelMap:function(){if(!this._isLabelMapValid)return;this._isLabelMapValid=!1;var e=this,t=function(){e._validateLabelMap()};this._timeoutID=setTimeout(t,0)},_validateLabelMap:function(){if(this._isLabelMapValid)return;this._isLabelMapValid=!0,clearTimeout(this._timeoutID),this._updateLabelMap()},_updateLabelMap:function(){var e=this._labelList,t=!1,n=new Object,r=new Array,i=this._targetList,s=i.length,o,u,a,f,l,c,h;for(c=0;c<s;c++){o=i[c],u=o.labels;if(u){a=u.length;for(h=0;h<a;h++)f=u[h],n[f]==null&&(n[f]=r.length,r.push(f))}}l=r.length;if(l!=e.length)t=!0;else for(c=0;c<l;c++)if(r[c]!=e[c]){t=!0;break}t&&(this._labelMap=n,this._labelList=r,this._numLabels=l,this.dispatchEvent("labelIndexMapChanged"))}},define("splunk.legend",["splunk"],function(e){return function(){var t,n;return t||e.Splunk.Legend}}(this)),define("util/jscharting_utils",["underscore","helpers/user_agent"],function(e,t){var n=/^[^_]|^_time/,r=50,i=function(){return t.isIE()?t.isIELessThan(9)?500:1200:1500}(),s=t.isIELessThan(9)?2e3:2e4,o=80,u=function(e,t){t=t||{};var n={};t.JSCHART_TEST_MODE&&(n.testMode=!0);var r=e.length>0&&e.fieldAt(0)==="_time"&&(e.hasField("_span")||e.seriesAt(0).length===1);return e.length>0&&!r&&e.seriesAt(0).length>o&&(n["axisLabelsX.hideCategories"]=!0),e.hasField("_tc")&&(n.fieldHideList=["percent"]),n},a=function(t,n){var r={fields:t.fields,columns:[]};return e(t.columns).each(function(e,t){r.columns[t]=e.slice(0,n)}),r},f=function(t){var r=e.isString(t)?t:t.name;return n.test(r)},l=function(t,n){if(t.columns.length===0||t.columns[0].length===0)return t;var o=n.chart||"column";if(o in{pie:!0,scatter:!0,radialGauge:!0,fillerGauge:!0,markerGauge:!0})return t;if(t.fields.length>=r){var u,l=e(t.fields).map(function(t){return e.isString(t)?t:t.name}),c=e(l).indexOf("_span");c>-1&&c>=r&&(u=t.columns[c]),t={columns:t.columns.slice(0,r),fields:t.fields.slice(0,r)},u&&(t.columns.push(u),t.fields.push("_span"))}var h,p=parseInt(n["chart.resultTruncationLimit"],10)||parseInt(n.resultTruncationLimit,10);p>0?h=p:h=o in{line:!0,area:!0}?s:i;var d=e(t.fields).filter(f),v=d.length-1,m=t.columns[0].length,g=Math.floor(h/v);return m>g?a(t,g):t};return{getCustomDisplayProperties:u,preprocessChartData:l}}),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),define("jquery.ui.mouse",["jquery.ui.widget"],function(){}),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()}).mouseleave(function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,n=this.options,r={},i=this,s=this.originalMousePosition,o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)l=this._updateRatio(l,e);return l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),define("jquery.ui.resizable",["jquery.ui.widget","jquery.ui.mouse"],function(){}),define("splunkjs/mvc/chartview",["require","exports","module","underscore","jquery","./mvc","./basesplunkview","./messages","./drilldown","./utils","util/console","splunk.util","splunk.legend","util/jscharting_utils","splunk.config","jquery.ui.resizable","splunk.util","./tokenawaremodel"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("./mvc"),o=e("./basesplunkview"),u=e("./messages"),a=e("./drilldown"),f=e("./utils"),l=e("util/console"),c=e("splunk.util"),h=e("splunk.legend"),p=e("util/jscharting_utils"),d=e("splunk.config"),v=e("jquery.ui.resizable"),m,g=e("splunk.util"),y=e("./tokenawaremodel"),b=o.extend({moduleId:n.id,className:"splunk-chart",chartOptionPrefix:"charting.",options:{height:"250px",data:"preview",type:"column",drilldownRedirect:!0,"charting.drilldown":"all",resizable:!1},omitFromSettings:["el","reportModel","drilldown"],normalizeOptions:function(e,t){t.hasOwnProperty("drilldown")&&!t.hasOwnProperty("charting.drilldown")&&e.set("charting.drilldown",t.drilldown),t.hasOwnProperty("charting.layout.splitSeries")&&e.set("charting.layout.splitSeries",c.normalizeBoolean(t["charting.layout.splitSeries"])?"1":"0"),t.hasOwnProperty("show")&&e.set("show",c.normalizeBoolean(t.show)?"1":"0")},initialize:function(t){this.configure(),this.model=this.options.reportModel||y._createReportModel(),this.settings._sync=f.syncModels(this.settings,this.model,{auto:!0,prefix:"display.visualizations.",exclude:["managerid","id","name","data","type","drilldownRedirect"]}),this.normalizeOptions(this.settings,t),this.maxResultCount=1e3,this.settings.has("charting.data.count")&&!r.isNaN(parseInt(this.settings.get("charting.data.count"),10))&&(this.maxResultCount=parseInt(this.settings.get("charting.data.count"),10)),this._currentHeight=parseInt(this.settings.get("height"),10),this.$chart=i("<div></div>"),this.$msg=i("<div></div>"),this.$inlineMsg=i("<div></div>"),this.settings.on("change",this.render,this);var n=this;e(["js_charting/js_charting"],function(e){m=e,n._chartCreationPending&&n.chartData&&n._createChart(),n.createChart=n._createChart}),this.bindToComponentSetting("managerid",this._onManagerChange,this),h.register(this.cid),this._onResizeMouseup=r.bind(this._onResizeMouseup,this),this.settings.on("change:resizable",function(e,t,n){t?this._enableResize():this._disableResize()},this),this.settings.get("resizable")&&this._enableResize(),this.manager||this._onManagerChange(s.Components,null)},_onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.resultsModel&&(this.resultsModel.off(null,null,this),this.resultsModel=null);if(!t){this.message("no-search");return}this.message("empty"),this._err=!1,this.manager=t,this.resultsModel=this.manager.data(this.settings.get("data"),{autofetch:!0,output_mode:"json_cols",show_metadata:!0,count:this.maxResultCount}),this.resultsModel.on("data",this._onDataChanged,this),this.resultsModel.on("error",this._onSearchError,this),t.on("search:start",this._onSearchStart,this),t.on("search:progress",this._onSearchProgress,this),t.on("search:done",this._onSearchProgress,this),t.on("search:cancelled",this._onSearchCancelled,this),t.on("search:fail",this._onSearchFailed,this),t.on("search:error",this._onSearchError,this),t.replayLastSearchEvent(this)},_onDataChanged:function(){if(!this.resultsModel.hasData()){this._isJobDone&&this.message("no-results");return}var e=this.resultsModel.data();l.log("chart data changed:",e),e.fields.length&&(this.chartData=e,this.updateChart())},_onSearchProgress:function(e){this._err=!1,e=e||{};var t=e.content||{},n=t.resultPreviewCount||0,r=this._isJobDone=t.isDone||!1;if(n===0&&r){this.message("no-results");return}n===0&&this.message("waiting")},_onSearchCancelled:function(){this._isJobDone=!1,this.message("cancelled")},_onSearchError:function(e,t){this._isJobDone=!1,this._err=!0;var n=u.getSearchErrorMessage(t)||e;this.message({level:"error",icon:"warning-sign",message:n})},_onSearchFailed:function(e){this._isJobDone=!1,this._err=!0;var t=u.getSearchFailureMessage(e);this.message({level:"error",icon:"warning-sign",message:t})},_onSearchStart:function(){this._isJobDone=!1,this._err=!1,this.destroyChart(),this.message("waiting")},message:function(e){this.$msg.detach(),u.render(e,this.$msg),this.$msg.prependTo(this.$el),this.trigger("rendered",this)},inlineMessage:function(e){e.compact=!0,u.render(e,this.$inlineMsg),this.trigger("rendered",this)},render:function(){return this.$el.height(this._currentHeight).css("overflow","hidden"),this.$msg.height(this._currentHeight).css("overflow","hidden"),this.$chart.appendTo(this.$el),this.$inlineMsg.appendTo(this.$el),this.chart&&this.destroyChart(),this._boundInvalidateChart||(this._boundInvalidateChart=r.bind(this.invalidateChart,this)),h.removeEventListener("labelIndexMapChanged",this._boundInvalidateChart),h.addEventListener("labelIndexMapChanged",this._boundInvalidateChart),this._debouncedResize||(this._debouncedResize=r.debounce(r.bind(this.resizeChart,this),100)),i(window).off("resize",this._debouncedResize),i(window).on("resize",this._debouncedResize),this.createChart(),this},show:function(){this.$el.css("display","")},hide:function(){this.$el.css("display","none")},createChart:function(){this._chartCreationPending=!0},_enableResize:function(){this._canEnableResize()&&(this.$el.resizable({autoHide:!0,handles:"s",stop:this._onResizeStop.bind(this)}),this.$el.on("mouseup",this._onResizeMouseup))},_disableResize:function(){this._canEnableResize()&&(this.$el.resizable("destroy"),this.$el.off("mouseup",this._onResizeMouseup))},_onResizeMouseup:function(e){i(this).width("100%")},_onResizeStop:function(e,t){i(e.target).width("100%"),this._currentHeight=this.$el.height(),this.resizeChart()},_canEnableResize:function(){return!(i.browser.safari&&i.browser.version<"526")},_createChart:function(){var e={chart:this.settings.get("type")},t=this.chartOptionPrefix;r.each(this.settings.toJSON(),function(n,r){r.substring(0,t.length)==t&&(e[r.substring(t.length)]=n)},this);if(this._err)return;this.$msg.detach(),l.log("Creating chart with data: ",e);var n=this.chart=m.createChart(this.$chart,e);n.on("pointClick",this.emitDrilldownEvent.bind(this)),n.on("legendClick",this.emitDrilldownEvent.bind(this)),this.updateChart()},resizeChart:function(){this.chart&&(this.updateChartContainerHeight(),this.chart.resize())},updateChart:function(){if(this._err)return;l.log("updateChart data=%o this.chart=%o",this.chartData,this.chart);if(this.chartData){if(this.chart){this.$msg.detach(),this.$inlineMsg.empty();var e=p.preprocessChartData(this.chartData,this.chart.getCurrentDisplayProperties()),t=m.extractChartReadyData(e);this.chart.prepare(t,p.getCustomDisplayProperties(t,d)),e.columns.length>0&&(e.columns.length<this.chartData.columns.length||e.columns[0].length<this.chartData.columns[0].length)?this.inlineMessage({level:"warn",message:r("These results may be truncated. Your search generated too much data for the current visualization configuration.").t()}):this.chartData.columns.length>0&&this.maxResultCount>0&&this.chartData.columns[0].length>=this.maxResultCount&&this.inlineMessage({level:"warn",message:c.sprintf(r("These results may be truncated. This visualization is configured to display a maximum of %s results per series, and that limit has been reached.").t(),this.maxResultCount)}),this.updateChartContainerHeight();if(this.chart.requiresExternalColorPalette()){var n=this.chart.getFieldList();h.setLabels(this.cid,n)}this.invalidateChart()}else this.createChart();this.trigger("rendered",this)}},destroyChart:function(){this.chart&&(this.chart.off(),this.chart.destroy(),this.chart=null,clearTimeout(this._redrawChartTimeout))},updateChartContainerHeight:function(){this.$chart.height(this._currentHeight-this.$inlineMsg.outerHeight())},invalidateChart:function(){clearTimeout(this._redrawChartTimeout);if(!this.chart||!this.chartData)return;var e=this;this._redrawChartTimeout=setTimeout(function(){e.chart.requiresExternalColorPalette()&&e.setChartColorPalette();var t=(new Date).getTime();e.chart.draw(),l.DEBUG_ENABLED&&l.log("Chart=%o drawn in duration=%o ms",e.model.get("display.visualizations.charting.chart"),(new Date).getTime()-t),e.trigger("rendered",e)},5)},setChartColorPalette:function(){var e={};r(this.chart.getFieldList()).each(function(t){e[t]=h.getLabelIndex(t)}),this.chart.setExternalColorPalette(e,h.numLabels())},emitDrilldownEvent:function(e){var t={},n=this.manager;e.hasOwnProperty("name")&&r.extend(t,{"click.name":e.name,"click.value":e.value}),e.hasOwnProperty("name2")&&r.extend(t,{"click.name2":e.name2,"click.value2":e.value2}),r.extend(t,e.rowContext);var i,s;if(e.name==="_time"&&e._span){var o=parseFloat(e._span);i=parseInt(e.value,10),s=i+o,r.extend(t,{earliest:i||"",latest:s||""})}else n.job?(i=n.job.properties().searchEarliestTime,s=n.job.properties().searchLatestTime,!i&&n.job.properties().earliestTime&&(i=g.getEpochTimeFromISO(n.job.properties().earliestTime)),!s&&n.job.properties().latestTime&&(s=g.getEpochTimeFromISO(n.job.properties().latestTime)),r.extend(t,{earliest:i||"",latest:s||""})):r.extend(t,{earliest:"",latest:""});var u=!1,a=r.once(r.bind(this.drilldown,this,e)),f=function(){u=!0};this.trigger("drilldown click",{field:e.name2||e.name,data:t,event:e,preventDefault:f,drilldown:a},this),e.preventDefault=f,e.drilldown=a,this.trigger(e.type==="legendClick"?"clicked:legend click:legend":"clicked:chart click:chart",e,this);var l=this.settings.get("charting.drilldown");l!=="none"&&c.normalizeBoolean(l)!==!1&&this.settings.get("drilldownRedirect")&&!u&&a()},drilldown:function(e,t){var n=this.settings.get("charting.drilldown")==="all"?"all":"none";a.handleDrilldown(e,n,this.manager,t)},remove:function(){h.unregister(this.cid),this._boundInvalidateChart&&h.removeEventListener("labelIndexMapChanged",this._boundInvalidateChart),this._debouncedResize&&i(window).off("resize",this._debouncedResize),this.chart&&this.destroyChart(),this.settings&&(this.settings.off(),this.settings._sync&&this.settings._sync.destroy()),o.prototype.remove.call(this)}});return b}),define("splunkjs/mvc/simplexml/element/chart",["require","underscore","jquery","backbone","../../../mvc","./base","../../chartview","../mapper","util/console"],function(e){var t=e("underscore"),n=e("jquery"),r=e("backbone"),i=e("../../../mvc"),s=e("./base"),o=e("../../chartview"),u=e("../mapper"),a=e("util/console"),f="display.visualizations.charting.",l="display.visualizations.";u.register("visualizations:charting",u.extend({tagName:"chart",map:function(e,n,r){t(e.toJSON(r)).each(function(t,i){i.substring(0,f.length)===f&&(n.options[i.substring(l.length)]=e.get(i,r))}),r["charting.drilldown"]&&(n.removeOptions=["drilldown"])}}));var c=o.extend({panelClassName:"chart",reportDefaults:{"display.visualizations.show":!0,"display.visualizations.type":"charting","display.general.type":"visualizations"},options:t.defaults({resizable:!0},o.prototype.options),getResultsLinkOptions:function(){return{}}});s.registerVisualization("visualizations:charting",c),s.registerVisualization("visualizations",c);var h=s.extend({initialVisualization:"visualizations:charting"});return h}),define("models/SelectedField",["models/Base"],function(e){return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments)},sync:function(){throw"Method disabled"}})}),define("collections/SelectedFields",["collections/Base","models/SelectedField"],function(e,t){return e.extend({model:t,initialize:function(){e.prototype.initialize.apply(this,arguments),this.on("reset add remove",function(){delete this._names},this)},sync:function(){throw"Method disabled"},valuesToJSONString:function(){return JSON.stringify(this.pluck("name"))},names:function(){return this._names||(this._names=this.pluck("name")),this._names},findByName:function(e){return this.find(function(t){return e===t.get("name")})}})}),define("models/services/configs/EventRenderer",["models/SplunkDBase"],function(e){return e.extend({url:"configs/conf-event_renderers",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/configs/EventRenderers",["underscore","models/services/configs/EventRenderer","collections/SplunkDsBase"],function(e,t,n){return n.extend({url:"configs/conf-event_renderers",model:t,initialize:function(){n.prototype.initialize.apply(this,arguments)},getRenderer:function(t){if(!t)return;if(t.length==1)return this._matchEventType(t[0]);var n={};e(t).each(function(e,t){var r=this._matchEventType(e);r&&(n[parseInt(r.entry.content.get("priority"),10)]=r)},this);if(!n)return;return n[e.chain(n).keys().map(function(e){return parseInt(e,10)}).max().value()]},_matchEventType:function(e){for(var t=0;t<this.models.length;t++){var n=this.models[t];if(n.entry.content.get("eventtype")===e)return n}}})}),define("models/services/data/ui/WorkflowAction",["backbone","underscore","models/SplunkDBase"],function(e,t,n){var r=/\$_raw\$/g;return n.extend({url:"data/ui/workflow-actions",initialize:function(){n.prototype.initialize.apply(this,arguments)},fieldSubstitute:function(e,n){var r={interpolate:/\$([\s\S]+?)\$/g},i=e.match(r.interpolate);return e=this.convertRaw(e,n),i&&t(i).each(function(t){n[t.match(/\$([\s\S]+?)\$/)[1]]||(e=e.replace(t,""))},this),t.template(e,n,r)},systemSubstitute:function(e,n,r,i,s,o,u){var a={interpolate:/\$@([\s\S]+?)\$/g},f={sid:n,offset:r,namespace:i,latest_time:"",field_name:o,field_value:u};return t.template(e,f,a)},convertRaw:function(e,n){return r.test(e)&&!t(n._raw).isArray()?e.replace(r,n._raw.value):e},isInFieldMenu:function(){return this.entry.content.get("display_location")!="event_menu"},isInEventMenu:function(){return this.entry.content.get("display_location")!="field_menu"},isRestrictedByPresenceOfAllFields:function(e){var n=e.toJSON(),r=0,i=t(this.entry.content.get("fields").split(",")).map(function(e){return $.trim(e)},this),s=new Array(i.length),o=i.length;for(var u in n)for(var a=0;a<o;a++){var f=this.globber(i[a]);if(f){var l=f.exec(u);if(!s[a]&&l&&l.length>0){s[a]=!0,r++;if(r>=o)return!1}}}return!0},isRestrictedByEventtype:function(e){var n,r;if(!this.entry.content.has("eventtypes"))return!1;n=t(this.entry.content.get("eventtypes").split(",")).map(function(e){return $.trim(e)},this);if(e.has("eventtype")){r=e.get("eventtype");var i=n.length,s=0;for(s;s<i;s++){var o=this.globber(n[s]);if(o){var u=r.length,a=0;for(a;a<u;a++){var f=o.exec(r[a]);if(f&&f.length>0)return!1}}}}else if(n.indexOf("*")>-1)return!1;return!0},globber:function(e){var n,r=e.split("");t.first(r)!=="*"&&r.unshift("^"),t.last(r)!=="*"&&r.push("$"),e=r.join("").replace(/\*/g,".*");try{n=new RegExp(e)}catch(i){}return n}})}),define("collections/services/data/ui/WorkflowActions",["jquery","underscore","backbone","models/services/data/ui/WorkflowAction","collections/SplunkDsBase"],function(e,t,n,r,i){return i.extend({url:"data/ui/workflow-actions",model:r,initialize:function(){i.prototype.initialize.apply(this,arguments)},getEventActions:function(e){var t=[];return this.each(function(n,r){n.isInEventMenu()&&!n.isRestrictedByEventtype(e)&&!n.isRestrictedByPresenceOfAllFields(e)&&t.push(r)},this),t},getFieldActions:function(n,r){var i=[];return this.each(function(s,o){if(s.isInFieldMenu()&&!s.isRestrictedByEventtype(r)){var u=t(s.entry.content.get("fields").split(",")).map(function(t){return e.trim(t)},this),a=0,f=u.length;for(a;a<f;a++){var l=s.globber(u[a]);if(l){var c=l.exec(n);if(c&&c.length>0){i.push(o);break}}}}},this),i}})}),define("models/fetch_data/ResultsFetchData",["underscore","models/Base"],function(e,t){return t.extend({defaults:{filter:{}},toJSON:function(){var n=t.prototype.toJSON.call(this),r=n.sortKey,i=n.sortDirection,s=[];return e(n.filter).size()>0&&(e(n.filter).each(function(e,t){s.push("("+t+"=*"+e+"*"+")")}),s=["search "+s.join(" OR ")]),delete n.filter,r&&s.push("| sort "+(i==="desc"?"-":"")+'"'+r+'"'),delete n.sortKey,delete n.sortDirection,s.length>0&&(n.search=s.join(" ")),n}})}),define("models/services/search/jobs/Result",["jquery","underscore","backbone","models/Base","models/fetch_data/ResultsFetchData","collections/Base","util/splunkd_utils","util/time_utils","splunk.i18n"],function(e,t,n,r,i,s,o,u,a){var f=n.Model.extend({initialize:function(e,t){this.on("change",function(){this._keys=void 0,this._strip=void 0},this)},idAttribute:"1ee63861-c188-11e2-8743-0017f209b4d8",systemFields:["host","source","sourcetype","punct"],timeFields:["_time","date_zone","date_year","date_month","date_mday","date_wday","date_hour","date_minute","date_second","timeendpos","timestartpos"],keys:function(){return this._keys||(this._keys=t.keys(this.toJSON())),this._keys},strip:function(){return this._strip||(this._strip=t.intersection(this.keys(),t.filter(this.keys(),function(e){return e.indexOf("_")!==0&&e.indexOf("tag::")!==0&&e.indexOf("_raw")!==0}))),this._strip},system:function(){return t.intersection(this.strip(),this.systemFields)},notSystemOrTime:function(){var e=this.strip();return t.intersection(e,t.difference(e,t.union(this.time(),this.system())))},time:function(){return t.intersection(this.keys(),this.timeFields)},isTruncated:function(){return this.has("_fulllinecount")},getFieldsLength:function(e){return t(e).reduce(function(e,t){return e+this.get(t).length},0,this)},getTags:function(e){var n=this.get("tag::"+e);return n&&!t.isArray(n)?[n]:n?n:[]},setTags:function(e,t){this.set("tag::"+e,t)},rawToHTML:function(e){function o(e){var n=[],i=0;for(i=0;i<e.length;i++){var s=e[i];typeof s=="object"?n.push('<span class="t'+(s.highlight?" a":"")+'">',o(s.array),"</span>"):n.push(t.escape(r[s]||""))}return n.join("")}var n=this.get("_raw");if(!n)return"";var r=n.tokens,i=n.segment_tree,s=n.types;return o(i)},rawToText:function(){var e=this.get("_raw");return e?t.isArray(e)?e[0]:e.tokens.join(""):""},getRaw:function(){var e=this.get("_raw");return t.isArray(e)?t.escape(e[0]):this.rawToHTML()},formattedTime:function(){var e=this.get("_time");return e?a.format_datetime_microseconds(u.jsDateToSplunkDateTimeWithMicroseconds(u.isoToDateObject(e)),"short","full"):""},replace:function(){return r.prototype.replace.apply(this,arguments)},deepOff:function(){this.off()}}),l=r.extend({url:"",initialize:function(e,t){t=t||{},t.fetchData=t.fetchData||new i,r.prototype.initialize.call(this,e,t),this.initializeAssociated(),t&&t.splunkDPayload&&this.setFromSplunkD(t.splunkDPayload,{silent:!0})},initializeAssociated:function(){var e=this.constructor;this.associated=this.associated||{},this.results=this.results||new e.Results,this.associated.results=this.results,this.messages=this.messages||new e.Messages,this.associated.messages=this.messages,this.fields=this.fields||new e.Fields,this.associated.fields=this.fields},sync:function(r,i,s){if(r!=="read")throw new Error("invalid method: "+r);s=s||{};var u={},a={data:{output_mode:"json"},dataType:"text"},f=t.isFunction(i.url)?i.url():i.url||i.id;return s.data&&(u=e.extend(u,{app:s.data.app||undefined,owner:s.data.owner||undefined,sharing:s.data.sharing||undefined})),a.url=o.fullpath(f,u),e.extend(!0,a,s),delete a.data.app,delete a.data.owner,delete a.data.sharing,n.sync.call(this,r,i,a)},setFromSplunkD:function(e,n){n=n||{},n.clone||(this.responseText=JSON.stringify(e)),this.attributes={},e&&(e.messages&&(this.messages.reset(e.messages,n),delete e.messages),e.fields&&(this.fields.reset(e.fields,n),delete e.fields),this.set(e,n),e.results&&(t(e.results).each(function(e,n){t.each(e,function(t,n){e[n]=typeof t=="string"?[t]:t},this)},this),this.results.reset(e.results,n),delete e.results))},parse:function(e,n){this.initializeAssociated(),this.responseText=e,e=JSON.parse(e);if(n.sparseMode)return this.results.reset(t(e.results).map(function(){return{}})),{};t(e.results).each(function(e,n){t.each(e,function(t,n){e[n]=typeof t=="string"?[t]:t},this)},this),this.messages.reset(e.messages),delete e.messages,this.fields.reset(e.fields),delete e.fields;var r=e.results;return delete e.results,this.set(e),delete e,this.results.reset(r),{}},endOffset:function(){return(this.get("init_offset")||0)+this.results.length},lineNumber:function(e,t){return t?this.endOffset()-e:(this.get("init_offset")||0)+e+1},offset:function(e){return(this.get("init_offset")||0)+e},getTags:function(e,t){var n=this.get("tags"),r=[];return n&&(r=n[e],r&&(r=r[t]||[])),r||[]},setTags:function(e,t,n){this.get("tags")||this.set("tags",{}),this.get("tags")[e]||(this.get("tags")[e]={}),this.get("tags")[e][t]||(this.get("tags")[e][t]=[]),this.get("tags")[e][t]=n,this.trigger("tags-updated")}},{Results:s.extend({model:f,get:function(e){return e==null?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e[this._idAttr]])}},{Result:f}),Messages:s.extend({model:r}),Fields:s.extend({model:r})});return l}),define("views/shared/delegates/Modalize",["jquery","underscore","views/shared/delegates/Base"],function(e,t,n){return n.extend({initialize:function(){var e={tbody:"> tbody",parentContainerSelector:"div",overlayZIndex:404};t.defaults(this.options,e),n.prototype.initialize.apply(this,arguments)},show:function(n,r){this.cleanup();if(!t.isNumber(n))return;this.rowIdx=n,this.optArg=r;var i=this.$(this.options.tbody).children(':not(".field-row")').eq(this.rowIdx),s={topHeight:0,bottomHeight:0,tableHeaderHeight:0,dockedThead:0,width:this.$el[0].scrollWidth+"px"};this.$el.append(this.$top=e('<div class="modalize-table-top" />')),this.$el.append(this.$bottom=e('<div class="modalize-table-bottom" />')),e(".main-section-body").append(this.$overlay=e('<div class="modalize-table-overlay" />')),this.addEventHandlers(t.debounce(function(e,t){this.show(e,t)}.bind(this),100)),i.prevAll(":visible").each(function(t,n){s.topHeight+=e(n).outerHeight(!0)}),i.nextAll(":visible").each(function(t,n){if(!r||t!=0)s.bottomHeight+=e(n).outerHeight(!0)}),this.$el.find("> table:not(.table-expanded, .table-embed)").each(function(t,n){s.tableHeaderHeight+=e(n).find("tr").first().height()}),this.applycss(s)},addEventHandlers:function(t){var n=function(){this.$top.remove(),this.$bottom.remove(),this.$overlay.remove(),this.trigger("unmodalize",this.rowIdx),this.$el.closest(this.options.parentContainerSelector).css({"z-index":0})}.bind(this);this.$top.on("click",n),this.$bottom.on("click",n),this.$overlay.on("click",n),this.lastHeight=e(window).height(),this.lastWidth=e(window).width(),e(window).on("resize."+this.cid,function(){var n=e(window).height(),r=e(window).width();if(n!=this.lastHeight||r!=this.lastWidth)this.lastHeight=n,this.lastWidth=r,t(this.rowIdx,this.optArg)}.bind(this))},cleanup:function(){this.rowIdx&&delete this.rowIdx,this.$top&&this.$top.remove(),this.$bottom&&this.$bottom.remove(),this.$overlay&&this.$overlay.remove(),e(window).off("."+this.cid),this.$el.closest(this.options.parentContainerSelector).css({"z-index":0})},applycss:function(e){this.$el.closest(this.options.parentContainerSelector).css({"z-index":this.options.overlayZIndex+1}),this.$top.css({width:e.width,height:e.topHeight+e.tableHeaderHeight+"px"}),this.$bottom.css({width:e.width,height:e.bottomHeight+"px"}),this.$overlay.css({"z-index":this.options.overlayZIndex})},remove:function(){return n.prototype.remove.apply(this),e(window).off("resize."+this.cid),this}})}),define("views/shared/eventsviewer/shared/TableHead",["underscore","jquery","module","views/Base","splunk.util","helpers/user_agent"],function(e,t,n,r,i,s){return r.extend({moduleId:n.id,tagName:"thead",initialize:function(){var e={allowLineNum:!0};this.options=t.extend(!0,e,this.options),r.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.html(this.compiledTemplate({_:e,is_ie7:s.isIE7()||s.isIE()&&s.isInIE7DocumentMode()?"ie7":"",labels:this.options.labels||[],allowRowExpand:this.options.allowRowExpand,allowLineNum:this.options.allowLineNum})),this},template:'                <tr>                    <% if (allowRowExpand) { %>                        <th class="col-info"><i class="icon-info"></i></th>                    <% } %>                    <% if (allowLineNum) { %>                        <th class="line-num <%- is_ie7 %>">&nbsp;</i></th>                    <% } %>                    <% _.each(labels, function(label, index) { %>                        <th class="col-<%- index %> <%- is_ie7 %>"><%- _(label).t() %></th>                    <% }) %>                </tr>            '})}),define("contrib/text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("contrib/text!views/shared/FieldInfo.html",[],function(){return'<% if (field) { %>\n    <a href="#" class="close"><i class="icon-close"></i></a>\n    <h2 class="field-info-header"><%- field.get(\'name\') %></h2>\n    <div class="divider"></div>\n    <% if (selectableFields) { %>\n        <div class="pull-right">\n            <label class="select-field-label"><%- _("Selected").t() %></label>\n            <div class="btn-group">\n                <% var is_selected_field = selectedFields.findWhere({\'name\': field.get(\'name\')}); %>\n                <button class="btn select <%- is_selected_field ? \'active\' : \'\' %>" data-field-name="<%- field.get(\'name\') %>"><%- _("Yes").t() %></button>\n                <button class="btn unselect <%- is_selected_field ? \'\' : \'active\' %>" data-field-name="<%- field.get(\'name\') %>"><%- _("No").t() %></button>\n            </div>\n        </div>\n    <% } %>\n    <p><%- field.get("is_exact") ? "" : ">" %><%- field.get("distinct_count") %> <%- (field.get("distinct_count")>1) ?  _("Values").t(): _("Value").t() %>, <%= i18n.format_percent(summary.frequency(field.get(\'name\'))) %> <%- _("of events").t() %></p>\n    <h3 class="reports-header"><%- _("Reports").t() %></h3>\n    <% if (field.isNumeric()) { %>\n        <ul class="fields-numeric inline">\n            <li><a href="#" data-visualization="line" data-report="avgbytime" data-field="<%- field.get(\'name\') %>"><%- _("Average over time").t() %></a></li>\n            <li><a href="#" data-visualization="line" data-report="maxbytime" data-field="<%- field.get(\'name\') %>"><%- _("Maximum value over time").t() %></a></li>\n            <li><a href="#" data-visualization="line" data-report="minbytime" data-field="<%- field.get(\'name\') %>"><%- _("Minimum value over time").t() %></a></li>\n        </ul>\n    <% } %>\n    <ul class="fields-values inline">\n        <li><a href="#" data-visualization="bar" data-report="top" data-field="<%- field.get(\'name\') %>"><%- _("Top values").t() %></a></li>\n        <li><a href="#" data-visualization="line" data-report="topbytime" data-field="<%- field.get(\'name\') %>"><%- _("Top values by time").t() %></a></li>\n        <li><a href="#" data-visualization="line" data-report="rare" data-field="<%- field.get(\'name\') %>"><%- _("Rare values").t() %></a></li>\n    </ul>\n    <ul class="fields-events inline">\n        <li><a href="#" data-report="fieldvalue" data-field="<%- field.get(\'name\') %>" data-field-value="*"><%- _("Events with this field").t() %></a></li>\n    </ul>\n    <% if (field.isNumeric()) { %>\n        <ul class="field-stats inline">\n            <li>\n                <strong class="stats-label"><%- _("Avg").t() %>:</strong>\n                <span class="val numeric"><%- field.get("mean") %></span>\n            </li>\n            <li>\n                <strong class="stats-label"><%- _("Min").t() %>:</strong>\n                <span class="val numeric"><%- field.get("min") %></span>\n            </li>\n            <li>\n                <strong class="stats-label"><%- _("Max").t() %>:</strong>\n                <span class="val numeric"><%- field.get("max") %></span>\n            </li>\n            <li>\n                <strong class="stats-label"><%- _("Std").t() %>&nbsp;<%- _("Dev").t() %>:</strong>\n                <span class="val numeric"><%- field.get("stdev") %></span>\n            </li>\n        </ul>\n    <% } %>\n    <table class="table table-condensed table-dotted">\n        <thead>\n            <tr>\n            <% if (field.get(\'modes\').length >= 10) { %>\n                <th class="value"><strong><%- _("Top 10 Values").t() %></strong></th>\n            <% } else { %>\n                <th class="value"><strong><%- _("Values").t() %></strong></th>\n            <% } %>\n            <td class="count"><%- _("Count").t() %></td>\n                <td class="percent">%</td>\n                <td class="bar">&nbsp;</td>\n            </tr>\n        </thead>\n        <tbody>\n            <% _.each(field.get(\'modes\'), function(mode) { %>\n                <tr>\n                    <td class="value"><a href="#" data-report="fieldvalue" data-field="<%- field.get(\'name\') %>" data-value="<%- mode.value %>"><%- mode.value %></a></td>\n                    <td class="count"><%- format_decimal(mode.count || -1) %></td>\n                    <% percent = mode.count/field.get(\'count\') %>\n                    <td class="percent"><%- format_percent(percent) %></td>\n                    <td class="bar">\n                        <div style="width:<%- Math.round(percent * 100) %>%;" class="graph-bar"></div>\n                    </td>\n                </tr>\n            <% }); %>\n        </tbody>\n    </table>\n<% } %>\n'}),define("views/shared/FieldInfo",["underscore","module","views/shared/PopTart","splunk.i18n","models/services/search/IntentionsParser","contrib/text!views/shared/FieldInfo.html"],function(e,t,n,r,i,s){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments);var e={selectableFields:!0};this.options=$.extend(!0,e,this.options),this.model.intentionsParser=new i,this.model.intentionsParser.on("change",function(){var e=this.model.intentionsParser.fullSearch();this.model.intentionsParser.has("visualization")?this.model.report.entry.content.set({search:e,"display.general.type":"visualizations","display.visualizations.charting.chart":this.model.intentionsParser.get("visualization")}):this.model.report.entry.content.set("search",e),this.model.report.trigger("eventsviewer:drilldown")},this),this.model.summary.fields.on("reset",this.render,this),this.collection.selectedFields.on("add remove reset",this.render,this),this.model.field.on("change",this.render,this)},events:{"click .unselect":function(e){this.collection.selectedFields.remove(this.collection.selectedFields.findWhere({name:$(e.currentTarget).data().fieldName})),e.preventDefault()},"click .select":function(e){this.collection.selectedFields.push({name:$(e.currentTarget).data().fieldName}),e.preventDefault()},"click .close":function(e){this.hide(),e.preventDefault()},"click ul.fields-values > li > a[data-field]":function(e){var t=$(e.currentTarget),n=t.data(),r=n.field,i=n.report;this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.set({visualization:n.visualization},{silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),action:i,field:r,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),e.preventDefault()},"click ul.fields-events > li >  a[data-field]":function(e){var t=$(e.currentTarget),n=t.data(),r=n.field,i=n.report;this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),action:i,field:r,value:"*",app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),e.preventDefault()},"click ul.fields-numeric > li >  a[data-field]":function(e){var t=$(e.currentTarget),n=t.data(),r=n.field,i=n.report;this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.set({visualization:n.visualization},{silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),action:i,field:r,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),e.preventDefault()},"click td.value >  a":function(e){var t=$(e.currentTarget),n=t.data();this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),stripReportsSearch:!1,action:n.report,field:n.field,value:n.value,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),e.preventDefault()}},render:function(){var t=this.compiledTemplate({field:this.model.summary.fields.findWhere({name:this.model.field.get("name")}),summary:this.model.summary,selectedFields:this.collection.selectedFields,i18n:r,_:e,selectableFields:this.options.selectableFields});return this.$el.html(n.prototype.template),this.$(".popdown-dialog-body").html(t),this},template:s})}),define("models/services/saved/FVTags",["jquery","underscore","models/SplunkDBase"],function(e,t,n){return n.extend({url:"saved/fvtags",initialize:function(){n.prototype.initialize.apply(this,arguments)},resetTags:function(e){t(this.entry.content.toJSON()).each(function(e,t){t.match(/^tag.+/g)&&this.entry.content.unset(t)},this),this.entry.content.unset("tags");if(e){var n={};t(e).each(function(e){n["tag."+e]=e},this),this.entry.content.set(n)}},setId:function(e,t,n,r){this.set("id","/servicesNS/"+encodeURIComponent(t)+"/"+encodeURIComponent(e)+"/saved/fvtags/"+encodeURIComponent(n)+"%3D"+encodeURIComponent(r))}},{tagStringtoArray:function(t){return t?e.trim(t.replace(/,/g," ")).split(/\s+/):[]},tagArraytoString:function(e){return e.join(", ")}})}),define("views/shared/eventsviewer/shared/fieldactions/TagDialog",["underscore","module","models/services/saved/FVTags","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/FlashMessages"],function(e,t,n,r,i,s){return r.extend({moduleId:t.id,initialize:function(){r.prototype.initialize.apply(this,arguments),this.children.flashMessage=new s({model:this.model.tags}),this.children.field=new i({className:"field-value control-group",controlType:"Textarea",controlOptions:{modelAttribute:"name",model:this.model.tags.entry.content,save:!1,placeholder:"Optional",enabled:!1},label:e("Field Value").t()}),this.children.tags=new i({className:"tags control-group",controlType:"Textarea",controlOptions:{modelAttribute:"ui.tags",model:this.model.tags.entry.content,save:!1,placeholder:""},label:e("Tag(s)").t(),help:e("Comma or space separated list of tags.").t()})},events:$.extend({},r.prototype.events,{"click .btn-primary":function(t){var r=this.model.application.getPermissions("private"),i=n.tagStringtoArray(e.escape(this.model.tags.entry.content.get("ui.tags")));this.model.tags.resetTags(i),this.model.tags.entry.content.unset("ui.tags");if(this.model.tags.id){r={};if(!i.length){this.model.tags.destroy(),this.trigger("tags_saved"),this.hide(),t.preventDefault();return}}this.model.tags.save({},{data:r,success:function(e,t){this.trigger("tags_saved"),this.hide()}.bind(this)}),t.preventDefault()}}),render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Create Tags").t()),this.$(r.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.$(r.BODY_FORM_SELECTOR).append(this.children.field.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.tags.render().el),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_SAVE),this}})}),define("views/shared/eventsviewer/shared/fieldactions/Master",["underscore","module","views/Base","models/SplunkDBase","models/services/saved/FVTags","views/shared/eventsviewer/shared/fieldactions/TagDialog"],function(e,t,n,r,i,s){return n.extend({moduleId:t.id,tagName:"li",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.tags=new i,this.fieldName=this.options.fieldName,this.fieldValue=this.options.fieldValue},events:{"click .editTag":function(e){this.trigger("hide"),this.model.tags.entry.content.set("name",this.fieldName+"="+this.fieldValue),this.children.tagDialog=new s({model:{tags:this.model.tags,application:this.model.application},onHiddenRemove:!0}),this.children.tagDialog.on("tags_saved",function(){this.model.result.setTags(this.fieldName,this.fieldValue,this.model.tags.entry.content.get("tags"))},this),this.model.tags.setId(this.model.application.get("app"),this.model.application.get("owner"),this.fieldName,this.fieldValue),this.model.clonedTags=new r,this.model.clonedTags.setFromSplunkD(this.model.tags.toSplunkD()),this.model.clonedTags.id=this.model.tags.id,this.model.clonedTags.fetch({success:function(){$("body").append(this.children.tagDialog.render().el),this.model.tags.setFromSplunkD(this.model.clonedTags.toSplunkD()),this.model.tags.entry.content.set("ui.tags",i.tagArraytoString(this.model.tags.entry.content.get("tags"))),this.children.tagDialog.show()}.bind(this),error:function(){$("body").append(this.children.tagDialog.render().el),this.model.tags.setFromSplunkD(this.model.clonedTags.toSplunkD()),this.model.tags.unset("id"),this.children.tagDialog.show()}.bind(this)}),e.preventDefault()}},render:function(){return this.el.innerHTML=this.compiledTemplate({_:e}),this},template:'                    <a href="#" class="editTag"><%- _("Edit Tags").t() %></a>            '})}),define("views/shared/eventsviewer/shared/WorkflowActions",["jquery","underscore","backbone","module","views/shared/PopTart","views/shared/eventsviewer/shared/fieldactions/Master","splunk.util","uri/route"],function(e,t,n,r,i,s,o,u){return i.extend({className:"dropdown-menu",moduleId:r.id,initialize:function(){i.prototype.initialize.apply(this,arguments),this.children.editTagsActivator=new s({model:this.model,fieldValue:this.options.fieldValue,fieldName:this.options.fieldName}),this.isFieldAction=this.options.fieldName&&this.options.fieldValue,this.children.editTagsActivator.on("hide",this.remove,this)},events:{"click a.actions":function(r){var i,s={},o=e(r.target).data("offset"),u=this.collection.at(o),a=u.entry.content.get("display_location")=="event_menu",f=e.extend({},this.model.event.toJSON()),l=this.model.searchJob.get("id"),c=this.model.result.offset(this.options.index),h=this.model.application.get("app"),p=this.model.event.get("_time");return t(u.entry.content.toJSON()).each(function(e,t){s[t]=typeof e=="string"?u.fieldSubstitute(u.systemSubstitute(e,l,c,h,p,this.options.fieldName,this.options.fieldValue),f):e},this),i=new n.Model(s),this.hide(),u.entry.content.get("type")==="link"?this.link(i):this.search(i)}},uri:function(e){return e.indexOf("/")===0?u.encodeRoot(this.model.application.get("root"),this.model.application.get("locale"))+e:e},link:function(n){var r=this.uri(n.get("link.uri"));if(n.get("link.method").toLowerCase()==="get")return n.get("link.target")==="self"?window.location.href=r:window.open(r,"_blank"),!0;var i=e('<form class="workflow-action"/>');return i.attr("target","_"+n.get("link.target")),i.attr("action",r),i.attr("method","post"),t(n.get("link.payload")).each(function(t,n){i.append(e("<input/>").attr({type:"hidden",name:n,value:t}))},this),e("body").append(i),e("form.workflow-action").submit().remove(),!1},search:function(e){var t={data:{}};o.normalizeBoolean(e.get("search.preserve_timerange"))&&(this.model.report.entry.content.get("dispatch.earliest_time")&&(t.data.earliest=this.model.report.entry.content.get("dispatch.earliest_time")),this.model.report.entry.content.get("dispatchu.latest_time")&&(t.data.latest=this.model.report.entry.content.get("dispatch.latest_time")));if(e.get("search.earliest")||e.get("search.latest"))t.data.earliest=e.get("search.earliest"),t.data.latest=e.get("search.latest");t.data.q=e.get("search.search_string");var n=u.page(this.model.application.get("root"),this.model.application.get("locale"),e.get("eai:appName"),this.model.application.get("page"),t);return e.get("search.target")==="self"?window.location.href=n:window.open(n,"_blank"),!1},render:function(){return this.$el.html(i.prototype.template_menu),this.$el.append(this.compiledTemplate({collection:this.collection,actions:this.options.actions,event:e.extend({},this.model.event.toJSON()),isField:this.isFieldAction,trim:o.smartTrim,_:t})),this.options.tags&&this.$("ul").prepend(this.children.editTagsActivator.render().el),this},template:'                <ul>                    <% _.each(actions, function(i) { %>                        <% var model = collection.at(i); %>                        <% if(model) {%>                            <li>                                <a class="actions" href="#" data-offset="<%-i%>"> <%- trim(_(model.fieldSubstitute(model.entry.content.get("label"), event)).t(), 100)  %></a>                            </li>                        <% } %>                    <% }); %>                </ul>            '})}),define("views/shared/eventsviewer/shared/TimeInfo",["underscore","jquery","module","util/time_utils","splunk.util","views/shared/PopTart","strftime"],function(e,t,n,r,i,s){return s.extend({moduleId:n.id,initialize:function(){s.prototype.initialize.apply(this,arguments)},events:{"click td > a.et-lt":function(e){var n=t(e.currentTarget),r=n.data().time;if(r==="before")this.model.report.entry.content.set("dispatch.latest_time",this.options.time);else if(r=="after")this.model.report.entry.content.set("dispatch.earliest_time",this.options.time);else{var s=parseFloat(i.getEpochTimeFromISO(this.options.time)),o=s+.001;this.model.report.entry.content.set({"dispatch.latest_time":o,"dispatch.earliest_time":s})}this.model.report.trigger("eventsviewer:drilldown"),e.preventDefault()},"click td > a.time-range":function(e){var n=t(e.currentTarget),i=r.rangeFromIsoAndOffset(this.options.time,n.data().timeUnit);this.model.report.entry.content.set({"dispatch.latest_time":i.upperRange.strftime("%s.%Q"),"dispatch.earliest_time":i.lowerRange.strftime("%s.%Q")}),this.model.report.trigger("eventsviewer:drilldown"),e.preventDefault()}},render:function(){return this.$el.html(s.prototype.template),this.$(".popdown-dialog-body").html(this.template),this},template:'                <h3>_time</h3>                <table>                    <thead>                        <tr><th>Events Before or After</th><th>Nearby Events</th></tr>                    </thead>                    <tbody>                        <tr>                            <td>                                <a class="et-lt" data-time="before" href="#">Before this time</a><br>                                <a class="et-lt" data-time="after" href="#">After this time</a><br>                                <a class="et-lt" data-time="at" href="#">At this time</a><br>                            </td>                            <td>                                <a class="time-range" data-time-unit="w" href="#">+/- 1 week</a><br>                                <a class="time-range" data-time-unit="d" href="#">+/- 1 day</a><br>                                <a class="time-range" data-time-unit="h" href="#">+/- 1 hour</a><br>                                <a class="time-range" data-time-unit="m" href="#">+/- 1 minute</a><br>                                <a class="time-range" data-time-unit="s" href="#">+/- 1 second</a><br>                                <a class="time-range" data-time-unit="ms" href="#">+/- 1 milliseconds</a><br>                            </td>                        </tr>                    </tbody>                </table>            '})}),define("models/UIWorkflowAction",["underscore","models/Base"],function(e,t){return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments)},sync:function(e,t,n){throw"unsupported method:"+e}})}),define("collections/UIWorkflowActions",["backbone","underscore","models/UIWorkflowAction","collections/Base"],function(e,t,n,r){return r.extend({url:"/<%- locale %>/api/field/actions/<%-clientApp%>/<%-sid%>/<%-offset%>",model:n,initialize:function(){r.prototype.initialize.apply(this,arguments)},sync:function(n,r,i){return i||(i={}),i.data||(i.data={}),i.url=t(this.url).template({locale:i.data.locale||"en-US",clientApp:i.data.clientApp,sid:i.data.sid,offset:i.data.offset}),delete i.data.locale,delete i.data.clientApp,delete i.data.sid,delete i.data.offset,e.sync.call(this,n,this,i)},parse:function(e){return e.data}})}),define("views/shared/eventsviewer/shared/BaseFields",["jquery","underscore","backbone","module","views/Base","views/shared/FieldInfo","views/shared/eventsviewer/shared/WorkflowActions","views/shared/eventsviewer/shared/fieldactions/Master","views/shared/eventsviewer/shared/TimeInfo","collections/UIWorkflowActions","models/services/search/IntentionsParser","models/DateInput"],function(e,t,n,r,i,s,o,u,a,f,l,c){return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.intentionsParser=new l,this.model.intentionsParser.on("change",function(){this.model.report.entry.content.set("search",this.model.intentionsParser.fullSearch()),this.model.report.trigger("eventsviewer:drilldown")},this),this.model.event.on("change",this.render,this),this.collection.selectedFields.on("reset add remove",function(){this.options.idx===this.model.state.get("modalize")&&this.render()},this)},events:{"click .field-value a.f-v":function(t){var n=e(t.target),r=e.trim(n.text()),i=e.trim(n.data().fieldName);this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),stripReportsSearch:!1,action:"fieldvalue",field:i,value:r,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),t.preventDefault()},"click .tag":"tagClick","click .field-value .tag":"tagClick","click ._time":function(e){e.preventDefault()},"click .field-info":function(e){e.preventDefault()},"click .field-actions":function(e){e.preventDefault()},"click .event-actions":function(e){e.preventDefault()},"mousedown ._time":"openTimeInfo","mousedown .field-info":"openFieldInfo","mousedown .field-actions":"openFieldActions","mousedown .event-actions":"openEventActions","keydown ._time":function(e){e.keyCode==13&&this.openTimeInfo(e)},"keydown .field-info":function(e){e.keyCode==13&&this.openFieldInfo(e)},"keydown .field-actions":function(e){e.keyCode==13&&this.openFieldActions(e)},"keydown .event-actions":function(e){e.keyCode==13&&this.openEventActions(e)}},tagClick:function(t){var n=e(t.target),r=e.trim(n.text()),i=e.trim(n.data().taggedFieldName);this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.searchJob.getStrippedEventSearch(),action:"fieldvalue",field:i,value:r,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),t.preventDefault()},openTimeInfo:function(t){var n=e(t.currentTarget),r=n.data().time;this.children.time&&this.children.time.shown&&this.children.time.hide(),this.children.time=new a({model:{report:this.model.report},time:r,onHiddenRemove:!0}),e("body").append(this.children.time.render().el),this.children.time.show(n),t.preventDefault()},openFieldInfo:function(n){var r=e(n.currentTarget),i=this.model.summary.fields.findWhere({name:r.attr("data-field-name")}),o=i.get("name");if(this.children.fieldInfo&&this.children.fieldInfo.shown){this.children.fieldInfo.hide();if(this.lastMenu==o+"-field-info")return!0}i||alert(t("This event is no longer within the results window.").t()),this.children.fieldInfo=new s({model:{field:i,summary:this.model.summary,report:this.model.report,application:this.model.application},collection:{selectedFields:this.collection.selectedFields},onHiddenRemove:!0,selectableFields:this.options.selectableFields}),this.lastMenu=o+"-field-info",t.isNumber(this.model.state.get("modalize"))||this.model.state.set({modalize:this.options.idx,sleep:!0}),e("body").append(this.children.fieldInfo.render().el),this.children.fieldInfo.show(r),n.preventDefault()},openFieldActions:function(n){var r=e(n.currentTarget),i=r.attr("data-field-name"),s=e.trim(r.closest("tr").find(".f-v").text());if(this.children.fieldActions&&this.children.fieldActions.shown){this.children.fieldActions.hide();if(this.lastMenu==i+"-field-actions")return!0}this.children.fieldActions=new o({model:this.model,collection:this.collection.workflowActions,actions:this.collection.workflowActions.getFieldActions(i,this.model.event),fieldName:i,fieldValue:s,tags:!0,mode:"menu",onHiddenRemove:!0}),this.lastMenu=i+"-field-actions",t.isNumber(this.model.state.get("modalize"))||this.model.state.set({modalize:this.options.idx,sleep:!0}),e("body").append(this.children.fieldActions.render().el),this.children.fieldActions.show(r),n.preventDefault()},openEventActions:function(t){var n=e(t.currentTarget),r=this.model.result.results.indexOf(this.model.event);if(this.children.eventActions&&this.children.eventActions.shown)return this.children.eventActions.hide(),!0;this.children.eventActions=new o({model:this.model,collection:this.collection.workflowActions,actions:this.collection.workflowActions.getEventActions(this.model.event),index:r,tags:!1,mode:"menu",onHiddenRemove:!0}),e("body").append(this.children.eventActions.render().el),this.children.eventActions.show(n),t.preventDefault()},_partial:t.template('                <%  _(fields).each(function(field, i) { %>                    <% var fieldlist = m.get(field) %>                    <% if(fieldlist.length > 1){ %>                        <%  _(fieldlist).each(function(mv_field, j) { %>                            <tr>                               <% if(i==0 && j==0 && label) { %>                                   <td rowspan="<%= m.getFieldsLength(fields) %>" class="field-type"><%- label %></td>                               <% } %>                               <% if(selectableFields && j==0) { %>                                   <td rowspan="<%= fieldlist.length %>" class="col-visibility"><label class="checkbox">                                   <a href="#" data-name="Everyone.read" class="btn <%- iconVisibility ? "hide" : "show" %>-field">                                   <% if(iconVisibility) { %>                                    <i class="icon-check"></i>                                    <% } %>                                   </label></td>                               <% } %>                               <% if(j==0 && slen>0) {%>                                    <td rowspan="<%=fieldlist.length %>" class="field-key">                                        <a class="popdown-toggle field-info" href="#" data-field-name="<%- field %>">                                            <span><%- field %></span><span class="caret"></span>                                        </a>                                    </td>                               <% } else if(j==0 && slen==0) { %>                                    <td rowspan="<%=fieldlist.length %>" class="field-key">                                        <span  data-field-name="<%- field %>"><%- field %></span>                                    </td>                               <% } %>                               <td class="field-value">                                   <a data-field-name="<%- field %>"  class="f-v" href="#"><%- mv_field %></a>                                   <% var tags = r.getTags(field, mv_field); %>                                   <% if (tags.length) { %>                                       (<% _(tags).each(function(tag, idx){ %><a data-tagged-field-name="tag::<%- field %>" class="tag" href="#"><%- tag %><%if(idx!=tags.length-1){%> <%}%></a><% }); %>)                                   <% } %>                               </td>                               <td  class="actions popdown">                                       <a class="popdown-toggle field-actions" href="#" data-field-name="<%- field %>">                                           <span class="caret"></span>                                       </a>                               </td>                            </tr>                        <% }) %>                    <% } else { %>                        <tr>                           <% if(i==0 && label) { %>                               <td rowspan="<%= m.getFieldsLength(fields) %>" class="field-type"><%- label %></td>                           <% } %>                           <% if(selectableFields) { %>                               <td rowspan="<%= fieldlist.length %>" class="col-visibility"><label class="checkbox">                               <a href="#" data-name="Everyone.read" class="btn <%- iconVisibility ? "hide" : "show" %>-field">                               <% if(iconVisibility) { %>                                <i class="icon-check"></i>                                <% } %>                               </a></label></td>                           <% } %>                           <% if(slen >0) { %>                               <td class="field-key">                                   <a class="popdown-toggle field-info" href="#" data-field-name="<%- field %>">                                       <span><%- field %></span><span class="caret"></span>                                   </a>                               </td>                           <% } else { %>                                <td class="field-key">                                    <span  data-field-name="<%- field %>"><%- field %></span>                                </td>                           <% } %>                           <td class="field-value">                               <a data-field-name="<%- field %>"  class="f-v" href="#"><%- m.get(field)[0] %></a>                               <% var tags = r.getTags(field, m.get(field)); %>                               <% if (tags.length > 0) { %>                                   (<% _(tags).each(function(tag, idx){ %><a data-field-name="<%- field %>" data-tagged-field-name="tag::<%- field %>" class="tag" href="#"><%- tag %><%if(idx!=tags.length-1){%> <%}%></a><% }); %>)                               <% } %>                           </td>                           <td  class="actions">                                   <a class="popdown-toggle field-actions" href="#" data-field-name="<%- field %>">                                       <i class="icon-triangle-down-small"></i>                                   </a>                           </td>                       </tr>                   <% } %>               <% }); %>           ')})}),define("views/shared/eventsviewer/shared/EventFields",["jquery","underscore","backbone","module","views/Base","views/shared/delegates/PopdownDialog","views/shared/FieldInfo","views/shared/eventsviewer/shared/WorkflowActions","views/shared/eventsviewer/shared/fieldactions/Master","views/shared/eventsviewer/shared/BaseFields","collections/UIWorkflowActions","models/services/search/IntentionsParser"],function(e,t,n,r,i,s,o,u,a,f,l,c){return f.extend({moduleId:r.id,initialize:function(){f.prototype.initialize.apply(this,arguments),this.swappingKey=this.options.swappingKey,this.showAllLines=this.options.showAllLines,this.model.event.on("change",function(e,t){t.swap&&(this.isSwapping=!1),this.render()},this),this.model.event.on("failed-swap",function(){this.$(".event-fields-loading").text(t("We were unable to provide the correct event").t())},this),this.model.state.on("change:timeExpanded",this.render,this),this.isSwapping=!0,this.model.state.on("change:"+this.showAllLines,function(){this.isSwapping=!0},this),this.model.state.on("unmodalize"+this.options.idx,function(){this.isSwapping=!0},this),this.model.result.on(this.swappingKey,function(){this.isSwapping=!0},this)},events:e.extend({},f.prototype.events,{"click ._time-expand":function(e){this.model.state.set("timeExpanded",!this.model.state.get("timeExpanded")),e.preventDefault()},"click a.show-field":function(t){var n=e(t.currentTarget),r=e.trim(n.closest("td").siblings(".field-key").text());this.collection.selectedFields.push({name:r}),t.preventDefault()},"click a.hide-field":function(t){var n=e(t.currentTarget),r=e.trim(n.closest("td").siblings(".field-key").text());this.collection.selectedFields.remove(this.collection.selectedFields.find(function(e){return e.get("name")===r},this)),t.preventDefault()},"click a.btn.disabled":function(e){e.preventDefault()}}),setMaxWidth:function(){if(!this.el.innerHTML||!this.$el.is(":visible"))return!1;var t=e("#"+this.cid+"-styles");t&&t.remove();var n=this.$el.closest("table").parent(),r=n.width(),i=n.offset().left-n.scrollLeft(),s=20,o=this.$el.offset().left,u=r-(o-i)-s,a=(u>500?u:500)+"px";this.$("table").css("maxWidth",a)},reflow:function(){this.setMaxWidth()},render:function(){var e=this.model.event.strip(),n=t.intersection(e,this.collection.selectedFields.pluck("name")).sort(),r=t.difference(t.intersection(e,this.model.event.notSystemOrTime()),n).sort(),i=t.difference(this.model.event.time(),n).sort(),s=t.difference(i,["_time"]),o=t.difference(this.model.event.system(),n).sort();return this.$el.html(this.compiledTemplate({selectedfields:n,eventfields:r,timefields:this.model.state.get("timeExpanded")?s:[],systemfields:o,expanded:i.length===1?"":this.model.state.get("timeExpanded")?"icon-minus-circle":"icon-plus-circle",selectableFields:this.options.selectableFields,hideEventActions:this.model.searchJob.isRealtime(),r:this.model.result,m:this.model.event,slen:this.model.summary.fields.length,_partial:this._partial,isSwapping:!1,_:t})),this.setMaxWidth(),this},template:'                <% if (!isSwapping) { %>                    <% if (!hideEventActions) { %>                        <a class="btn popdown-toggle event-actions" href="#"><span><%-_("Event Actions").t()%></span><span class="caret"></span></a>                    <% } %>                    <table class="table table-condensed table-embed table-expanded table-dotted">                        <thead>                            <th class="col-field-type"><%- _("Type").t() %></th>                            <% if(selectableFields){ %> <th class="col-visibility"><label class="checkbox"><a href="#" class="btn disabled"><i class="icon-check"></i></a></label></th><% } %>                            <th class="col-field-name"><%- _("Field").t() %></th>                            <th class="col-field-value"><%- _("Value").t() %></th>                            <th class="col-field-action"><%- _("Actions").t() %></th>                        </thead>                        <tbody>                        <%= _partial({fields: selectedfields, slen: slen, iconVisibility: true, m: m, r:r, label: _("Selected").t(), selectableFields: selectableFields}) %>                        <%= _partial({fields: eventfields, slen: slen, iconVisibility: false, m: m, r:r, label: _("Event").t(), selectableFields: selectableFields}) %>                        <tr>                            <td rowspan="<%- timefields.length+1 %>" class="field-type"><%- _("Time").t() %><a class="_time-expand <%= expanded %>" href=""></a></td>                            <% if (selectableFields) { %>                                <td></td>                            <% } %>                           <td class="time">                               <a class="popdown-toggle _time" href="#" data-time="<%- m.get("_time")[0] %>">                                   <span>_time</span><span class="caret"></span>                               </a>                           </td>                           <td class="field-value f-v"><%- m.get("_time")[0] %>                               <% var tags = r.getTags("_time", m.get("_time")); %>                               <% if (tags.length > 0) { %>(<% _(tags).each(function(tag, idx){ %><a data-field-name="_time" data-tagged-field-name="tag::_time" class="tag" href="#"><%- tag %><%if(idx!=tags.length-1){%> <%}%></a><% }); %>)<% } %>                           </td>                           <td class="actions"></td>                        </tr>                        <%= _partial({fields: timefields, slen: slen, iconVisibility: false, m: m, r:r, label: null, selectableFields: selectableFields}) %>                        <%= _partial({fields: systemfields, slen: slen, iconVisibility: false, m: m, r:r, label: _("Default").t(), selectableFields: selectableFields}) %>                        </tbody>                    </table>                <% } else { %>                    <div class="event-fields-loading">Loading...</div>                <% } %>            '})}),define("keyboard/SearchModifier",["underscore"],function(e){function t(n){n||(n={});var r=n.defaults||e.extend({},t.defaults),i=n.custom||e.extend([],t.custom);this.map=this.parse(r,i)}return t.prototype={isNegation:function(e){return!!e[this.map.negate]},isReplacement:function(e){return!!e[this.map.replace]},parse:function(e,t){var n=navigator.userAgent||"",r=null;for(var i=t.length-1;i>-1;i--){var s=t[i];n.search(s.userAgentRex)!=-1&&(r=s)}return r||(r=e),r}},t.custom=[{userAgentRex:/Macintosh/,negate:"altKey",replace:"metaKey"},{userAgentRex:/Linux.*Chrome/,negate:"ctrlKey",replace:"shiftKey"},{userAgentRex:/Linux/,negate:"ctrlKey",replace:"metaKey"},{userAgentRex:/Windows/,negate:"altKey",replace:"ctrlKey"}],t.defaults={userAgentRex:/.*/,negate:"altKey",replace:"metaKey"},t}),define("views/shared/JSONTree",["jquery","underscore","module","views/Base"],function(e,t,n,r){return r.extend({moduleId:n.id,className:"json-tree",initialize:function(){r.prototype.initialize.apply(this,arguments);var t={isValidJSON:!1,json:"{}"};this.options=e.extend(!0,t,this.options),this.setJSON(this.options.json,this.options.isValidJSON)},setJSON:function(e,t){var n;if(t)return!(this._json=e);typeof e!="string"&&(e=JSON.stringify(e));try{n=JSON.parse(e)}catch(r){}this._json=n},isJSON:function(){return!!this._json},events:{"click .jsexpands":function(t){var n=e(t.currentTarget);this.trigger("interaction"),this.interacted=!0,n.removeClass("jsexpands").addClass("jscollapse").text("[-]"),n.next().show(),t.preventDefault()},"click .jscollapse":function(t){var n=e(t.currentTarget);this.trigger("interaction"),this.interacted=!0,n.removeClass("jscollapse").addClass("jsexpands").text("[+]"),n.next().hide(),t.preventDefault()}},printJSON:function(e,n,r){var i=n+2,s=[],o=i/2,u=typeof e;if(!t.isObject(e))return[r._type({type:u,obj:e})];var a=!(e instanceof Array),f=a?t.keys(e).sort():e.sort();s.push(r._bracket({isObj:a})),f.length>0&&s.push(r._state({expands:!(o<2),level:o}).trim()),s.push(o!==1?'<span style="display: none;">':"<span>");for(var l=0;l<f.length;l++)s.push(r._indent({newIndent:i})),a?s.push(r._key({val:f[l],level:o,pjson:r.printJSON,obj:e,nIndent:i,view:r})):s.push(r.printJSON(f[l],i,r));return s.push(r._closeIndent({closingIndent:i-1}),r._closeBracket({isObj:a})),t.flatten(s).join("")},render:function(){return this.interacted||this.$el.html(this.printJSON(this._json,0,this)),this},_type:t.template('<span class="t <%- type %>"><%- obj %></span>'),_bracket:t.template("<span><%if(isObj){%>{<%}else{%>[<%}%></span>"),_state:t.template('                <% if(expands) { %>                    <a class="jsexpands level-<%-level%>">[+]</a>                <% } else { %>                    <a class="jscollapse level-<%-level%>">[-]</a>                <% } %>            '),_indent:t.template('<br><span><%-Array(newIndent+1).join(" ")%></span>'),_key:t.template('<span class="key level-<%-level%>"><span class="key-name"><%-val%></span>:<%= pjson(obj[val], nIndent, view) %></span>'),_closeIndent:t.template('</span><br><span class="level-<%-closingIndent%>"><%-Array(closingIndent).join(" ")%>'),_closeBracket:t.template("<%if(isObj){ %><span>}</span><%}else{%><span>]</span><%}%></span>")})}),define("views/shared/eventsviewer/shared/RawField",["underscore","module","keyboard/SearchModifier","splunk.util","views/Base","models/services/search/IntentionsParser","models/services/search/jobs/Result","views/shared/JSONTree"],function(e,t,n,r,i,s,o,u){return i.extend({moduleId:t.id,tagName:"div",initialize:function(){i.prototype.initialize.apply(this,arguments),this.keyboardSearchModifier=new n,this.rowExpanded="rowExpanded"+this.options.idx,this.jsonInteraction="interaction"+this.options.idx,this.isSyntaxHighlighted="isSyntaxHighlighted"+this.options.idx,this.showAllLines="showAllLines"+this.options.idx,this.children.json=new u({json:this.model.event.rawToText()}),this._isJSON=this.children.json.isJSON(),this.model.state.set(this.isSyntaxHighlighted,this._isJSON),this.model.state.on("change:"+this.isSyntaxHighlighted,this.render,this),this.model.intentionsParser=new s,this.model.intentionsParser.on("change",function(){this.model.report.entry.content.set("search",this.model.intentionsParser.fullSearch()),this.model.report.trigger("eventsviewer:drilldown")},this),this.model.resultWorking=new o,this.model.resultWorking.results.on("reset",function(){var e=this.model.resultWorking.results.at(0);e&&this.model.event.replace(e.toJSON())},this),this.model.event.on("change",function(){this.children.json.setJSON(this.model.event.rawToText(),!1),this.render()},this),this.model.report.entry.content.on("change:display.events.type",function(){var e=r.normalizeBoolean(this.model.report.entry.content.get("display.events.list.wrap")),t=this.$(".raw-event");t.removeClass("wrap"),(this.model.report.entry.content.get("display.events.type")==="raw"||e)&&t.addClass("wrap")},this),this.model.report.entry.content.on("change:display.events.list.wrap",function(){var e=r.normalizeBoolean(this.model.report.entry.content.get("display.events.list.wrap")),t=this.$(".raw-event");e&&!t.hasClass("wrap")?t.addClass("wrap"):t.removeClass("wrap")},this),this.children.json.on("interaction",function(){this.model.state.get(this.rowExpanded)||this.model.state.trigger(this.jsonInteraction)},this)},visibility:function(){this.model.state.get(this.isSyntaxHighlighted)?this.$(".toggle-raw-json").text(e("Show as raw text").t()):this.$(".toggle-raw-json").text(e("Show syntax highlighted").t())},events:{"mouseover .t":function(e){var t=this.getSegmentParent(e.target);t.addClass("h"),e.preventDefault()},"mouseout .t":function(e){var t=this.getSegmentParent(e.target);t.removeClass("h")},"click .t":function(e){var t=this.getSegmentRoot($(e.currentTarget)),n;return t||(t=this.getSegmentParent(e.currentTarget)),n={value:t.text(),app:this.model.application.get("app"),owner:this.model.application.get("owner"),stripReportsSearch:!1},this.model.intentionsParser.clear({silent:!0}),t.hasClass("a")?n=$.extend(n,{q:this.model.report.entry.content.get("search"),action:"removeterm"}):n=$.extend(n,{q:this.keyboardSearchModifier.isReplacement(e)?"*":this.model.report.entry.content.get("search"),action:"addterm",negate:this.keyboardSearchModifier.isNegation(e)}),this.model.intentionsParser.fetch({data:n}),!1},"click .hideinline":function(e){this.model.state.set(this.showAllLines,!1),e.preventDefault()},"click .showinline":function(e){this.model.state.set(this.showAllLines,!0),e.preventDefault()},"click .toggle-raw-json":function(e){this.model.state.set(this.isSyntaxHighlighted,!this.model.state.get(this.isSyntaxHighlighted)),e.preventDefault()}},getSegmentParent:function(e){var t=e.parentNode;return t.childNodes[t.childNodes.length-1]==e&&$(t).hasClass("t")&&(e=t),$(e)},getSegmentRoot:function(e){return e.hasClass("event")?void 0:e.hasClass("a")?e:this.getSegmentRoot(e.parent())},render:function(){var t=!0,n=this.model.report.entry.content,i=n.get("display.events.type"),s=parseInt(this.model.event.get("_fulllinecount"),10),o={decoration_audit_valid:{msg:"Valid",label:"label-success",icon:"icon-check-circle"},decoration_audit_gap:{msg:"Gap",label:"label-warning",icon:"icon-minus-circle"},decoration_audit_tampered:{msg:"Tampered!",label:"label-important",icon:"icon-alert-circle"},decoration_audit_cantvalidate:{msg:"Can't validate!",label:"label-info",icon:"icon-question-circle"}};i==="list"&&(t=r.normalizeBoolean(n.get("display.events.list.wrap"))),this.el.innerHTML=this.compiledTemplate({_:e,isTable:this.model.report.entry.content.get("display.events.type")==="table",isJSON:this._isJSON,model:this.model.event,linecount:s,wrap:t,expanded:this.model.state.get(this.showAllLines),decorations:o,rawTextOnly:this.options.noSegmentation});var u=this.$(".raw-event");if(!this.options.noSegmentation&&this._isJSON)if(this.model.state.get(this.isSyntaxHighlighted))this.$(".json-event").append(this.children.json.render().el);else{var a=this.model.event.getRaw();u.removeClass("raw-event").hide(),u[0].innerHTML=a,u.addClass("raw-event").show()}else this.options.noSegmentation?this.$(".raw-event").append(e.escape(this.model.event.rawToText())):this.$(".raw-event").append(this.model.event.getRaw());return this.visibility(),this},template:'                <% if(model.has("_decoration") && decorations[model.get("_decoration")]) { %>                    <% var decoration = decorations[model.get("_decoration")]; %>                    <span class="audit label  <%- decoration.label %>"><i class="<%- decoration.icon %>"></i> <%- decoration.msg %></span>                <% } %>                <pre class="json-event"></pre>                <div class="raw-event normal <% if(wrap){ %> wrap <% } %>"></div>                <% if(isJSON && !isTable) { %><a href="#" class="toggle-raw-json"><%- _("Show as raw text").t() %></a> <% } %>                <% if (expanded) { %>                    <a href="#" class="hideinline">Collapse</a>                <% } else if (model.isTruncated()) { %>                    <a href="#" class="showinline">Show all <%= linecount %> lines</a>                <% } %>            '})}),define("views/shared/eventsviewer/raw/body/Row",["jquery","underscore","backbone","module","views/Base","views/shared/eventsviewer/shared/EventFields","views/shared/eventsviewer/shared/RawField"],function(e,t,n,r,i,s,o){return i.extend({moduleId:r.id,tagName:"tr",initialize:function(){i.prototype.initialize.apply(this,arguments),this.rowExpanded="rowExpanded"+this.options.idx,this.jsonInteraction="interaction"+this.options.idx,this.swappingKey="swapResult"+this.options.idx,this.showAllLines="showAllLines"+this.options.idx,this.pendingRemove="pendingRemove"+this.options.idx,this.model.renderer=this.collection.eventRenderers.getRenderer(this.model.event.get("eventtype")),this.children.raw=new o({model:{event:this.model.event,state:this.model.state,result:this.model.result,report:this.model.report,searchJob:this.model.searchJob,application:this.model.application},idx:this.options.idx}),this.model.state.on("change:"+this.rowExpanded,this.visibility,this),this.model.state.on(this.jsonInteraction,this.clickToExpandRow,this),this.model.state.on("change:"+this.showAllLines,function(){this.clickToExpandRow()},this),this.model.state.on("unmodalize"+this.options.idx,function(){this.clickToExpandRow(!0)},this),this.model.result.on("tags-updated",function(){this.model.state.get(this.rowExpanded)&&this.render()},this),this.model.report.entry.content.on("change:display.prefs.events.offset",this.collapseState,this)},events:{"click td.expands":function(e){this.eventFieldsFactory();if(this.model.state.get(this.pendingRemove)){this.model.state.get(this.rowExpanded)?this.collapseState():this.expandState(),e.preventDefault();return}this.clickToExpandRow(!0),e.preventDefault()}},eventFieldsFactory:function(){this.children.eventFields&&this.children.eventFields.remove(),this.children.eventFields=new s({model:{event:this.model.event,state:this.model.state,result:this.model.result,summary:this.model.summary,application:this.model.application,report:this.model.report,searchJob:this.model.searchJob},collection:{selectedFields:this.collection.selectedFields,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand,idx:this.options.idx,swappingKey:this.swappingKey,showAllLines:this.showAllLines}),this.$(".event").find(this.children.raw.el).after(this.children.eventFields.render().el)},clickToExpandRow:function(e){var t={index:this.options.idx,rtindex:this.model.result.results.length-this.options.idx-1,showAllLines:this.model.state.get(this.showAllLines)};this.children.eventFields||this.eventFieldsFactory(),this.model.state.get(this.rowExpanded)?this.model.state.get(this.rowExpanded)&&e?(this.model.state.unset(this.showAllLines,{silent:!0}),t.showAllLines=this.model.state.get(this.showAllLines),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t),this.collapseState()):(this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)):(this.expandState(),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)),this.model.state.unset("timeExpanded",{silent:!0})},expandState:function(){this.model.state.set(this.rowExpanded,!0),this.model.state.set("sleep",!0)},collapseState:function(){this.model.state.unset("modalize"),this.model.state.unset(this.rowExpanded),this.model.state.unset("sleep")},debouncedRemove:function(){return this.model.state.set(this.pendingRemove,!0),i.prototype.debouncedRemove.apply(this,arguments),this},visibility:function(){var e=this.$("td.expands > a > i").removeClass("icon-triangle-right-small icon-triangle-down-small");this.model.state.get(this.rowExpanded)&&this.options.allowRowExpand?(e.addClass("icon-triangle-down-small"),this.eventFieldsFactory()):(e.addClass("icon-triangle-right-small"),this.children.eventFields&&this.children.eventFields.remove()),this.children.raw.visibility(),this.reflow()},render:function(){var e=this.el;return this.$el.find("> td").each(function(t,n){e.removeChild(n)}),this.$el.append(this.compiledTemplate({expanded:this.model.state.get(this.rowExpanded),colorClass:this.model.renderer?this.model.renderer.entry.content.get("css_class"):"",allowRowExpand:this.options.allowRowExpand})),this.$(".event").append(this.children.raw.render().el),this.visibility(),this},reflow:function(){this.model.state.get(this.rowExpanded)?this.model.state.set("modalize",this.options.idx):this.model.state.unset("modalize")},template:'                <% if (allowRowExpand) { %>                    <td class="expands <%- colorClass %>">                        <a href="#"><i class="icon-triangle-<%- expanded ? "down" : "right" %>-small"></i></a>                    </td>                <% } %>                <td class="event"></td>            '})}),define("views/shared/eventsviewer/raw/body/Master",["underscore","module","models/Base","views/Base","views/shared/eventsviewer/raw/body/Row","util/console"],function(e,t,n,r,i,s){return r.extend({moduleId:t.id,tagName:"tbody",type:"raw",initialize:function(){r.prototype.initialize.apply(this,arguments),this.model.result.results.on("reset",this.debouncedRender,this),this.model.report.entry.content.on("change:display.events.rowNumbers",this.debouncedRender,this),this.model.state.on("change:sleep",function(){this.model.state.get("sleep")?this.sleep({lite:!0}):this.wake({lite:!0})},this)},sleep:function(e){return e&&e.lite?this.awake=!1:r.prototype.sleep.apply(this),this},wake:function(e){return e&&e.lite?(this.awake=!0,this.touch&&this.render()):r.prototype.wake.apply(this),this},isSelected:function(){return this.model.report.entry.content.get("display.events.type")===this.type},cleanup:function(){this.$el.empty(),e.chain(this.children).values().invoke("debouncedRemove",{detach:!0}).values(),this.children={}},render:function(){this.trigger("rows:pre-remove"),this.cleanup();var t=document.createDocumentFragment(),n=this.model.searchJob?this.model.searchJob.entry.content.get("isRealTimeSearch"):!1,r=n?this.model.result.results.reverse({mutate:!1}):this.model.result.results.models;return s.debug("Events Raw: rendering",r.length,"events",n?"in real-time mode":"in historical mode"),e.each(r,function(e,n){this.children["row_"+n]=new i({model:{event:e,result:this.model.result,report:this.model.report,state:this.model.state,summary:this.model.summary,application:this.model.application,searchJob:this.model.searchJob},collection:{workflowActions:this.collection.workflowActions,eventRenderers:this.collection.eventRenderers,selectedFields:this.collection.selectedFields},idx:n,selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand}),t.appendChild(this.children["row_"+n].render().el)},this),this.el.appendChild(t),e(this.model.state.toJSON()).each(function(e,t){t.indexOf("pendingRemove")===0&&this.model.state.unset(t)},this),this.trigger("rows:added"),this}})}),define("views/shared/eventsviewer/raw/Master",["jquery","underscore","backbone","module","models/Base","views/Base","views/shared/delegates/Modalize","views/shared/eventsviewer/shared/TableHead","views/shared/eventsviewer/raw/body/Master"],function(e,t,n,r,i,s,o,u,a){return s.extend({className:"scrolling-table-wrapper",moduleId:r.id,initialize:function(){s.prototype.initialize.apply(this,arguments),this.model.state=this.model.state||new i,this.children.modalize=new o({el:this.el,tbody:"> table > tbody"}),this.children.head=new u({labels:["Event"],allowRowExpand:this.options.allowRowExpand,allowLineNum:!1}),this.children.body=new a({model:{result:this.model.result,state:this.model.state,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application},collection:{workflowActions:this.collection.workflowActions,eventRenderers:this.collection.eventRenderers,selectedFields:this.collection.selectedFields},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand});var e=t.debounce(this.modalize);this.model.state.on("change:modalize",e,this),this.collection.selectedFields.on("reset add remove",e,this),this.children.modalize.on("unmodalize",function(e){this.model.state.trigger("unmodalize"+e)},this),this.children.body.on("rows:pre-remove",function(){this.$el.css("minHeight",this.$el.height())},this),this.children.body.on("rows:added",function(){this.$el.css("minHeight","")},this)},modalize:function(){this.children.modalize.show(this.model.state.get("modalize"))},render:function(){return this.$el.html(this.template),this.$("> table.events-results").append(this.children.head.render().el),this.$("> table.events-results").append(this.children.body.render().el),this},template:'                <table class="table table-chrome table-row-expanding events-results events-results-table"></table>            '})}),define("views/shared/TableHead",["underscore","backbone","module","views/Base"],function(e,t,n,r){return r.extend({moduleId:n.id,tagName:"thead",initialize:function(){r.prototype.initialize.apply(this,arguments);var t={columns:[]};e.defaults(this.options,t),this.model.on("change:sortKey change:sortDirection",this.debouncedRender,this)},events:{"click th":function(e){var t=$(e.currentTarget),n=t.attr("data-key"),r=t.hasClass("asc")?"desc":"asc";if(!n)return!0;this.model.set({sortKey:n,sortDirection:r}),e.preventDefault()},"click th > a":function(e){e.preventDefault()}},render:function(){var t=this.compiledTemplate({_:e,columns:this.options.columns,model:this.model});return this.$el.html(t),this},template:'                <tr class="">                    <% _.each(columns, function(value, sortKey) { %>                        <% var sortableClassName = (value.sortKey) ? "sorts" : "" %>                        <% var activeClassName = model.get("sortKey") && value.sortKey==model.get("sortKey") ? "active " + model.get("sortDirection") : "" %>                        <th data-key="<%- value.sortKey || "" %>" class="<%- sortableClassName %> <%- activeClassName %> <%- value.className || "" %>" <%- value.colSpan ? "colspan=" + value.colSpan : "" %> >                        <% if (value.html) { %>                            <%= value.html %>                        <% } else if (value.sortKey) { %>                            <a href="#"><%- value.label %><i class="icon-sorts <%- activeClassName %>"></i></a>                        <% } else { %>                            <%- value.label %>                        <% } %>                        </th>                    <% }) %>                </tr>            '})}),define("views/shared/eventsviewer/list/body/row/SelectedFields",["jquery","underscore","backbone","module","views/Base","views/shared/delegates/Popdown","views/shared/FieldInfo","views/shared/eventsviewer/shared/WorkflowActions","views/shared/eventsviewer/shared/BaseFields"],function(e,t,n,r,i,s,o,u,a){return a.extend({moduleId:r.id,initialize:function(){a.prototype.initialize.apply(this,arguments),this.rowExpanded="rowExpanded"+this.options.idx},render:function(){var e=this.model.event.strip(),n=t.intersection(e,this.collection.selectedFields.pluck("name")).sort();return this.$el.html(this.compiledTemplate({selectedfields:n,selectableFields:this.options.selectableFields,m:this.model.event,slen:this.model.summary.fields.length,r:this.model.result,_partial:this._partial,_condensedSelectedFields:this._condensedSelectedFields,selected:n.length,_:t})),this},_condensedSelectedFields:t.template('                <ul class="condensed-selected-fields">                <%  _(fields).each(function(field, i) { %>                    <% var values = m.get(field) %>                    <li>                        <% _(values).each(function(value, idx) { %>                            <span class="field"><%- field %> =</span>                            <span class="field-value"><a class="f-v" data-field-name="<%-field %>" title="<%= value ? value : "&nbsp;"%>"><% if(value) {%><%- value %><% } else { %>&nbsp;<% } %></a></span>                            <% var tags = r.getTags(field, value); %>                            <% if (tags.length) { %>                                  <% _(tags).each(function(tag, idx){ %><a data-tagged-field-name="tag::<%- field %>" class="tag" href="#"><%- tag %>                                        <%if(idx!=tags.length-1){%> <%}%>                                    </a><% }); %>                            <% } %>                        <% }) %>                    </li>                <% }) %>              </ul>            '),_noncondensedSelectedFields:t.template('                <table class="table table-condensed table-embed outer-template table-dotted">                    <tbody>                        <!-- FIXME: this should be inside the row below -->                        <tr class="row-more-fields">                            <td></td>                            <td></td>                            <td></td>                            <td class="col-more-fields" rowspan="4">                                <a href="#" class="more-fields"><%- selected %> of <%- total %> fields</a>                            </td>                        </tr>                        <%= _partial({fields: selectedfields, slen: slen, m: m, r:r, label: void(0), selectableFields: false}) %>                    </tbody>                </table>            '),template:"                <% if (selected) { %>                    <%= _condensedSelectedFields({ fields: selectedfields, m: m, r:r, _:_ }) %>                <% } %>           "})}),define("views/shared/eventsviewer/list/body/row/Master",["jquery","underscore","backbone","module","views/Base","views/shared/TableHead","views/shared/eventsviewer/list/body/row/SelectedFields","views/shared/eventsviewer/shared/EventFields","views/shared/eventsviewer/shared/RawField","splunk.util"],function(e,t,n,r,i,s,o,u,a,f){return i.extend({moduleId:r.id,tagName:"tr",initialize:function(){i.prototype.initialize.apply(this,arguments),this.rowExpanded="rowExpanded"+this.options.idx,this.jsonInteraction="interaction"+this.options.idx,this.swappingKey="swapResult"+this.options.idx,this.showAllLines="showAllLines"+this.options.idx,this.pendingRemove="pendingRemove"+this.options.idx,this.model.renderer=this.collection.eventRenderers.getRenderer(this.model.event.get("eventtype")),this.children.raw=new a({model:{event:this.model.event,state:this.model.state,result:this.model.result,report:this.model.report,searchJob:this.model.searchJob,application:this.model.application},collection:{eventRenderers:this.collection.eventRenderers},idx:this.options.idx}),this.children.selectedFields=new o({model:{event:this.model.event,state:this.model.state,result:this.model.result,summary:this.model.summary,application:this.model.application,report:this.model.report,searchJob:this.model.searchJob},collection:{selectedFields:this.collection.selectedFields,workflowActions:this.collection.workflowActions},idx:this.options.idx,selectableFields:this.options.selectableFields}),this.model.state.on("change:"+this.rowExpanded,this.visibility,this),this.model.state.on(this.jsonInteraction,this.clickToExpandRow,this),this.model.state.on("change:"+this.showAllLines,function(){this.clickToExpandRow()},this),this.model.state.on("unmodalize"+this.options.idx,function(){this.clickToExpandRow(!0)},this),this.model.result.on("tags-updated",function(){this.model.state.get(this.rowExpanded)&&this.render()},this),this.model.report.entry.content.on("change:display.prefs.events.offset",this.collapseState,this)},events:{"click td.expands":function(e){this.eventFieldsFactory();if(this.model.state.get(this.pendingRemove)){this.model.state.get(this.rowExpanded)?this.collapseState():this.expandState(),e.preventDefault();return}this.clickToExpandRow(!0),e.preventDefault()},"keyup ._time":function(t){t.preventDefault(),t.which===13&&this.drilldown(e(t.currentTarget).find("span.formated-time"))},"click .formated-time":function(t){t.preventDefault(),this.drilldown(e(t.currentTarget))}},drilldown:function(e){var t=f.getEpochTimeFromISO(e.data().timeIso);this.model.report.entry.content.set({"dispatch.earliest_time":t,"dispatch.latest_time":""+(parseFloat(t)+1)}),this.model.report.trigger("eventsviewer:drilldown")},eventFieldsFactory:function(){this.children.eventFields&&this.children.eventFields.remove(),this.children.eventFields=new u({model:{event:this.model.event,state:this.model.state,result:this.model.result,summary:this.model.summary,application:this.model.application,report:this.model.report,searchJob:this.model.searchJob},collection:{selectedFields:this.collection.selectedFields,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand,idx:this.options.idx,swappingKey:this.swappingKey,showAllLines:this.showAllLines}),this.$(".event").find(this.children.raw.el).after(this.children.eventFields.render().el)},clickToExpandRow:function(e){var t={index:this.options.idx,rtindex:this.model.result.results.length-this.options.idx-1,showAllLines:this.model.state.get(this.showAllLines)};this.children.eventFields||this.eventFieldsFactory(),this.model.state.get(this.rowExpanded)?this.model.state.get(this.rowExpanded)&&e?(this.model.state.unset(this.showAllLines,{silent:!0}),t.showAllLines=this.model.state.get(this.showAllLines),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t),this.collapseState()):(this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)):(this.expandState(),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)),this.model.state.unset("timeExpanded",{silent:!0})},expandState:function(){this.model.state.set(this.rowExpanded,!0),this.model.state.set("sleep",!0)},collapseState:function(){this.model.state.unset("modalize"),this.model.state.unset(this.rowExpanded),this.model.state.unset("sleep")},debouncedRemove:function(){return this.model.state.set(this.pendingRemove,!0),i.prototype.debouncedRemove.apply(this,arguments),this},visibility:function(){var e=this.$("td.expands > a > i").removeClass("icon-triangle-right-small icon-triangle-down-small");this.model.state.get(this.rowExpanded)&&this.options.allowRowExpand?(e.addClass("icon-triangle-down-small"),this.eventFieldsFactory()):(e.addClass("icon-triangle-right-small"),this.children.selectedFields.wake().$el.css("display",""),this.children.eventFields&&this.children.eventFields.remove()),this.children.raw.visibility(),this.reflow()},render:function(){var t=this.el;return this.$el.find("> td").each(function(e,n){t.removeChild(n)}),this.$el.append(this.compiledTemplate({$:e,event:this.model.event,lineNum:this.options.lineNum,application:this.model.application,expanded:this.model.state.get(this.rowExpanded),formattedTime:this.model.event.formattedTime(),colorClass:this.model.renderer?this.model.renderer.entry.content.get("css_class"):"",allowRowExpand:this.options.allowRowExpand})),this.$(".event").append(this.children.raw.render().el),this.$(".event").append(this.children.selectedFields.render().el),this.visibility(),this},reflow:function(){this.model.state.get(this.rowExpanded)?this.model.state.set("modalize",this.options.idx):this.model.state.unset("modalize"),i.prototype.reflow.apply(this,arguments)},template:'                <% if (allowRowExpand) { %>                <td class="expands <%- colorClass %>">                    <a href="#"><i class="icon-triangle-<%- expanded ? "down" : "right" %>-small"></i></a>                </td>                <% } %>                <td class="line-num"><span><%- lineNum %></span></td>                <td class="_time" tabindex="0">                    <span class="formated-time" data-time-iso="<%- event.get("_time") %>">                    <% if(application.get("locale").indexOf("en") > -1){ %>                         <span><%- $.trim(formattedTime.slice(0, formattedTime.indexOf(" "))) %></span>                         <br>                         <span><%- $.trim(formattedTime.slice(formattedTime.indexOf(" "))) %></span>                    <% } else { %>                         <%- formattedTime %>                    <% } %>                    </span>                </td>                <td class="event"></td>            '})}),define("views/shared/eventsviewer/list/body/Master",["module","underscore","models/Base","views/Base","views/shared/eventsviewer/list/body/row/Master","util/console"],function(e,t,n,r,i,s){return r.extend({moduleId:e.id,tagName:"tbody",type:"list",initialize:function(){r.prototype.initialize.apply(this,arguments),this.model.result.results.on("reset",this.debouncedRender,this),this.model.state.on("change:sleep",function(){this.model.state.get("sleep")?this.sleep({lite:!0}):this.wake({lite:!0})},this)},sleep:function(e){return e&&e.lite?this.awake=!1:r.prototype.sleep.apply(this),this},wake:function(e){return e&&e.lite?(this.awake=!0,this.touch&&this.render()):r.prototype.wake.apply(this),this},isSelected:function(){return this.model.report.entry.content.get("display.events.type")===this.type},cleanup:function(){t.chain(this.children).values().invoke("debouncedRemove",{detach:!0}).values(),this.children={}},render:function(){this.trigger("rows:pre-remove"),this.cleanup();var e=document.createDocumentFragment(),n=this.model.searchJob.entry.content.get("isRealTimeSearch"),r=n?this.model.result.results.reverse({mutate:!1}):this.model.result.results.models;return s.debug("Events Lister: rendering",r.length,"events",n?"in real-time mode":"in historical mode"),t.each(r,function(t,n){var r,s="row_"+n;this.model.searchJob.entry.content.get("isRealTimeSearch")?r=this.model.result.endOffset()-n:r=this.model.result.get("init_offset")+n+1,this.children[s]=new i({lineNum:r,model:{state:this.model.state,event:t,result:this.model.result,summary:this.model.summary,report:this.model.report,application:this.model.application,searchJob:this.model.searchJob},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},idx:n,selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand}),e.appendChild(this.children[s].render().el)},this),this.el.appendChild(e),t(this.model.state.toJSON()).each(function(e,t){t.indexOf("pendingRemove")===0&&this.model.state.unset(t)},this),this.trigger("rows:added"),this}})}),define("views/shared/eventsviewer/list/Master",["underscore","module","models/Base","splunk.i18n","util/time_utils","views/Base","views/shared/delegates/Modalize","views/shared/delegates/TableDock","views/shared/eventsviewer/shared/TableHead","views/shared/eventsviewer/list/body/Master","splunk.util"],function(e,t,n,r,i,s,o,u,a,f,l){return s.extend({moduleId:t.id,className:"scrolling-table-wrapper",initialize:function(){s.prototype.initialize.apply(this,arguments),this.model.state=this.model.state||new n,this.children.modalize=new o({el:this.el,tbody:"> table > tbody"}),this.children.head=new a({model:this.model.report,labels:["Time","Event"],allowRowExpand:this.options.allowRowExpand}),this.children.body=new f({model:{result:this.model.result,summary:this.model.summary,state:this.model.state,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand}),this.options.headerMode==="dock"&&(this.children.tableDock=new u({el:this.el,offset:36,defaultLayout:"fixed"}));var t=e.debounce(this.modalize);this.model.state.on("change:modalize",t,this),this.collection.selectedFields.on("reset add remove",t,this),this.model.report.entry.content.on("change:display.events.rowNumbers",function(){this.$("table:not(.table-embed)").toggleClass("hide-line-num"),this.deferUpdateDock()},this),this.model.report.entry.content.on("change:display.events.list.wrap",function(){this.deferUpdateDock()},this),this.model.result.results.on("reset",function(){e.isNumber(this.model.state.get("modalize"))||this.deferUpdateDock()},this),this.children.modalize.on("unmodalize",function(e){this.model.state.trigger("unmodalize"+e),this.children.tableDock&&this.children.tableDock.enable()},this),this.model.state.on("change:modalize",function(t){this.children.tableDock&&(e.isNumber(t.get("modalize"))?this.children.tableDock.disable():this.children.tableDock.enable())},this),this.children.body.on("rows:pre-remove",function(){this.$el.css("minHeight",this.$el.height())},this),this.children.body.on("rows:added",function(){this.$el.css("minHeight","")},this)},remove:function(){s.prototype.remove.apply(this,arguments),$(window).off("."+this.cid)},modalize:function(){this.children.modalize.show(this.model.state.get("modalize")),this.model.state.get("modalize")&&this.children.tableDock&&this.children.tableDock.disable()},deferUpdateDock:function(){this.children.tableDock&&e.defer(this.children.tableDock.update.bind(this.children.tableDock))},render:function(){return this.$el.html(this.compiledTemplate({hidelinenums:!l.normalizeBoolean(this.model.report.entry.content.get("display.events.rowNumbers")),cid:this.cid})),this.$("> table.events-results").append(this.children.head.render().el),this.$("> table.events-results").append(this.children.body.render().el),this},reflow:function(){this.children.tableDock&&this.children.tableDock.update()},template:'                <table class="table table-chrome <% if(hidelinenums){ %> hide-line-num <% } %> table-row-expanding events-results events-results-table" id="<%= cid %>-table"></table>            '})}),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),define("jquery.ui.draggable",["jquery.ui.widget","jquery.ui.mouse"],function(){}),define("views/shared/eventsviewer/table/TableHead",["underscore","module","views/Base","splunk.util","helpers/user_agent"],function(e,t,n,r,i){return n.extend({moduleId:t.id,tagName:"thead",initialize:function(){n.prototype.initialize.apply(this,arguments),this.collection.intersectedFields.on("reset",this.render,this),this.model.report.entry.content.on("change:display.events.rowNumbers change:display.events.table.sortDirection change:display.events.table.sortColumn",this.render,this)},events:{"click th":function(e){var t=$(e.currentTarget);this.model.report.entry.content.set({"display.events.table.sortDirection":t.hasClass("asc")?"desc":"asc","display.events.table.sortColumn":t.attr("data-name")}),e.preventDefault()}},render:function(){return this.$el.html(this.compiledTemplate({collection:this.collection.intersectedFields,hasRowNum:r.normalizeBoolean(this.model.report.entry.content.get("display.events.rowNumbers")),allowRowExpand:this.options.allowRowExpand,content:this.model.report.entry.content,reorderableHandle:this.options.selectableFields?"on":"off",isRealTime:this.model.searchJob.entry.content.get("isRealTimeSearch"),is_ie7:i.isIE7()?"ie7":"",_:e})),this},template:'                <tr class="">                    <% if (allowRowExpand) { %>                        <th class="col-info"><i class="icon-info"></i></th>                    <% } %>                    <% if(hasRowNum) { %>                        <th class="line-num <%- is_ie7 %>">&nbsp;</th>                    <% }%>                    <th class="col-time <%- content.get("display.events.table.sortColumn") ? "sorts" : "" %> <%- is_ie7 %>">_time</th>                    <% collection.each(function(model) { %>                        <% var active = (!isRealTime && (content.get("display.events.table.sortColumn") == model.get("name"))) ? "active": ""%>                        <% var dir = (!isRealTime && (active==="active")) ? content.get("display.events.table.sortDirection") : ""%>                        <% var sorts = (!isRealTime) ? "sorts" : ""; %>                        <% var reorderable = (!isRealTime) ? "reorderable" : ""; %>                        <% var reorderableLabel = (!isRealTime) ? "reorderable-label" : ""; %>                        <th class=" <%- reorderable %> <%- sorts %> <%-active%> <%-dir%>" data-name="<%- model.get("name") %>"><span class="<%- reorderableLabel %> <%- reorderableHandle %>"><%- _(model.get("name")).t() %></span></th>                    <% }) %>                </tr>            '})}),define("views/shared/eventsviewer/table/body/PrimaryRow",["jquery","underscore","backbone","module","models/services/search/IntentionsParser","views/Base","splunk.util"],function(e,t,n,r,i,s,o){return s.extend({moduleId:r.id,tagName:"tr",initialize:function(){s.prototype.initialize.apply(this,arguments),this.$el.addClass(this.options.idx%2?"even":"odd"),this.model.renderer=this.collection.eventRenderers.getRenderer(this.model.event.get("eventtype")),this.rowExpanded="rowExpanded"+this.options.idx,this.jsonInteraction="interaction"+this.options.idx,this.swappingKey="swapResult"+this.options.idx,this.showAllLines="showAllLines"+this.options.idx,this.pendingRemove="pendingRemove"+this.options.idx,this.model.intentionsParser=new i,this.model.intentionsParser.on("change",function(){this.model.report.entry.content.set("search",this.model.intentionsParser.fullSearch()),this.model.report.trigger("eventsviewer:drilldown")},this),this.model.report.entry.content.on("change:display.events.table.drilldown",this.render,this),this.model.state.on("change:"+this.rowExpanded,this.debouncedRender,this),this.model.state.on(this.jsonInteraction,this.clickToExpandRow,this),this.model.state.on("change:"+this.showAllLines,function(){this.clickToExpandRow()},this),this.model.state.on("unmodalize"+this.options.idx,function(){this.clickToExpandRow(!0)},this),this.collection.selectedFields.on("reset add remove",this.render,this),this.model.report.entry.content.on("change:display.prefs.events.offset",this.collapseState,this),this.model.report.entry.content.on("change:display.events.list.wrap",function(){var e=o.normalizeBoolean(this.model.report.entry.content.get("display.events.list.wrap")),t=this.$("a.field-val").parents("td");e?t.removeClass("no-wrap"):t.addClass("no-wrap")},this)},events:{"click td.expands":function(e){if(this.model.state.get(this.pendingRemove)){this.model.state.get(this.rowExpanded)?this.collapseState():this.expandState(),e.preventDefault();return}this.clickToExpandRow(!0),e.preventDefault()},"click ._time-drilldown > a":function(e){e.preventDefault()},"click ._time-drilldown":function(t){t.preventDefault(),this.drilldown(e(t.currentTarget).find("a"))},"click .one-value-drilldown > a.field-val":function(e){e.preventDefault()},"click .one-value-drilldown":function(t){t.preventDefault(),this.drilldown(e(t.currentTarget).find("a"))},"click .multi-value-drilldown > a.field-val":function(t){t.preventDefault(),this.drilldown(e(t.currentTarget))},"keypress td ":function(t){t.preventDefault(),t.which===13&&this.drilldown(e(t.currentTarget).find("a"))}},clickToExpandRow:function(e){var t={index:this.options.idx,rtindex:this.model.result.results.length-this.options.idx-1,showAllLines:this.model.state.get(this.showAllLines)};this.model.state.get(this.rowExpanded)?this.model.state.get(this.rowExpanded)&&e?(this.model.state.unset(this.showAllLines,{silent:!0}),t.showAllLines=this.model.state.get(this.showAllLines),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t),this.collapseState()):(this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)):(this.expandState(),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)),this.model.state.unset("timeExpanded",{silent:!0})},debouncedRemove:function(){return this.model.state.set(this.pendingRemove,!0),s.prototype.debouncedRemove.apply(this,arguments),this},drilldown:function(t){var n=t.data();if(n.timeIso){if(o.normalizeBoolean(this.model.report.entry.content.get("display.events.table.drilldown"))){var r=o.getEpochTimeFromISO(n.timeIso);this.model.report.entry.content.set({"dispatch.earliest_time":r,"dispatch.latest_time":""+(parseFloat(r)+1)}),this.model.report.trigger("eventsviewer:drilldown")}}else{var i=n.name,s=e.trim(t.text());this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),action:"fieldvalue",field:i,value:s,app:this.model.application.get("app"),owner:this.model.application.get("owner")}})}},expandState:function(){this.model.state.set(this.rowExpanded,!0),this.model.state.set("sleep",!0)},collapseState:function(){this.model.state.unset("modalize"),this.model.state.unset(this.rowExpanded),this.model.state.unset("sleep")},render:function(){var n=this.el;return this.$el.find("> td").each(function(e,t){n.removeChild(t)}),this.$el.append(this.compiledTemplate({$:e,_:t,event:this.model.event,lineNum:this.options.lineNum,expanded:this.model.state.get(this.rowExpanded),drilldown:o.normalizeBoolean(this.model.report.entry.content.get("display.events.table.drilldown")),application:this.model.application,selectedFields:this.collection.selectedFields,colorClass:this.model.renderer?this.model.renderer.entry.content.get("css_class"):"",formattedTime:this.model.event.formattedTime(),allowRowExpand:this.options.allowRowExpand,wrap:o.normalizeBoolean(this.model.report.entry.content.get("display.events.table.wrap")),splunkutil:o})),this},reflow:function(){this.model.state.get(this.rowExpanded)?this.model.state.set("modalize",this.options.idx):this.model.state.unset("modalize")},template:'                <% if (allowRowExpand) { %>                    <td <%if(expanded) {%>rowspan=2<%}%> class="expands <%- colorClass %>">                        <a href="#"><i class="icon-triangle-<%- expanded ? "down" : "right" %>-small"></i></a>                    </td>                <% } %>                <td class="line-num"><span><%- lineNum %></span></td>                <td class="_time <%= drilldown ? "_time-drilldown" : ""  %>" tabindex="0">                    <% if(drilldown) { %>                        <a data-time-iso="<%- event.get("_time") %>">                    <% } else { %>                        <span data-time-iso="<%- event.get("_time") %>">                    <% } %>                        <% if(application.get("locale").indexOf("en") > -1){ %>                             <span><%- $.trim(formattedTime.slice(0, formattedTime.indexOf(" "))) %></span>                             <br>                             <span><%- $.trim(formattedTime.slice(formattedTime.indexOf(" "))) %></span>                        <% } else { %>                             <%- formattedTime %>                        <% } %>                    <% if(drilldown) { %>  </a>  <% } else { %> </span> <% } %>                </td>                <% selectedFields.each(function(model) { %>                    <% var fields = event.get(model.get("name")); %>                    <% if (drilldown) { %>                        <td class="<% if(!wrap) { %>no-wrap<% } %> <%= drilldown && fields && fields.length > 1 ? "multi-value-drilldown" : ""  %> <%= drilldown && fields && fields.length == 1 ? "one-value-drilldown" : ""  %>"  tabindex="0"><% _(fields).each(function(field) { %><a class="field-val" data-name="<%- model.get("name") %>"><%- field %></a><% }) %></td>                    <% } else { %>                        <td class="<% if(!wrap) { %>no-wrap<% } %>"  tabindex="0"><% _(fields).each(function(field) { %><span class="field-val" data-name="<%- model.get("name") %>"><%- field %></span><% }) %></td>                    <% } %>                <% }) %>            '})}),define("views/shared/eventsviewer/table/body/SecondaryRow",["module","underscore","views/Base","views/shared/eventsviewer/shared/EventFields","views/shared/eventsviewer/shared/RawField","splunk.util"],function(e,t,n,r,i,s){return n.extend({moduleId:e.id,tagName:"tr",className:"field-row",initialize:function(){n.prototype.initialize.apply(this,arguments),this.$el.addClass(this.options.idx%2?"even":"odd"),this.children.eventFields=new r({model:{event:this.model.event,report:this.model.report,summary:this.model.summary,result:this.model.result,state:this.model.state,application:this.model.application,searchJob:this.model.searchJob},collection:{workflowActions:this.collection.workflowActions,selectedFields:this.collection.selectedFields},selectableFields:this.options.selectableFields,idx:this.options.idx}),this.children.raw=new i({model:{event:this.model.event,state:this.model.state,result:this.model.result,report:this.model.report,searchJob:this.model.searchJob,application:this.model.application},noSegmentation:!0,idx:this.options.idx}),this.rowExpanded="rowExpanded"+this.options.idx,this.model.state.on("change:"+this.rowExpanded,this.visibility,this),this.model.result.on("tags-updated",function(){this.model.state.get(this.rowExpanded)&&this.render()},this),this.model.state.on("unmodalize"+this.options.idx,this.collapseState,this),this.collection.selectedFields.on("reset add remove",function(){!t.isNumber(this.model.state.get("modalize"))&&this.model.state.get(this.rowExpanded)&&this.$(".event").attr("colspan",this.getCalculatedColSpan())},this)},visibility:function(){var e=this.$("td.expands > a > i").removeClass("icon-triangle-right-small icon-triangle-down-small");this.model.state.get(this.rowExpanded)?(this.$el.css("display",""),e.addClass("icon-triangle-down-small"),this.children.raw.wake().$el.show(),this.children.eventFields.touch=!0,this.children.eventFields.wake({syncRender:!0}).$el.show()):(this.$el.hide(),e.addClass("icon-triangle-right-small"),this.children.raw.sleep().$el.hide(),this.children.eventFields.sleep().$el.hide()),this.reflow()},getCalculatedColSpan:function(){return this.collection.selectedFields.length+1+(s.normalizeBoolean(this.model.report.entry.content.get("display.events.rowNumbers"))?1:0)},collapseState:function(){this.model.state.unset("modalize"),this.model.state.unset(this.rowExpanded),this.model.state.unset("sleep")},render:function(){var e=this.el;return this.$el.find("> td").each(function(t,n){e.removeChild(n)}),this.$el.append(this.compiledTemplate({cspan:this.getCalculatedColSpan(),raw:this.model.event.rawToText()})),this.$(".event").append(this.children.raw.render().el),this.$(".event").append(this.children.eventFields.render().el),this.visibility(),this},reflow:function(){this.model.state.get(this.rowExpanded)?this.model.state.set("modalize",this.options.idx):this.model.state.unset("modalize"),n.prototype.reflow.apply(this,arguments)},template:'                <td class="event" colspan="<%- cspan %>"></td>            '})}),define("views/shared/eventsviewer/table/body/Master",["jquery","underscore","backbone","module","models/Base","views/Base","views/shared/eventsviewer/table/body/PrimaryRow","views/shared/eventsviewer/table/body/SecondaryRow","util/console"],function(e,t,n,r,i,s,o,u,a){return s.extend({moduleId:r.id,tagName:"tbody",type:"table",initialize:function(){s.prototype.initialize.apply(this,arguments),this.model.result.results.on("reset",this.debouncedRender,this),this.model.state.on("change:sleep",function(){this.model.state.get("sleep")?this.sleep({lite:!0}):this.wake({lite:!0})},this),this.collection.intersectedFields.on("reset",this.debouncedRender,this)},sleep:function(e){return e&&e.lite?this.awake=!1:s.prototype.sleep.apply(this),this},wake:function(e){return e&&e.lite?(this.awake=!0,this.touch&&this.render()):s.prototype.wake.apply(this),this},isSelected:function(){return this.model.report.entry.content.get("display.events.type")===this.type},cleanup:function(){this.$el.empty(),t.chain(this.children).values().invoke("debouncedRemove",{detach:!0}).values(),this.children={}},render:function(){this.trigger("rows:pre-remove"),this.cleanup();var e=document.createDocumentFragment(),n=this.model.searchJob.entry.content.get("isRealTimeSearch"),r=n?this.model.result.results.reverse({mutate:!1}):this.model.result.results.models;return a.debug("Events Table: rendering",r.length,"events",n?"in real-time mode":"in historical mode"),t.each(r,function(t,n){var r;this.model.searchJob.entry.content.get("isRealTimeSearch")?r=this.model.result.endOffset()-n:r=this.model.result.get("init_offset")+n+1,this.children["masterRow_"+n]=new o({model:{event:t,report:this.model.report,application:this.model.application,searchJob:this.model.searchJob,result:this.model.result,state:this.model.state},collection:{eventRenderers:this.collection.eventRenderers,selectedFields:this.collection.intersectedFields},lineNum:r,idx:n,allowRowExpand:this.options.allowRowExpand}),e.appendChild(this.children["masterRow_"+n].render().el),this.children["fieldRow_"+n]=new u({model:{event:t,report:this.model.report,result:this.model.result,summary:this.model.summary,state:this.model.state,application:this.model.application,searchJob:this.model.searchJob},collection:{workflowActions:this.collection.workflowActions,selectedFields:this.collection.selectedFields},idx:n,selectableFields:this.options.selectableFields}),e.appendChild(this.children["fieldRow_"+n].render().el)},this),this.el.appendChild(e),t(this.model.state.toJSON()).each(function(e,t){t.indexOf("pendingRemove")===0&&this.model.state.unset(t)},this),this.trigger("rows:added"),this.reflow(),this},reflow:function(){this.model.state.trigger("init-draggable")}})}),define("views/shared/eventsviewer/table/Master",["module","underscore","splunk.i18n","splunk.util","util/time_utils","jquery.ui.draggable","models/Base","views/Base","views/shared/delegates/Modalize","views/shared/delegates/TableDock","views/shared/eventsviewer/table/TableHead","views/shared/eventsviewer/table/body/Master"],function(e,t,n,r,i,s,o,u,a,f,l,c){return u.extend({moduleId:e.id,className:"scrolling-table-wrapper",initialize:function(){u.prototype.initialize.apply(this,arguments),this.drag={},this.collection.intersectedFields=this.collection.selectedFields.deepClone(),this.model.state=this.model.state||new o,this.children.modalize=new a({el:this.el,tbody:"> table > tbody"}),this.children.head=new l({model:{report:this.model.report,searchJob:this.model.searchJob},collection:{intersectedFields:this.collection.intersectedFields,selectedFields:this.collection.selectedFields},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand,isRealTime:this.model.searchJob.entry.content.get("isRealTimeSearch")}),this.children.body=new c({model:{result:this.model.result,state:this.model.state,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application},collection:{workflowActions:this.collection.workflowActions,intersectedFields:this.collection.intersectedFields,eventRenderers:this.collection.eventRenderers,selectedFields:this.collection.selectedFields},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand}),this.model.state.on("init-draggable",this.initDraggable,this),this.options.headerMode==="dock"&&(this.children.tableDock=new f({el:this.el,offset:36,defaultLayout:"fixed"}));var e=t.debounce(function(e,t){this.modalize(e,t)}.bind(this),0);this.model.state.on("change:modalize",function(n){this.children.tableDock&&(t.isNumber(n.get("modalize"))?this.children.tableDock.disable():this.children.tableDock.enable()),e(this.model.state.get("modalize"),"table")},this),this.children.modalize.on("unmodalize",function(e){this.model.state.trigger("unmodalize"+e),this.children.tableDock.enable(),this.updateIntersectedFields()},this),this.collection.selectedFields.on("reset add remove",function(n,r,i){if(t.isNumber(this.model.state.get("modalize")))return;n.get("name")===this.model.report.entry.content.get("display.events.table.sortColumn")&&this.model.report.entry.content.set({"display.events.table.sortColumn":"","display.events.table.sortDirection":""}),this.updateIntersectedFields(),e(this.model.state.get("modalize"),"table")},this),this.model.result.results.on("reset",function(){t.isNumber(this.model.state.get("modalize"))||this.updateIntersectedFields()},this),this.collection.intersectedFields.on("reset",this.updateDock,this),this.model.report.entry.content.on("change:display.events.rowNumbers",function(){this.$("table:not(.table-embed)").toggleClass("hide-line-num")},this),this.model.report.entry.content.on("change:display.events.table.wrap",this.updateDock,this),this.model.report.entry.content.on("change:display.page.search.showFields change:display.prefs.events.offset",this.updateDock,this),this.options.selectableFields&&this.children.tableDock&&this.children.tableDock.on("updated",this.initDraggable,this),this.children.body.on("rows:pre-remove",function(){this.$el.css("minHeight",this.$el.height())},this),this.children.body.on("rows:added",function(){this.$el.css("minHeight","")},this)},updateIntersectedFields:function(){var e=[],n=[];!this.model.result.results.length||(t.each(t(this.collection.selectedFields.pluck("name")).intersection(this.model.result.fields.pluck("name")),function(e){n.push({name:e})}),this.collection.intersectedFields.reset(n))},remove:function(){u.prototype.remove.apply(this,arguments),$(window).off("."+this.cid)},reflow:function(){u.prototype.reflow.apply(this,arguments),this.isAttachedToDocument()&&this.children.head.$el.is(":visible")&&this.updateDock()},style:function(){var e=this.$el.width();return"#"+this.cid+"-table .table-expanded{max-width:"+(e?e-80:500)+"px}"},modalize:function(e,t){this.children.modalize.show(e,t)},render:function(){return this.$el.html(this.compiledTemplate({hidelinenums:!r.normalizeBoolean(this.model.report.entry.content.get("display.events.rowNumbers")),cid:this.cid})),this.$("> table.events-results").append(this.children.head.render().el).append(this.children.body.render().el),this},initDraggable:function(){this.options.selectableFields&&(this.drag.$theads=this.$el.find(".reorderable"),this.drag.$theads.draggable({helper:this.dragHelper.bind(this),start:this.startDrag.bind(this),stop:this.stopDrag.bind(this),drag:this.dragged.bind(this),containment:this.el,distance:5,scroll:!0}))},updateDock:function(){this.children.tableDock&&this.children.tableDock.update()},dragHelper:function(e,t){return this.drag.$th=$(e.currentTarget).addClass("moving"),this.drag.thOffsetTop=this.drag.$th.offset().top,this.drag.containerLeft=this.$el.position().left,this.drag.$insertionCursor=this.$(".table-insertion-cursor"),this.drag.$insertionCursor.show(),this.drag.$helper=$("<div class='reorderable-helper'><span class='reorderable-label'>"+this.drag.$th.text()+"</span></div>").appendTo(this.$el),this.drag.$helper.width(this.drag.$th.width()),this.drag.$helper.css("marginRight",-this.drag.$th.width()+"px"),this.findInsertionPoints(),this.drag.$helper[0]},findInsertionPoints:function(){this.drag.insertionPoints=[];var e=this.$("> table > thead > tr > th.reorderable"),t=e.filter("[data-name="+this.drag.$th.data("name")+"]")[0],n=this.drag.originalIndex=e.index(t);e.each(function(e,t){var r=$(t),i=r.position().left+this.$el.scrollLeft();e<n?this.drag.insertionPoints.push({left:i,index:e}):e==n?(this.drag.insertionPoints.push({left:i,index:e}),this.drag.insertionPoints.push({left:i+r.outerWidth(),index:e})):this.drag.insertionPoints.push({left:i+r.outerWidth(),index:e})}.bind(this))},findClosestInsertion:function(e,t){if(t.helper.offset().top-this.drag.thOffsetTop>100)return-1;var n=-1,r=1e7,i=e.pageX-this.drag.containerLeft+this.$el.scrollLeft();return $.each(this.drag.insertionPoints,function(t,s){var o=Math.abs(s.left-i);o<r&&(n=s,r=o)}),n},startDrag:function(e,t){},stopDrag:function(e,t){var n=this.findClosestInsertion(e,t),r=this.collection.selectedFields.findWhere({name:this.drag.$th.data().name});n==-1?this.collection.selectedFields.remove(r):n.index!==this.drag.originalIndex&&(this.collection.selectedFields.remove(r,{silent:!0}),this.collection.selectedFields.add(r,{at:n.index})),this.drag.$th.removeClass("moving"),this.drag.$insertionCursor.hide()},dragged:function(e,t){var n=this.findClosestInsertion(e,t);n===-1?(this.drag.$insertionCursor.hide(),t.helper.addClass("reorderable-remove")):(this.drag.$insertionCursor.show().css("left",n.left),t.helper.removeClass("reorderable-remove"))},template:'                <table class="table table-chrome table-striped <% if(hidelinenums){ %> hide-line-num <% } %> table-row-expanding events-results events-results-table" id="<%= cid %>-table"></table>                <div class="table-insertion-cursor"></div>            '})}),define("views/shared/eventsviewer/Master",["jquery","underscore","module","models/Base","models/services/search/jobs/Result","views/Base","views/shared/eventsviewer/raw/Master","views/shared/eventsviewer/list/Master","views/shared/eventsviewer/table/Master"],function(e,t,n,r,i,s,o,u,a){return s.extend({moduleId:n.id,initialize:function(){s.prototype.initialize.apply(this,arguments);var t={selectableFields:!0,headerMode:"dock",allowRowExpand:!0,scrollToTopOnPagination:!1};this.options=e.extend(!0,t,this.options),this.rendered={list:!1,table:!1,raw:!1},this.model._result=new i,this.model._result.setFromSplunkD(this.model.result.responseText?JSON.parse(this.model.result.responseText):{}),this.model.result.results.on("reset",function(){this.model._result.stopReset||this.model._result.setFromSplunkD(JSON.parse(this.model.result.responseText),{clone:!0})},this),this.model.state=this.model.state||new r,this.model.listState=new r,this.model.tableState=new r,this.model.rawState=new r,this.model.resultWorking=new i,this.model._result.results.on("reset",this.wake,this),this.children.list=new u({model:{result:this.model._result,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application,state:this.model.listState},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,headerMode:this.options.headerMode,allowRowExpand:this.options.allowRowExpand}),this.children.raw=new o({model:{result:this.model._result,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application,state:this.model.rawState},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},selectableFields:!1,allowRowExpand:this.options.allowRowExpand}),this.children.table=new a({model:{result:this.model._result,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application,state:this.model.tableState},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,headerMode:this.options.headerMode,allowRowExpand:this.options.allowRowExpand}),this.model.report.entry.content.on("change:display.events.type",function(e,t,n){e.previousAttributes()["display.events.type"]!=="table"&&e.get("display.events.type")!=="table"&&this.wake()},this),this.model.listState.on("change:modalize",function(e){this.model.state.set("modalize",e.get("modalize"))},this),this.model.rawState.on("change:modalize",function(e){this.model.state.set("modalize",e.get("modalize"))},this),this.model.tableState.on("change:modalize",function(e){this.model.state.set("modalize",e.get("modalize"))},this),this.model.state.on("unmodalize",function(e){this.model.listState.trigger("unmodalize"+e),this.model.rawState.trigger("unmodalize"+e),this.model.tableState.trigger("unmodalize"+e)},this),this.model.state.on("change:fieldpicker",function(){this.children.table&&this.children.table.updateDock()},this),this.model.report.entry.content.on("change:display.page.search.showFields",function(){this.children.table.updateDock(),this.children.list.deferUpdateDock()},this),this.model._result.on("swap-single-event",function(e){this.fetchResultWithAllFields(e)},this),this.model.report.entry.content.on("change:display.prefs.events.offset",function(){if(this.options.scrollToTopOnPagination){var t=this.$el.offset().top,n=e(document).scrollTop(),r=this.$el.children(":visible").find("thead:visible").height(),i=e(".events-controls-inner").height();n>t&&e(document).scrollTop(t-(r+i))}},this)},events:{"click .header-table-docked.disabled":function(e){this.model.state.trigger("unmodalize",this.model.state.get("modalize")),this.model.state.unset("modalize"),e.preventDefault()}},wake:function(){var e=this.model.report.entry.content.get("display.events.type");this.rendered[e]||this._render(e);if(t.isNumber(this.model.state.get("modalize")))return this;switch(e){case"raw":this.children.list.sleep().$el.hide(),this.children.raw.wake().$el.show(),this.children.table.sleep().$el.hide();break;case"list":this.children.list.wake().$el.show(),this.children.raw.sleep().$el.hide(),this.children.table.sleep().$el.hide();break;case"table":this.children.list.sleep().$el.hide(),this.children.raw.sleep().$el.hide(),this.children.table.wake().$el.show();break;default:this.children.list.sleep().$el.hide(),this.children.raw.sleep().$el.hide(),this.children.table.sleep().$el.hide()}return this},fetchResultWithAllFields:function(t){var n,r,i=this.model.searchJob.entry.content.get("dispatchState"),s=this.model.searchJob.isRealtime(),o=this.model._result.results.at(s?t.rtindex:t.index);s?r=["search _serial=",o.get("_serial")[0]," AND ","splunk_server=",o.get("splunk_server")[0]," | head 1"].join(""):(n=this.model._result.offset(t.index),r=this.model.report.getSortingSearch()),this.model.resultWorking.id=this.model.searchJob.entry.links.get("events"),this.model.resultWorking.fetch({data:e.extend(!0,{},{offset:n,count:1,earliest_time:this.model.report.entry.content.get("display.events.timelineEarliestTime"),latest_time:this.model.report.entry.content.get("display.events.timelineLatestTime"),segmentation:this.model.report.entry.content.get("display.events.list.drilldown"),max_lines:t.showAllLines?0:this.model.report.getNearestMaxlines(),truncation_mode:"abstract",search:r}),success:function(e,t){var n=e.results.at(0);n?o.replace(n.toJSON(),{swap:!0}):o.trigger("failed-swap"),this.manageState(i)}.bind(this),error:function(e,t){o.trigger("failed-swap"),this.manageState(i)}.bind(this)})},manageState:function(e){this.model._result.stopReset=!1,this.model.searchJob.entry.content.get("dispatchState")!==e&&this.model.result.trigger("forcefetch")},_render:function(e){this.$el.append(this.children[e].render().el),this.rendered[e]=!0},render:function(){return this._render(this.model.report.entry.content.get("display.events.type")),this.wake(),this}})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/events-viewer.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/eventsviewerview",["require","exports","module","jquery","underscore","backbone","splunk.util","collections/SelectedFields","collections/services/configs/EventRenderers","collections/services/data/ui/WorkflowActions","models/Job","models/services/search/jobs/Result","models/services/search/jobs/Summary","uri/route","util/console","views/shared/eventsviewer/Master","./basesplunkview","./messages","./mvc","./paginatorview","./utils","./sharedmodels","splunk.util","./tokenawaremodel","models/Report","css!../css/events-viewer"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("backbone"),o=e("splunk.util"),u=e("collections/SelectedFields"),a=e("collections/services/configs/EventRenderers"),f=e("collections/services/data/ui/WorkflowActions"),l=e("models/Job"),c=e("models/services/search/jobs/Result"),h=e("models/services/search/jobs/Summary"),p=e("uri/route"),d=e("util/console"),v=e("views/shared/eventsviewer/Master"),m=e("./basesplunkview"),g=e("./messages"),y=e("./mvc"),b=e("./paginatorview"),w=e("./utils"),E=e("./sharedmodels"),S=e("splunk.util"),x=e("./tokenawaremodel"),T=e("models/Report");e("css!../css/events-viewer");var N=/(["'].*?["']|[^"',\s]+)(?=\s*|\s*,|\s*$)/g,C=/^["']|["|']$/g,k=m.extend({className:"splunk-events-viewer",options:{managerid:null,data:"events",showPager:!0,pagerPosition:"bottom",drilldownRedirect:!0},reportDefaults:{"display.events.fields":'["host", "source", "sourcetype"]',"display.events.type":"list","display.prefs.events.count":10,"display.events.rowNumbers":"1","display.events.maxLines":5,"display.events.histogram":"0","display.events.raw.drilldown":"full","display.events.list.wrap":"1","display.events.list.drilldown":"full","display.events.table.wrap":"1","display.events.table.drilldown":"0","display.events.table.sortDirection":"asc"},omitFromSettings:["el","id","name","manager","reportModel","displayRowNumbers","segmentation","softWrap"],normalizeOptions:function(e,t){t.hasOwnProperty("rowNumbers")?e.set("rowNumbers",o.normalizeBoolean(t.rowNumbers)?"1":"0"):t.hasOwnProperty("displayRowNumbers")&&e.set("rowNumbers",o.normalizeBoolean(t.displayRowNumbers)?"1":"0"),t.hasOwnProperty("raw.drilldown")?e.set("raw.drilldown",t["raw.drilldown"]):t.hasOwnProperty("segmentation")&&e.set("raw.drilldown",t.segmentation),t.hasOwnProperty("list.drilldown")?e.set("list.drilldown",t["list.drilldown"]):t.hasOwnProperty("segmentation")&&e.set("list.drilldown",t.segmentation),t.hasOwnProperty("table.drilldown")?e.set("table.drilldown",o.normalizeBoolean(t["table.drilldown"])?"1":"0"):t.hasOwnProperty("segmentation")&&e.set("table.drilldown",t.segmentation!=="none"?"1":"0"),t.hasOwnProperty("list.wrap")?e.set("list.wrap",o.normalizeBoolean(t["list.wrap"])?"1":"0"):t.hasOwnProperty("softWrap")&&e.set("list.wrap",o.normalizeBoolean(t.softWrap)?"1":"0"),t.hasOwnProperty("table.wrap")?e.set("table.wrap",o.normalizeBoolean(t["table.wrap"])?"1":"0"):t.hasOwnProperty("softWrap")&&e.set("table.wrap",o.normalizeBoolean(t.softWrap)?"1":"0"),!t.hasOwnProperty("count")&&!e.has("count")&&e.set("count",this.reportDefaults["display.prefs.events.count"])},initialize:function(e){this.configure(),this.model=this.options.reportModel||x._createReportModel(this.reportDefaults),this.settings._sync=w.syncModels({source:this.settings,dest:this.model,prefix:"display.events.",include:["fields","type","count","rowNumbers","maxLines","raw.drilldown","list.drilldown","list.wrap","table.drilldown","table.wrap","table.sortDirection","table.sortColumn"],exclude:["drilldownRedirect","managerid"],auto:!0,alias:{count:"display.prefs.events.count"}}),this.settings.on("change",this.onSettingsChange,this),this.model.on("change",this.onReportChange,this),this.normalizeOptions(this.settings,e),this.resultModel=new c,this.summaryModel=new h,this.searchJobModel=new l,this.reportModel=new T,this.reportModel.entry={content:this.model},this.reportModel.on("eventsviewer:drilldown",this.onReportDrilldown,this),this.applicationModel=E.get("app"),this.selectedFieldsCollection=new u,this.workflowActionsCollection=new f,this.workflowActionsCollection.fetch({data:{app:this.applicationModel.get("app"),owner:this.applicationModel.get("owner"),count:-1,sort_key:"name"},success:i.bind(function(){this._isWorkflowActionsCollectionReady=!0,this.render()},this)}),this.eventRenderersCollection=new a,this.eventRenderersCollection.fetch({success:i.bind(function(){this._isEventRenderersCollectionReady=!0,this.render()},this)}),this._lastJobFetched=null,this.updateSelectedFields(),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.manager||this.onManagerChange(y.Components,null)},onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.eventData&&(this.eventData.off(),this.eventData.destroy(),this.eventData=null),this.summaryData&&(this.summaryData.off(),this.summaryData.destroy(),this.summaryData=null),this._searchStatus=null,this._eventCount=0,this._isSummaryModelReady=!1,this._isSearchJobModelReady=!1,this._lastJobFetched=null,this.resultModel.setFromSplunkD({}),this.summaryModel.setFromSplunkD({});if(!t){this._searchStatus={state:"nomanager"},this.render();return}this._searchStatus={state:"start"},this.manager=t,this.manager.on("search:start",this.onSearchStart,this),this.manager.on("search:progress",this.onSearchProgress,this),this.manager.on("search:done",this.onSearchDone,this),this.manager.on("search:cancelled",this.onSearchCancelled,this),this.manager.on("search:error",this.onSearchError,this),this.manager.on("search:fail",this.onSearchFailed,this),this.eventData=this.manager.data("events",{autofetch:!1,output_mode:"json",truncation_mode:"abstract"}),this.eventData.on("data",this.onEventData,this),this.eventData.on("error",this.onSearchError,this),this.summaryData=this.manager.data("summary",{autofetch:!1,output_mode:"json",top_count:10,output_time_format:"%d/%m/%y %l:%M:%S.%Q %p"}),this.summaryData.on("data",this.onSummaryData,this),this.summaryData.on("error",this.onSearchError,this);var n=this.manager.get("data");n&&n.eventAvailableCount?(this.onSearchStart(n),this.onSearchProgress({content:n}),n.isDone&&this.onSearchDone({content:n})):this.render(),t.replayLastSearchEvent(this)},_fetchJob:function(e){this._isRealTimeSearch=e.isRealTimeSearch,this._lastJobFetched!==e.sid&&(this._lastJobFetched=e.sid,this.searchJobModel.set("id",e.sid),this.searchJobModel.fetch({success:i.bind(function(){this._isSearchJobModelReady||(this._isSearchJobModelReady=!0,this.render())},this)}))},onSearchStart:function(e){this._searchStatus={state:"running"},this._eventCount=0,this._statusBuckets=undefined,this._lastJobFetched=null,this._isSummaryModelReady=!1,this._isSearchJobModelReady=!1,this.resultModel.setFromSplunkD({}),this.summaryModel.setFromSplunkD({}),this._fetchJob(e),this.render()},onSearchProgress:function(e){this._searchStatus={state:"running"},e=e||{};var t=e.content||{},n=t.eventAvailableCount||0,r=this._statusBuckets=t.statusBuckets||0,i=e.name;this._fetchJob(t),i&&(i=o.stripLeadingSearchCommand(i),this.reportModel.entry.content.set("search",i,{silent:!0})),this._eventCount=n,n>0&&this.updateEventData(),r>0&&this.updateSummaryData(),this.render()},onSearchDone:function(e){this._searchStatus={state:"done"},e=e||{};var t=e.content||{},n=t.eventAvailableCount||0;this._fetchJob(t),this._eventCount=n,this.updateEventData(),this.updateSummaryData(),this.render()},onSearchCancelled:function(){this._searchStatus={state:"cancelled"},this.render()},onSearchError:function(e,t){var n=g.getSearchErrorMessage(t)||e;this._searchStatus={state:"error",message:n},this.render()},onSearchFailed:function(e){var t=g.getSearchFailureMessage(e);this._searchStatus={state:"error",message:t},this.render()},onEventData:function(e,t){this.resultModel.setFromSplunkD(t),this.render()},onSummaryData:function(e,t){this.summaryModel.setFromSplunkD(t),this._isSummaryModelReady||(this._isSummaryModelReady=!0,this.render())},onSettingsChange:function(e){e.hasChanged("fields")&&this.updateSelectedFields(),(e.hasChanged("showPager")||e.hasChanged("pagerPosition")||e.hasChanged("count")||e.hasChanged("fields"))&&this.render(),(e.hasChanged("showPager")||e.hasChanged("type")||e.hasChanged("count")||e.hasChanged("maxLines")||e.hasChanged("raw.drilldown")||e.hasChanged("list.drilldown"))&&this.updateEventData()},onReportChange:function(e){(e.hasChanged("display.events.table.sortColumn")||e.hasChanged("display.events.table.sortDirection"))&&this.updateEventData()},onReportDrilldown:function(){var e=this.model,t=e.get("search"),n=e.hasChanged("dispatch.earliest_time")?e.get("dispatch.earliest_time"):null,r=e.hasChanged("dispatch.latest_time")?e.get("dispatch.latest_time"):null,s=!1,o=i.once(i.bind(this.drilldown,this,t,n,r)),u=function(){s=!0};this.trigger("drilldown",{search:t,drilldown:o,preventDefault:u}),this.settings.get("drilldownRedirect")&&!s&&o()},onPageChange:function(){this.updateEventData()},drilldown:function(e,t,n){if(!e)return;var r=this.manager;if(!r)return;r.job&&(t==null&&(t=r.job.properties().searchEarliestTime),n==null&&(n=r.job.properties().searchLatestTime),!t&&r.job.properties().earliestTime&&(t=S.getEpochTimeFromISO(r.job.properties().earliestTime)),!n&&r.job.properties().latestTime&&(n=S.getEpochTimeFromISO(r.job.properties().latestTime)));var i={q:e,earliest:t||"",latest:n||""},s=w.getPageInfo(),o=p.search(s.root,s.locale,s.app,{data:i});w.redirect(o)},updateEventData:function(){if(this.eventData){var e=this.paginator?parseInt(this.paginator.settings.get("pageSize"),10):0,t=this.paginator?parseInt(this.paginator.settings.get("page"),10):0,n=this.settings.get("type"),r=e*t,s=Math.max(parseInt(this.settings.get("count"),10)||this.reportDefaults["display.prefs.events.count"],1);this._isRealTimeSearch&&(r=0-s-r);var o=parseInt(this.settings.get("maxLines"),10),u=this.settings.get("raw.drilldown"),a=this.settings.get("list.drilldown"),f=this.model.get("display.events.table.sortColumn"),l=this.model.get("display.events.table.sortDirection"),c=null,h=null;n==="raw"?c=u:n==="list"&&(c=a),c=c?c.toLowerCase():null;switch(c){case"inner":case"outer":case"full":case"none":break;default:c="full"}n==="table"&&f&&(l==="desc"?h="| sort "+(r+s)+" - "+f:h="| sort "+(r+s)+" "+f);var p=this.settings.get("fields");p=i.union(p,["_raw","_time","_audit","_decoration","eventtype","linecount","_fulllinecount"]),this._isRealTimeSearch&&(p=i.union(p,["_serial","splunk_server"])),this.eventData.set({offset:r,count:s,max_lines:o,segmentation:c,search:h,fields:p}),this.eventData.fetch()}},updateSummaryData:function(){this.summaryData&&this.summaryData.fetch()},updateSelectedFields:function(){var e=this.settings.get("fields");if(e){if(i.isString(e)){e=r.trim(e);if(e[0]==="["&&e.slice(-1)==="]")try{e=JSON.parse(e)}catch(t){}else e=i.map(e.match(N),function(e){return e.replace(C,"")}),this.settings.set("fields",JSON.stringify(e))}else this.settings.set("fields",JSON.stringify(e));e=i.map(e,function(e){return{name:e}});if(e.length===0||e[0].name==="*")e=i.filter(this.resultModel.fields.toJSON(),function(e){return e.name.charAt(0)!=="_"})}this.selectedFieldsCollection.reset(e)},render:function(){var e=this._searchStatus||null,t=this._eventCount||0,n=this._statusBuckets===undefined||this._statusBuckets>0,s=this._isSummaryModelReady===!0,u=this._isSearchJobModelReady===!0,a=this._isWorkflowActionsCollectionReady===!0,f=this._isEventRenderersCollectionReady===!0,l=s&&u&&a&&f,c=o.normalizeBoolean(this.settings.get("showPager")),h=this.settings.get("pagerPosition"),p=Math.max(parseInt(this.settings.get("count"),10),1),d=null;if(e)switch(e.state){case"nomanager":d="no-search";break;case"start":d="empty";break;case"running":if(n&&t===0||!l)d="waiting";n||(d="no-events");break;case"cancelled":d="cancelled";break;case"done":t===0&&(d="no-events");break;case"error":d={level:"error",icon:"warning-sign",message:e.message}}return d?(this.messageElement||(this.messageElement=r('<div class="msg"></div>')),g.render(d,this.messageElement),this.$el.append(this.messageElement)):this.messageElement&&(this.messageElement.remove(),this.messageElement=null),l&&e&&!d?(this.eventsViewer||(this.eventsViewer=new v({model:{result:this.resultModel,summary:this.summaryModel,searchJob:this.searchJobModel,report:this.reportModel,application:this.applicationModel},collection:{selectedFields:this.selectedFieldsCollection,workflowActions:this.workflowActionsCollection,eventRenderers:this.eventRenderersCollection},selectableFields:!1,headerMode:"none",allowRowExpand:!0}),this.eventsViewer.render()),this.$el.append(this.eventsViewer.el)):this.eventsViewer&&(this.eventsViewer.remove(),this.eventsViewer=null),l&&e&&!d&&c?(this.paginator||(this.paginator=new b({id:i.uniqueId(this.id+"-paginator")}),this.paginator.settings.on("change:page",this.onPageChange,this)),this.paginator.settings.set({pageSize:p,itemCount:t}),h==="top"?this.$el.prepend(this.paginator.el):this.$el.append(this.paginator.el)):this.paginator&&(this.paginator.settings.off("change:page",this.onPageChange,this),this.paginator.remove(),this.paginator=null),this.trigger("rendered",this),this},remove:function(){this.eventsViewer&&(this.eventsViewer.remove(),this.eventsViewer=null),this.paginator&&(this.paginator.settings.off("change:page",this.onPageChange,this),this.paginator.remove(),this.paginator=null),this.eventData&&(this.eventData.off(),this.eventData.destroy(),this.eventData=null),this.summaryData&&(this.summaryData.off(),this.summaryData.destroy(),this.summaryData=null),this.settings&&(this.settings.off(),this.settings._sync&&this.settings._sync.destroy()),this.model&&this.model.off("change",this.onReportChange,this),m.prototype.remove.call(this)}});return k}),define("splunkjs/mvc/simplexml/element/event",["require","underscore","jquery","backbone","../../../mvc","./base","../../eventsviewerview","../mapper","util/console"],function(e){var t=e("underscore"),n=e("jquery"),r=e("backbone"),i=e("../../../mvc"),s=e("./base"),o=e("../../eventsviewerview"),u=e("../mapper"),a=e("util/console"),f="display.events.",l=u.extend({tagName:"event",map:function(e,n,r){n.options.count=e.get("display.prefs.events.count",r),t(e.toJSON(r)).each(function(i,s){if(s.indexOf(f)===0){var o=e.get(s,r);t.isArray(o)&&(o=JSON.stringify(o)),n.options[s.substring(f.length)]=o!=null?String(o):null}})}});u.register("events:raw",l),u.register("events:list",l),u.register("events:table",l);var c=o.extend({reportDefaults:{"display.general.type":"events","display.prefs.events.count":10},getResultsLinkOptions:function(){return{}}});s.registerVisualization("events",c),s.registerVisualization("events:raw",c),s.registerVisualization("events:list",c),s.registerVisualization("events:table",c);var h=s.extend({initialVisualization:"events"});return h}),define("views/shared/SingleValue",["jquery","underscore","module","views/Base","splunk.util","uri/route"],function(e,t,n,r,i,s){var o=function(e,n){if(t.isFunction(e))try{e=e(n)}catch(r){return""}return e};return r.extend({moduleId:n.id,className:"single-value",initialize:function(e){r.prototype.initialize.apply(this,arguments),this.model.state.on("change:display.visualizations.singlevalue.beforeLabel change:display.visualizations.singlevalue.afterLabel change:display.visualizations.singlevalue.underLabel change:display.visualizations.singlevalue.additionalClass",this.debouncedRender,this),this.model.searchResultsColumn.on("change:fields",this.render,this)},getResultField:function(n){var r=e.extend(!0,[],this.model.searchResultsColumn.get("columns")),i=this.getFieldNames();t(r).each(function(e,t){e.push(i[t])}),i=t(i).filter(function(e){return e==="_time"||e==="_raw"||e.charAt(0)!="_"}),r=t(r).filter(function(e){return t.indexOf(i,e[e.length-1])>=0});if(!n)return n=i[0],r.length&&r[0].length?r[0][0]:t("N/A").t();for(var s=0;s<r.length;s++)if(r[s][r[s].length-1]===n)return r[s][0];return t("N/A").t()},getFieldNames:function(){var n=this.model.searchResultsColumn.get("fields");return!n||n.length===0?[]:t.isObject(n[0])?t(n).pluck("name"):e.extend([],n)},setSeverity:function(){if(this.model.searchResultsColumn.get("fields")){var e=t(this.model.searchResultsColumn.get("fields")).pluck("name"),n=e.indexOf("range");n>-1&&this.$("span.single-result").addClass(this.model.searchResultsColumn.get("columns")[n][0])}},render:function(){var e=this.getResultField(this.model.state.get("display.visualizations.singlevalue.field")),t=this.compiledTemplate({extracted:e,beforeLabel:o(this.model.state.get("display.visualizations.singlevalue.beforeLabel")||"",e),afterLabel:o(this.model.state.get("display.visualizations.singlevalue.afterLabel")||"",e),underLabel:o(this.model.state.get("display.visualizations.singlevalue.underLabel")||"",e)}),n=[this.model.state.get("display.visualizations.singlevalue.additionalClass"),this.getResultField(this.model.state.get("display.visualizations.singlevalue.classField"))];return this.$el.addClass(n.join(" ")),this.$el.html(t),this.wrapLinks(),this.setSeverity(),this},wrapLinks:function(){var n=this.model.state.get("display.visualizations.singlevalue.linkFields")||"",r=this.model.state.get("display.visualizations.singlevalue.linkView"),o=this.model.state.get("display.visualizations.singlevalue.linkSearch"),u,a;r&&o&&(r.charAt(0)==="/"?a=i.make_full_url(r,{q:o}):this.model.application?a=s.page(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),r,{data:{q:o}}):a=[r,i.propToQueryString({q:o})].join("?"),u=e("<a />").attr("href",a),t.each({beforelabel:"before-label",afterlabel:"after-label",underlabel:"under-label",result:"single-result"},function(e,t){n.indexOf(t)>-1&&r&&this.$("."+e).wrap(u)},this))},template:'                <span class="before-label">                    <%- beforeLabel %>                </span>                <span class="single-result">                    <%- extracted %>                </span>                <span class="after-label">                    <%- afterLabel %>                </span>                <br>                <span class="under-label">                    <%- underLabel %>                </span>            '})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/single-value.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/singleview",["require","exports","module","underscore","jquery","./mvc","./basesplunkview","./settings","views/shared/SingleValue","backbone","./utils","./messages","./tokenawaremodel","css!../css/single-value"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("./mvc"),o=e("./basesplunkview"),u=e("./settings"),a=e("views/shared/SingleValue"),f=e("backbone"),l=e("./utils"),c=e("./messages"),h=e("./tokenawaremodel");e("css!../css/single-value");var p=o.extend({moduleId:n.id,className:"splunk-single",options:{data:"preview",beforeLabel:"",afterLabel:"",field:"",classField:"",linkView:"search"},omitFromSettings:["el","reportModel"],initialize:function(){this.configure(),this.model=this.options.reportModel||h._createReportModel(),this.settings._sync=l.syncModels(this.settings,this.model,{auto:!0,prefix:"display.visualizations.singlevalue.",include:["additionalClass","linkView","field","linkFields","classField","beforeLabel","afterLabel","underLabel","linkSearch"]}),this.results=new f.Model({columns:[],fields:[]});var e=l.getPageInfo();this.model.application=new f.Model({root:e.root,locale:e.locale,app:e.app,page:e.page}),this.bindToComponentSetting("managerid",this._onManagerChange,this),this.settings.on("change",this.render,this),this.manager||this._onManagerChange(s.Components,null)},_onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.resultsModel&&(this.resultsModel.off(null,null,this),this.resultsModel=null),this._searchStatus=null,this._clearResults();if(!t){this._searchStatus={state:"nomanager"},this.render();return}this._searchStatus={state:"start"},this.manager=t,t.on("search:start search:progress",this.onSearchProgress,this),t.on("search:done",this.onSearchDone,this),t.on("search:error",this.onSearchError,this),t.on("search:fail",this.onSearchFailed,this),this.resultsModel=this.manager.data(this.settings.get("data"),{output_mode:"json_cols",count:1,offset:0,show_empty_fields:"True"}),this.resultsModel.on("data",this._onDataUpdate,this),this.resultsModel.on("error",this.onSearchError,this);var n=t.replayLastSearchEvent(this);n||this.render()},onSearchProgress:function(e){var t=((e||{}).content||{}).resultPreviewCount||0;this._searchStatus={state:"running",previewCount:t},this.render()},onSearchDone:function(e){var t=((e||{}).content||{}).resultPreviewCount||0;this._searchStatus={state:"done",previewCount:t},this.render()},onSearchError:function(e,t){var n=c.getSearchErrorMessage(t)||e;this._searchStatus={state:"error",message:n},this.render()},onSearchFailed:function(e){var t=c.getSearchFailureMessage(e);this._searchStatus={state:"error",message:t},this.render()},_clearResults:function(){this.results.set({columns:null,fields:null},{unset:!0})},_onDataUpdate:function(){this.resultsModel.hasData()?this.results.set({columns:this.resultsModel.data().columns,fields:this.resultsModel.data().fields}):(this._clearResults(),this._searchStatus&&(this._searchStatus.previewCount=0)),this.render()},render:function(){var e=this._searchStatus||null,t=e&&e.previewCount,n=t&&this.resultsModel&&this.resultsModel.hasData(),r=null;if(e)switch(e.state){case"nomanager":r="no-search";break;case"start":r="empty";break;case"running":t||(r="waiting");break;case"cancelled":r="cancelled";break;case"done":t?n||(r="waiting"):r="no-results";break;case"error":r={level:"error",icon:"warning-sign",message:e.message}}return r?(this.messageElement||(this.messageElement=i('<div class="msg"></div>')),r==="waiting"?this.messageElement.addClass("waiting").html('<div class="single-value"><span class="single-result">&hellip;</span></div>'):r==="no-results"?this.messageElement.addClass("no-results").html('<div class="single-value"><span class="single-result">N/A</span></div>'):c.render(r,this.messageElement.removeClass("waiting")),this.$el.append(this.messageElement)):this.messageElement&&(this.messageElement.remove(),this.messageElement=null),e&&n&&!r?(this.singleValue||(this.singleValue=new a({model:{searchResultsColumn:this.results,state:this.model,application:this.model.application}})),this.singleValue.render().appendTo(this.el)):this.singleValue&&(this.singleValue.remove(),this.singleValue=null),this.trigger("rendered",this),this},remove:function(){this.singleValue&&this.singleValue.remove(),this.settings&&(this.settings.off(),this.settings._sync&&this.settings._sync.destroy()),o.prototype.remove.call(this)}});return p}),define("splunkjs/mvc/simplexml/element/single",["require","underscore","../../../mvc","./base","../../singleview","../mapper","util/console"],function(e){var t=e("underscore"),n=e("../../../mvc"),r=e("./base"),i=e("../../singleview"),s=e("../mapper"),o=e("util/console");s.register("visualizations:singlevalue",s.extend({tagName:"single",map:function(e,n,r){var i="display.visualizations.singlevalue.";o.log(e.toJSON(r)),t(e.toJSON(r)).each(function(e,t){t.substring(0,i.length)===i&&(n.options[t.substring(i.length)]=e)}),o.log("single export options: ",n.options)}}));var u=i.extend({panelClassName:"single",reportDefaults:{"display.visualizations.show":!0,"display.visualizations.type":"singlevalue","display.general.type":"visualizations"},getResultsLinkOptions:function(e){return{"link.visible":!1}}});r.registerVisualization("visualizations:singlevalue",u);var a=r.extend({initialVisualization:"visualizations:singlevalue"});return a}),function(e,t){var n={},r={},i={},s={},o={},u={},a=[],f=0,l=null,c=function(e){return e.substring(e.length-6)===":class"?e.substring(0,e.length-6):e},h=function(e){var t={};t.path=e;var n=e.indexOf(":");t.classPath=n<0?e:e.substring(0,n),t.type=n<0?"class":e.substring(n+1);if(!t.classPath||!t.type)return null;var r=t.classPath.lastIndexOf(".");return t.namespace=r<0?"":t.classPath.substring(0,r),t.className=r<0?t.classPath:t.classPath.substring(r+1),t.name=t.type==="class"?t.className:t.className+":"+t.type,t},p=function(e){e+=".";var t=[],n,r;for(n in s)s.hasOwnProperty(n)&&t.push(n);t.sort();for(var i=t.length-1;i>=0;i--){n=t[i];if(e.substring(0,n.length)===n)return r=s[n]+e.substring(n.length).replace(/\./g,"/"),r.substring(0,r.length-1)}return r=e.replace(/\./g,"/"),r.substring(0,r.length-1)},d=function(e,t){var n=function(){e.apply(this,arguments),t.call(this)};return n},v=e.jg_namespace=function(t,r){if(t==null)throw new Error("Parameter path must be non-null.");if(typeof t!="string")throw new Error("Parameter path must be a string.");if(r!=null&&typeof r!="function")throw new Error("Parameter closure must be a function.");var i=n[t];if(!i){var s=t?t.split("."):[],o,u;i=e;for(var a=0,f=s.length;a<f;a++)o=s[a],u=i[o],u||(u=i[o]={}),i=u;n[t]=i}return r&&r.call(i,i),i},m=e.jg_import=function(t){if(t==null)throw new Error("Parameter path must be non-null.");if(typeof t!="string")throw new Error("Parameter path must be a string.");if(!t)throw new Error("Parameter path must be non-empty.");t=c(t);var n=r[t];if(n==null){if(i[t])throw new Error("Recursive dependency on resource "+t+".");var s=h(t);if(!s)throw new Error('Invalid resource path "'+t+'".');var f=v(s.namespace);n=f[s.name];if(n==null){var l=o[s.type];if(!l)throw new Error('Unknown resource type "'+s.type+'". Ensure the resource type is registered via jg_import.registerResourceType().');try{i[t]=!0,s.url=p(s.classPath)+l.extension,s.source=null;try{var d=e.ActiveXObject?new e.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;d.open("GET",s.url,!1),d.send(null);if(d.status==200||d.status==0)s.source=d.responseText}catch(m){}if(s.source==null)throw new Error("Failed to load resource "+t+" from url "+s.url+". Ensure the correct source path is set for this resource via jg_import.setSourcePath().");var g={};for(var y in s)s.hasOwnProperty(y)&&(g[y]=s[y]);try{var b=l.parser.call(g,g);n=f[s.name],n==null&&(n=b)}catch(m){if(m!=null&&m.__jg_import_Error)throw m;var w=m instanceof Error?m.message:String(m);throw m=new Error("Error in resource "+t+": "+w),m.__jg_import_Error=!0,m}if(n==null)throw new Error("Failed to define resource "+t+".");f[s.name]=n}finally{delete i[t]}}s.resource=n,u[t]=s,a.push(t),r[t]=n}return n};m.define=function(e,t){if(e==null)throw new Error("Parameter path must be non-null.");if(typeof e!="string")throw new Error("Parameter path must be a string.");if(!e)throw new Error("Parameter path must be non-empty.");if(t==null)throw new Error("Parameter closure must be non-null.");if(typeof t!="function")throw new Error("Parameter closure must be a function.");e=c(e);var n=r[e];if(n==null){var s=h(e);if(!s)throw new Error('Invalid resource path "'+e+'".');var o=v(s.namespace);n=o[s.name];if(n==null){var f=t.call(o,o);n=o[s.name],n==null&&(n=f);if(n==null)throw new Error("Failed to define resource "+e+".");o[s.name]=n}!i[e]&&r[e]==null&&(s.resource=n,u[e]=s,a.push(e),r[e]=n)}return n},m.setSourcePath=function(e,t){if(e==null)throw new Error("Parameter path must be non-null.");if(typeof e!="string")throw new Error("Parameter path must be a string.");if(t==null)throw new Error("Parameter url must be non-null.");if(typeof t!="string")throw new Error("Parameter url must be a string.");e&&e.charAt(e.length-1)!=="."&&(e+="."),t&&t.charAt(t.length-1)!=="/"&&(t+="/"),s[e]=t},m.registerResourceType=function(e,t,n){if(e==null)throw new Error("Parameter type must be non-null.");if(typeof e!="string")throw new Error("Parameter type must be a string.");if(!e)throw new Error("Parameter type must be non-empty.");if(t==null)throw new Error("Parameter extension must be non-null.");if(typeof t!="string")throw new Error("Parameter extension must be a string.");if(n==null)throw new Error("Parameter parser must be non-null.");if(typeof n!="function")throw new Error("Parameter parser must be a function.");var r={};r.extension=t,r.parser=n,o[e]=r},m.getResourceInfo=function(e){if(e!=null&&typeof e!="string")throw new Error("Parameter path must be a string.");if(!e){var t=[];for(var n=0,r=a.length;n<r;n++)t.push(m.getResourceInfo(a[n]));return t}e=c(e);var i=u[e];if(!i)return null;var s={};for(var o in i)i.hasOwnProperty(o)&&(s[o]=i[o]);return s};var g=e.jg_extend=function(e,t){if(e==null)throw new Error("Parameter baseClass must be non-null.");if(typeof e!="function")throw new Error("Parameter baseClass must be a class.");if(t!=null&&typeof t!="function")throw new Error("Parameter closure must be a function.");var n=e,r=e.prototype;e=function(){},e.prototype=r;var i=function(){n.apply(this,arguments)},s=i.prototype=new e;s.constructor=i;if(t){t.call(s,i,r,s);if(i.prototype!==s)throw new Error('Class member "prototype" cannot be overridden.');if(s.constructor!==i){if(typeof s.constructor!="function")throw new Error('Instance member "constructor" must be a function.');n=s.constructor,s.constructor=i}}return i},y=e.jg_static=function(e){if(e!=null&&typeof e!="function")throw new Error("Parameter closure must be a function.");var t={};return e&&e.call(t,t),t},b=e.jg_mixin=function(e,t,n){if(e==null)throw new Error("Parameter target must be non-null.");if(t==null)throw new Error("Parameter source must be non-null.");var r=t.__jg_mixin_id;r||(r=t.__jg_mixin_id="m"+ ++f),r="__jg_has_mixin_"+r;if(e[r])return n;var i=n!=null&&n.hasOwnProperty("constructor")&&typeof n.constructor=="function"?n.constructor:function(){},s=function(){};s.prototype=n!=null?n:Object.prototype,n=new s,n.constructor=i;var o,u=t.mixin;if(u!=null&&typeof u=="function"){var a=new s;for(o in e)e.hasOwnProperty(o)&&(a[o]=e[o]);a.constructor=i;try{l||(l=[]),l.push(n);var c=e.constructor;u.call(e,a,e);if(e.constructor!==c)throw new Error('Target member "constructor" cannot be overridden.')}finally{l.pop(),l.length==0&&(l=null)}}for(o in t)t.hasOwnProperty(o)&&o!=="mixin"&&o!=="constructor"&&o.substring(0,2)!=="__"&&(e[o]=t[o]);for(o in e)e.hasOwnProperty(o)&&o!=="constructor"&&(n[o]=e[o]);var h=t.hasOwnProperty("constructor")&&typeof t.constructor=="function"?t.constructor:null;if(h){n.constructor=d(n.constructor,h);if(l){var p;for(var v=l.length-1;v>=0;v--)p=l[v],p.constructor=d(p.constructor,h)}}return e[r]=!0,n},w=e.jg_has_mixin=function(e,t){if(e==null)throw new Error("Parameter target must be non-null.");if(t==null)throw new Error("Parameter source must be non-null.");var n=t.__jg_mixin_id;return n?(n="__jg_has_mixin_"+n,e[n]==1):!1};m.registerResourceType("class",".js",function(n){t(e,n.source)})}(this,function(global,script){eval.call(global,script)}),define("jg_global",function(e){return function(){var t,n;return n=function(){return{jg_namespace:this.jg_namespace,jg_extend:this.jg_extend,jg_static:this.jg_static,jg_mixin:this.jg_mixin,jg_has_mixin:this.jg_has_mixin}},t=n.apply(e,arguments),t||e.jg_namespace}}(this)),jg_import.define("jgatt.events.EventData",function(){jg_namespace("jgatt.events",function(){this.EventData=jg_extend(Object,function(e,t){this.event=null,this.target=null,this.currentEvent=null,this.currentTarget=null,this._isPropagationStopped=!1,this._isImmediatePropagationStopped=!1,this._isDefaultPrevented=!1,this.constructor=function(){},this.stopPropagation=function(){this._isPropagationStopped=!0},this.stopImmediatePropagation=function(){this._isPropagationStopped=!0,this._isImmediatePropagationStopped=!0},this.preventDefault=function(){this._isDefaultPrevented=!0},this.isPropagationStopped=function(){return this._isPropagationStopped},this.isImmediatePropagationStopped=function(){return this._isImmediatePropagationStopped},this.isDefaultPrevented=function(){return this._isDefaultPrevented}})})}),jg_import.define("jgatt.utils.TypeUtils",function(){jg_namespace("jgatt.utils",function(){this.TypeUtils=jg_static(function(e){e.isTypeOf=function(e,t){if(e==null)return!1;if(t===Object)return!0;switch(typeof e){case"number":return t===Number;case"boolean":return t===Boolean;case"string":return t===String;default:return e instanceof t}},e.isSubclassOf=function(e,t){return e!=null&&e.prototype!=null&&e.prototype instanceof t}})})}),jg_import.define("jgatt.properties.Property",function(){jg_namespace("jgatt.properties",function(){var e=jg_import("jgatt.utils.TypeUtils");this.Property=jg_extend(Object,function(t,n){this._name=null,this._type=null,this._defaultValue=null,this._readOnly=!1,this._getter=null,this._setter=null,this._readFilter=null,this._writeFilter=null,this._onRead=null,this._onWrite=null,this.constructor=function(e,t,n,r){if(e==null)throw new Error("Parameter name must be non-null.");if(typeof e!="string")throw new Error("Parameter name must be a string.");if(t==null)throw new Error("Parameter type must be non-null.");if(typeof t!="function")throw new Error("Parameter type must be a class.");this._name=e,this._type=t,n=this.assertType(n,"Parameter defaultValue is incompatible with property type.");if(r!=null&&typeof r!="boolean")throw new Error("Parameter readOnly must be a boolean.");this._defaultValue=n,this._readOnly=r===!0},this.name=function(){return this._name},this.type=function(){return this._type},this.defaultValue=function(){return this._defaultValue},this.readOnly=function(){return this._readOnly},this.getter=function(e){if(arguments.length==0)return this._getter;if(e!=null&&typeof e!="function")throw new Error("Parameter getter must be a function.");return this._getter=e?e:null,this},this.setter=function(e){if(arguments.length==0)return this._setter;if(e!=null&&typeof e!="function")throw new Error("Parameter setter must be a function.");return this._setter=e?e:null,this},this.readFilter=function(e){if(arguments.length==0)return this._readFilter;if(e!=null&&typeof e!="function")throw new Error("Parameter readFilter must be a function.");return this._readFilter=e?e:null,this},this.writeFilter=function(e){if(arguments.length==0)return this._writeFilter;if(e!=null&&typeof e!="function")throw new Error("Parameter writeFilter must be a function.");return this._writeFilter=e?e:null,this},this.onRead=function(e){if(arguments.length==0)return this._onRead;if(e!=null&&typeof e!="function")throw new Error("Parameter onRead must be a function.");return this._onRead=e?e:null,this},this.onWrite=function(e){if(arguments.length==0)return this._onWrite;if(e!=null&&typeof e!="function")throw new Error("Parameter onWrite must be a function.");return this._onWrite=e?e:null,this},this.get=function(e,t){this._onRead&&this._onRead.call(e);var n=this.getInternal(e,t);if(this._readFilter){var r=this._readFilter.call(e,n);r!==n&&(n=this.assertType(r,"Value returned from readFilter for property "+this._name+" is incompatible with property type."))}return n},this.set=function(e,t,n){if(this._readOnly)throw new Error("Property "+this._name+" is read-only.");n=this.assertType(n,"Value assigned to property "+this._name+" is incompatible with property type.");if(this._writeFilter){var r=this._writeFilter.call(e,n);r!==n&&(n=this.assertType(r,"Value returned from writeFilter for property "+this._name+" is incompatible with property type."))}return this.setInternal(e,t,n)?(this._onWrite&&this._onWrite.call(e),!0):!1},this.getInternal=function(e,t){var n=t.get(this);n||(n=t.set(this,this.createPropertyInfo(this,e)));var r=n.value;if(this._getter){var i=this._getter.call(e);i!==r&&(r=n.value=this.assertType(i,"Value returned from getter for property "+this._name+" is incompatible with property type."))}return r},this.setInternal=function(e,t,n){n=this.assertType(n,"Value assigned to property "+this._name+" is incompatible with property type.");var r=t.get(this);return r||(r=t.set(this,this.createPropertyInfo(this,e))),this._setter&&this._setter.call(e,n),r.value=n,!0},this.assertType=function(t,n){var r=this._type;if(t!=null&&!e.isTypeOf(t,r))throw new Error(n);return t==null&&(r===Number?t=0:r===Boolean?t=!1:t=null),t},this.createPropertyInfo=function(e,n){return new t.PropertyInfo(e,n)}}),this.Property.PropertyInfo=jg_extend(Object,function(e,t){this.property=null,this.target=null,this.value=null,this.constructor=function(e,t){this.property=e,this.target=t,this.value=e._defaultValue}})})}),jg_import.define("jgatt.utils.Dictionary",function(){jg_namespace("jgatt.utils",function(){this.Dictionary=jg_extend(Object,function(e,t){var n="__jgatt_utils_Dictionary_hash",r=0,i=function(e){if(e===null)return"null";switch(typeof e){case"object":case"function":if(e.hasOwnProperty(n))return e[n];var t=e[n]="#"+ ++r;return t;case"string":return'"'+e+'"';default:return e+""}};this._kvs=null,this._size=0,this.constructor=function(){this._kvs={}},this.size=function(){return this._size},this.get=function(e){var t=i(e);return this._kvs.hasOwnProperty(t)?this._kvs[t].v:undefined},this.set=function(e,t){var n=i(e);return this._kvs.hasOwnProperty(n)?(this._kvs[n].v=t,t):(this._kvs[n]={k:e,v:t},this._size++,t)},this.del=function(e){var t=i(e);if(this._kvs.hasOwnProperty(t)){var n=this._kvs[t].v;return delete this._kvs[t],this._size--,n}return undefined},this.has=function(e){var t=i(e);return this._kvs.hasOwnProperty(t)},this.keys=function(){var e=[],t=this._kvs;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n].k);return e},this.values=function(){var e=[],t=this._kvs;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n].v);return e}})})}),jg_import.define("jgatt.properties.MPropertyTarget",function(){jg_namespace("jgatt.properties",function(){var e=jg_import("jgatt.properties.Property"),t=jg_import("jgatt.utils.Dictionary");this.MPropertyTarget=jg_static(function(n){var r=function(t,n){if(n==null)throw new Error("Parameter property must be non-null.");if(n instanceof e)return n;if(typeof n!="string")throw new Error("Parameter property must be a string or an instance of jgatt.properties.Property.");var r=t[n];if(r instanceof e)return r;throw new Error('Unknown property "'+n+'".')};this._propertyMap=null,this.constructor=function(){this._propertyMap=new t},this.get=function(e){return e=r(this,e),e.get(this,this._propertyMap)},this.set=function(e,t){return e=r(this,e),e.set(this,this._propertyMap,t)},this.getInternal=function(e){return e=r(this,e),e.getInternal(this,this._propertyMap)},this.setInternal=function(e,t){return e=r(this,e),e.setInternal(this,this._propertyMap,t)}})})}),jg_import.define("jgatt.utils.ErrorUtils",function(){jg_namespace("jgatt.utils",function(){this.ErrorUtils=jg_static(function(e){e.asyncThrow=function(e){setTimeout(function(){throw e},1)}})})}),jg_import.define("jgatt.events.Event",function(){jg_namespace("jgatt.events",function(e){var t=jg_import("jgatt.events.EventData"),n=jg_import("jgatt.properties.MPropertyTarget"),r=jg_import("jgatt.properties.Property"),i=jg_import("jgatt.utils.Dictionary"),s=jg_import("jgatt.utils.ErrorUtils"),o=jg_import("jgatt.utils.TypeUtils");this.Event=jg_extend(Object,function(u,a){var f=function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.index<t.index?-1:t.index>t.index?1:0};this._name=null,this._type=null,this._bubbles=!1,this._cancelable=!1,this.constructor=function(e,n,r,i){if(e==null)throw new Error("Parameter name must be non-null.");if(typeof e!="string")throw new Error("Parameter name must be a string.");if(n==null)throw new Error("Parameter type must be non-null.");if(typeof n!="function")throw new Error("Parameter type must be a class.");if(n!==t&&!o.isSubclassOf(n,t))throw new Error("Parameter type must be a subclass of jgatt.events.EventData.");if(r!=null&&typeof r!="boolean")throw new Error("Parameter bubbles must be a boolean.");if(i!=null&&typeof i!="boolean")throw new Error("Parameter cancelable must be a boolean.");this._name=e,this._type=n,this._bubbles=r===!0,this._cancelable=i===!0},this.name=function(){return this._name},this.type=function(){return this._type},this.bubbles=function(){return this._bubbles},this.cancelable=function(){return this._cancelable},this.addEventListener=function(e,t,n,r){if(n==null)throw new Error("Parameter listener must be non-null.");if(typeof n!="function")throw new Error("Parameter listener must be a function.");if(r!=null&&typeof r!="number")throw new Error("Parameter priority must be a number.");if(r==null||isNaN(r))r=0;var s=t.get(this);s||(s=t.set(this,{map:new i,list:null,index:0}));var o=s.map,u=o.get(n);if(!u)u=o.set(n,{listener:n});else if(u.priority===r)return;u.priority=r,u.index=s.index,s.list=null,s.index++},this.removeEventListener=function(e,t,n){if(n==null)throw new Error("Parameter listener must be non-null.");if(typeof n!="function")throw new Error("Parameter listener must be a function.");var r=t.get(this);if(!r)return;var i=r.map;if(!i.has(n))return;i.del(n),r.list=null},this.hasEventListener=function(e,t){var n=t.get(this);return n?n.map.size()>0:!1},this.dispatchEvent=function(t,i,o){if(o==null)throw new Error("Parameter eventData must be non-null.");if(o instanceof this._type){if(o.isPropagationStopped())return!this._cancelable||!o.isDefaultPrevented();o.event==null&&(o.event=this),o.target==null&&(o.target=t),o.currentEvent=this,o.currentTarget=t;var u=i.get(this);if(u){var a=u.list;if(!a){var l=u.map;l.size()>0&&(a=u.list=l.values(),a.sort(f))}if(a){var c;for(var h=0,p=a.length;h<p;h++){c=a[h];try{o.currentEvent=this,o.currentTarget=t,c.listener.call(t,o);if(o.isImmediatePropagationStopped())break}catch(d){s.asyncThrow(d)}}}}if(this._bubbles&&!o.isPropagationStopped()){var v=t.parent;v!=null?v instanceof r&&jg_has_mixin(t,n)&&(v=t.get(v)):v=t.parentNode,v!=null&&e.MEventTarget&&jg_has_mixin(v,e.MEventTarget)&&v.dispatchEvent(this,o)}return!this._cancelable||!o.isDefaultPrevented()}throw new Error("Parameter eventData is incompatible with event type.")}})})}),jg_import.define("jgatt.events.ChainedEvent",function(){jg_namespace("jgatt.events",function(){var e=jg_import("jgatt.events.Event"),t=jg_import("jgatt.utils.TypeUtils");this.ChainedEvent=jg_extend(e,function(n,r){this._parentEvent=null,this.constructor=function(n,i,s,o,u){if(i==null)throw new Error("Parameter parentEvent must be non-null.");if(!(i instanceof e))throw new Error("Parameter parentEvent must be an instance of jgatt.events.Event.");var a=i._type;if(s==null)s=a;else{if(typeof s!="function")throw new Error("Parameter type must be a class.");if(s!==a&&!t.isSubclassOf(s,a))throw new Error("Parameter type must be a subclass of parentEvent type.")}r.constructor.call(this,n,s,o,u),this._parentEvent=i},this.parentEvent=function(){return this._parentEvent},this.dispatchEvent=function(e,t,n){return r.dispatchEvent.call(this,e,t,n),n.isPropagationStopped()||this._parentEvent.dispatchEvent(e,t,n),!this._cancelable||!n.isDefaultPrevented()}})})}),jg_import.define("jgatt.events.MEventTarget",function(){jg_namespace("jgatt.events",function(){var e=jg_import("jgatt.events.Event"),t=jg_import("jgatt.utils.Dictionary");this.MEventTarget=jg_static(function(n){var r=function(t,n){if(n==null)throw new Error("Parameter event must be non-null.");if(n instanceof e)return n;if(typeof n!="string")throw new Error("Parameter event must be a string or an instance of jgatt.events.Event.");var r=t._eventNameMap[n];if(!r){var i=n.split(".");r=t;for(var s=0,o=i.length;s<o;s++){r=r[i[s]];if(r==null)break}if(!(r instanceof e))throw new Error('Unknown event "'+n+'".');t._eventNameMap[n]=r}return r};this._eventMap=null,this._eventNameMap=null,this.constructor=function(){this._eventMap=new t,this._eventNameMap={}},this.addEventListener=function(e,t,n){e=r(this,e),e.addEventListener(this,this._eventMap,t,n)},this.removeEventListener=function(e,t){e=r(this,e),e.removeEventListener(this,this._eventMap,t)},this.hasEventListener=function(e){return e=r(this,e),e.hasEventListener(this,this._eventMap)},this.dispatchEvent=function(e,t){return e=r(this,e),e.dispatchEvent(this,this._eventMap,t)}})})}),jg_import.define("jgatt.events.MObservable",function(){jg_namespace("jgatt.events",function(){var e=jg_import("jgatt.events.Event"),t=jg_import("jgatt.events.EventData"),n=jg_import("jgatt.events.MEventTarget");this.MObservable=jg_static(function(r){this.mixin=function(e){e=jg_mixin(this,n,e)},this.changed=new e("changed",t)})})}),jg_import.define("jgatt.geom.Point",function(){jg_namespace("jgatt.geom",function(){this.Point=jg_extend(Object,function(e,t){this.x=0,this.y=0,this.constructor=function(e,t){this.x=e!==undefined?e:0,this.y=t!==undefined?t:0},this.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},this.hasNaN=function(){return isNaN(this.x)||isNaN(this.y)},this.hasInfinity=function(){return this.x==Infinity||this.x==-Infinity||this.y==Infinity||this.y==-Infinity},this.hasPositiveInfinity=function(){return this.x==Infinity||this.y==Infinity},this.hasNegativeInfinity=function(){return this.x==-Infinity||this.y==-Infinity},this.isFinite=function(){return this.x-this.x===0&&this.y-this.y===0},this.equals=function(e){return this.x==e.x&&this.y==e.y},this.clone=function(){return new e(this.x,this.y)},this.toString=function(){return"("+this.x+", "+this.y+")"}})})}),jg_import.define("jgatt.geom.Matrix",function(){jg_namespace("jgatt.geom",function(){var e=jg_import("jgatt.geom.Point");this.Matrix=jg_extend(Object,function(t,n){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.constructor=function(e,t,n,r,i,s){this.a=e!==undefined?e:1,this.b=t!==undefined?t:0,this.c=n!==undefined?n:0,this.d=r!==undefined?r:1,this.tx=i!==undefined?i:0,this.ty=s!==undefined?s:0},this.transformPoint=function(t){var n=this.a*t.x+this.c*t.y+this.tx,r=this.b*t.x+this.d*t.y+this.ty;return new e(n,r)},this.translate=function(e,t){this.tx+=e,this.ty+=t},this.scale=function(e,t){this.a*=e,this.b*=t,this.c*=e,this.d*=t,this.tx*=e,this.ty*=t},this.rotate=function(e){e=e/180*Math.PI;var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.b,s=this.c,o=this.d,u=this.tx,a=this.ty;this.a=r*t-i*n,this.b=i*t+r*n,this.c=s*t-o*n,this.d=o*t+s*n,this.tx=u*t-a*n,this.ty=a*t+u*n},this.skew=function(e,t){e=e/180*Math.PI,t=t/180*Math.PI;var n=Math.tan(e),r=Math.tan(t),i=this.a,s=this.b,o=this.c,u=this.d,a=this.tx,f=this.ty;this.a=i+s*n,this.b=s+i*r,this.c=o+u*n,this.d=u+o*r,this.tx=a+f*n,this.ty=f+a*r},this.concat=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=this.ty,u=e.a,a=e.b,f=e.c,l=e.d,c=e.tx,h=e.ty;this.a=t*u+n*f,this.b=n*l+t*a,this.c=r*u+i*f,this.d=i*l+r*a,this.tx=s*u+o*f+c,this.ty=o*l+s*a+h},this.invert=function(){var e=this.determinant(),t=this.a/e,n=this.b/e,r=this.c/e,i=this.d/e,s=this.tx,o=this.ty;this.a=i,this.b=-n,this.c=-r,this.d=t,this.tx=r*o-i*s,this.ty=n*s-t*o},this.identity=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},this.determinant=function(){return this.a*this.d-this.b*this.c},this.hasInverse=function(){var e=Math.abs(this.determinant());return e>0&&e<Infinity},this.hasNaN=function(){return isNaN(this.a)||isNaN(this.b)||isNaN(this.c)||isNaN(this.d)||isNaN(this.tx)||isNaN(this.ty)},this.hasInfinity=function(){return this.a==Infinity||this.a==-Infinity||this.b==Infinity||this.b==-Infinity||this.c==Infinity||this.c==-Infinity||this.d==Infinity||this.d==-Infinity||this.tx==Infinity||this.tx==-Infinity||this.ty==Infinity||this.ty==-Infinity},this.hasPositiveInfinity=function(){return this.a==Infinity||this.b==Infinity||this.c==Infinity||this.d==Infinity||this.tx==Infinity||this.ty==Infinity},this.hasNegativeInfinity=function(){return this.a==-Infinity||this.b==-Infinity||this.c==-Infinity||this.d==-Infinity||this.tx==-Infinity||this.ty==-Infinity},this.isFinite=function(){return this.a-this.a===0&&this.b-this.b===0&&this.c-this.c===0&&this.d-this.d===0&&this.tx-this.tx===0&&this.ty-this.ty===0},this.isIdentity=function(){return this.a==1&&this.b==0&&this.c==0&&this.d==1&&this.tx==0&&this.ty==0},this.equals=function(e){return this.a==e.a&&this.b==e.b&&this.c==e.c&&this.d==e.d&&this.tx==e.tx&&this.ty==e.ty},this.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},this.toString=function(){return"("+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.tx+", "+this.ty+")"}})})}),jg_import.define("jgatt.geom.Rectangle",function(){jg_namespace("jgatt.geom",function(){this.Rectangle=jg_extend(Object,function(e,t){this.x=0,this.y=0,this.width=0,this.height=0,this.constructor=function(e,t,n,r){this.x=e!==undefined?e:0,this.y=t!==undefined?t:0,this.width=n!==undefined?n:0,this.height=r!==undefined?r:0},this.hasNaN=function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.width)||isNaN(this.height)},this.hasInfinity=function(){return this.x==Infinity||this.x==-Infinity||this.y==Infinity||this.y==-Infinity||this.width==Infinity||this.width==-Infinity||this.height==Infinity||this.height==-Infinity},this.hasPositiveInfinity=function(){return this.x==Infinity||this.y==Infinity||this.width==Infinity||this.height==Infinity},this.hasNegativeInfinity=function(){return this.x==-Infinity||this.y==-Infinity||this.width==-Infinity||this.height==-Infinity},this.isFinite=function(){return this.x-this.x===0&&this.y-this.y===0&&this.width-this.width===0&&this.height-this.height===0},this.equals=function(e){return this.x==e.x&&this.y==e.y&&this.width==e.width&&this.height==e.height},this.clone=function(){return new e(this.x,this.y,this.width,this.height)},this.toString=function(){return"("+this.x+", "+this.y+", "+this.width+", "+this.height+")"}})})}),jg_import.define("jgatt.graphics.Caps",function(){jg_namespace("jgatt.graphics",function(){this.Caps=jg_static(function(e){e.NONE="none",e.ROUND="round",e.SQUARE="square"})})}),jg_import.define("jgatt.utils.NumberUtils",function(){jg_namespace("jgatt.utils",function(){this.NumberUtils=jg_static(function(e){e.EPSILON=function(){var e=1,t=1;while(1+t>1)e=t,t/=2;return e}(),e.PRECISION=function(){var e=0,t=9;while(t%10==9)e++,t=t*10+9;return e}(),e.parseNumber=function(e){if(e==null)return NaN;switch(typeof e){case"number":return e;case"string":return e?Number(e):NaN;case"boolean":return e?1:0}return NaN},e.toPrecision=function(t,n){return n=n!==undefined?n:0,n<1&&(n=e.PRECISION+n),n<1?n=1:n>21&&(n=21),Number(t.toPrecision(n))},e.toFixed=function(e,t){return t=t!==undefined?t:0,t<0?t=0:t>20&&(t=20),Number(e.toFixed(t))},e.roundTo=function(t,n){return n=n!==undefined?n:1,e.toPrecision(Math.round(t/n)*n,-1)},e.minMax=function(e,t,n){return e<t&&(e=t),e>n&&(e=n),e},e.maxMin=function(e,t,n){return e>t&&(e=t),e<n&&(e=n),e},e.interpolate=function(e,t,n){return e*(1-n)+t*n},e.approxZero=function(t,n){return t==0?!0:(n=n!==undefined?n:NaN,isNaN(n)&&(n=e.EPSILON),t<0?-t<n:t<n)},e.approxOne=function(t,n){return t==1?!0:(t-=1,n=n!==undefined?n:NaN,isNaN(n)&&(n=e.EPSILON),t<0?-t<n:t<n)},e.approxEqual=function(t,n,r){return t==n?!0:(t-=n,r=r!==undefined?r:NaN,isNaN(r)&&(r=e.EPSILON),t<0?-t<r:t<r)},e.approxLessThan=function(t,n,r){return t<n&&!e.approxEqual(t,n,r)},e.approxLessThanOrEqual=function(t,n,r){return t<n||e.approxEqual(t,n,r)},e.approxGreaterThan=function(t,n,r){return t>n&&!e.approxEqual(t,n,r)},e.approxGreaterThanOrEqual=function(t,n,r){return t>n||e.approxEqual(t,n,r)}})})}),jg_import.define("jgatt.graphics.ColorUtils",function(){jg_namespace("jgatt.graphics",function(){var e=jg_import("jgatt.utils.NumberUtils");this.ColorUtils=jg_static(function(t){t.toRGB=function(e){var t={};return t.r=e>>16&255,t.g=e>>8&255,t.b=e&255,t},t.fromRGB=function(e){return e.r<<16|e.g<<8|e.b},t.brightness=function(e,n){var r=t.toRGB(e),i;return n<0?(n=-n,i=0):i=255,n>1&&(n=1),r.r+=Math.round((i-r.r)*n),r.g+=Math.round((i-r.g)*n),r.b+=Math.round((i-r.b)*n),t.fromRGB(r)},t.interpolate=function(n,r,i){var s=t.toRGB(n),o=t.toRGB(r),u={};return u.r=Math.round(e.interpolate(s.r,o.r,i)),u.g=Math.round(e.interpolate(s.g,o.g,i)),u.b=Math.round(e.interpolate(s.b,o.b,i)),t.fromRGB(u)}})})}),jg_import.define("jgatt.graphics.GradientType",function(){jg_namespace("jgatt.graphics",function(){this.GradientType=jg_static(function(e){e.LINEAR="linear",e.RADIAL="radial"})})}),jg_import.define("jgatt.graphics.Graphics",function(){jg_namespace("jgatt.graphics",function(){var e=jg_import("jgatt.geom.Matrix"),t=jg_import("jgatt.geom.Point");this.Graphics=jg_extend(Object,function(t,n){this._width=1,this._height=1,this._strokeStyle=null,this._strokeCommands=null,this._fillCommands=null,this._drawingStack=null,this._drawingStackIndex=0,this._penX=0,this._penY=0,this._element=null,this._canvas=null,this._context=null,this.constructor=function(e,t){this._width=e>1&&e<Infinity?Math.floor(e):1,this._height=t>1&&t<Infinity?Math.floor(t):1,this._strokeStyle={thickness:1,caps:"none",joints:"miter",miterLimit:10,pixelHinting:!0},this._drawingStack=[]},this.appendTo=function(e){if(!e)throw new Error("Parameter element must be non-null.");if(e===this._element)return!0;this.remove();var t=document.createElement("canvas");if(!t)return!1;if(typeof t.getContext!="function")return!1;var n=t.getContext("2d");return n?(t.style.position="absolute",t.width=this._width,t.height=this._height,e.appendChild(t),this._element=e,this._canvas=t,this._context=n,this._draw(!0),!0):!1},this.remove=function(){if(!this._element)return!1;var e=this._context;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath();var t=this._canvas,n=t.parentNode;return n&&n.removeChild(t),this._element=null,this._canvas=null,this._context=null,!0},this.setSize=function(e,t){e=e>1&&e<Infinity?Math.floor(e):1,t=t>1&&t<Infinity?Math.floor(t):1;if(e===this._width&&t===this._height)return;this._width=e,this._height=t;var n=this._canvas;if(!n)return;n.width=e,n.height=t,this._draw(!0)},this.setStrokeStyle=function(e,t,n,r,i){if(t!=null&&t!=="none"&&t!=="round"&&t!=="square")throw new Error('Parameter caps must be one of "none", "round", or "square".');if(n!=null&&n!=="miter"&&n!=="round"&&n!=="bevel")throw new Error('Parameter joints must be one of "miter", "round", or "bevel".');e*=1,e=e>0&&e<Infinity?e:1,t=t?t:"none",n=n?n:"miter",r*=1,r=r>0&&r<Infinity?r:10,i=i!=0,this._strokeStyle={thickness:e,caps:t,joints:n,miterLimit:r,pixelHinting:i}},this.beginSolidStroke=function(e,t){this.endStroke(),e=isNaN(e)?0:Math.min(Math.max(Math.floor(e),0),16777215),t=isNaN(t)?1:Math.min(Math.max(t,0),1);var n=this._strokeCommands=[];n.push({name:"solidStroke",strokeStyle:this._strokeStyle,color:e,alpha:t}),n.push({name:"moveTo",x:this._penX,y:this._penY})},this.beginGradientStroke=function(t,n,r,i,s,o){if(t==null)throw new Error("Parameter type must be non-null.");if(t!=="linear"&&t!=="radial")throw new Error('Parameter type must be one of "linear" or "radial".');if(n==null)throw new Error("Parameter colors must be non-null.");if(!(n instanceof Array))throw new Error("Parameter colors must be an array.");if(r==null)throw new Error("Parameter alphas must be non-null.");if(!(r instanceof Array))throw new Error("Parameter alphas must be an array.");if(i==null)throw new Error("Parameter ratios must be non-null.");if(!(i instanceof Array))throw new Error("Parameter ratios must be an array.");if(!(s==null||s instanceof e))throw new Error("Parameter matrix must be an instance of jgatt.geom.Matrix.");this.endStroke();var u=Math.min(n.length,r.length,i.length);n=n.slice(0,u),r=r.slice(0,u),i=i.slice(0,u);var a,f,l;for(var c=0;c<u;c++)a=n[c],n[c]=isNaN(a)?0:Math.min(Math.max(Math.floor(a),0),16777215),f=r[c],r[c]=isNaN(f)?1:Math.min(Math.max(f,0),1),l=i[c],i[c]=isNaN(l)?0:Math.min(Math.max(l,0),1);s&&(s=new e(s.a*1,s.b*1,s.c*1,s.d*1,s.tx*1,s.ty*1),s.tx-s.tx!==0&&(s.tx=0),s.ty-s.ty!==0&&(s.ty=0),s.hasInverse()||(s=null)),o=isNaN(o)?0:Math.min(Math.max(o,-1),1);var h=this._strokeCommands=[];h.push({name:"gradientStroke",strokeStyle:this._strokeStyle,type:t,colors:n,alphas:r,ratios:i,matrix:s,focalPointRatio:o}),h.push({name:"moveTo",x:this._penX,y:this._penY})},this.beginImageStroke=function(e,t,n){},this.endStroke=function(){if(!this._strokeCommands)return;this._drawingStack.push(this._strokeCommands),this._strokeCommands=null,this._draw()},this.beginSolidFill=function(e,t){this.endFill(),e=isNaN(e)?0:Math.min(Math.max(Math.floor(e),0),16777215),t=isNaN(t)?1:Math.min(Math.max(t,0),1);var n=this._fillCommands=[];n.push({name:"solidFill",color:e,alpha:t}),n.push({name:"moveTo",x:this._penX,y:this._penY})},this.beginGradientFill=function(t,n,r,i,s,o){if(t==null)throw new Error("Parameter type must be non-null.");if(t!=="linear"&&t!=="radial")throw new Error('Parameter type must be one of "linear" or "radial".');if(n==null)throw new Error("Parameter colors must be non-null.");if(!(n instanceof Array))throw new Error("Parameter colors must be an array.");if(r==null)throw new Error("Parameter alphas must be non-null.");if(!(r instanceof Array))throw new Error("Parameter alphas must be an array.");if(i==null)throw new Error("Parameter ratios must be non-null.");if(!(i instanceof Array))throw new Error("Parameter ratios must be an array.");if(!(s==null||s instanceof e))throw new Error("Parameter matrix must be an instance of jgatt.geom.Matrix.");this.endFill();var u=Math.min(n.length,r.length,i.length);n=n.slice(0,u),r=r.slice(0,u),i=i.slice(0,u);var a,f,l;for(var c=0;c<u;c++)a=n[c],n[c]=isNaN(a)?0:Math.min(Math.max(Math.floor(a),0),16777215),f=r[c],r[c]=isNaN(f)?1:Math.min(Math.max(f,0),1),l=i[c],i[c]=isNaN(l)?0:Math.min(Math.max(l,0),1);s&&(s=new e(s.a*1,s.b*1,s.c*1,s.d*1,s.tx*1,s.ty*1),s.tx-s.tx!==0&&(s.tx=0),s.ty-s.ty!==0&&(s.ty=0),s.hasInverse()||(s=null)),o=isNaN(o)?0:Math.min(Math.max(o,-1),1);var h=this._fillCommands=[];h.push({name:"gradientFill",type:t,colors:n,alphas:r,ratios:i,matrix:s,focalPointRatio:o}),h.push({name:"moveTo",x:this._penX,y:this._penY})},this.beginImageFill=function(e,t,n){},this.endFill=function(){if(!this._fillCommands)return;this._drawingStack.push(this._fillCommands),this._fillCommands=null,this._draw()},this.moveTo=function(e,t){e*=1,e-e!==0&&(e=0),t*=1,t-t!==0&&(t=0),this._penX=e,this._penY=t;var n={name:"moveTo",x:e,y:t};this._strokeCommands&&this._strokeCommands.push(n),this._fillCommands&&this._fillCommands.push(n)},this.lineTo=function(e,t){e*=1,e-e!==0&&(e=0),t*=1,t-t!==0&&(t=0),this._penX=e,this._penY=t;var n={name:"lineTo",x:e,y:t};this._strokeCommands&&this._strokeCommands.push(n),this._fillCommands&&this._fillCommands.push(n)},this.curveTo=function(e,t,n,r){e*=1,e-e!==0&&(e=0),t*=1,t-t!==0&&(t=0),n*=1,n-n!==0&&(n=0),r*=1,r-r!==0&&(r=0),this._penX=n,this._penY=r;var i={name:"curveTo",controlX:e,controlY:t,anchorX:n,anchorY:r};this._strokeCommands&&this._strokeCommands.push(i),this._fillCommands&&this._fillCommands.push(i)},this.clear=function(){this._strokeCommands=null,this._fillCommands=null,this._drawingStack=[],this._draw(!0)},this._draw=function(e){var t=this._context;if(!t)return;e==1&&(this._drawingStackIndex=0,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.beginPath());var n=this._drawingStack,r=n.length,i,s;for(s=this._drawingStackIndex;s<r;s++){i=n[s];switch(i[0].name){case"solidStroke":case"gradientStroke":this._drawStroke(i);break;case"solidFill":case"gradientFill":this._drawFill(i)}}this._drawingStackIndex=s},this._drawStroke=function(e){var t=this._context;if(!t)return;var n=e.length,r=e[0],i=r.strokeStyle,s=i.pixelHinting?i.thickness%2/2:0,o=!1,u,a,f,l,c,h,p,d,v,m,g,y,b,w;t.beginPath();for(w=1;w<n;w++)r=e[w],r.name==="moveTo"?(o&&u===f&&a===l&&t.closePath(),o=!1,u=r.x,a=r.y,t.moveTo(u+s,a+s)):r.name==="lineTo"?(o=!0,f=r.x,l=r.y,t.lineTo(f+s,l+s)):r.name==="curveTo"&&(o=!0,f=r.anchorX,l=r.anchorY,t.quadraticCurveTo(r.controlX+s,r.controlY+s,f+s,l+s));o&&u===f&&a===l&&t.closePath(),t.save(),t.lineWidth=i.thickness,t.lineCap=i.caps==="none"?"butt":i.caps,t.lineJoin=i.joints,t.miterLimit=i.miterLimit,r=e[0];if(r.name==="solidStroke")m=r.color,g=r.alpha,t.strokeStyle="rgba("+(m>>16&255)+", "+(m>>8&255)+", "+(m&255)+", "+g+")";else if(r.name==="gradientStroke"){r.type==="radial"?c=t.createRadialGradient(.5+.49*r.focalPointRatio,.5,0,.5,.5,.5):c=t.createLinearGradient(0,0,1,0),p=r.colors,d=r.alphas,v=r.ratios,h=p.length;for(w=0;w<h;w++)m=p[w],g=d[w],y=v[w],c.addColorStop(y,"rgba("+(m>>16&255)+", "+(m>>8&255)+", "+(m&255)+", "+g+")");b=r.matrix,b&&t.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty),t.strokeStyle=c}t.stroke(),t.restore(),t.beginPath()},this._drawFill=function(e){var t=this._context;if(!t)return;var n=e.length,r,i,s,o,u,a,f,l,c,h,p;t.beginPath();for(p=1;p<n;p++)r=e[p],r.name==="moveTo"?t.moveTo(r.x,r.y):r.name==="lineTo"?t.lineTo(r.x,r.y):r.name==="curveTo"&&t.quadraticCurveTo(r.controlX,r.controlY,r.anchorX,r.anchorY);t.save(),r=e[0];if(r.name==="solidFill")f=r.color,l=r.alpha,t.fillStyle="rgba("+(f>>16&255)+", "+(f>>8&255)+", "+(f&255)+", "+l+")";else if(r.name==="gradientFill"){r.type==="radial"?i=t.createRadialGradient(.5+.49*r.focalPointRatio,.5,0,.5,.5,.5):i=t.createLinearGradient(0,0,1,0),o=r.colors,u=r.alphas,a=r.ratios,s=o.length;for(p=0;p<s;p++)f=o[p],l=u[p],c=a[p],i.addColorStop(c,"rgba("+(f>>16&255)+", "+(f>>8&255)+", "+(f&255)+", "+l+")");h=r.matrix,h&&t.setTransform(h.a,h.b,h.c,h.d,h.tx,h.ty),t.fillStyle=i}t.fill(),t.restore(),t.beginPath()}})})}),jg_import.define("jgatt.graphics.Joints",function(){jg_namespace("jgatt.graphics",function(){this.Joints=jg_static(function(e){e.MITER="miter",e.ROUND="round",e.BEVEL="bevel"})})}),jg_import.define("jgatt.properties.PropertyEventData",function(){jg_namespace("jgatt.properties",function(){var e=jg_import("jgatt.events.EventData");this.PropertyEventData=jg_extend(e,function(e,t){this.property=null,this.oldValue=null,this.newValue=null,this.constructor=function(e,t,n){this.property=e,this.oldValue=t,this.newValue=n}})})}),jg_import.define("jgatt.graphics.brushes.Brush",function(){jg_namespace("jgatt.graphics.brushes",function(){var e=jg_import("jgatt.events.MObservable"),t=jg_import("jgatt.geom.Matrix"),n=jg_import("jgatt.geom.Point"),r=jg_import("jgatt.graphics.Graphics"),i=jg_import("jgatt.properties.MPropertyTarget"),s=jg_import("jgatt.properties.Property"),o=jg_import("jgatt.properties.PropertyEventData");this.Brush=jg_extend(Object,function(u,a){a=jg_mixin(this,e,a),a=jg_mixin(this,i,a),this._properties=null,this._commands=null,this._graphics=null,this._matrix=null,this._bounds=null,this.constructor=function(){a.constructor.call(this),this.addEventListener(this.changed,this._self_changed,Infinity)},this.beginBrush=function(e,i,s){if(!e)throw new Error("Parameter graphics must be non-null.");if(!(e instanceof r))throw new Error("Parameter graphics must be an instance of jgatt.graphics.Graphics.");if(!(i==null||i instanceof t))throw new Error("Parameter matrix must be an instance of jgatt.geom.Matrix.");if(!(s==null||s instanceof Array))throw new Error("Parameter bounds must be an array.");this.endBrush(),this._properties||(this._properties=this._getProperties()),this._commands=[],this._graphics=e,this._matrix=i?i.clone():null;if(s){var o=this._bounds=[],u=s.length,a;for(var f=0;f<u;f++)a=s[f],a instanceof n&&o.push(a.clone())}},this.endBrush=function(){if(!this._graphics)return;this.draw(this._properties,this._commands,this._graphics,this._matrix,this._bounds),this._commands=null,this._graphics=null,this._matrix=null,this._bounds=null},this.moveTo=function(e,t){if(!this._graphics)return;this._commands.push({name:"moveTo",x:e,y:t})},this.lineTo=function(e,t){if(!this._graphics)return;this._commands.push({name:"lineTo",x:e,y:t})},this.curveTo=function(e,t,n,r){if(!this._graphics)return;this._commands.push({name:"curveTo",controlX:e,controlY:t,anchorX:n,anchorY:r})},this.draw=function(e,t,n,r,i){},this._getProperties=function(){var e={},t;for(var n in this)t=this[n],t instanceof s&&(e[n]=this.getInternal(t));return e},this._self_changed=function(e){e.target===this&&e instanceof o&&(this._properties=null)}})})}),jg_import.define("jgatt.graphics.brushes.DrawingUtils",function(){jg_namespace("jgatt.graphics.brushes",function(){var e=jg_import("jgatt.geom.Point"),t=jg_import("jgatt.graphics.brushes.Brush");this.DrawingUtils=jg_static(function(n){n.arcTo=function(n,r,i,s,o,u,a){if(n==null)throw new Error("Parameter brush must be non-null.");if(n instanceof t){o>360?o=360:o<-360&&(o=-360),a===undefined&&(a=u);var f=Math.ceil(Math.abs(o)/45),l=o/f,c=l/180*Math.PI,h=Math.cos(c/2),p=s/180*Math.PI,d,v=r-Math.cos(p)*u,m=i-Math.sin(p)*a,g,y,b,w,E;for(E=0;E<f;E++)p+=c,d=p-c/2,g=v+Math.cos(p)*u,y=m+Math.sin(p)*a,b=v+Math.cos(d)*(u/h),w=m+Math.sin(d)*(a/h),n.curveTo(b,w,g,y);return new e(g,y)}throw new Error("Parameter brush must be an instance of jgatt.graphics.brushes.Brush.")},n.drawRectangle=function(e,n,r,i,s){if(e==null)throw new Error("Parameter brush must be non-null.");if(!(e instanceof t))throw new Error("Parameter brush must be an instance of jgatt.graphics.brushes.Brush.");var o=n+i,u=r+s;e.moveTo(n,r),e.lineTo(o,r),e.lineTo(o,u),e.lineTo(n,u),e.lineTo(n,r)},n.drawEllipse=function(e,r,i,s,o){if(e==null)throw new Error("Parameter brush must be non-null.");if(!(e instanceof t))throw new Error("Parameter brush must be an instance of jgatt.graphics.brushes.Brush.");r+=s,e.moveTo(r,i),n.arcTo(e,r,i,0,360,s,o)}})})}),jg_import.define("jgatt.utils.FunctionUtils",function(){jg_namespace("jgatt.utils",function(){this.FunctionUtils=jg_static(function(e){e.bind=function(e,t){if(e==null)throw new Error("Parameter f must be non-null.");if(typeof e!="function")throw new Error("Parameter f must be a function.");return function(){return e.apply(t,arguments)}}})})}),jg_import.define("jgatt.properties.ObservableProperty",function(){jg_namespace("jgatt.properties",function(){var e=jg_import("jgatt.events.ChainedEvent"),t=jg_import("jgatt.events.Event"),n=jg_import("jgatt.events.EventData"),r=jg_import("jgatt.events.MObservable"),i=jg_import("jgatt.properties.Property"),s=jg_import("jgatt.properties.PropertyEventData"),o=jg_import("jgatt.utils.Dictionary"),u=jg_import("jgatt.utils.FunctionUtils");this.ObservableProperty=jg_extend(i,function(i,o){var u=function(e,t){return e===t?!1:e!==e&&t!==t?!1:!0};this.changed=null,this._noChaining=!1,this._changedComparator=null,this._onChanged=null,this.constructor=function(i,s,u,a,f){o.constructor.call(this,i,s,u,a);if(f!=null&&typeof f!="boolean")throw new Error("Parameter noChaining must be a boolean.");this._noChaining=f===!0,this.changed=this._noChaining?new t("changed",n):new e("changed",r.changed)},this.noChaining=function(){return this._noChaining},this.changedComparator=function(e){if(arguments.length==0)return this._changedComparator;if(e!=null&&typeof e!="function")throw new Error("Parameter changedComparator must be a function.");return this._changedComparator=e?e:null,this},this.onChanged=function(e){if(arguments.length==0)return this._onChanged;if(e!=null&&typeof e!="function")throw new Error("Parameter onChanged must be a function.");return this._onChanged=e?e:null,this},this.setInternal=function(e,t,n){n=this.assertType(n,"Value assigned to property "+this._name+" is incompatible with property type.");var r=t.get(this);r||(r=t.set(this,this.createPropertyInfo(this,e)));if(r.isChanging)return!1;try{r.isChanging=!0;var i=r.value;if(this._changedComparator){if(!this._changedComparator.call(e,i,n))return!1}else if(!u(i,n))return!1;this._setter&&this._setter.call(e,n),r.value=n,r.setupValueChain(),r.isObservable&&e.dispatchEvent(this.changed,new s(this,i,n))}finally{r.isChanging=!1}return!0},this.createPropertyInfo=function(e,t){return new i.PropertyInfo(e,t)}}),this.ObservableProperty.PropertyInfo=jg_extend(i.PropertyInfo,function(e,t){this.cachedValue=null,this.isObservable=!1,this.isChanging=!1,this.isValueChangingMap=null,this.constructor=function(e,n){t.constructor.call(this,e,n),this.isObservable=jg_has_mixin(n,r),this.isValueChangingMap=new o,this.value_changed=u.bind(this.value_changed,this),e._onChanged&&this.isObservable&&n.addEventListener(e.changed,e._onChanged,Infinity)},this.setupValueChain=function(){this.clearValueChain();var e=this.value;if(e==null||!jg_has_mixin(e,r))return;this.cachedValue=e,e.addEventListener(e.changed,this.value_changed,-Infinity)},this.clearValueChain=function(){var e=this.cachedValue;if(e==null)return;e.removeEventListener(e.changed,this.value_changed),this.cachedValue=null},this.value_changed=function(e){if(!this.isObservable||this.isChanging||this.isValueChangingMap.has(e)||e.isPropagationStopped())return;try{this.isValueChangingMap.set(e,!0),this.target.dispatchEvent(this.property.changed,e)}finally{this.isValueChangingMap.del(e)}}})})}),jg_import.define("jgatt.graphics.brushes.TileBrush",function(){jg_namespace("jgatt.graphics.brushes",function(){var e=jg_import("jgatt.geom.Matrix"),t=jg_import("jgatt.geom.Point"),n=jg_import("jgatt.graphics.brushes.Brush"),r=jg_import("jgatt.properties.ObservableProperty");this.TileBrush=jg_extend(n,function(n,i){this.stretchMode=(new r("stretchMode",String,"fill")).writeFilter(function(e){switch(e){case"none":case"fill":case"uniform":case"uniformToFill":case"uniformToWidth":case"uniformToHeight":return e;default:return"fill"}}),this.alignmentX=(new r("alignmentX",Number,.5)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:.5}),this.alignmentY=(new r("alignmentY",Number,.5)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:.5}),this.tileTransform=(new r("tileTransform",e,null)).readFilter(function(e){return e?e.clone():null}).writeFilter(function(e){return e?e.clone():null}),this.renderTransform=(new r("renderTransform",e,null)).readFilter(function(e){return e?e.clone():null}).writeFilter(function(e){return e?e.clone():null}),this.fitToDrawing=new r("fitToDrawing",Boolean,!1),this.constructor=function(e,t,n,r,s,o){i.constructor.call(this),e!=null&&this.set(this.stretchMode,e),t!=null&&this.set(this.alignmentX,t),n!=null&&this.set(this.alignmentY,n),r!=null&&this.set(this.tileTransform,r),s!=null&&this.set(this.renderTransform,s),o!=null&&this.set(this.fitToDrawing,o)},this.computeTileMatrix=function(n,r,i,s,o,u){var a,f=i.tileTransform;if(f){a=f.clone();var l=new t(0,0),c=new t(n,0),h=new t(n,r),p=new t(0,r);l=a.transformPoint(l),c=a.transformPoint(c),h=a.transformPoint(h),p=a.transformPoint(p);var d=Math.min(l.x,c.x,h.x,p.x),v=Math.max(l.x,c.x,h.x,p.x),m=Math.min(l.y,c.y,h.y,p.y),g=Math.max(l.y,c.y,h.y,p.y);n=v-d,r=g-m,a.translate(-d,-m)}else a=new e;var y;o&&o.hasInverse()&&(y=o.clone(),y.invert());var b=Infinity,w=Infinity,E=-Infinity,S=-Infinity,x,T;if(u&&!i.fitToDrawing){var N=u.length;for(T=0;T<N;T++)x=u[T],y&&(x=y.transformPoint(x)),b=Math.min(x.x,b),w=Math.min(x.y,w),E=Math.max(x.x,E),S=Math.max(x.y,S)}else{var C=s.length,k;for(T=0;T<C;T++){k=s[T];if(k.name=="moveTo")x=new t(k.x,k.y);else if(k.name=="lineTo")x=new t(k.x,k.y);else{if(k.name!="curveTo")continue;x=new t(k.anchorX,k.anchorY)}y&&(x=y.transformPoint(x)),b=Math.min(x.x,b),w=Math.min(x.y,w),E=Math.max(x.x,E),S=Math.max(x.y,S)}}b==Infinity&&(b=w=E=S=0);var L=E-b,A=S-w,O,M,_,D;switch(i.stretchMode){case"none":_=(L-n)*i.alignmentX,D=(A-r)*i.alignmentY,a.translate(_,D);break;case"uniform":O=n>0?L/n:1,M=r>0?A/r:1,O=M=Math.min(O,M),_=(L-n*O)*i.alignmentX,D=(A-r*M)*i.alignmentY,a.scale(O,M),a.translate(_,D);break;case"uniformToFill":O=n>0?L/n:1,M=r>0?A/r:1,O=M=Math.max(O,M),_=(L-n*O)*i.alignmentX,D=(A-r*M)*i.alignmentY,a.scale(O,M),a.translate(_,D);break;case"uniformToWidth":O=M=n>0?L/n:1,_=(L-n*O)*i.alignmentX,D=(A-r*M)*i.alignmentY,a.scale(O,M),a.translate(_,D);break;case"uniformToHeight":O=M=r>0?A/r:1,_=(L-n*O)*i.alignmentX,D=(A-r*M)*i.alignmentY,a.scale(O,M),a.translate(_,D);break;default:O=n>0?L/n:1,M=r>0?A/r:1,a.scale(O,M)}var P=i.renderTransform;return P&&a.concat(P),a.translate(b,w),o&&a.concat(o),a}})})}),jg_import.define("jgatt.properties.ObservableArrayProperty",function(){jg_namespace("jgatt.properties",function(){var e=jg_import("jgatt.events.MObservable"),t=jg_import("jgatt.properties.ObservableProperty"),n=jg_import("jgatt.utils.TypeUtils");this.ObservableArrayProperty=jg_extend(t,function(e,t){this._elementType=null,this.constructor=function(e,n,r,i,s){if(n==null)throw new Error("Parameter elementType must be non-null.");if(typeof n!="function")throw new Error("Parameter elementType must be a class.");this._elementType=n,t.constructor.call(this,e,Array,r,i,s)},this.elementType=function(){return this._elementType},this.assertType=function(e,t){if(e==null)return null;if(e instanceof Array){var r=this._elementType;if(r===Object)return e;var i;for(var s=0,o=e.length;s<o;s++){i=e[s];if(i==null||!n.isTypeOf(i,r))throw new Error(t)}return e}throw new Error(t)},this.createPropertyInfo=function(t,n){return new e.PropertyInfo(t,n)}}),this.ObservableArrayProperty.PropertyInfo=jg_extend(t.PropertyInfo,function(t,n){this.cachedElementValues=null,this.constructor=function(e,t){n.constructor.call(this,e,t)},this.setupValueChain=function(){this.clearValueChain();var t=this.value;if(t==null)return;jg_has_mixin(t,e)&&(this.cachedValue=t,t.addEventListener(t.changed,this.value_changed,-Infinity));if(t.length==0)return;var n=this.cachedElementValues=[],r;for(var i=0,s=t.length;i<s;i++)r=t[i],jg_has_mixin(r,e)&&(n.push(r),r.addEventListener(r.changed,this.value_changed,-Infinity))},this.clearValueChain=function(){var e=this.cachedElementValues;if(e){var t;for(var n=e.length-1;n>=0;n--)t=r[n],t.removeEventListener(t.changed,this.value_changed);this.cachedElementValues=null}var r=this.cachedValue;r!=null&&(r.removeEventListener(r.changed,this.value_changed),this.cachedValue=null)}})})}),jg_import.define("jgatt.graphics.brushes.GradientFillBrush",function(){jg_namespace("jgatt.graphics.brushes",function(){var e=jg_import("jgatt.geom.Matrix"),t=jg_import("jgatt.graphics.brushes.TileBrush"),n=jg_import("jgatt.properties.ObservableArrayProperty"),r=jg_import("jgatt.properties.ObservableProperty"),i=jg_import("jgatt.utils.NumberUtils");this.GradientFillBrush=jg_extend(t,function(t,s){this.type=(new r("type",String,"linear")).writeFilter(function(e){switch(e){case"linear":case"radial":return e;default:return"linear"}}),this.colors=(new n("colors",Number,[])).readFilter(function(e){return e.concat()}).writeFilter(function(e){return e?e.concat():[]}),this.alphas=(new n("alphas",Number,[])).readFilter(function(e){return e.concat()}).writeFilter(function(e){return e?e.concat():[]}),this.ratios=(new n("ratios",Number,[])).readFilter(function(e){return e.concat()}).writeFilter(function(e){return e?e.concat():[]}),this.focalPointRatio=(new r("focalPointRatio",Number,0)).writeFilter(function(e){return isNaN(e)?0:i.minMax(e,-1,1)}),this.gradientWidth=(new r("gradientWidth",Number,100)).writeFilter(function(e){return e>0&&e<Infinity?e:100}),this.gradientHeight=(new r("gradientHeight",Number,100)).writeFilter(function(e){return e>0&&e<Infinity?e:100}),this.constructor=function(e,t,n,r,i){s.constructor.call(this),e!=null&&this.set(this.type,e),t!=null&&this.set(this.colors,t),n!=null&&this.set(this.alphas,n),r!=null&&this.set(this.ratios,r),i!=null&&this.set(this.focalPointRatio,i)},this.draw=function(t,n,r,i,s){var o=t.gradientWidth,u=t.gradientHeight,a=new e(o,0,0,u);a.concat(this.computeTileMatrix(o,u,t,n,i,s)),r.beginGradientFill(t.type,t.colors,t.alphas,t.ratios,a,t.focalPointRatio);var f=n.length,l;for(var c=0;c<f;c++)l=n[c],l.name==="moveTo"?r.moveTo(l.x,l.y):l.name==="lineTo"?r.lineTo(l.x,l.y):l.name==="curveTo"&&r.curveTo(l.controlX,l.controlY,l.anchorX,l.anchorY);r.endFill()}})})}),jg_import.define("jgatt.graphics.brushes.GroupBrush",function(){jg_namespace("jgatt.graphics.brushes",function(){var e=jg_import("jgatt.graphics.brushes.Brush"),t=jg_import("jgatt.properties.ObservableArrayProperty");this.GroupBrush=jg_extend(e,function(n,r){this.brushes=(new t("brushes",e,[])).readFilter(function(e){return e.concat()}).writeFilter(function(e){return e?e.concat():[]}),this.constructor=function(e){r.constructor.call(this),e!=null&&this.set(this.brushes,e)},this.draw=function(e,t,n,r,i){var s=e.brushes,o=s.length,u,a=t.length,f,l,c;for(l=0;l<o;l++){u=s[l],u.beginBrush(n,r,i);for(c=0;c<a;c++)f=t[c],f.name==="moveTo"?u.moveTo(f.x,f.y):f.name==="lineTo"?u.lineTo(f.x,f.y):f.name==="curveTo"&&u.curveTo(f.controlX,f.controlY,f.anchorX,f.anchorY);u.endBrush()}}})})}),jg_import.define("jgatt.graphics.brushes.SolidFillBrush",function(){jg_namespace("jgatt.graphics.brushes",function(){var e=jg_import("jgatt.graphics.brushes.Brush"),t=jg_import("jgatt.properties.ObservableProperty"),n=jg_import("jgatt.utils.NumberUtils");this.SolidFillBrush=jg_extend(e,function(e,r){this.color=(new t("color",Number,0)).writeFilter(function(e){return isNaN(e)?0:n.minMax(Math.floor(e),0,16777215)}),this.alpha=(new t("alpha",Number,1)).writeFilter(function(e){return isNaN(e)?1:n.minMax(e,0,1)}),this.constructor=function(e,t){r.constructor.call(this),e!=null&&this.set(this.color,e),t!=null&&this.set(this.alpha,t)},this.draw=function(e,t,n,r,i){n.beginSolidFill(e.color,e.alpha);var s=t.length,o;for(var u=0;u<s;u++)o=t[u],o.name==="moveTo"?n.moveTo(o.x,o.y):o.name==="lineTo"?n.lineTo(o.x,o.y):o.name==="curveTo"&&n.curveTo(o.controlX,o.controlY,o.anchorX,o.anchorY);n.endFill()}})})}),jg_import.define("jgatt.graphics.brushes.SolidStrokeBrush",function(){jg_namespace("jgatt.graphics.brushes",function(){var e=jg_import("jgatt.graphics.brushes.Brush"),t=jg_import("jgatt.properties.ObservableProperty"),n=jg_import("jgatt.utils.NumberUtils");this.SolidStrokeBrush=jg_extend(e,function(e,r){this.color=(new t("color",Number,0)).writeFilter(function(e){return isNaN(e)?0:n.minMax(Math.floor(e),0,16777215)}),this.alpha=(new t("alpha",Number,1)).writeFilter(function(e){return isNaN(e)?1:n.minMax(e,0,1)}),this.thickness=(new t("thickness",Number,1)).writeFilter(function(e){return e>0&&e<Infinity?e:1}),this.caps=(new t("caps",String,"none")).writeFilter(function(e){switch(e){case"none":case"round":case"square":return e;default:return"none"}}),this.joints=(new t("joints",String,"miter")).writeFilter(function(e){switch(e){case"miter":case"round":case"bevel":return e;default:return"miter"}}),this.miterLimit=(new t("miterLimit",Number,10)).writeFilter(function(e){return e>0&&e<Infinity?e:10}),this.pixelHinting=new t("pixelHinting",Boolean,!0),this.constructor=function(e,t,n,i,s,o,u){r.constructor.call(this),e!=null&&this.set(this.color,e),t!=null&&this.set(this.alpha,t),n!=null&&this.set(this.thickness,n),i!=null&&this.set(this.caps,i),s!=null&&this.set(this.joints,s),o!=null&&this.set(this.miterLimit,o),u!=null&&this.set(this.pixelHinting,u)},this.draw=function(e,t,n,r,i){n.setStrokeStyle(e.thickness,e.caps,e.joints,e.miterLimit,e.pixelHinting),n.beginSolidStroke(e.color,e.alpha);var s=t.length,o;for(var u=0;u<s;u++)o=t[u],o.name==="moveTo"?n.moveTo(o.x,o.y):o.name==="lineTo"?n.lineTo(o.x,o.y):o.name==="curveTo"&&n.curveTo(o.controlX,o.controlY,o.anchorX,o.anchorY);n.endStroke()}})})}),jg_import.define("jgatt.graphics.brushes.StretchMode",function(){jg_namespace("jgatt.graphics.brushes",function(){this.StretchMode=jg_static(function(e){e.NONE="none",e.FILL="fill",e.UNIFORM="uniform",e.UNIFORM_TO_FILL="uniformToFill",e.UNIFORM_TO_WIDTH="uniformToWidth",e.UNIFORM_TO_HEIGHT="uniformToHeight"})})}),jg_import.define("jgatt.motion.easers.Easer",function(){jg_namespace("jgatt.motion.easers",function(){this.Easer=jg_extend(Object,function(e,t){this.direction=1,this.constructor=function(e){this.direction=e!==undefined?e:1},this.ease=function(e){return this.direction>0?this.easeOverride(e):this.direction<0?1-this.easeOverride(1-e):e<.5?this.easeOverride(e*2)/2:.5+(1-this.easeOverride(2-e*2))/2},this.easeOverride=function(e){return e}})})}),jg_import.define("jgatt.motion.Tween",function(){jg_namespace("jgatt.motion",function(){var e=jg_import("jgatt.events.Event"),t=jg_import("jgatt.events.EventData"),n=jg_import("jgatt.events.MEventTarget"),r=jg_import("jgatt.motion.easers.Easer"),i=jg_import("jgatt.properties.MPropertyTarget"),s=jg_import("jgatt.properties.Property");this.Tween=jg_extend(Object,function(o,u){u=jg_mixin(this,n,u),u=jg_mixin(this,i,u),this.begin=new e("begin",t),this.end=new e("end",t),this.update=new e("update",t),this.easer=(new s("easer",r,null)).onWrite(function(){this.endTween()}),this._runningEaser=null,this._isRunning=!1,this.constructor=function(e){u.constructor.call(this),e!=null&&this.set(this.easer,e)},this.beginTween=function(){return this.endTween(),this.beginTweenOverride()?(this._runningEaser=this.getInternal(this.easer),this._isRunning=!0,this.dispatchEvent(this.begin,new t),!0):!1},this.endTween=function(){return this._isRunning?(this.endTweenOverride(),this._isRunning=!1,this.dispatchEvent(this.end,new t),!0):!1},this.updateTween=function(e){if(!this._isRunning)return!1;var n=this._runningEaser;return n&&(e=n.ease(e)),this.updateTweenOverride(e)?(this.dispatchEvent(this.update,new t),!0):!1},this.beginTweenOverride=function(){return!1},this.endTweenOverride=function(){},this.updateTweenOverride=function(e){return!1}})})}),jg_import.define("jgatt.properties.ArrayProperty",function(){jg_namespace("jgatt.properties",function(){var e=jg_import("jgatt.properties.Property"),t=jg_import("jgatt.utils.TypeUtils");this.ArrayProperty=jg_extend(e,function(e,n){this._elementType=null,this.constructor=function(e,t,r,i){if(t==null)throw new Error("Parameter elementType must be non-null.");if(typeof t!="function")throw new Error("Parameter elementType must be a class.");this._elementType=t,n.constructor.call(this,e,Array,r,i)},this.elementType=function(){return this._elementType},this.assertType=function(e,n){if(e==null)return null;if(e instanceof Array){var r=this._elementType;if(r===Object)return e;var i;for(var s=0,o=e.length;s<o;s++){i=e[s];if(i==null||!t.isTypeOf(i,r))throw new Error(n)}return e}throw new Error(n)}})})}),jg_import.define("jgatt.motion.GroupTween",function(){jg_namespace("jgatt.motion",function(){var e=jg_import("jgatt.motion.Tween"),t=jg_import("jgatt.properties.ArrayProperty");this.GroupTween=jg_extend(e,function(n,r){this.tweens=(new t("tweens",e,[])).readFilter(function(e){return e.concat()}).writeFilter(function(e){return e?e.concat():[]}).onWrite(function(){this.endTween()}),this._runningTweens=null,this.constructor=function(e,t){r.constructor.call(this,t),e!=null&&this.set(this.tweens,e)},this.beginTweenOverride=function(){var e=[],t=this.getInternal(this.tweens),n;for(var r=0,i=t.length;r<i;r++)n=t[r],n.beginTween()&&e.push(n);return e.length==0?!1:(this._runningTweens=e,!0)},this.endTweenOverride=function(){var e=this._runningTweens;for(var t=0,n=e.length;t<n;t++)e[t].endTween();this._runningTweens=null},this.updateTweenOverride=function(e){var t=this._runningTweens,n=t.length,r;for(var i=0;i<n;i++)r=t[i],r.updateTween(e)||(r.endTween(),t.splice(i,1),i--,n--);return t.length>0}})})}),jg_import.define("jgatt.motion.interpolators.Interpolator",function(){jg_namespace("jgatt.motion.interpolators",function(){this.Interpolator=jg_extend(Object,function(e,t){this.interpolate=function(e,t,n){return n<.5?e:t}})})}),jg_import.define("jgatt.motion.interpolators.NumberInterpolator",function(){jg_namespace("jgatt.motion.interpolators",function(){var e=jg_import("jgatt.motion.interpolators.Interpolator"),t=jg_import("jgatt.utils.NumberUtils");this.NumberInterpolator=jg_extend(e,function(e,n){this.snap=0,this.constructor=function(e){this.snap=e!==undefined?e:0},this.interpolate=function(e,n,r){var i=Number(e),s=Number(n),o=t.interpolate(i,s,r),u=this.snap;return u>0&&(o=Math.round(o/u)*u),o}})})}),jg_import.define("jgatt.motion.MethodTween",function(){jg_namespace("jgatt.motion",function(){var e=jg_import("jgatt.motion.Tween"),t=jg_import("jgatt.motion.interpolators.Interpolator"),n=jg_import("jgatt.motion.interpolators.NumberInterpolator"),r=jg_import("jgatt.properties.Property"),i=jg_import("jgatt.utils.Dictionary");this.MethodTween=jg_extend(e,function(e,s){var o=new n,u=new i;this.target=(new r("target",Object,null)).onWrite(function(){this.endTween()}),this.getter=(new r("getter",Function,null)).onWrite(function(){this.endTween()}),this.setter=(new r("setter",Function,null)).onWrite(function(){this.endTween()}),this.startValue=(new r("startValue",Object,null)).onWrite(function(){this.endTween()}),this.endValue=(new r("endValue",Object,null)).onWrite(function(){this.endTween()}),this.interpolator=(new r("interpolator",t,null)).onWrite(function(){this.endTween()}),this._runningTarget=null,this._runningGetter=null,this._runningSetter=null,this._runningStartValue=null,this._runningEndValue=null,this._runningInterpolator=null,this.constructor=function(e,t,n,r,i,o,u){s.constructor.call(this,o),e!=null&&this.set(this.target,e),t!=null&&this.set(this.getter,t),n!=null&&this.set(this.setter,n),r!=null&&this.set(this.startValue,r),i!=null&&this.set(this.endValue,i),u!=null&&this.set(this.interpolator,u)},this.beginTweenOverride=function(){var e=this.getInternal(this.target);if(e==null)return!1;var t=this.getInternal(this.getter);if(t==null)return!1;var n=this.getInternal(this.setter);if(n==null)return!1;var r=this.getInternal(this.endValue);if(r==null)return!1;var s=this.getInternal(this.startValue);if(s==null)try{s=t.call(e)}catch(a){return!1}var f=this.getInternal(this.interpolator);f||(f=o),this._runningTarget=e,this._runningGetter=t,this._runningSetter=n,this._runningStartValue=s,this._runningEndValue=r,this._runningInterpolator=f;var l=u.get(e);l||(l=u.set(e,new i));var c=l.get(n);return l.set(n,this),c&&c.endTween(),!0},this.endTweenOverride=function(){var e=this._runningTarget,t=this._runningSetter;this._runningTarget=null,this._runningGetter=null,this._runningSetter=null,this._runningStartValue=null,this._runningEndValue=null,this._runningInterpolator=null;var n=u.get(e);if(n.get(t)!==this)return;n.del(t);if(n.size()>0)return;u.del(e)},this.updateTweenOverride=function(e){var t=this._runningInterpolator.interpolate(this._runningStartValue,this._runningEndValue,e);try{this._runningSetter.call(this._runningTarget,t)}catch(n){return!1}return!0}})})}),jg_import.define("jgatt.motion.PropertyTween",function(){jg_namespace("jgatt.motion",function(){var e=jg_import("jgatt.motion.Tween"),t=jg_import("jgatt.motion.interpolators.Interpolator"),n=jg_import("jgatt.motion.interpolators.NumberInterpolator"),r=jg_import("jgatt.properties.MPropertyTarget"),i=jg_import("jgatt.properties.Property"),s=jg_import("jgatt.utils.Dictionary");this.PropertyTween=jg_extend(e,function(e,o){var u=new n,a=new s;this.target=(new i("target",Object,null)).writeFilter(function(e){if(e!=null&&!jg_has_mixin(e,r))throw new Error("Parameter target must have the mixin jgatt.properties.MPropertyTarget.");return e}).onWrite(function(){this.endTween()}),this.property=(new i("property",Object,null)).writeFilter(function(e){if(e==null||typeof e=="string"||e instanceof i)return e;throw new Error("Parameter property must be a string or an instance of jgatt.properties.Property.")}).onWrite(function(){this.endTween()}),this.startValue=(new i("startValue",Object,null)).onWrite(function(){this.endTween()}),this.endValue=(new i("endValue",Object,null)).onWrite(function(){this.endTween()}),this.interpolator=(new i("interpolator",t,null)).onWrite(function(){this.endTween()}),this._runningTarget=null,this._runningProperty=null,this._runningStartValue=null,this._runningEndValue=null,this._runningInterpolator=null,this.constructor=function(e,t,n,r,i,s){o.constructor.call(this,i),e!=null&&this.set(this.target,e),t!=null&&this.set(this.property,t),n!=null&&this.set(this.startValue,n),r!=null&&this.set(this.endValue,r),s!=null&&this.set(this.interpolator,s)},this.beginTweenOverride=function(){var e=this.getInternal(this.target);if(e==null)return!1;var t=this.getInternal(this.property);if(t==null)return!1;if(typeof t=="string"){t=e[t];if(!(t instanceof i))return!1}var n=this.getInternal(this.endValue);if(n==null)return!1;var r=this.getInternal(this.startValue);if(r==null)try{r=e.get(t)}catch(o){return!1}var f=this.getInternal(this.interpolator);f||(f=u),this._runningTarget=e,this._runningProperty=t,this._runningStartValue=r,this._runningEndValue=n,this._runningInterpolator=f;var l=a.get(e);l||(l=a.set(e,new s));var c=l.get(t);return l.set(t,this),c&&c.endTween(),!0},this.endTweenOverride=function(){var e=this._runningTarget,t=this._runningProperty;this._runningTarget=null,this._runningProperty=null,this._runningStartValue=null,this._runningEndValue=null,this._runningInterpolator=null;var n=a.get(e);if(n.get(t)!==this)return;n.del(t);if(n.size()>0)return;a.del(e)},this.updateTweenOverride=function(e){var t=this._runningInterpolator.interpolate(this._runningStartValue,this._runningEndValue,e);try{this._runningTarget.set(this._runningProperty,t)}catch(n){return!1}return!0}})})}),jg_import.define("jgatt.motion.TweenRunner",function(){jg_namespace("jgatt.motion",function(){var e=jg_import("jgatt.motion.Tween"),t=jg_import("jgatt.utils.Dictionary");this.TweenRunner=jg_static(function(n){var r=new t,i=0,s=0,o=function(){var e=(new Date).getTime()/1e3,t=e-s;t<0?t=0:t>.1&&(t=.1),s=e;var i=r.values(),o,u;for(var a=0,f=i.length;a<f;a++)o=i[a],o.time+=t,u=o.time/o.duration,u>1&&(u=1),o.tween.updateTween(u)||(u=1),u==1&&n.stop(o.tween)};n.start=function(t,u){if(t==null)throw new Error("Parameter tween must be non-null.");if(t instanceof e){n.stop(t);if(!t.beginTween())return!1;if(!t.updateTween(0))t.endTween();else if(u>0){var a=r.set(t,{tween:t,duration:u,time:0});r.size()==1&&(i=setInterval(o,1e3/30),s=(new Date).getTime()/1e3)}else t.updateTween(1),t.endTween();return!0}throw new Error("Parameter tween must be an instance of jgatt.motion.Tween.")},n.stop=function(t){if(t==null)throw new Error("Parameter tween must be non-null.");if(t instanceof e){var n=r.get(t);return n?(r.del(t),r.size()==0&&clearInterval(i),t.endTween(),!0):!1}throw new Error("Parameter tween must be an instance of jgatt.motion.Tween.")}})})}),jg_import.define("jgatt.motion.easers.CubicEaser",function(){jg_namespace("jgatt.motion.easers",function(){var e=jg_import("jgatt.motion.easers.Easer");this.CubicEaser=jg_extend(e,function(e,t){this.constructor=function(e){t.constructor.call(this,e)},this.easeOverride=function(e){return e*e*e}})})}),jg_import.define("jgatt.motion.easers.EaseDirection",function(){jg_namespace("jgatt.motion.easers",function(){this.EaseDirection=jg_static(function(e){e.IN=1,e.OUT=-1,e.IN_OUT=0})})}),jg_import.define("jgatt.utils.Comparator",function(){jg_namespace("jgatt.utils",function(){this.Comparator=jg_extend(Object,function(e,t){this.compare=function(e,t){return 0}})})}),jg_import.define("jgatt.utils.AlphabeticComparator",function(){jg_namespace("jgatt.utils",function(){var e=jg_import("jgatt.utils.Comparator");this.AlphabeticComparator=jg_extend(e,function(e,t){this.compare=function(e,t){var n=String(e).toLowerCase(),r=String(t).toLowerCase();return n<r?-1:n>r?1:0}})})}),jg_import.define("jgatt.utils.NaturalComparator",function(){jg_namespace("jgatt.utils",function(){var e=jg_import("jgatt.utils.Comparator");this.NaturalComparator=jg_extend(e,function(e,t){this.compare=function(e,t){return e<t?-1:e>t?1:0}})})}),jg_import.define("jgatt.utils.ArrayUtils",function(){jg_namespace("jgatt.utils",function(){var e=jg_import("jgatt.utils.Comparator"),t=jg_import("jgatt.utils.NaturalComparator");this.ArrayUtils=jg_static(function(n){var r=new t;n.indexOf=function(e,t){if(e==null)throw new Error("Parameter a must be non-null.");if(e instanceof Array){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}throw new Error("Parameter a must be an array.")},n.lastIndexOf=function(e,t){if(e==null)throw new Error("Parameter a must be non-null.");if(e instanceof Array){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return n;return-1}throw new Error("Parameter a must be an array.")},n.sort=function(t,n){if(t==null)throw new Error("Parameter a must be non-null.");if(!(t instanceof Array))throw new Error("Parameter a must be an array.");if(!(n==null||n instanceof e))throw new Error("Parameter comparator must be an instance of jgatt.utils.Comparator.");n||(n=r);var i=function(e,t){return n.compare(e,t)};t.sort(i)},n.binarySearch=function(t,n,i){if(t==null)throw new Error("Parameter a must be non-null.");if(t instanceof Array){if(i==null||i instanceof e){var s=t.length-1;if(s<0)return-1;i||(i=r);var o=0,u,a;while(o<=s){u=o+Math.floor((s-o)/2),a=i.compare(n,t[u]);if(a<0)s=u-1;else{if(!(a>0))return u;o=u+1}}return-o-1}throw new Error("Parameter comparator must be an instance of jgatt.utils.Comparator.")}throw new Error("Parameter a must be an array.")}})})}),jg_import.define("jgatt.utils.FunctionComparator",function(){jg_namespace("jgatt.utils",function(){var e=jg_import("jgatt.utils.Comparator");this.FunctionComparator=jg_extend(e,function(e,t){this._f=null,this.constructor=function(e){if(e==null)throw new Error("Parameter f must be non-null.");if(typeof e!="function")throw new Error("Parameter f must be a function.");this._f=e},this.compare=function(e,t){return this._f(e,t)}})})}),jg_import.define("jgatt.utils.GroupComparator",function(){jg_namespace("jgatt.utils",function(){var e=jg_import("jgatt.utils.Comparator");this.GroupComparator=jg_extend(e,function(t,n){this._comparators=null,this.constructor=function(t){if(t==null)throw new Error("Parameter comparators must be non-null.");if(!(t instanceof Array))throw new Error("Parameter comparators must be an array.");var n=[],r;for(var i=0,s=t.length;i<s;i++){r=t[i];if(r!=null){if(!(r instanceof e))throw new Error("Parameter comparators must be an array containing only instances of jgatt.utils.Comparator.");n.push(r)}}this._comparators=n},this.compare=function(e,t){var n=this._comparators,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=r.compare(e,t);if(i!=0)return i}return 0}})})}),jg_import.define("jgatt.utils.NumericComparator",function(){jg_namespace("jgatt.utils",function(){var e=jg_import("jgatt.utils.Comparator"),t=jg_import("jgatt.utils.NumberUtils");this.NumericComparator=jg_extend(e,function(e,n){this.compare=function(e,n){var r=t.parseNumber(e),i=t.parseNumber(n);return r<i?-1:r>i?1:0}})})}),jg_import.define("jgatt.utils.PropertyComparator",function(){jg_namespace("jgatt.utils",function(){var e=jg_import("jgatt.properties.MPropertyTarget"),t=jg_import("jgatt.properties.Property"),n=jg_import("jgatt.utils.Comparator"),r=jg_import("jgatt.utils.NaturalComparator");this.PropertyComparator=jg_extend(n,function(i,s){var o=function(n,r){if(n==null)return undefined;if(typeof r=="string"){var i=n[r];if(!(i instanceof t))return i;r=i}return jg_has_mixin(n,e)?n.get(r):undefined};this._property=null,this._comparator=null,this.constructor=function(e,i){if(e==null)throw new Error("Parameter property must be non-null.");if(!(typeof e=="string"||e instanceof t))throw new Error("Parameter property must be a string or an instance of jgatt.properties.Property.");if(!(i==null||i instanceof n))throw new Error("Parameter comparator must be an instance of jgatt.utils.Comparator.");this._property=e,this._comparator=i||new r},this.compare=function(e,t){var n=this._property;return e=o(e,n),t=o(t,n),this._comparator.compare(e,t)}})})}),jg_import.define("jgatt.utils.ReverseComparator",function(){jg_namespace("jgatt.utils",function(){var e=jg_import("jgatt.utils.Comparator"),t=jg_import("jgatt.utils.NaturalComparator");this.ReverseComparator=jg_extend(e,function(n,r){this._comparator=null,this.constructor=function(n){if(!(n==null||n instanceof e))throw new Error("Parameter comparator must be an instance of jgatt.utils.Comparator.");this._comparator=n||new t},this.compare=function(e,t){return-this._comparator.compare(e,t)}})})}),jg_import.define("jgatt.utils.SequentialNumericComparator",function(){jg_namespace("jgatt.utils",function(){var e=jg_import("jgatt.utils.Comparator");this.SequentialNumericComparator=jg_extend(e,function(e,t){var n=/\d+/g;this.compare=function(e,t){var r=String(e),i=String(t),s=r.match(n),o=i.match(n),u=s.length,a=o.length,f=u<a?u:a,l,c;for(var h=0;h<f;h++){l=Number(s[h]),c=Number(o[h]);if(l<c)return-1;if(l>c)return 1}return u<a?-1:u>a?1:0}})})}),jg_import.define("jgatt.utils.StringUtils",function(){jg_namespace("jgatt.utils",function(){this.StringUtils=jg_static(function(e){e.escapeHTML=function(e){return e==null?e:(e=String(e),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"))}})})}),jg_import.define("jgatt.validation.ValidateEventData",function(){jg_namespace("jgatt.validation",function(){var e=jg_import("jgatt.events.EventData");this.ValidateEventData=jg_extend(e,function(e,t){this.pass=null,this.constructor=function(e){this.pass=e}})})}),jg_import.define("jgatt.validation.ValidatePass",function(){jg_namespace("jgatt.validation",function(e){var t=jg_import("jgatt.events.ChainedEvent"),n=jg_import("jgatt.events.Event"),r=jg_import("jgatt.utils.Comparator"),i=jg_import("jgatt.validation.ValidateEventData");this.ValidatePass=jg_extend(Object,function(s,o){this.invalidated=null,this.validated=null,this._methodName=null,this._priority=0,this._targetComparator=null,this.constructor=function(s,o,u){if(s==null)throw new Error("Parameter methodName must be non-null.");if(typeof s!="string")throw new Error("Parameter methodName must be a string.");if(o==null)throw new Error("Parameter priority must be non-null.");if(typeof o!="number")throw new Error("Parameter priority must be a number.");if(isNaN(o))throw new Error("Parameter priority must be a valid number.");if(!(u==null||u instanceof r))throw new Error("Parameter targetComparator must be an instance of jgatt.utils.Comparator.");this._methodName=s,this._priority=o,this._targetComparator=u?u:null,this.invalidated=e.MValidateTarget?new t("invalidated",e.MValidateTarget.invalidated):new n("invalidated",i),this.validated=e.MValidateTarget?new t("validated",e.MValidateTarget.validated):new n("validated",i)},this.methodName=function(){return this._methodName},this.priority=function(){return this._priority},this.targetComparator=function(){return this._targetComparator}})})}),jg_import.define("jgatt.validation.ValidateQueue",function(){jg_namespace("jgatt.validation",function(){var e=jg_import("jgatt.utils.ArrayUtils"),t=jg_import("jgatt.utils.Dictionary"),n=jg_import("jgatt.utils.ErrorUtils");this.ValidateQueue=jg_static(function(r){var i=new t,s=[],o=0,u=-1,a=!1;r.enqueue=function(e,n){var a=i.get(n);if(!a){a=i.set(n,new t);var f=n.priority(),l=!1,c;for(var h=0,p=s.length;h<p;h++){c=s[h];if(f<c.priority()){s.splice(h,0,n),h<=u&&u++,l=!0;break}}l||s.push(n),o||(o=setInterval(r.validateAll,1))}a.set(e,!0)},r.dequeue=function(e,t){var n=i.get(t);if(!n)return;n.del(e)},r.contains=function(e,t){var n=i.get(t);return n?n.has(e):!1},r.validateAll=function(){if(a)return!1;try{a=!0;var t,r,f,l,c,h,p;for(u=0;u<s.length;u++){c=s[u],t=i.get(c),r=t.keys(),l=c.targetComparator(),l&&e.sort(r,l);for(h=0,p=r.length;h<p;h++)try{r[h].validate(c)}catch(d){n.asyncThrow(d)}}u=-1;for(h=s.length-1;h>=0;h--){c=s[h],t=i.get(c);if(!t||t.size()==0)i.del(c),s.splice(h,1)}s.length==0&&(clearInterval(o),o=0)}catch(d){throw clearInterval(o),o=0,d}finally{a=!1}return!0},r.isValidating=function(){return a}})})}),jg_import.define("jgatt.validation.MValidateTarget",function(){jg_namespace("jgatt.validation",function(){var e=jg_import("jgatt.events.Event"),t=jg_import("jgatt.events.MEventTarget"),n=jg_import("jgatt.utils.Dictionary"),r=jg_import("jgatt.utils.ErrorUtils"),i=jg_import("jgatt.validation.ValidateEventData"),s=jg_import("jgatt.validation.ValidatePass"),o=jg_import("jgatt.validation.ValidateQueue");this.MValidateTarget=jg_static(function(u){this.mixin=function(e){e=jg_mixin(this,t,e)};var a=function(e,t){if(t==null)throw new Error("Parameter pass must be non-null.");if(t instanceof s)return t;if(typeof t!="string")throw new Error("Parameter pass must be a string or an instance of jgatt.validation.ValidatePass.");var n=e[t];if(n instanceof s)return n;throw new Error('Unknown pass "'+t+'".')},f=function(e,t){var n=e.priority(),r=t.priority();return n<r?-1:n>r?1:0},l=function(e,t){if(e._batchValidateList)return!1;var n=e._invalidPasses;if(n.size()==0)return!1;var i=!1;try{e._batchValidateEndPass=t;var s=e._batchValidateList=n.keys(),o,u;if(t){var a=t.priority();for(u=s.length-1;u>=0;u--)o=s[u],o.priority()>=a&&s.splice(u,1)}s.sort(f),u=e._batchValidateIndex=0;while(u<s.length){o=s[u];if(n.has(o))try{i=e.validate(o)||i}catch(l){r.asyncThrow(l)}u=++e._batchValidateIndex}}finally{e._batchValidateList=null,e._batchValidateIndex=-1,e._batchValidateEndPass=null}return i};this.invalidated=new e("invalidated",i),this.validated=new e("validated",i),this._invalidPasses=null,this._validatingPasses=null,this._batchValidateList=null,this._batchValidateIndex=-1,this._batchValidateEndPass=null,this.constructor=function(){this._invalidPasses=new n,this._validatingPasses=new n},this.invalidate=function(e){e=a(this,e);if(this._invalidPasses.has(e))return!1;if(this._batchValidateList){var t=e.priority(),n=this._batchValidateEndPass;if(!n||t<n.priority()){var r=this._batchValidateList,s=this._batchValidateIndex,u=!0;for(var f=s,l=r.length;f<l;f++){n=r[f];if(t<n.priority()){f>s&&r.splice(f,0,e),u=!1;break}}u&&r.push(e)}}return this._invalidPasses.set(e,!0),o.enqueue(this,e),this.dispatchEvent(e.invalidated,new i(e)),!0},this.validate=function(e){if(e==null)return l(this);e=a(this,e);if(this._validatingPasses.has(e))return!1;this.validatePreceding(e);if(!this._invalidPasses.has(e))return!1;this._validatingPasses.set(e,!0);var t=!1;try{var n=e.methodName(),i=this[n];if(typeof i!="function")throw new Error('Unknown method "'+n+'".');i.call(this),t=!0}catch(s){r.asyncThrow(s)}return this.setValid(e),t},this.validatePreceding=function(e){return e=a(this,e),o.isValidating()||this._batchValidateList?!1:l(this,e)},this.setValid=function(e){if(e==null){var t=this._invalidPasses.keys();t.sort(f);var n=!1;for(var r=0,s=t.length;r<s;r++)e=t[r],invalidPasses.has(e)&&(n=this.setValid(e)||n);return n}return e=a(this,e),this._invalidPasses.has(e)?(this._invalidPasses.del(e),this._validatingPasses.del(e),o.dequeue(this,e),this.dispatchEvent(e.validated,new i(e)),!0):!1},this.isValid=function(e){return e==null?this._invalidPasses.size()==0:(e=a(this,e),!this._invalidPasses.has(e))}})})}),define("jgatt",["jg_global"],function(e){return function(){var t,n;return t||e.jgatt}}(this)),define("splunk/charting/Legend",["require","jg_global","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt"],function(e){var t=e("jg_global").jg_extend,n=e("jg_global").jg_mixin,r=e("jgatt").events.ChainedEvent,i=e("jgatt").events.Event,s=e("jgatt").events.EventData,o=e("jgatt").events.MObservable,u=e("jgatt").properties.MPropertyTarget,a=e("jgatt").properties.ObservableProperty,f=e("jgatt").utils.ArrayUtils,l=e("jgatt").utils.Dictionary;return t(Object,function(e,t){t=n(this,o,t),t=n(this,u,t),this.settingLabels=new i("settingLabels",s),this.labelIndexMapChanged=new r("labelIndexMapChanged",this.changed),this.labels=(new a("labels",Array,[])).readFilter(function(e){return e.concat()}).writeFilter(function(e){return e?e.concat():[]}).onChanged(function(e){this._updateLabelMap()}),this._targetMap=null,this._targetList=null,this._labelMap=null,this._labelList=null,this._isSettingLabels=!1,this.constructor=function(){t.constructor.call(this),this._targetMap=new l,this._targetList=[],this._labelMap={},this._labelList=[]},this.register=function(e){if(e==null)throw new Error("Parameter target must be non-null.");var t=this._targetMap.get(e);if(t)return;t={labels:null},this._targetMap.set(e,t),this._targetList.push(t)},this.unregister=function(e){if(e==null)throw new Error("Parameter target must be non-null.");var t=this._targetMap.get(e);if(!t)return;var n=f.indexOf(this._targetList,t);n>=0&&this._targetList.splice(n,1),this._targetMap.del(e),this._updateLabelMap()},this.setLabels=function(e,t){if(e==null)throw new Error("Parameter target must be non-null.");if(!(t==null||t instanceof Array))throw new Error("Parameter labels must be an array.");var n=this._targetMap.get(e);if(!n)return;n.labels=t?t.concat():null,this.notifySettingLabels()},this.getLabelIndex=function(e){if(e==null)throw new Error("Parameter label must be non-null.");if(typeof e!="string")throw new Error("Parameter label must be a string.");var t=this.getLabelIndexOverride(e);if(t<0){var n=this._labelMap[e];t=n!=null?n:-1}return t},this.getNumLabels=function(){var e=this.getNumLabelsOverride();return e<0&&(e=this._labelList.length),e},this.notifySettingLabels=function(){if(this._isSettingLabels)return;try{this._isSettingLabels=!0,this.dispatchEvent(this.settingLabels,new s),this._updateLabelMap()}finally{this._isSettingLabels=!1}},this.notifyLabelIndexMapChanged=function(){this.dispatchEvent(this.labelIndexMapChanged,new s)},this.getNumLabelsOverride=function(){return-1},this.getLabelIndexOverride=function(e){return-1},this.updateLabelsOverride=function(e){return!1},this._updateLabelMap=function(){var e=this._labelList,t=!1,n={},r=[],i=this._targetList,s,o,u,a,f,l,c;o=this.getInternal(this.labels);for(a=0,l=o.length;a<l;a++)u=String(o[a]),n[u]==null&&(n[u]=r.length,r.push(u));for(a=0,l=i.length;a<l;a++){s=i[a],o=s.labels;if(o)for(f=0,c=o.length;f<c;f++)u=String(o[f]),n[u]==null&&(n[u]=r.length,r.push(u))}if(r.length!=e.length)t=!0;else for(a=0,l=r.length;a<l;a++)if(r[a]!==e[a]){t=!0;break}t&&(this._labelMap=n,this._labelList=r,this.updateLabelsOverride(r.concat())||this.notifyLabelIndexMapChanged())}})}),define("splunk/charting/ExternalLegend",["require","splunk.legend","jg_global","jgatt","splunk/charting/Legend"],function(e){var t=e("splunk.legend"),n=e("jg_global").jg_extend,r=e("jgatt").utils.FunctionUtils,i=e("splunk/charting/Legend");return n(i,function(e,n){var i=0;this._id=null,this._isConnected=!1,this._cachedExternalNumLabels=-1,this._cachedExternalLabelMap=null,this.constructor=function(){n.constructor.call(this),this._external_setLabels=r.bind(this._external_setLabels,this),this._external_labelIndexMapChanged=r.bind(this._external_labelIndexMapChanged,this),this._id="splunk-charting-ExternalLegend-"+ ++i},this.connect=function(){this.close(),t.register(this._id),t.addEventListener("setLabels",this._external_setLabels),t.addEventListener("labelIndexMapChanged",this._external_labelIndexMapChanged),this._isConnected=!0},this.close=function(){if(!this._isConnected)return;this._isConnected=!1,t.removeEventListener("labelIndexMapChanged",this._external_labelIndexMapChanged),t.removeEventListener("setLabels",this._external_setLabels),t.unregister(this._id)},this.isConnected=function(){return this._isConnected},this.getNumLabelsOverride=function(){if(this._isConnected){var e=this._cachedExternalNumLabels;return e<0&&(e=this._cachedExternalNumLabels=t.numLabels()),e}return-1},this.getLabelIndexOverride=function(e){if(this._isConnected){var n=this._cachedExternalLabelMap;n||(n=this._cachedExternalLabelMap={});var r=n[e];return r==null&&(r=n[e]=t.getLabelIndex(e)),r}return-1},this.updateLabelsOverride=function(e){return this._isConnected?(this._cachedExternalNumLabels=-1,this._cachedExternalLabelMap=null,t.setLabels(this._id,e),!0):!1},this._external_setLabels=function(){this.notifySettingLabels()},this._external_labelIndexMapChanged=function(){this._cachedExternalNumLabels=-1,this._cachedExternalLabelMap=null,this.notifyLabelIndexMapChanged()}})}),define("contrib/text!contrib/leaflet/leaflet.css",[],function(){return'/* required styles */\n\n.leaflet-map-pane,\n.leaflet-tile,\n.leaflet-marker-icon,\n.leaflet-marker-shadow,\n.leaflet-tile-pane,\n.leaflet-overlay-pane,\n.leaflet-shadow-pane,\n.leaflet-marker-pane,\n.leaflet-popup-pane,\n.leaflet-overlay-pane svg,\n.leaflet-zoom-box,\n.leaflet-image-layer,\n.leaflet-layer { /* TODO optimize classes */\n	position: absolute;\n	}\n.leaflet-container {\n	overflow: hidden;\n	outline: 0;\n	}\n.leaflet-tile,\n.leaflet-marker-icon,\n.leaflet-marker-shadow {\n	-moz-user-select: none;\n	-webkit-user-select: none;\n	user-select: none;\n	}\n.leaflet-marker-icon,\n.leaflet-marker-shadow {\n	display: block;\n	}\n.leaflet-clickable {\n	cursor: pointer;\n	}\n.leaflet-dragging, .leaflet-dragging .leaflet-clickable {\n	cursor: move;\n	}\n.leaflet-container img {\n    /* map is broken in FF if you have max-width: 100% on tiles */\n	max-width: none !important;\n	}\n.leaflet-container img.leaflet-image-layer {\n    /* stupid Android 2 doesn\'t understand "max-width: none" properly */\n    max-width: 15000px !important;\n    }\n\n.leaflet-tile-pane { z-index: 2; }\n.leaflet-objects-pane { z-index: 3; }\n.leaflet-overlay-pane { z-index: 4; }\n.leaflet-shadow-pane { z-index: 5; }\n.leaflet-marker-pane { z-index: 6; }\n.leaflet-popup-pane { z-index: 7; }\n\n.leaflet-tile {\n    filter: inherit;\n    visibility: hidden;\n	}\n.leaflet-tile-loaded {\n	visibility: inherit;\n	}\n\n.leaflet-zoom-box {\n    width: 0;\n    height: 0;\n    }\n\n/* Leaflet controls */\n\n.leaflet-control {\n	position: relative;\n	z-index: 7;\n	pointer-events: auto;\n	}\n.leaflet-top,\n.leaflet-bottom {\n	position: absolute;\n	z-index: 1000;\n	pointer-events: none;\n	}\n.leaflet-top {\n	top: 0;\n	}\n.leaflet-right {\n	right: 0;\n	}\n.leaflet-bottom {\n	bottom: 0;\n	}\n.leaflet-left {\n	left: 0;\n	}\n.leaflet-control {\n	float: left;\n	clear: both;\n	}\n.leaflet-right .leaflet-control {\n	float: right;\n	}\n.leaflet-top .leaflet-control {\n	margin-top: 10px;\n	}\n.leaflet-bottom .leaflet-control {\n	margin-bottom: 10px;\n	}\n.leaflet-left .leaflet-control {\n	margin-left: 10px;\n	}\n.leaflet-right .leaflet-control {\n	margin-right: 10px;\n	}\n\n.leaflet-control-zoom {\n	-moz-border-radius: 7px;\n	-webkit-border-radius: 7px;\n	border-radius: 7px;\n	}\n.leaflet-control-zoom {\n	padding: 5px;\n	background: rgba(0, 0, 0, 0.25);\n	}\n.leaflet-control-zoom a {\n	background-color: rgba(255, 255, 255, 0.75);\n	}\n.leaflet-control-zoom a, .leaflet-control-layers a {\n	background-position: 50% 50%;\n	background-repeat: no-repeat;\n	display: block;\n	}\n.leaflet-control-zoom a {\n	-moz-border-radius: 4px;\n	-webkit-border-radius: 4px;\n	border-radius: 4px;\n	width: 19px;\n	height: 19px;\n	}\n.leaflet-control-zoom a:hover {\n	background-color: #fff;\n	}\n.leaflet-touch .leaflet-control-zoom a {\n	width: 27px;\n	height: 27px;\n	}\n.leaflet-control-zoom-in {\n	background-image: url(images/zoom-in.png);\n	margin-bottom: 5px;\n	}\n.leaflet-control-zoom-out {\n	background-image: url(images/zoom-out.png);\n	}\n\n.leaflet-control-layers {\n	box-shadow: 0 1px 7px #999;\n	background: #f8f8f9;\n	-moz-border-radius: 8px;\n	-webkit-border-radius: 8px;\n	border-radius: 8px;\n	}\n.leaflet-control-layers a {\n	background-image: url(images/layers.png);\n	width: 36px;\n	height: 36px;\n	}\n.leaflet-touch .leaflet-control-layers a {\n	width: 44px;\n	height: 44px;\n	}\n.leaflet-control-layers .leaflet-control-layers-list,\n.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\n	display: none;\n	}\n.leaflet-control-layers-expanded .leaflet-control-layers-list {\n	display: block;\n	position: relative;\n	}\n.leaflet-control-layers-expanded {\n	padding: 6px 10px 6px 6px;\n	font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n	color: #333;\n	background: #fff;\n	}\n.leaflet-control-layers input {\n	margin-top: 2px;\n	position: relative;\n	top: 1px;\n	}\n.leaflet-control-layers label {\n	display: block;\n	}\n.leaflet-control-layers-separator {\n	height: 0;\n	border-top: 1px solid #ddd;\n	margin: 5px -10px 5px -6px;\n	}\n\n.leaflet-container .leaflet-control-attribution {\n	background-color: rgba(255, 255, 255, 0.7);\n	box-shadow: 0 0 5px #bbb;\n	margin: 0;\n    }\n\n.leaflet-control-attribution,\n.leaflet-control-scale-line {\n	padding: 0 5px;\n	color: #333;\n	}\n\n.leaflet-container .leaflet-control-attribution,\n.leaflet-container .leaflet-control-scale {\n	font: 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n	}\n\n.leaflet-left .leaflet-control-scale {\n	margin-left: 5px;\n	}\n.leaflet-bottom .leaflet-control-scale {\n	margin-bottom: 5px;\n	}\n\n.leaflet-control-scale-line {\n	border: 2px solid #777;\n	border-top: none;\n	color: black;\n	line-height: 1;\n	font-size: 10px;\n	padding-bottom: 2px;\n	text-shadow: 1px 1px 1px #fff;\n	background-color: rgba(255, 255, 255, 0.5);\n	}\n.leaflet-control-scale-line:not(:first-child) {\n	border-top: 2px solid #777;\n	padding-top: 1px;\n	border-bottom: none;\n	margin-top: -2px;\n	}\n.leaflet-control-scale-line:not(:first-child):not(:last-child) {\n	border-bottom: 2px solid #777;\n	}\n\n.leaflet-touch .leaflet-control-attribution, .leaflet-touch .leaflet-control-layers {\n	box-shadow: none;\n	}\n.leaflet-touch .leaflet-control-layers {\n	border: 5px solid #bbb;\n	}\n\n\n/* Zoom and fade animations */\n\n.leaflet-fade-anim .leaflet-tile, .leaflet-fade-anim .leaflet-popup {\n	opacity: 0;\n\n	-webkit-transition: opacity 0.2s linear;\n	-moz-transition: opacity 0.2s linear;\n	-o-transition: opacity 0.2s linear;\n	transition: opacity 0.2s linear;\n	}\n.leaflet-fade-anim .leaflet-tile-loaded, .leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\n	opacity: 1;\n	}\n\n.leaflet-zoom-anim .leaflet-zoom-animated {\n	-webkit-transition: -webkit-transform 0.25s cubic-bezier(0.25,0.1,0.25,0.75);\n	-moz-transition: -moz-transform 0.25s cubic-bezier(0.25,0.1,0.25,0.75);\n	-o-transition: -o-transform 0.25s cubic-bezier(0.25,0.1,0.25,0.75);\n	transition: transform 0.25s cubic-bezier(0.25,0.1,0.25,0.75);\n	}\n\n.leaflet-zoom-anim .leaflet-tile,\n.leaflet-pan-anim .leaflet-tile,\n.leaflet-touching .leaflet-zoom-animated {\n    -webkit-transition: none;\n    -moz-transition: none;\n    -o-transition: none;\n    transition: none;\n    }\n\n.leaflet-zoom-anim .leaflet-zoom-hide {\n	visibility: hidden;\n	}\n\n\n/* Popup layout */\n\n.leaflet-popup {\n	position: absolute;\n	text-align: center;\n	}\n.leaflet-popup-content-wrapper {\n	padding: 1px;\n	text-align: left;\n	}\n.leaflet-popup-content {\n	margin: 14px 20px;\n	}\n.leaflet-popup-tip-container {\n	margin: 0 auto;\n	width: 40px;\n	height: 20px;\n	position: relative;\n	overflow: hidden;\n	}\n.leaflet-popup-tip {\n	width: 15px;\n	height: 15px;\n	padding: 1px;\n\n	margin: -8px auto 0;\n\n	-moz-transform: rotate(45deg);\n	-webkit-transform: rotate(45deg);\n	-ms-transform: rotate(45deg);\n	-o-transform: rotate(45deg);\n	transform: rotate(45deg);\n	}\n.leaflet-container a.leaflet-popup-close-button {\n	position: absolute;\n	top: 0;\n	right: 0;\n	padding: 4px 5px 0 0;\n	text-align: center;\n	width: 18px;\n	height: 14px;\n	font: 16px/14px Tahoma, Verdana, sans-serif;\n	color: #c3c3c3;\n	text-decoration: none;\n	font-weight: bold;\n	}\n.leaflet-container a.leaflet-popup-close-button:hover {\n	color: #999;\n	}\n.leaflet-popup-content p {\n	margin: 18px 0;\n	}\n.leaflet-popup-scrolled {\n	overflow: auto;\n	border-bottom: 1px solid #ddd;\n	border-top: 1px solid #ddd;\n	}\n\n\n/* Visual appearance */\n\n.leaflet-container {\n	background: #ddd;\n	}\n.leaflet-container a {\n	color: #0078A8;\n	}\n.leaflet-container a.leaflet-active {\n    outline: 2px solid orange;\n    }\n.leaflet-zoom-box {\n	border: 2px dotted #05f;\n	background: white;\n	opacity: 0.5;\n	}\n.leaflet-div-icon {\n    background: #fff;\n    border: 1px solid #666;\n    }\n.leaflet-editing-icon {\n    border-radius: 2px;\n    }\n.leaflet-popup-content-wrapper, .leaflet-popup-tip {\n	background: white;\n\n	box-shadow: 0 3px 10px #888;\n	-moz-box-shadow: 0 3px 10px #888;\n	-webkit-box-shadow: 0 3px 14px #999;\n	}\n.leaflet-popup-content-wrapper {\n	-moz-border-radius: 20px;\n	-webkit-border-radius: 20px;\n	border-radius: 20px;\n	}\n.leaflet-popup-content {\n	font: 12px/1.4 "Helvetica Neue", Arial, Helvetica, sans-serif;\n	}\n'}),define("contrib/text!contrib/leaflet/leaflet.ie.css",[],function(){return".leaflet-vml-shape {\n	width: 1px;\n	height: 1px;\n	}\n.lvml {\n	behavior: url(#default#VML); \n	display: inline-block; \n	position: absolute;\n	}\n	\n.leaflet-control {\n	display: inline;\n	}\n\n.leaflet-popup-tip {\n	width: 21px;\n	_width: 27px;\n	margin: 0 auto;\n	_margin-top: -3px;\n	\n	filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);\n	-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)\";\n	}\n.leaflet-popup-tip-container {\n	margin-top: -1px;\n	}\n.leaflet-popup-content-wrapper, .leaflet-popup-tip {\n	border: 1px solid #bbb;\n	}\n.leaflet-popup-content-wrapper {\n	zoom: 1;\n	}\n\n.leaflet-control-zoom {\n	filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#3F000000',EndColorStr='#3F000000');\n	}\n.leaflet-control-zoom a {\n	background-color: #eee;\n	}\n.leaflet-control-zoom a:hover {\n	background-color: #fff;\n	}\n.leaflet-control-layers-toggle {\n	}\n.leaflet-control-attribution, .leaflet-control-layers {\n	background: white;\n	}"}),function(e,t){var n,r;typeof exports!=t+""?n=exports:(r=e.L,n={},n.noConflict=function(){return e.L=r,this},e.L=n),n.version="0.4.5",n.Util={extend:function(e){var t=Array.prototype.slice.call(arguments,1);for(var n=0,r=t.length,i;n<r;n++){i=t[n]||{};for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])}return e},bind:function(e,t){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,n||arguments)}},stamp:function(){var e=0,t="_leaflet_id";return function(n){return n[t]=n[t]||++e,n[t]}}(),limitExecByInterval:function(e,t,n){var r,i;return function s(){var o=arguments;if(r){i=!0;return}r=!0,setTimeout(function(){r=!1,i&&(s.apply(n,o),i=!1)},t),e.apply(n,o)}},falseFn:function(){return!1},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},splitWords:function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(e,t){return e.options=n.Util.extend({},e.options,t),e.options},getParamString:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return"?"+t.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,n){var r=t[n];if(!t.hasOwnProperty(n))throw Error("No value provided for variable "+e);return r})},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var n,r,i=["webkit","moz","o","ms"];for(n=0;n<i.length&&!r;n++)r=e[i[n]+t];return r}function r(t){return e.setTimeout(t,1e3/60)}var i=e.requestAnimationFrame||t("RequestAnimationFrame")||r,s=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};n.Util.requestAnimFrame=function(t,s,o,u){t=n.Util.bind(t,s);if(!o||i!==r)return i.call(e,t,u);t()},n.Util.cancelAnimFrame=function(t){t&&s.call(e,t)}}(),n.Class=function(){},n.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=t,t.prototype=i;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&(t[s]=this[s]);return e.statics&&(n.Util.extend(t,e.statics),delete e.statics),e.includes&&(n.Util.extend.apply(null,[i].concat(e.includes)),delete e.includes),e.options&&i.options&&(e.options=n.Util.extend({},i.options,e.options)),n.Util.extend(i,e),t},n.Class.include=function(e){n.Util.extend(this.prototype,e)},n.Class.mergeOptions=function(e){n.Util.extend(this.prototype.options,e)};var i="_leaflet_events";n.Mixin={},n.Mixin.Events={addEventListener:function(e,t,r){var s=this[i]=this[i]||{},o,u,a;if(typeof e=="object"){for(o in e)e.hasOwnProperty(o)&&this.addEventListener(o,e[o],t);return this}e=n.Util.splitWords(e);for(u=0,a=e.length;u<a;u++)s[e[u]]=s[e[u]]||[],s[e[u]].push({action:t,context:r||this});return this},hasEventListeners:function(e){return i in this&&e in this[i]&&this[i][e].length>0},removeEventListener:function(e,t,r){var s=this[i],o,u,a,f,l;if(typeof e=="object"){for(o in e)e.hasOwnProperty(o)&&this.removeEventListener(o,e[o],t);return this}e=n.Util.splitWords(e);for(u=0,a=e.length;u<a;u++)if(this.hasEventListeners(e[u])){f=s[e[u]];for(l=f.length-1;l>=0;l--)(!t||f[l].action===t)&&(!r||f[l].context===r)&&f.splice(l,1)}return this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var r=n.Util.extend({type:e,target:this},t),s=this[i][e].slice();for(var o=0,u=s.length;o<u;o++)s[o].action.call(s[o].context||this,r);return this}},n.Mixin.Events.on=n.Mixin.Events.addEventListener,n.Mixin.Events.off=n.Mixin.Events.removeEventListener,n.Mixin.Events.fire=n.Mixin.Events.fireEvent,function(){var r=navigator.userAgent.toLowerCase(),i=!!e.ActiveXObject,s=i&&!e.XMLHttpRequest,o=r.indexOf("webkit")!==-1,u=r.indexOf("gecko")!==-1,a=r.indexOf("chrome")!==-1,f=e.opera,l=r.indexOf("android")!==-1,c=r.search("android [23]")!==-1,h=typeof orientation!=t+""?!0:!1,p=document.documentElement,d=i&&"transition"in p.style,v=o&&"WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix,m=u&&"MozPerspective"in p.style,g=f&&"OTransition"in p.style,y=!e.L_NO_TOUCH&&function(){var e="ontouchstart";if(e in p)return!0;var t=document.createElement("div"),n=!1;return t.setAttribute?(t.setAttribute(e,"return;"),typeof t[e]=="function"&&(n=!0),t.removeAttribute(e),t=null,n):!1}(),b="devicePixelRatio"in e&&e.devicePixelRatio>1||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)").matches;n.Browser={ua:r,ie:i,ie6:s,webkit:o,gecko:u,opera:f,android:l,android23:c,chrome:a,ie3d:d,webkit3d:v,gecko3d:m,opera3d:g,any3d:!e.L_DISABLE_3D&&(d||v||m||g),mobile:h,mobileWebkit:h&&o,mobileWebkit3d:h&&v,mobileOpera:h&&f,touch:y,retina:b}}(),n.Point=function(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t},n.Point.prototype={add:function(e){return this.clone()._add(n.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(n.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e,t){return new n.Point(this.x/e,this.y/e,t)},multiplyBy:function(e,t){return new n.Point(this.x*e,this.y*e,t)},distanceTo:function(e){e=n.point(e);var t=e.x-this.x,r=e.y-this.y;return Math.sqrt(t*t+r*r)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},clone:function(){return new n.Point(this.x,this.y)},toString:function(){return"Point("+n.Util.formatNum(this.x)+", "+n.Util.formatNum(this.y)+")"}},n.point=function(e,t,r){return e instanceof n.Point?e:e instanceof Array?new n.Point(e[0],e[1]):isNaN(e)?e:new n.Point(e,t,r)},n.Bounds=n.Class.extend({initialize:function(e,t){if(!e)return;var n=t?[e,t]:e;for(var r=0,i=n.length;r<i;r++)this.extend(n[r])},extend:function(e){return e=n.point(e),!this.min&&!this.max?(this.min=e.clone(),this.max=e.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)),this},getCenter:function(e){return new n.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new n.Point(this.min.x,this.max.y)},getTopRight:function(){return new n.Point(this.max.x,this.min.y)},contains:function(e){var t,r;return typeof e[0]=="number"||e instanceof n.Point?e=n.point(e):e=n.bounds(e),e instanceof n.Bounds?(t=e.min,r=e.max):t=r=e,t.x>=this.min.x&&r.x<=this.max.x&&t.y>=this.min.y&&r.y<=this.max.y},intersects:function(e){e=n.bounds(e);var t=this.min,r=this.max,i=e.min,s=e.max,o=s.x>=t.x&&i.x<=r.x,u=s.y>=t.y&&i.y<=r.y;return o&&u}}),n.bounds=function(e,t){return!e||e instanceof n.Bounds?e:new n.Bounds(e,t)},n.Transformation=n.Class.extend({initialize:function(e,t,n,r){this._a=e,this._b=t,this._c=n,this._d=r},transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new n.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}}),n.DomUtil={get:function(e){return typeof e=="string"?document.getElementById(e):e},getStyle:function(e,t){var n=e.style[t];!n&&e.currentStyle&&(n=e.currentStyle[t]);if(!n||n==="auto"){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return n==="auto"?null:n},getViewportOffset:function(e){var t=0,r=0,i=e,s=document.body;do{t+=i.offsetTop||0,r+=i.offsetLeft||0;if(i.offsetParent===s&&n.DomUtil.getStyle(i,"position")==="absolute")break;if(n.DomUtil.getStyle(i,"position")==="fixed"){t+=s.scrollTop||0,r+=s.scrollLeft||0;break}i=i.offsetParent}while(i);i=e;do{if(i===s)break;t-=i.scrollTop||0,r-=i.scrollLeft||0,i=i.parentNode}while(i);return new n.Point(r,t)},create:function(e,t,n){var r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty(),this._onselectstart||(this._onselectstart=document.onselectstart,document.onselectstart=n.Util.falseFn)},enableTextSelection:function(){document.onselectstart=this._onselectstart,this._onselectstart=null},hasClass:function(e,t){return e.className.length>0&&RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},addClass:function(e,t){n.DomUtil.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},removeClass:function(e,t){function n(e,n){return n===t?"":e}e.className=e.className.replace(/(\S+)\s*/g,n).replace(/(^\s+|\s+$)/,"")},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if(n.Browser.ie){var r=!1,i="DXImageTransform.Microsoft.Alpha";try{r=e.filters.item(i)}catch(s){}t=Math.round(t*100),r?(r.Enabled=t!==100,r.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}},testProp:function(e){var t=document.documentElement.style;for(var n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1},getTranslateString:function(e){var t=n.Browser.webkit3d,r="translate"+(t?"3d":"")+"(",i=(t?",0":"")+")";return r+e.x+"px,"+e.y+"px"+i},getScaleString:function(e,t){var r=n.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e))),i=" scale("+e+") ";return r+i},setPosition:function(e,t,r){e._leaflet_pos=t,!r&&n.Browser.any3d?(e.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(t),n.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden")):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},n.Util.extend(n.DomUtil,{TRANSITION:n.DomUtil.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:n.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"])}),n.LatLng=function(e,t,n){var r=parseFloat(e),i=parseFloat(t);if(isNaN(r)||isNaN(i))throw Error("Invalid LatLng object: ("+e+", "+t+")");n!==!0&&(r=Math.max(Math.min(r,90),-90),i=(i+180)%360+(i<-180||i===180?180:-180)),this.lat=r,this.lng=i},n.Util.extend(n.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),n.LatLng.prototype={equals:function(e){if(!e)return!1;e=n.latLng(e);var t=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return t<=n.LatLng.MAX_MARGIN},toString:function(){return"LatLng("+n.Util.formatNum(this.lat)+", "+n.Util.formatNum(this.lng)+")"},distanceTo:function(e){e=n.latLng(e);var t=6378137,r=n.LatLng.DEG_TO_RAD,i=(e.lat-this.lat)*r,s=(e.lng-this.lng)*r,o=this.lat*r,u=e.lat*r,a=Math.sin(i/2),f=Math.sin(s/2),l=a*a+f*f*Math.cos(o)*Math.cos(u);return t*2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}},n.latLng=function(e,t,r){return e instanceof n.LatLng?e:e instanceof Array?new n.LatLng(e[0],e[1]):isNaN(e)?e:new n.LatLng(e,t,r)},n.LatLngBounds=n.Class.extend({initialize:function(e,t){if(!e)return;var n=t?[e,t]:e;for(var r=0,i=n.length;r<i;r++)this.extend(n[r])},extend:function(e){return typeof e[0]=="number"||e instanceof n.LatLng?e=n.latLng(e):e=n.latLngBounds(e),e instanceof n.LatLng?!this._southWest&&!this._northEast?(this._southWest=new n.LatLng(e.lat,e.lng,!0),this._northEast=new n.LatLng(e.lat,e.lng,!0)):(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):e instanceof n.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,r=this._northEast,i=Math.abs(t.lat-r.lat)*e,s=Math.abs(t.lng-r.lng)*e;return new n.LatLngBounds(new n.LatLng(t.lat-i,t.lng-s),new n.LatLng(r.lat+i,r.lng+s))},getCenter:function(){return new n.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new n.LatLng(this._northEast.lat,this._southWest.lng,!0)},getSouthEast:function(){return new n.LatLng(this._southWest.lat,this._northEast.lng,!0)},contains:function(e){typeof e[0]=="number"||e instanceof n.LatLng?e=n.latLng(e):e=n.latLngBounds(e);var t=this._southWest,r=this._northEast,i,s;return e instanceof n.LatLngBounds?(i=e.getSouthWest(),s=e.getNorthEast()):i=s=e,i.lat>=t.lat&&s.lat<=r.lat&&i.lng>=t.lng&&s.lng<=r.lng},intersects:function(e){e=n.latLngBounds(e);var t=this._southWest,r=this._northEast,i=e.getSouthWest(),s=e.getNorthEast(),o=s.lat>=t.lat&&i.lat<=r.lat,u=s.lng>=t.lng&&i.lng<=r.lng;return o&&u},toBBoxString:function(){var e=this._southWest,t=this._northEast;return[e.lng,e.lat,t.lng,t.lat].join(",")},equals:function(e){return e?(e=n.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast())):!1}}),n.latLngBounds=function(e,t){return!e||e instanceof n.LatLngBounds?e:new n.LatLngBounds(e,t)},n.Projection={},n.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=n.LatLng.DEG_TO_RAD,r=this.MAX_LATITUDE,i=Math.max(Math.min(r,e.lat),-r),s=e.lng*t,o=i*t;return o=Math.log(Math.tan(Math.PI/4+o/2)),new n.Point(s,o)},unproject:function(e){var t=n.LatLng.RAD_TO_DEG,r=e.x*t,i=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new n.LatLng(i,r,!0)}},n.Projection.LonLat={project:function(e){return new n.Point(e.lng,e.lat)},unproject:function(e){return new n.LatLng(e.y,e.x,!0)}},n.CRS={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)}},n.CRS.EPSG3857=n.Util.extend({},n.CRS,{code:"EPSG:3857",projection:n.Projection.SphericalMercator,transformation:new n.Transformation(.5/Math.PI,.5,-0.5/Math.PI,.5),project:function(e){var t=this.projection.project(e),n=6378137;return t.multiplyBy(n)}}),n.CRS.EPSG900913=n.Util.extend({},n.CRS.EPSG3857,{code:"EPSG:900913"}),n.CRS.EPSG4326=n.Util.extend({},n.CRS,{code:"EPSG:4326",projection:n.Projection.LonLat,transformation:new n.Transformation(1/360,.5,-1/360,.5)}),n.Map=n.Class.extend({includes:n.Mixin.Events,options:{crs:n.CRS.EPSG3857,fadeAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23,trackResize:!0,markerZoomAnimation:n.DomUtil.TRANSITION&&n.Browser.any3d},initialize:function(e,r){r=n.Util.setOptions(this,r),this._initContainer(e),this._initLayout(),this._initHooks(),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.center&&r.zoom!==t&&this.setView(n.latLng(r.center),r.zoom,!0),this._initLayers(r.layers)},setView:function(e,t){return this._resetView(n.latLng(e),this._limitZoom(t)),this},setZoom:function(e){return this.setView(this.getCenter(),e)},zoomIn:function(){return this.setZoom(this._zoom+1)},zoomOut:function(){return this.setZoom(this._zoom-1)},fitBounds:function(e){var t=this.getBoundsZoom(e);return this.setView(n.latLngBounds(e).getCenter(),t)},fitWorld:function(){var e=new n.LatLng(-60,-170),t=new n.LatLng(85,179);return this.fitBounds(new n.LatLngBounds(e,t))},panTo:function(e){return this.setView(e,this._zoom)},panBy:function(e){return this.fire("movestart"),this._rawPanBy(n.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){e=n.latLngBounds(e),this.options.maxBounds=e;if(!e)return this._boundsMinZoom=null,this;var t=this.getBoundsZoom(e,!0);return this._boundsMinZoom=t,this._loaded&&(this._zoom<t?this.setView(e.getCenter(),t):this.panInsideBounds(e)),this},panInsideBounds:function(e){e=n.latLngBounds(e);var t=this.getBounds(),r=this.project(t.getSouthWest()),i=this.project(t.getNorthEast()),s=this.project(e.getSouthWest()),o=this.project(e.getNorthEast()),u=0,a=0;return i.y<o.y&&(a=o.y-i.y),i.x>o.x&&(u=o.x-i.x),r.y>s.y&&(a=s.y-r.y),r.x<s.x&&(u=s.x-r.x),this.panBy(new n.Point(u,a,!0))},addLayer:function(e){var t=n.Util.stamp(e);if(this._layers[t])return this;this._layers[t]=e,e.options&&!isNaN(e.options.maxZoom)&&(this._layersMaxZoom=Math.max(this._layersMaxZoom||0,e.options.maxZoom)),e.options&&!isNaN(e.options.minZoom)&&(this._layersMinZoom=Math.min(this._layersMinZoom||Infinity,e.options.minZoom)),this.options.zoomAnimation&&n.TileLayer&&e instanceof n.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this));var r=function(){e.onAdd(this),this.fire("layeradd",{layer:e})};return this._loaded?r.call(this):this.on("load",r,this),this},removeLayer:function(e){var t=n.Util.stamp(e);if(!this._layers[t])return;return e.onRemove(this),delete this._layers[t],this.options.zoomAnimation&&n.TileLayer&&e instanceof n.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this.fire("layerremove",{layer:e})},hasLayer:function(e){var t=n.Util.stamp(e);return this._layers.hasOwnProperty(t)},invalidateSize:function(e){var t=this.getSize();this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds);if(!this._loaded)return this;var r=t.subtract(this.getSize()).divideBy(2,!0);return e===!0?this.panBy(r):(this._rawPanBy(r),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n.Util.bind(this.fire,this,"moveend"),200)),this},addHandler:function(e,t){if(!t)return;return this[e]=new t(this),this.options[e]&&this[e].enable(),this},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),r=this.unproject(e.getTopRight());return new n.LatLngBounds(t,r)},getMinZoom:function(){var e=this.options.minZoom||0,t=this._layersMinZoom||0,n=this._boundsMinZoom||0;return Math.max(e,t,n)},getMaxZoom:function(){var e=this.options.maxZoom===t?Infinity:this.options.maxZoom,n=this._layersMaxZoom===t?Infinity:this._layersMaxZoom;return Math.min(e,n)},getBoundsZoom:function(e,t){e=n.latLngBounds(e);var r=this.getSize(),i=this.options.minZoom||0,s=this.getMaxZoom(),o=e.getNorthEast(),u=e.getSouthWest(),a,f,l,c=!0;t&&i--;do i++,f=this.project(o,i),l=this.project(u,i),a=new n.Point(Math.abs(f.x-l.x),Math.abs(l.y-f.y)),t?c=a.x<r.x||a.y<r.y:c=a.x<=r.x&&a.y<=r.y;while(c&&i<=s);return c&&t?null:t?i:i-1},getSize:function(){if(!this._size||this._sizeChanged)this._size=new n.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1;return this._size},getPixelBounds:function(){var e=this._getTopLeftPoint();return new n.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,r){return r=r===t?this._zoom:r,this.options.crs.latLngToPoint(n.latLng(e),r)},unproject:function(e,r){return r=r===t?this._zoom:r,this.options.crs.pointToLatLng(n.point(e),r)},layerPointToLatLng:function(e){var t=n.point(e).add(this._initialTopLeftPoint);return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(n.latLng(e))._round();return t._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(e){return n.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return n.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(n.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(n.latLng(e)))},mouseEventToContainerPoint:function(e){return n.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=n.DomUtil.get(e);if(t._leaflet)throw Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;e.innerHTML="",n.DomUtil.addClass(e,"leaflet-container"),n.Browser.touch&&n.DomUtil.addClass(e,"leaflet-touch"),this.options.fadeAnimation&&n.DomUtil.addClass(e,"leaflet-fade-anim");var t=n.DomUtil.getStyle(e,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),this._objectsPane=e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(n.DomUtil.addClass(e.markerPane,t),n.DomUtil.addClass(e.shadowPane,t),n.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return n.DomUtil.create("div",e,t||this._objectsPane)},_initializers:[],_initHooks:function(){var e,t;for(e=0,t=this._initializers.length;e<t;e++)this._initializers[e].call(this)},_initLayers:function(e){e=e?e instanceof Array?e:[e]:[],this._layers={},this._tileLayersNum=0;var t,n;for(t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_resetView:function(e,t,r,i){var s=this._zoom!==t;i||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),r?this._initialTopLeftPoint._add(this._getMapPanePos()):n.DomUtil.setPosition(this._mapPane,new n.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum,this.fire("viewreset",{hard:!r}),this.fire("move"),(s||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!r}),this._loaded||(this._loaded=!0,this.fire("load"))},_rawPanBy:function(e){n.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_initEvents:function(){if(!n.DomEvent)return;n.DomEvent.on(this._container,"click",this._onMouseClick,this);var t=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"],r,i;for(r=0,i=t.length;r<i;r++)n.DomEvent.on(this._container,t[r],this._fireMouseEvent,this);this.options.trackResize&&n.DomEvent.on(e,"resize",this._onResize,this)},_onResize:function(){n.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=n.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(e){if(!this._loaded||this.dragging&&this.dragging.moved())return;this.fire("preclick"),this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(!this._loaded)return;var t=e.type;t=t==="mouseenter"?"mouseover":t==="mouseleave"?"mouseout":t;if(!this.hasEventListeners(t))return;t==="contextmenu"&&n.DomEvent.preventDefault(e);var r=this.mouseEventToContainerPoint(e),i=this.containerPointToLayerPoint(r),s=this.layerPointToLatLng(i);this.fire(t,{latlng:s,layerPoint:i,containerPoint:r,originalEvent:e})},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(n.Util.bind(this._clearTileBg,this),500))},_getMapPanePos:function(){return n.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded)throw Error("Set map center and zoom first.");return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var n=this.getSize().divideBy(2);return this.project(e,t)._subtract(n)._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewTopLeftPoint(n,t).add(this._getMapPanePos());return this.project(e,t)._subtract(r)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize().divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom();return Math.max(t,Math.min(n,e))}}),n.Map.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n=typeof e=="function"?e:function(){this[e].apply(this,t)};this.prototype._initializers.push(n)},n.map=function(e,t){return new n.Map(e,t)},n.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(e){var t=n.LatLng.DEG_TO_RAD,r=this.MAX_LATITUDE,i=Math.max(Math.min(r,e.lat),-r),s=this.R_MAJOR,o=this.R_MINOR,u=e.lng*t*s,a=i*t,f=o/s,l=Math.sqrt(1-f*f),c=l*Math.sin(a);c=Math.pow((1-c)/(1+c),l*.5);var h=Math.tan(.5*(Math.PI*.5-a))/c;return a=-o*Math.log(h),new n.Point(u,a)},unproject:function(e){var t=n.LatLng.RAD_TO_DEG,r=this.R_MAJOR,i=this.R_MINOR,s=e.x*t/r,o=i/r,u=Math.sqrt(1-o*o),a=Math.exp(-e.y/i),f=Math.PI/2-2*Math.atan(a),l=15,c=1e-7,h=l,p=.1,d;while(Math.abs(p)>c&&--h>0)d=u*Math.sin(f),p=Math.PI/2-2*Math.atan(a*Math.pow((1-d)/(1+d),.5*u))-f,f+=p;return new n.LatLng(f*t,s,!0)}},n.CRS.EPSG3395=n.Util.extend({},n.CRS,{code:"EPSG:3395",projection:n.Projection.Mercator,transformation:function(){var e=n.Projection.Mercator,t=e.R_MAJOR,r=e.R_MINOR;return new n.Transformation(.5/(Math.PI*t),.5,-0.5/(Math.PI*r),.5)}()}),n.TileLayer=n.Class.extend({includes:n.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:n.Browser.mobile,updateWhenIdle:n.Browser.mobile},initialize:function(e,t){t=n.Util.setOptions(this,t),t.detectRetina&&n.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--),this._url=e;var r=this.options.subdomains;typeof r=="string"&&(this.options.subdomains=r.split(""))},onAdd:function(e){this._map=e,this._initContainer(),this._createTileProto(),e.on({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||(this._limitedUpdate=n.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._panes.tilePane.removeChild(this._container),e.off({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._map._panes.tilePane.empty=!1,this._reset(!0),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==t&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){var n=e.getElementsByClassName("leaflet-layer"),r=-t(Infinity,-Infinity),i;for(var s=0,o=n.length;s<o;s++)n[s]!==this._container&&(i=parseInt(n[s].style.zIndex,10),isNaN(i)||(r=t(r,i)));this._container.style.zIndex=isFinite(r)?r+t(1,-1):""},_updateOpacity:function(){n.DomUtil.setOpacity(this._container,this.options.opacity);var e,t=this._tiles;if(n.Browser.webkit)for(e in t)t.hasOwnProperty(e)&&(t[e].style.webkitTransform+=" translate(0,0)")},_initContainer:function(){var e=this._map._panes.tilePane;if(!this._container||e.empty)this._container=n.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()},_resetCallback:function(e){this._reset(e.hard)},_reset:function(e){var t,n=this._tiles;for(t in n)n.hasOwnProperty(t)&&this.fire("tileunload",{tile:n[t]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),e&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(e){if(this._map._panTransition&&this._map._panTransition._inProgress)return;var t=this._map.getPixelBounds(),r=this._map.getZoom(),i=this.options.tileSize;if(r>this.options.maxZoom||r<this.options.minZoom)return;var s=new n.Point(Math.floor(t.min.x/i),Math.floor(t.min.y/i)),o=new n.Point(Math.floor(t.max.x/i),Math.floor(t.max.y/i)),u=new n.Bounds(s,o);this._addTilesFromCenterOut(u),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(u)},_addTilesFromCenterOut:function(e){var t=[],r=e.getCenter(),i,s,o;for(i=e.min.y;i<=e.max.y;i++)for(s=e.min.x;s<=e.max.x;s++)o=new n.Point(s,i),this._tileShouldBeLoaded(o)&&t.push(o);var u=t.length;if(u===0)return;t.sort(function(e,t){return e.distanceTo(r)-t.distanceTo(r)});var a=document.createDocumentFragment();this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=u;for(s=0;s<u;s++)this._addTile(t[s],a);this._container.appendChild(a)},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;if(!this.options.continuousWorld){var t=this._getWrapTileNum();if(this.options.noWrap&&(e.x<0||e.x>=t)||e.y<0||e.y>=t)return!1}return!0},_removeOtherTiles:function(e){var t,n,r,i;for(i in this._tiles)this._tiles.hasOwnProperty(i)&&(t=i.split(":"),n=parseInt(t[0],10),r=parseInt(t[1],10),(n<e.min.x||n>e.max.x||r<e.min.y||r>e.max.y)&&this._removeTile(i))},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(n.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._container&&this._container.removeChild(t),n.Browser.android||(t.src=n.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var r=this._getTilePos(e),i=this._getTile();n.DomUtil.setPosition(i,r,n.Browser.chrome||n.Browser.android23),this._tiles[e.x+":"+e.y]=i,this._loadTile(i,e),i.parentNode!==this._container&&t.appendChild(i)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+e.zoomOffset},_getTilePos:function(e){var t=this._map.getPixelOrigin(),n=this.options.tileSize;return e.multiplyBy(n).subtract(t)},getTileUrl:function(e){return this._adjustTilePoint(e),n.Util.template(this._url,n.Util.extend({s:this._getSubdomain(e),z:this._getZoomForUrl(),x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(e){var t=this._getWrapTileNum();!this.options.continuousWorld&&!this.options.noWrap&&(e.x=(e.x%t+t)%t),this.options.tms&&(e.y=t-e.y-1)},_getSubdomain:function(e){var t=(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_createTileProto:function(){var e=this._tileImg=n.DomUtil.create("img","leaflet-tile");e.galleryimg="no";var t=this.options.tileSize;e.style.width=t+"px",e.style.height=t+"px"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(e){},_createTile:function(){var e=this._tileImg.cloneNode(!1);return e.onselectstart=e.onmousemove=n.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,e.src=this.getTileUrl(t)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||this.fire("load")},_tileOnLoad:function(e){var t=this._layer;this.src!==n.Util.emptyImageUrl&&(n.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(e){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var n=t.options.errorTileUrl;n&&(this.src=n),t._tileLoaded()}}),n.tileLayer=function(e,t){return new n.TileLayer(e,t)},n.TileLayer.WMS=n.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var r=n.Util.extend({},this.defaultWmsParams);t.detectRetina&&n.Browser.retina?r.width=r.height=this.options.tileSize*2:r.width=r.height=this.options.tileSize;for(var i in t)this.options.hasOwnProperty(i)||(r[i]=t[i]);this.wmsParams=r,n.Util.setOptions(this,t)},onAdd:function(e){var t=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[t]=e.options.crs.code,n.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e,t){var r=this._map,i=r.options.crs,s=this.options.tileSize,o=e.multiplyBy(s),u=o.add(new n.Point(s,s)),a=i.project(r.unproject(o,t)),f=i.project(r.unproject(u,t)),l=[a.x,f.y,f.x,a.y].join(","),c=n.Util.template(this._url,{s:this._getSubdomain(e)});return c+n.Util.getParamString(this.wmsParams)+"&bbox="+l},setParams:function(e,t){return n.Util.extend(this.wmsParams,e),t||this.redraw(),this}}),n.tileLayer.wms=function(e,t){return new n.TileLayer.WMS(e,t)},n.TileLayer.Canvas=n.TileLayer.extend({options:{async:!1},initialize:function(e){n.Util.setOptions(this,e)},redraw:function(){var e,t=this._tiles;for(e in t)t.hasOwnProperty(e)&&this._redrawTile(t[e])},_redrawTile:function(e){this.drawTile(e,e._tilePoint,e._zoom)},_createTileProto:function(){var e=this._canvasProto=n.DomUtil.create("canvas","leaflet-tile"),t=this.options.tileSize;e.width=t,e.height=t},_createTile:function(){var e=this._canvasProto.cloneNode(!1);return e.onselectstart=e.onmousemove=n.Util.falseFn,e},_loadTile:function(e,t,n){e._layer=this,e._tilePoint=t,e._zoom=n,this.drawTile(e,t,n),this.options.async||this.tileDrawn(e)},drawTile:function(e,t,n){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),n.tileLayer.canvas=function(e){return new n.TileLayer.Canvas(e)},n.ImageOverlay=n.Class.extend({includes:n.Mixin.Events,options:{opacity:1},initialize:function(e,t,r){this._url=e,this._bounds=n.latLngBounds(t),n.Util.setOptions(this,r)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&n.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},_initImage:function(){this._image=n.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&n.Browser.any3d?n.DomUtil.addClass(this._image,"leaflet-zoom-animated"):n.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),n.Util.extend(this._image,{galleryimg:"no",onselectstart:n.Util.falseFn,onmousemove:n.Util.falseFn,onload:n.Util.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,r=this._image,i=t.getZoomScale(e.zoom),s=this._bounds.getNorthWest(),o=this._bounds.getSouthEast(),u=t._latLngToNewLayerPoint(s,e.zoom,e.center),a=t._latLngToNewLayerPoint(o,e.zoom,e.center).subtract(u),f=t.latLngToLayerPoint(o).subtract(t.latLngToLayerPoint(s)),l=u.add(a.subtract(f).divideBy(2));r.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(l)+" scale("+i+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),r=this._map.latLngToLayerPoint(this._bounds.getSouthEast()).subtract(t);n.DomUtil.setPosition(e,t),e.style.width=r.x+"px",e.style.height=r.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){n.DomUtil.setOpacity(this._image,this.options.opacity)}}),n.imageOverlay=function(e,t,r){return new n.ImageOverlay(e,t,r)},n.Icon=n.Class.extend({options:{className:""},initialize:function(e){n.Util.setOptions(this,e)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(e){var t=this._getIconUrl(e);if(!t){if(e==="icon")throw Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(t);return this._setIconStyles(n,e),n},_setIconStyles:function(e,t){var r=this.options,i=n.point(r[t+"Size"]),s;t==="shadow"?s=n.point(r.shadowAnchor||r.iconAnchor):s=n.point(r.iconAnchor),!s&&i&&(s=i.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+r.className,s&&(e.style.marginLeft=-s.x+"px",e.style.marginTop=-s.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e){var t;return n.Browser.ie6?(t=document.createElement("div"),t.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e+'")'):(t=document.createElement("img"),t.src=e),t},_getIconUrl:function(e){return this.options[e+"Url"]}}),n.icon=function(e){return new n.Icon(e)},n.Icon.Default=n.Icon.extend({options:{iconSize:new n.Point(25,41),iconAnchor:new n.Point(13,41),popupAnchor:new n.Point(1,-34),shadowSize:new n.Point(41,41)},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];var r=n.Icon.Default.imagePath;if(!r)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return r+"/marker-"+e+".png"}}),n.Icon.Default.imagePath=function(){var e=document.getElementsByTagName("script"),t=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/,n,r,i,s;for(n=0,r=e.length;n<r;n++){i=e[n].src,s=i.match(t);if(s)return i.split(t)[0]+"/images"}}(),n.Marker=n.Class.extend({includes:n.Mixin.Events,options:{icon:new n.Icon.Default,title:"",clickable:!0,draggable:!1,zIndexOffset:0,opacity:1},initialize:function(e,t){n.Util.setOptions(this,t),this._latlng=n.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._removeIcon(),this.closePopup&&this.closePopup(),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){this._latlng=n.latLng(e),this.update(),this._popup&&this._popup.setLatLng(e)},setZIndexOffset:function(e){this.options.zIndexOffset=e,this.update()},setIcon:function(e){this._map&&this._removeIcon(),this.options.icon=e,this._map&&(this._initIcon(),this.update())},update:function(){if(!this._icon)return;var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)},_initIcon:function(){var e=this.options,t=this._map,r=t.options.zoomAnimation&&t.options.markerZoomAnimation,i=r?"leaflet-zoom-animated":"leaflet-zoom-hide",s=!1;this._icon||(this._icon=e.icon.createIcon(),e.title&&(this._icon.title=e.title),this._initInteraction(),s=this.options.opacity<1,n.DomUtil.addClass(this._icon,i)),this._shadow||(this._shadow=e.icon.createShadow(),this._shadow&&(n.DomUtil.addClass(this._shadow,i),s=this.options.opacity<1)),s&&this._updateOpacity();var o=this._map._panes;o.markerPane.appendChild(this._icon),this._shadow&&o.shadowPane.appendChild(this._shadow)},_removeIcon:function(){var e=this._map._panes;e.markerPane.removeChild(this._icon),this._shadow&&e.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_setPos:function(e){n.DomUtil.setPosition(this._icon,e),this._shadow&&n.DomUtil.setPosition(this._shadow,e),this._icon.style.zIndex=e.y+this.options.zIndexOffset},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPos(t)},_initInteraction:function(){if(!this.options.clickable)return;var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout"];n.DomUtil.addClass(e,"leaflet-clickable"),n.DomEvent.on(e,"click",this._onMouseClick,this);for(var r=0;r<t.length;r++)n.DomEvent.on(e,t[r],this._fireMouseEvent,this);n.Handler.MarkerDrag&&(this.dragging=new n.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())},_onMouseClick:function(e){n.DomEvent.stopPropagation(e);if(this.dragging&&this.dragging.moved())return;if(this._map.dragging&&this._map.dragging.moved())return;this.fire(e.type,{originalEvent:e})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e}),e.type!=="mousedown"&&n.DomEvent.stopPropagation(e)},setOpacity:function(e){this.options.opacity=e,this._map&&this._updateOpacity()},_updateOpacity:function(){n.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&n.DomUtil.setOpacity(this._shadow,this.options.opacity)}}),n.marker=function(e,t){return new n.Marker(e,t)},n.DivIcon=n.Icon.extend({options:{iconSize:new n.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var e=document.createElement("div"),t=this.options;return t.html&&(e.innerHTML=t.html),t.bgPos&&(e.style.backgroundPosition=-t.bgPos.x+"px "+ -t.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),n.divIcon=function(e){return new n.DivIcon(e)},n.Map.mergeOptions({closePopupOnClick:!0}),n.Popup=n.Class.extend({includes:n.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:new n.Point(0,6),autoPanPadding:new n.Point(5,5),className:""},initialize:function(e,t){n.Util.setOptions(this,e),this._source=t},onAdd:function(e){this._map=e,this._container||this._initLayout(),this._updateContent();var t=e.options.fadeAnimation;t&&n.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on("viewreset",this._updatePosition,this),n.Browser.any3d&&e.on("zoomanim",this._zoomAnimation,this),e.options.closePopupOnClick&&e.on("preclick",this._close,this),this._update(),t&&n.DomUtil.setOpacity(this._container,1)},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),n.Util.falseFn(this._container.offsetWidth),e.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this),e.options.fadeAnimation&&n.DomUtil.setOpacity(this._container,0),this._map=null},setLatLng:function(e){return this._latlng=n.latLng(e),this._update(),this},setContent:function(e){return this._content=e,this._update(),this},_close:function(){var e=this._map;e&&(e._popup=null,e.removeLayer(this).fire("popupclose",{popup:this}))},_initLayout:function(){var e="leaflet-popup",t=this._container=n.DomUtil.create("div",e+" "+this.options.className+" leaflet-zoom-animated"),r;this.options.closeButton&&(r=this._closeButton=n.DomUtil.create("a",e+"-close-button",t),r.href="#close",r.innerHTML="&#215;",n.DomEvent.on(r,"click",this._onCloseButtonClick,this));var i=this._wrapper=n.DomUtil.create("div",e+"-content-wrapper",t);n.DomEvent.disableClickPropagation(i),this._contentNode=n.DomUtil.create("div",e+"-content",i),n.DomEvent.on(this._contentNode,"mousewheel",n.DomEvent.stopPropagation),this._tipContainer=n.DomUtil.create("div",e+"-tip-container",t),this._tip=n.DomUtil.create("div",e+"-tip",this._tipContainer)},_update:function(){if(!this._map)return;this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan()},_updateContent:function(){if(!this._content)return;if(typeof this._content=="string")this._contentNode.innerHTML=this._content;else{while(this._contentNode.hasChildNodes())this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var r=e.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),t.width=r+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,s=this.options.maxHeight,o="leaflet-popup-scrolled";s&&i>s?(t.height=s+"px",n.DomUtil.addClass(e,o)):n.DomUtil.removeClass(e,o),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng),t=n.Browser.any3d,r=this.options.offset;t&&n.DomUtil.setPosition(this._container,e),this._containerBottom=-r.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+r.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);n.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(!this.options.autoPan)return;var e=this._map,t=this._container.offsetHeight,r=this._containerWidth,i=new n.Point(this._containerLeft,-t-this._containerBottom);n.Browser.any3d&&i._add(n.DomUtil.getPosition(this._container));var s=e.layerPointToContainerPoint(i),o=this.options.autoPanPadding,u=e.getSize(),a=0,f=0;s.x<0&&(a=s.x-o.x),s.x+r>u.x&&(a=s.x+r-u.x+o.x),s.y<0&&(f=s.y-o.y),s.y+t>u.y&&(f=s.y+t-u.y+o.y),(a||f)&&e.panBy(new n.Point(a,f))},_onCloseButtonClick:function(e){this._close(),n.DomEvent.stop(e)}}),n.popup=function(e,t){return new n.Popup(e,t)},n.Marker.include({openPopup:function(){return this._popup&&this._map&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(e,t){var r=n.point(this.options.icon.options.popupAnchor)||new n.Point(0,0);return r=r.add(n.Popup.prototype.options.offset),t&&t.offset&&(r=r.add(t.offset)),t=n.Util.extend({offset:r},t),this._popup||this.on("click",this.openPopup,this),this._popup=(new n.Popup(t,this)).setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup)),this}}),n.Map.include({openPopup:function(e){return this.closePopup(),this._popup=e,this.addLayer(e).fire("popupopen",{popup:this._popup})},closePopup:function(){return this._popup&&this._popup._close(),this}}),n.LayerGroup=n.Class.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;t<n;t++)this.addLayer(e[t])},addLayer:function(e){var t=n.Util.stamp(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=n.Util.stamp(e);return delete this._layers[t],this._map&&this._map.removeLayer(e),this},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),n,r;for(n in this._layers)this._layers.hasOwnProperty(n)&&(r=this._layers[n],r[e]&&r[e].apply(r,t));return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var n in this._layers)this._layers.hasOwnProperty(n)&&e.call(t,this._layers[n])}}),n.layerGroup=function(e){return new n.LayerGroup(e)},n.FeatureGroup=n.LayerGroup.extend({includes:n.Mixin.Events,addLayer:function(e){return this._layers[n.Util.stamp(e)]?this:(e.on("click dblclick mouseover mouseout mousemove contextmenu",this._propagateEvent,this),n.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent),this)},removeLayer:function(e){return e.off("click dblclick mouseover mouseout mousemove contextmenu",this._propagateEvent,this),n.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent?this.invoke("unbindPopup"):this},bindPopup:function(e){return this._popupContent=e,this.invoke("bindPopup",e)},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new n.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof n.Marker?t.getLatLng():t.getBounds())},this),e},_propagateEvent:function(e){e.layer=e.target,e.target=this,this.fire(e.type,e)}}),n.featureGroup=function(e){return new n.FeatureGroup(e)},n.Path=n.Class.extend({includes:[n.Mixin.Events],statics:{CLIP_PADDING:n.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(e.innerWidth,e.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){n.Util.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this._map=null,n.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return n.Util.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),n.Map.include({_updatePathViewport:function(){var e=n.Path.CLIP_PADDING,t=this.getSize(),r=n.DomUtil.getPosition(this._mapPane),i=r.multiplyBy(-1)._subtract(t.multiplyBy(e)),s=i.add(t.multiplyBy(1+e*2));this._pathViewport=new n.Bounds(i,s)}}),n.Path.SVG_NS="http://www.w3.org/2000/svg",n.Browser.svg=!!document.createElementNS&&!!document.createElementNS(n.Path.SVG_NS,"svg").createSVGRect,n.Path=n.Path.extend({statics:{SVG:n.Browser.svg},bringToFront:function(){return this._container&&this._map._pathRoot.appendChild(this._container),this},bringToBack:function(){if(this._container){var e=this._map._pathRoot;e.insertBefore(this._container,e.firstChild)}return this},getPathString:function(){},_createElement:function(e){return document.createElementNS(n.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(n.Browser.svg||!n.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),n.DomEvent.on(this._container,"click",this._onMouseClick,this);var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"];for(var t=0;t<e.length;t++)n.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){if(this._map.dragging&&this._map.dragging.moved())return;this._fireMouseEvent(e),n.DomEvent.stopPropagation(e)},_fireMouseEvent:function(e){if(!this.hasEventListeners(e.type))return;e.type==="contextmenu"&&n.DomEvent.preventDefault(e);var t=this._map,r=t.mouseEventToContainerPoint(e),i=t.containerPointToLayerPoint(r),s=t.layerPointToLatLng(i);this.fire(e.type,{latlng:s,layerPoint:i,containerPoint:r,originalEvent:e})}}),n.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=n.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&n.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),r=this._getCenterOffset(e.center).divideBy(1-1/t),i=this.containerPointToLayerPoint(this.getSize().multiplyBy(-n.Path.CLIP_PADDING)),s=i.add(r).round();this._pathRoot.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(s.multiplyBy(-1).add(n.DomUtil.getPosition(this._pathRoot)).multiplyBy(t).add(s))+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(this._pathZooming)return;this._updatePathViewport();var e=this._pathViewport,t=e.min,r=e.max,i=r.x-t.x,s=r.y-t.y,o=this._pathRoot,u=this._panes.overlayPane;n.Browser.mobileWebkit&&u.removeChild(o),n.DomUtil.setPosition(o,t),o.setAttribute("width",i),o.setAttribute("height",s),o.setAttribute("viewBox",[t.x,t.y,i,s].join(" ")),n.Browser.mobileWebkit&&u.appendChild(o)}}),n.Path.include({bindPopup:function(e,t){if(!this._popup||this._popup.options!==t)this._popup=new n.Popup(t,this);return this._popup.setContent(e),this._openPopupAdded||(this.on("click",this._openPopup,this),this._openPopupAdded=!0),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),n.Browser.vml=function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&typeof t.adj=="object"}catch(n){return!1}}(),n.Path=n.Browser.svg||!n.Browser.vml?n.Path:n.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");n.DomUtil.addClass(e,"leaflet-vml-shape"),this.options.clickable&&n.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,n=this.options,r=this._container;r.stroked=n.stroke,r.filled=n.fill,n.stroke?(e||(e=this._stroke=this._createElement("stroke"),e.endcap="round",r.appendChild(e)),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=n.dashArray.replace(/ *, */g," "):e.dashStyle=""):e&&(r.removeChild(e),this._stroke=null),n.fill?(t||(t=this._fill=this._createElement("fill"),r.appendChild(t)),t.color=n.fillColor||n.color,t.opacity=n.fillOpacity):t&&(r.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),n.Map.include(n.Browser.svg||!n.Browser.vml?{}:{_initPathRoot:function(){if(this._pathRoot)return;var e=this._pathRoot=document.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}),n.Browser.canvas=function(){return!!document.createElement("canvas").getContext}(),n.Path=n.Path.SVG&&!e.L_PREFER_CANVAS||!n.Browser.canvas?n.Path:n.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return n.Util.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&(n.Util.cancelAnimFrame(this._fireMapMoveEnd),this._updateRequest=n.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color)},_drawPath:function(){var e,t,r,i,s,o;this._ctx.beginPath();for(e=0,r=this._parts.length;e<r;e++){for(t=0,i=this._parts[e].length;t<i;t++)s=this._parts[e][t],o=(t===0?"move":"line")+"To",this._ctx[o](s.x,s.y);this instanceof n.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(this._checkIfEmpty())return;var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(t.fillOpacity<1&&(e.globalAlpha=t.fillOpacity),e.fill()),t.stroke&&(t.opacity<1&&(e.globalAlpha=t.opacity),e.stroke()),e.restore()},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(e){this._containsPoint(e.layerPoint)&&this.fire("click",e)}}),n.Map.include(n.Path.SVG&&!e.L_PREFER_CANVAS||!n.Browser.canvas?{}:{_initPathRoot:function(){var e=this._pathRoot,t;e||(e=this._pathRoot=document.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(this._pathZooming)return;this._updatePathViewport();var e=this._pathViewport,t=e.min,r=e.max.subtract(t),i=this._pathRoot;n.DomUtil.setPosition(i,t),i.width=r.x,i.height=r.y,i.getContext("2d").translate(-t.x,-t.y)}}),n.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=this._reducePoints(e,n),e=this._simplifyDP(e,n),e},pointToSegmentDistance:function(e,t,n){return Math.sqrt(this._sqClosestPointOnSegment(e,t,n,!0))},closestPointOnSegment:function(e,t,n){return this._sqClosestPointOnSegment(e,t,n)},_simplifyDP:function(e,n){var r=e.length,i=typeof Uint8Array!=t+""?Uint8Array:Array,s=new i(r);s[0]=s[r-1]=1,this._simplifyDPStep(e,s,n,0,r-1);var o,u=[];for(o=0;o<r;o++)s[o]&&u.push(e[o]);return u},_simplifyDPStep:function(e,t,n,r,i){var s=0,o,u,a;for(u=r+1;u<=i-1;u++)a=this._sqClosestPointOnSegment(e[u],e[r],e[i],!0),a>s&&(o=u,s=a);s>n&&(t[o]=1,this._simplifyDPStep(e,t,n,r,o),this._simplifyDPStep(e,t,n,o,i))},_reducePoints:function(e,t){var n=[e[0]];for(var r=1,i=0,s=e.length;r<s;r++)this._sqDist(e[r],e[i])>t&&(n.push(e[r]),i=r);return i<s-1&&n.push(e[s-1]),n},clipSegment:function(e,t,n,r){var i=n.min,s=n.max,o=r?this._lastCode:this._getBitCode(e,n),u=this._getBitCode(t,n);this._lastCode=u;for(;;){if(!(o|u))return[e,t];if(o&u)return!1;var a=o||u,f=this._getEdgeIntersection(e,t,a,n),l=this._getBitCode(f,n);a===o?(e=f,o=l):(t=f,u=l)}},_getEdgeIntersection:function(e,t,r,i){var s=t.x-e.x,o=t.y-e.y,u=i.min,a=i.max;if(r&8)return new n.Point(e.x+s*(a.y-e.y)/o,a.y);if(r&4)return new n.Point(e.x+s*(u.y-e.y)/o,u.y);if(r&2)return new n.Point(a.x,e.y+o*(a.x-e.x)/s);if(r&1)return new n.Point(u.x,e.y+o*(u.x-e.x)/s)},_getBitCode:function(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n},_sqDist:function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},_sqClosestPointOnSegment:function(e,t,r,i){var s=t.x,o=t.y,u=r.x-s,a=r.y-o,f=u*u+a*a,l;return f>0&&(l=((e.x-s)*u+(e.y-o)*a)/f,l>1?(s=r.x,o=r.y):l>0&&(s+=u*l,o+=a*l)),u=e.x-s,a=e.y-o,i?u*u+a*a:new n.Point(s,o)}},n.Polyline=n.Path.extend({initialize:function(e,t){n.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e),n.Handler.PolyEdit&&(this.editing=new n.Handler.PolyEdit(this),this.options.editable&&this.editing.enable())},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;e<t;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,n="";e<t;e++)n+=this._getPathPartStr(this._parts[e]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(n.latLng(e)),this.redraw()},spliceLatLngs:function(e,t){var n=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs),this.redraw(),n},closestLayerPoint:function(e){var t=Infinity,r=this._parts,i,s,o=null;for(var u=0,a=r.length;u<a;u++){var f=r[u];for(var l=1,c=f.length;l<c;l++){i=f[l-1],s=f[l];var h=n.LineUtil._sqClosestPointOnSegment(e,i,s,!0);h<t&&(t=h,o=n.LineUtil._sqClosestPointOnSegment(e,i,s))}}return o&&(o.distance=Math.sqrt(t)),o},getBounds:function(){var e=new n.LatLngBounds,t=this.getLatLngs();for(var r=0,i=t.length;r<i;r++)e.extend(t[r]);return e},onAdd:function(e){n.Path.prototype.onAdd.call(this,e),this.editing&&this.editing.enabled()&&this.editing.addHooks()},onRemove:function(e){this.editing&&this.editing.enabled()&&this.editing.removeHooks(),n.Path.prototype.onRemove.call(this,e)},_convertLatLngs:function(e){var t,r;for(t=0,r=e.length;t<r;t++){if(e[t]instanceof Array&&typeof e[t][0]!="number")return;e[t]=n.latLng(e[t])}return e},_initEvents:function(){n.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){var t=n.Path.VML;for(var r=0,i=e.length,s="",o;r<i;r++)o=e[r],t&&o._round(),s+=(r?"L":"M")+o.x+" "+o.y;return s},_clipPoints:function(){var e=this._originalPoints,t=e.length,r,i,s;if(this.options.noClip){this._parts=[e];return}this._parts=[];var o=this._parts,u=this._map._pathViewport,a=n.LineUtil;for(r=0,i=0;r<t-1;r++){s=a.clipSegment(e[r],e[r+1],u,r);if(!s)continue;o[i]=o[i]||[],o[i].push(s[0]);if(s[1]!==e[r+1]||r===t-2)o[i].push(s[1]),i++}},_simplifyPoints:function(){var e=this._parts,t=n.LineUtil;for(var r=0,i=e.length;r<i;r++)e[r]=t.simplify(e[r],this.options.smoothFactor)},_updatePath:function(){if(!this._map)return;this._clipPoints(),this._simplifyPoints(),n.Path.prototype._updatePath.call(this)}}),n.polyline=function(e,t){return new n.Polyline(e,t)},n.PolyUtil={},n.PolyUtil.clipPolygon=function(e,t){var r=t.min,i=t.max,s,o=[1,4,2,8],u,a,f,l,c,h,p,d,v=n.LineUtil;for(u=0,h=e.length;u<h;u++)e[u]._code=v._getBitCode(e[u],t);for(f=0;f<4;f++){p=o[f],s=[];for(u=0,h=e.length,a=h-1;u<h;a=u++)l=e[u],c=e[a],l._code&p?c._code&p||(d=v._getEdgeIntersection(c,l,p,t),d._code=v._getBitCode(d,t),s.push(d)):(c._code&p&&(d=v._getEdgeIntersection(c,l,p,t),d._code=v._getBitCode(d,t),s.push(d)),s.push(l));e=s}return e},n.Polygon=n.Polyline.extend({options:{fill:!0},initialize:function(e,t){n.Polyline.prototype.initialize.call(this,e,t),e&&e[0]instanceof Array&&typeof e[0][0]!="number"&&(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1))},projectLatlngs:function(){n.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[];if(!this._holes)return;for(var e=0,t=this._holes.length,r;e<t;e++){this._holePoints[e]=[];for(var i=0,s=this._holes[e].length;i<s;i++)this._holePoints[e][i]=this._map.latLngToLayerPoint(this._holes[e][i])}},_clipPoints:function(){var e=this._originalPoints,t=[];this._parts=[e].concat(this._holePoints);if(this.options.noClip)return;for(var r=0,i=this._parts.length;r<i;r++){var s=n.PolyUtil.clipPolygon(this._parts[r],this._map._pathViewport);if(!s.length)continue;t.push(s)}this._parts=t},_getPathPartStr:function(e){var t=n.Polyline.prototype._getPathPartStr.call(this,e);return t+(n.Browser.svg?"z":"x")}}),n.polygon=function(e,t){return new n.Polygon(e,t)},function(){function e(e){return n.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var n=0,r=t.length;this.eachLayer(function(e){n<r?e.setLatLngs(t[n++]):this.removeLayer(e)},this);while(n<r)this.addLayer(new e(t[n++],this._options));return this}})}n.MultiPolyline=e(n.Polyline),n.MultiPolygon=e(n.Polygon),n.multiPolyline=function(e,t){return new n.MultiPolyline(e,t)},n.multiPolygon=function(e,t){return new n.MultiPolygon(e,t)}}(),n.Rectangle=n.Polygon.extend({initialize:function(e,t){n.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=n.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast(),e.getSouthWest()]}}),n.rectangle=function(e,t){return new n.Rectangle(e,t)},n.Circle=n.Path.extend({initialize:function(e,t,r){n.Path.prototype.initialize.call(this,r),this._latlng=n.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=n.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),t=new n.LatLng(this._latlng.lat,this._latlng.lng-e,!0),r=this._map.latLngToLayerPoint(t);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.max(Math.round(this._point.x-r.x),1)},getBounds:function(){var e=this._map,t=this._radius*Math.cos(Math.PI/4),r=e.project(this._latlng),i=new n.Point(r.x-t,r.y+t),s=new n.Point(r.x+t,r.y-t),o=e.unproject(i),u=e.unproject(s);return new n.LatLngBounds(o,u)},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":n.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,"+23592600)},getRadius:function(){return this._mRadius},_getLngRadius:function(){var e=40075017,t=e*Math.cos(n.LatLng.DEG_TO_RAD*this._latlng.lat);return this._mRadius/t*360},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,n=this._point;return n.x-t>e.max.x||n.y-t>e.max.y||n.x+t<e.min.x||n.y+t<e.min.y}}),n.circle=function(e,t,r){return new n.Circle(e,t,r)},n.CircleMarker=n.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){n.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},setRadius:function(e){return this._radius=e,this.redraw()}}),n.circleMarker=function(e,t){return new n.CircleMarker(e,t)},n.Polyline.include(n.Path.CANVAS?{_containsPoint:function(e,t){var r,i,s,o,u,a,f,l=this.options.weight/2;n.Browser.touch&&(l+=10);for(r=0,o=this._parts.length;r<o;r++){f=this._parts[r];for(i=0,u=f.length,s=u-1;i<u;s=i++){if(!t&&i===0)continue;a=n.LineUtil.pointToSegmentDistance(e,f[s],f[i]);if(a<=l)return!0}}return!1}}:{}),n.Polygon.include(n.Path.CANVAS?{_containsPoint:function(e){var t=!1,r,i,s,o,u,a,f,l;if(n.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(o=0,f=this._parts.length;o<f;o++){r=this._parts[o];for(u=0,l=r.length,a=l-1;u<l;a=u++)i=r[u],s=r[a],i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(t=!t)}return t}}:{}),n.Circle.include(n.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,Math.PI*2,!1)},_containsPoint:function(e){var t=this._point,n=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+n}}:{}),n.GeoJSON=n.FeatureGroup.extend({initialize:function(e,t){n.Util.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=e instanceof Array?e:e.features,r,i;if(t){for(r=0,i=t.length;r<i;r++)this.addData(t[r]);return this}var s=this.options;if(s.filter&&!s.filter(e))return;var o=n.GeoJSON.geometryToLayer(e,s.pointToLayer);return o.feature=e,this.resetStyle(o),s.onEachFeature&&s.onEachFeature(e,o),this.addLayer(o)},resetStyle:function(e){var t=this.options.style;t&&this._setLayerStyle(e,t)},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){typeof t=="function"&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),n.Util.extend(n.GeoJSON,{geometryToLayer:function(e,t){var r=e.type==="Feature"?e.geometry:e,i=r.coordinates,s=[],o,u,a,f,l;switch(r.type){case"Point":return o=this.coordsToLatLng(i),t?t(e,o):new n.Marker(o);case"MultiPoint":for(a=0,f=i.length;a<f;a++)o=this.coordsToLatLng(i[a]),l=t?t(e,o):new n.Marker(o),s.push(l);return new n.FeatureGroup(s);case"LineString":return u=this.coordsToLatLngs(i),new n.Polyline(u);case"Polygon":return u=this.coordsToLatLngs(i,1),new n.Polygon(u);case"MultiLineString":return u=this.coordsToLatLngs(i,1),new n.MultiPolyline(u);case"MultiPolygon":return u=this.coordsToLatLngs(i,2),new n.MultiPolygon(u);case"GeometryCollection":for(a=0,f=r.geometries.length;a<f;a++)l=this.geometryToLayer(r.geometries[a],t),s.push(l);return new n.FeatureGroup(s);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e,t){var r=parseFloat(e[t?0:1]),i=parseFloat(e[t?1:0]);return new n.LatLng(r,i,!0)},coordsToLatLngs:function(e,t,n){var r,i=[],s,o;for(s=0,o=e.length;s<o;s++)r=t?this.coordsToLatLngs(e[s],t-1,n):this.coordsToLatLng(e[s],n),i.push(r);return i}}),n.geoJson=function(e,t){return new n.GeoJSON(e,t)},n.DomEvent={addListener:function(e,t,r,i){var s=n.Util.stamp(r),o="_leaflet_"+t+s,u,a,f;return e[o]?this:(u=function(t){return r.call(i||e,t||n.DomEvent._getEvent())},n.Browser.touch&&t==="dblclick"&&this.addDoubleTapListener?this.addDoubleTapListener(e,u,s):("addEventListener"in e?t==="mousewheel"?(e.addEventListener("DOMMouseScroll",u,!1),e.addEventListener(t,u,!1)):t==="mouseenter"||t==="mouseleave"?(a=u,f=t==="mouseenter"?"mouseover":"mouseout",u=function(t){if(!n.DomEvent._checkMouse(e,t))return;return a(t)},e.addEventListener(f,u,!1)):e.addEventListener(t,u,!1):"attachEvent"in e&&e.attachEvent("on"+t,u),e[o]=u,this))},removeListener:function(e,t,r){var i=n.Util.stamp(r),s="_leaflet_"+t+i,o=e[s];if(!o)return;return n.Browser.touch&&t==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,i):"removeEventListener"in e?t==="mousewheel"?(e.removeEventListener("DOMMouseScroll",o,!1),e.removeEventListener(t,o,!1)):t==="mouseenter"||t==="mouseleave"?e.removeEventListener(t==="mouseenter"?"mouseover":"mouseout",o,!1):e.removeEventListener(t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o),e[s]=null,this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this},disableClickPropagation:function(e){var t=n.DomEvent.stopPropagation;return n.DomEvent.addListener(e,n.Draggable.START,t).addListener(e,"click",t).addListener(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return n.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){var r=document.body,i=document.documentElement,s=e.pageX?e.pageX:e.clientX+r.scrollLeft+i.scrollLeft,o=e.pageY?e.pageY:e.clientY+r.scrollTop+i.scrollTop,u=new n.Point(s,o);return t?u._subtract(n.DomUtil.getViewportOffset(t)):u},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_checkMouse:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{while(n&&n!==e)n=n.parentNode}catch(r){return!1}return n!==e},_getEvent:function(){var t=e.event;if(!t){var n=arguments.callee.caller;while(n){t=n.arguments[0];if(t&&e.Event===t.constructor)break;n=n.caller}}return t}},n.DomEvent.on=n.DomEvent.addListener,n.DomEvent.off=n.DomEvent.removeListener,n.Draggable=n.Class.extend({includes:n.Mixin.Events,statics:{START:n.Browser.touch?"touchstart":"mousedown",END:n.Browser.touch?"touchend":"mouseup",MOVE:n.Browser.touch?"touchmove":"mousemove",TAP_TOLERANCE:15},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){if(this._enabled)return;n.DomEvent.on(this._dragStartTarget,n.Draggable.START,this._onDown,this),this._enabled=!0},disable:function(){if(!this._enabled)return;n.DomEvent.off(this._dragStartTarget,n.Draggable.START,this._onDown),this._enabled=!1,this._moved=!1},_onDown:function(e){if(!n.Browser.touch&&e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)return;this._simulateClick=!0;if(e.touches&&e.touches.length>1){this._simulateClick=!1;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,r=t.target;n.DomEvent.preventDefault(e),n.Browser.touch&&r.tagName.toLowerCase()==="a"&&n.DomUtil.addClass(r,"leaflet-active"),this._moved=!1;if(this._moving)return;this._startPos=this._newPos=n.DomUtil.getPosition(this._element),this._startPoint=new n.Point(t.clientX,t.clientY),n.DomEvent.on(document,n.Draggable.MOVE,this._onMove,this),n.DomEvent.on(document,n.Draggable.END,this._onUp,this)},_onMove:function(e){if(e.touches&&e.touches.length>1)return;var t=e.touches&&e.touches.length===1?e.touches[0]:e,r=new n.Point(t.clientX,t.clientY),i=r.subtract(this._startPoint);if(!i.x&&!i.y)return;n.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,n.Browser.touch||(n.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(i),this._moving=!0,n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)},_updatePosition:function(){this.fire("predrag"),n.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(e){if(this._simulateClick&&e.changedTouches){var t=e.changedTouches[0],r=t.target,i=this._newPos&&this._newPos.distanceTo(this._startPos)||0;r.tagName.toLowerCase()==="a"&&n.DomUtil.removeClass(r,"leaflet-active"),i<n.Draggable.TAP_TOLERANCE&&this._simulateEvent("click",t)}n.Browser.touch||(n.DomUtil.enableTextSelection(),this._restoreCursor()),n.DomEvent.off(document,n.Draggable.MOVE,this._onMove),n.DomEvent.off(document,n.Draggable.END,this._onUp),this._moved&&(n.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1},_setMovingCursor:function(){n.DomUtil.addClass(document.body,"leaflet-dragging")},_restoreCursor:function(){n.DomUtil.removeClass(document.body,"leaflet-dragging")},_simulateEvent:function(t,n){var r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,e,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(r)}}),n.Handler=n.Class.extend({initialize:function(e){this._map=e},enable:function(){if(this._enabled)return;this._enabled=!0,this.addHooks()},disable:function(){if(!this._enabled)return;this._enabled=!1,this.removeHooks()},enabled:function(){return!!this._enabled}}),n.Map.mergeOptions({dragging:!0,inertia:!n.Browser.android23,inertiaDeceleration:3e3,inertiaMaxSpeed:1500,inertiaThreshold:n.Browser.touch?32:14,worldCopyJump:!0}),n.Map.Drag=n.Handler.extend({addHooks:function(){if(!this._draggable){this._draggable=new n.Draggable(this._map._mapPane,this._map._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);var e=this._map.options;e.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),this._map.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e.fire("movestart").fire("dragstart"),e._panTransition&&e._panTransition._onTransitionEnd(!0),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+(new Date),t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint(new n.LatLng(0,0));this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project(new n.LatLng(0,180)).x},_onPreDrag:function(){var e=this._map,t=this._worldWidth,n=Math.round(t/2),r=this._initialWorldOffset,i=this._draggable._newPos.x,s=(i-n+r)%t+n-r,o=(i+n+r)%t-n-r,u=Math.abs(s+r)<Math.abs(o+r)?s:o;this._draggable._newPos.x=u},_onDragEnd:function(){var e=this._map,r=e.options,i=+(new Date)-this._lastTime,s=!r.inertia||i>r.inertiaThreshold||this._positions[0]===t;if(s)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),u=(this._lastTime+i-this._times[0])/1e3,a=o.multiplyBy(.58/u),f=a.distanceTo(new n.Point(0,0)),l=Math.min(r.inertiaMaxSpeed,f),c=a.multiplyBy(l/f),h=l/r.inertiaDeceleration,p=c.multiplyBy(-h/2).round(),d={duration:h,easing:"ease-out"};n.Util.requestAnimFrame(n.Util.bind(function(){this._map.panBy(p,d)},this))}e.fire("dragend"),r.maxBounds&&n.Util.requestAnimFrame(this._panInsideMaxBounds,e,!0,e._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),n.Map.addInitHook("addHandler","dragging",n.Map.Drag),n.Map.mergeOptions({doubleClickZoom:!0}),n.Map.DoubleClickZoom=n.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(e){this.setView(e.latlng,this._zoom+1)}}),n.Map.addInitHook("addHandler","doubleClickZoom",n.Map.DoubleClickZoom),n.Map.mergeOptions({scrollWheelZoom:!n.Browser.touch}),n.Map.ScrollWheelZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){n.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(e){var t=n.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),clearTimeout(this._timer),this._timer=setTimeout(n.Util.bind(this._performZoom,this),40),n.DomEvent.preventDefault(e)},_performZoom:function(){var e=this._map,t=Math.round(this._delta),n=e.getZoom();t=Math.max(Math.min(t,4),-4),t=e._limitZoom(n+t)-n,this._delta=0;if(!t)return;var r=n+t,i=this._getCenterForScrollWheelZoom(this._lastMousePos,r);e.setView(i,r)},_getCenterForScrollWheelZoom:function(e,t){var n=this._map,r=n.getZoomScale(t),i=n.getSize().divideBy(2),s=e.subtract(i).multiplyBy(1-1/r),o=n._getTopLeftPoint().add(i).add(s);return n.unproject(o)}}),n.Map.addInitHook("addHandler","scrollWheelZoom",n.Map.ScrollWheelZoom),n.Util.extend(n.DomEvent,{addDoubleTapListener:function(e,t,n){function r(e){if(e.touches.length!==1)return;var t=Date.now(),n=t-(s||t);a=e.touches[0],o=n>0&&n<=u,s=t}function i(e){o&&(a.type="dblclick",t(a),s=null)}var s,o=!1,u=250,a,f="_leaflet_",l="touchstart",c="touchend";return e[f+l+n]=r,e[f+c+n]=i,e.addEventListener(l,r,!1),e.addEventListener(c,i,!1),this},removeDoubleTapListener:function(e,t){var n="_leaflet_";return e.removeEventListener(e,e[n+"touchstart"+t],!1),e.removeEventListener(e,e[n+"touchend"+t],!1),this}}),n.Map.mergeOptions({touchZoom:n.Browser.touch&&!n.Browser.android23}),n.Map.TouchZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){n.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)return;var r=t.mouseEventToLayerPoint(e.touches[0]),i=t.mouseEventToLayerPoint(e.touches[1]),s=t._getCenterLayerPoint();this._startCenter=r.add(i).divideBy(2,!0),this._startDist=r.distanceTo(i),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),n.DomEvent.on(document,"touchmove",this._onTouchMove,this).on(document,"touchend",this._onTouchEnd,this),n.DomEvent.preventDefault(e)},_onTouchMove:function(e){if(!e.touches||e.touches.length!==2)return;var t=this._map,r=t.mouseEventToLayerPoint(e.touches[0]),i=t.mouseEventToLayerPoint(e.touches[1]);this._scale=r.distanceTo(i)/this._startDist,this._delta=r.add(i).divideBy(2,!0).subtract(this._startCenter);if(this._scale===1)return;this._moved||(n.DomUtil.addClass(t._mapPane,"leaflet-zoom-anim leaflet-touching"),t.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),n.DomEvent.preventDefault(e)},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),r=e.layerPointToLatLng(t);e.fire("zoomanim",{center:r,zoom:e.getScaleZoom(this._scale)}),e._tileBg.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(this._delta)+" "+n.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(e){if(!this._moved||!this._zooming)return;var t=this._map;this._zooming=!1,n.DomUtil.removeClass(t._mapPane,"leaflet-touching"),n.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd);var r=this._getScaleOrigin(),i=t.layerPointToLatLng(r),s=t.getZoom(),o=t.getScaleZoom(this._scale)-s,u=o>0?Math.ceil(o):Math.floor(o),a=t._limitZoom(s+u);t.fire("zoomanim",{center:i,zoom:a}),t._runAnimation(i,a,t.getZoomScale(a)/this._scale,r,!0)},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),n.Map.addInitHook("addHandler","touchZoom",n.Map.TouchZoom),n.Map.mergeOptions({boxZoom:!0}),n.Map.BoxZoom=n.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane},addHooks:function(){n.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){n.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;n.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),this._box=n.DomUtil.create("div","leaflet-zoom-box",this._pane),n.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",n.DomEvent.on(document,"mousemove",this._onMouseMove,this).on(document,"mouseup",this._onMouseUp,this).preventDefault(e),this._map.fire("boxzoomstart")},_onMouseMove:function(e){var t=this._startLayerPoint,r=this._box,i=this._map.mouseEventToLayerPoint(e),s=i.subtract(t),o=new n.Point(Math.min(i.x,t.x),Math.min(i.y,t.y));n.DomUtil.setPosition(r,o),r.style.width=Math.abs(s.x)-4+"px",r.style.height=Math.abs(s.y)-4+"px"},_onMouseUp:function(e){this._pane.removeChild(this._box),this._container.style.cursor="",n.DomUtil.enableTextSelection(),n.DomEvent.off(document,"mousemove",this._onMouseMove).off(document,"mouseup",this._onMouseUp);var t=this._map,r=t.mouseEventToLayerPoint(e),i=new n.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(r));t.fitBounds(i),t.fire("boxzoomend",{boxZoomBounds:i})}}),n.Map.addInitHook("addHandler","boxZoom",n.Map.BoxZoom),n.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),n.Map.Keyboard=n.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;e.tabIndex===-1&&(e.tabIndex="0"),n.DomEvent.addListener(e,"focus",this._onFocus,this).addListener(e,"blur",this._onBlur,this).addListener(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;n.DomEvent.removeListener(e,"focus",this._onFocus,this).removeListener(e,"blur",this._onBlur,this).removeListener(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){this._focused||this._map._container.focus()},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t=this._panKeys={},n=this.keyCodes,r,i;for(r=0,i=n.left.length;r<i;r++)t[n.left[r]]=[-1*e,0];for(r=0,i=n.right.length;r<i;r++)t[n.right[r]]=[e,0];for(r=0,i=n.down.length;r<i;r++)t[n.down[r]]=[0,e];for(r=0,i=n.up.length;r<i;r++)t[n.up[r]]=[0,-1*e]},_setZoomOffset:function(e){var t=this._zoomKeys={},n=this.keyCodes,r,i;for(r=0,i=n.zoomIn.length;r<i;r++)t[n.zoomIn[r]]=e;for(r=0,i=n.zoomOut.length;r<i;r++)t[n.zoomOut[r]]=-e},_addHooks:function(){n.DomEvent.addListener(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){n.DomEvent.removeListener(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode;if(this._panKeys.hasOwnProperty(t))this._map.panBy(this._panKeys[t]);else{if(!this._zoomKeys.hasOwnProperty(t))return;this._map.setZoom(this._map.getZoom()+this._zoomKeys[t])}n.DomEvent.stop(e)}}),n.Map.addInitHook("addHandler","keyboard",n.Map.Keyboard),n.Handler.MarkerDrag=n.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=(new n.Draggable(e,e)).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(e){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(e){var t=n.DomUtil.getPosition(this._marker._icon);this._marker._shadow&&n.DomUtil.setPosition(this._marker._shadow,t),this._marker._latlng=this._marker._map.layerPointToLatLng(t),this._marker.fire("move").fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),n.Handler.PolyEdit=n.Handler.extend({options:{icon:new n.DivIcon({iconSize:new n.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(e,t){this._poly=e,n.Util.setOptions(this,t)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new n.LayerGroup),this._markers=[];var e=this._poly._latlngs,t,r,i,s;for(t=0,i=e.length;t<i;t++)s=this._createMarker(e[t],t),s.on("click",this._onMarkerClick,this),this._markers.push(s);var o,u;for(t=0,r=i-1;t<i;r=t++){if(t===0&&!(n.Polygon&&this._poly instanceof n.Polygon))continue;o=this._markers[r],u=this._markers[t],this._createMiddleMarker(o,u),this._updatePrevNext(o,u)}},_createMarker:function(e,t){var r=new n.Marker(e,{draggable:!0,icon:this.options.icon});return r._origLatLng=e,r._index=t,r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(r),r},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(e){var t=e.target;n.Util.extend(t._origLatLng,t._latlng),t._middleLeft&&t._middleLeft.setLatLng(this._getMiddleLatLng(t._prev,t)),t._middleRight&&t._middleRight.setLatLng(this._getMiddleLatLng(t,t._next)),this._poly.redraw()},_onMarkerClick:function(e){if(this._poly._latlngs.length<3)return;var t=e.target,n=t._index;t._prev&&t._next&&(this._createMiddleMarker(t._prev,t._next),this._updatePrevNext(t._prev,t._next)),this._markerGroup.removeLayer(t),t._middleLeft&&this._markerGroup.removeLayer(t._middleLeft),t._middleRight&&this._markerGroup.removeLayer(t._middleRight),this._markers.splice(n,1),this._poly.spliceLatLngs(n,1),this._updateIndexes(n,-1),this._poly.fire("edit")},_updateIndexes:function(e,t){this._markerGroup.eachLayer(function(n){n._index>e&&(n._index+=t)})},_createMiddleMarker:function(e,t){var n=this._getMiddleLatLng(e,t),r=this._createMarker(n),i,s,o;r.setOpacity(.6),e._middleRight=t._middleLeft=r,s=function(){var s=t._index;r._index=s,r.off("click",i).on("click",this._onMarkerClick,this),n.lat=r.getLatLng().lat,n.lng=r.getLatLng().lng,this._poly.spliceLatLngs(s,0,n),this._markers.splice(s,0,r),r.setOpacity(1),this._updateIndexes(s,1),t._index++,this._updatePrevNext(e,r),this._updatePrevNext(r,t)},o=function(){r.off("dragstart",s,this),r.off("dragend",o,this),this._createMiddleMarker(e,r),this._createMiddleMarker(r,t)},i=function(){s.call(this),o.call(this),this._poly.fire("edit")},r.on("click",i,this).on("dragstart",s,this).on("dragend",o,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(e,t){e._next=t,t._prev=e},_getMiddleLatLng:function(e,t){var n=this._poly._map,r=n.latLngToLayerPoint(e.getLatLng()),i=n.latLngToLayerPoint(t.getLatLng());return n.layerPointToLatLng(r._add(i).divideBy(2))}}),n.Control=n.Class.extend({options:{position:"topright"},initialize:function(e){n.Util.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),r=this.getPosition(),i=e._controlCorners[r];return n.DomUtil.addClass(t,"leaflet-control"),r.indexOf("bottom")!==-1?i.insertBefore(t,i.firstChild):i.appendChild(t),this},removeFrom:function(e){var t=this.getPosition(),n=e._controlCorners[t];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this}}),n.control=function(e){return new n.Control(e)},n.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){function e(e,s){var o=r+e+" "+r+s;t[e+s]=n.DomUtil.create("div",o,i)}var t=this._controlCorners={},r="leaflet-",i=this._controlContainer=n.DomUtil.create("div",r+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")}}),n.Control.Zoom=n.Control.extend({options:{position:"topleft"},onAdd:function(e){var t="leaflet-control-zoom",r=n.DomUtil.create("div",t);return this._createButton("Zoom in",t+"-in",r,e.zoomIn,e),this._createButton("Zoom out",t+"-out",r,e.zoomOut,e),r},_createButton:function(e,t,r,i,s){var o=n.DomUtil.create("a",t,r);return o.href="#",o.title=e,n.DomEvent.on(o,"click",n.DomEvent.stopPropagation).on(o,"click",n.DomEvent.preventDefault).on(o,"click",i,s).on(o,"dblclick",n.DomEvent.stopPropagation),o}}),n.Map.mergeOptions({zoomControl:!0}),n.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new n.Control.Zoom,this.addControl(this.zoomControl))}),n.control.zoom=function(e){return new n.Control.Zoom(e)},n.Control.Attribution=n.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leaflet.cloudmade.com">Leaflet</a>'},initialize:function(e){n.Util.setOptions(this,e),this._attributions={}},onAdd:function(e){return this._container=n.DomUtil.create("div","leaflet-control-attribution"),n.DomEvent.disableClickPropagation(this._container),e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){if(!e)return;return this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this},removeAttribution:function(e){if(!e)return;return this._attributions[e]--,this._update(),this},_update:function(){if(!this._map)return;var e=[];for(var t in this._attributions)this._attributions.hasOwnProperty(t)&&this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" &#8212; ")},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),n.Map.mergeOptions({attributionControl:!0}),n.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new n.Control.Attribution).addTo(this))}),n.control.attribution=function(e){return new n.Control.Attribution(e)},n.Control.Scale=n.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t="leaflet-control-scale",r=n.DomUtil.create("div",t),i=this.options;return this._addScales(i,t,r),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),this._update(),r},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,r){e.metric&&(this._mScale=n.DomUtil.create("div",t+"-line",r)),e.imperial&&(this._iScale=n.DomUtil.create("div",t+"-line",r))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,n=6378137*Math.PI*Math.cos(t*Math.PI/180),r=n*(e.getNorthEast().lng-e.getSouthWest().lng)/180,i=this._map.getSize(),s=this.options,o=0;i.x>0&&(o=r*(s.maxWidth/i.x)),this._updateScales(s,o)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=t<1e3?t+" m":t/1e3+" km"},_updateImperial:function(e){var t=e*3.2808399,n=this._iScale,r,i,s;t>5280?(r=t/5280,i=this._getRoundNum(r),n.style.width=this._getScaleWidth(i/r)+"px",n.innerHTML=i+" mi"):(s=this._getRoundNum(t),n.style.width=this._getScaleWidth(s/t)+"px",n.innerHTML=s+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),n.control.scale=function(e){return new n.Control.Scale(e)},n.Control.Layers=n.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,r){n.Util.setOptions(this,r),this._layers={},this._lastZIndex=0;for(var i in e)e.hasOwnProperty(i)&&this._addLayer(e[i],i);for(i in t)t.hasOwnProperty(i)&&this._addLayer(t[i],i,!0)},onAdd:function(e){return this._initLayout(),this._update(),this._container},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=n.Util.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=n.DomUtil.create("div",e);n.Browser.touch?n.DomEvent.on(t,"click",n.DomEvent.stopPropagation):n.DomEvent.disableClickPropagation(t);var r=this._form=n.DomUtil.create("form",e+"-list");if(this.options.collapsed){n.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var i=this._layersLink=n.DomUtil.create("a",e+"-toggle",t);i.href="#",i.title="Layers",n.Browser.touch?n.DomEvent.on(i,"click",n.DomEvent.stopPropagation).on(i,"click",n.DomEvent.preventDefault).on(i,"click",this._expand,this):n.DomEvent.on(i,"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=n.DomUtil.create("div",e+"-base",r),this._separator=n.DomUtil.create("div",e+"-separator",r),this._overlaysList=n.DomUtil.create("div",e+"-overlays",r),t.appendChild(r)},_addLayer:function(e,t,r){var i=n.Util.stamp(e);this._layers[i]={layer:e,name:t,overlay:r},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return;this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e=!1,t=!1;for(var n in this._layers)if(this._layers.hasOwnProperty(n)){var r=this._layers[n];this._addItem(r),t=t||r.overlay,e=e||!r.overlay}this._separator.style.display=t&&e?"":"none"},_createRadioElement:function(e,t){var n='<input type="radio" name="'+e+'"';t&&(n+=' checked="checked"'),n+="/>";var r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t=document.createElement("label"),r,i=this._map.hasLayer(e.layer);e.overlay?(r=document.createElement("input"),r.type="checkbox",r.defaultChecked=i):r=this._createRadioElement("leaflet-base-layers",i),r.layerId=n.Util.stamp(e.layer),n.DomEvent.on(r,"click",this._onInputClick,this);var s=document.createTextNode(" "+e.name);t.appendChild(r),t.appendChild(s);var o=e.overlay?this._overlaysList:this._baseLayersList;o.appendChild(t)},_onInputClick:function(){var e,t,n,r=this._form.getElementsByTagName("input"),i=r.length;for(e=0;e<i;e++)t=r[e],n=this._layers[t.layerId],t.checked?this._map.addLayer(n.layer,!n.overlay):this._map.removeLayer(n.layer)},_expand:function(){n.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),n.control.layers=function(e,t,r){return new n.Control.Layers(e,t,r)},n.Transition=n.Class.extend({includes:n.Mixin.Events,statics:{CUSTOM_PROPS_SETTERS:{position:n.DomUtil.setPosition},implemented:function(){return n.Transition.NATIVE||n.Transition.TIMER}},options:{easing:"ease",duration:.5},_setProperty:function(e,t){var r=n.Transition.CUSTOM_PROPS_SETTERS;e in r?r[e](this._el,t):this._el.style[e]=t}}),n.Transition=n.Transition.extend({statics:function(){var e=n.DomUtil.TRANSITION,t=e==="webkitTransition"||e==="OTransition"?e+"End":"transitionend";return{NATIVE:!!e,TRANSITION:e,PROPERTY:e+"Property",DURATION:e+"Duration",EASING:e+"TimingFunction",END:t,CUSTOM_PROPS_PROPERTIES:{position:n.Browser.any3d?n.DomUtil.TRANSFORM:"top, left"}}}(),options:{fakeStepInterval:100},initialize:function(e,t){this._el=e,n.Util.setOptions(this,t),n.DomEvent.on(e,n.Transition.END,this._onTransitionEnd,this),this._onFakeStep=n.Util.bind(this._onFakeStep,this)},run:function(e){var t,r=[],i=n.Transition.CUSTOM_PROPS_PROPERTIES;for(t in e)e.hasOwnProperty(t)&&(t=i[t]?i[t]:t,t=this._dasherize(t),r.push(t));this._el.style[n.Transition.DURATION]=this.options.duration+"s",this._el.style[n.Transition.EASING]=this.options.easing,this._el.style[n.Transition.PROPERTY]="all";for(t in e)e.hasOwnProperty(t)&&this._setProperty(t,e[t]);n.Util.falseFn(this._el.offsetWidth),this._inProgress=!0,n.Browser.mobileWebkit&&(this.backupEventFire=setTimeout(n.Util.bind(this._onBackupFireEnd,this),this.options.duration*1.2*1e3)),n.Transition.NATIVE?(clearInterval(this._timer),this._timer=setInterval(this._onFakeStep,this.options.fakeStepInterval)):this._onTransitionEnd()},_dasherize:function(){function e(e){return"-"+e.toLowerCase()}var t=/([A-Z])/g;return function(n){return n.replace(t,e)}}(),_onFakeStep:function(){this.fire("step")},_onTransitionEnd:function(e){this._inProgress&&(this._inProgress=!1,clearInterval(this._timer),this._el.style[n.Transition.TRANSITION]="",clearTimeout(this.backupEventFire),delete this.backupEventFire,this.fire("step"),e&&e.type&&this.fire("end"))},_onBackupFireEnd:function(){var e=document.createEvent("Event");e.initEvent(n.Transition.END,!0,!1),this._el.dispatchEvent(e)}}),n.Transition=n.Transition.NATIVE?n.Transition:n.Transition.extend({statics:{getTime:Date.now||function(){return+(new Date)},TIMER:!0,EASINGS:{linear:function(e){return e},"ease-out":function(e){return e*(2-e)}},CUSTOM_PROPS_GETTERS:{position:n.DomUtil.getPosition},UNIT_RE:/^[\d\.]+(\D*)$/},options:{fps:50},initialize:function(e,t){this._el=e,n.Util.extend(this.options,t),this._easing=n.Transition.EASINGS[this.options.easing]||n.Transition.EASINGS["ease-out"],this._step=n.Util.bind(this._step,this),this._interval=Math.round(1e3/this.options.fps)},run:function(e){this._props={};var t=n.Transition.CUSTOM_PROPS_GETTERS,r=n.Transition.UNIT_RE;this.fire("start");for(var i in e)if(e.hasOwnProperty(i)){var s={};if(i in t)s.from=t[i](this._el);else{var o=this._el.style[i].match(r);s.from=parseFloat(o[0]),s.unit=o[1]}s.to=e[i],this._props[i]=s}clearInterval(this._timer),this._timer=setInterval(this._step,this._interval),this._startTime=n.Transition.getTime()},_step:function(){var e=n.Transition.getTime(),t=e-this._startTime,r=this.options.duration*1e3;t<r?this._runFrame(this._easing(t/r)):(this._runFrame(1),this._complete())},_runFrame:function(e){var t=n.Transition.CUSTOM_PROPS_SETTERS,r,i,s;for(r in this._props)this._props.hasOwnProperty(r)&&(i=this._props[r],r in t?(s=i.to.subtract(i.from).multiplyBy(e).add(i.from),t[r](this._el,s)):this._el.style[r]=(i.to-i.from)*e+i.from+i.unit);this.fire("step")},_complete:function(){clearInterval(this._timer),this.fire("end")}}),n.Map.include(!n.Transition||!n.Transition.implemented()?{}:{setView:function(e,t,n){t=this._limitZoom(t);var r=this._zoom!==t;if(this._loaded&&!n&&this._layers){var i=r?this._zoomToIfClose&&this._zoomToIfClose(e,t):this._panByIfClose(e);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){return e=n.point(e),!e.x&&!e.y?this:(this._panTransition||(this._panTransition=new n.Transition(this._mapPane),this._panTransition.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.Util.setOptions(this._panTransition,n.Util.extend({duration:.25},t)),this.fire("movestart"),n.DomUtil.addClass(this._mapPane,"leaflet-pan-anim"),this._panTransition.run({position:n.DomUtil.getPosition(this._mapPane).subtract(e)}),this)},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){n.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_panByIfClose:function(e){var t=this._getCenterOffset(e)._floor();return this._offsetIsWithinView(t)?(this.panBy(t),!0):!1},_offsetIsWithinView:function(e,t){var n=t||1,r=this.getSize();return Math.abs(e.x)<=r.x*n&&Math.abs(e.y)<=r.y*n}}),n.Map.mergeOptions({zoomAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23&&!n.Browser.mobileOpera}),n.DomUtil.TRANSITION&&n.Map.addInitHook(function(){n.DomEvent.on(this._mapPane,n.Transition.END,this._catchTransitionEnd,this)}),n.Map.include(n.DomUtil.TRANSITION?{_zoomToIfClose:function(e,t){if(this._animatingZoom)return!0;if(!this.options.zoomAnimation)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e).divideBy(1-1/r);if(!this._offsetIsWithinView(i,1))return!1;n.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this.fire("movestart").fire("zoomstart"),this.fire("zoomanim",{center:e,zoom:t});var s=this._getCenterLayerPoint().add(i);return this._prepareTileBg(),this._runAnimation(e,t,r,s),!0},_catchTransitionEnd:function(e){this._animatingZoom&&this._onZoomTransitionEnd()},_runAnimation:function(e,t,r,i,s){this._animateToCenter=e,this._animateToZoom=t,this._animatingZoom=!0;var o=n.DomUtil.TRANSFORM,u=this._tileBg;clearTimeout(this._clearTileBgTimer),n.Util.falseFn(u.offsetWidth);var a=n.DomUtil.getScaleString(r,i),f=u.style[o];u.style[o]=s?f+" "+a:a+" "+f},_prepareTileBg:function(){var e=this._tilePane,t=this._tileBg;if(t&&this._getLoadedTilesPercentage(t)>.5&&this._getLoadedTilesPercentage(e)<.5){e.style.visibility="hidden",e.empty=!0,this._stopLoadingImages(e);return}t||(t=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),t.style.zIndex=1),t.style[n.DomUtil.TRANSFORM]="",t.style.visibility="hidden",t.empty=!0,e.empty=!1,this._tilePane=this._panes.tilePane=t;var r=this._tileBg=e;n.DomUtil.addClass(r,"leaflet-zoom-animated"),this._stopLoadingImages(r)},_getLoadedTilesPercentage:function(e){var t=e.getElementsByTagName("img"),n,r,i=0;for(n=0,r=t.length;n<r;n++)t[n].complete&&i++;return i/r},_stopLoadingImages:function(e){var t=Array.prototype.slice.call(e.getElementsByTagName("img")),r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.complete||(s.onload=n.Util.falseFn,s.onerror=n.Util.falseFn,s.src=n.Util.emptyImageUrl,s.parentNode.removeChild(s))},_onZoomTransitionEnd:function(){this._restoreTileFront(),n.Util.falseFn(this._tileBg.offsetWidth),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),n.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){!this._animatingZoom&&!this.touchZoom._zooming&&(this._tileBg.innerHTML="")}}:{}),n.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:Infinity,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){e=this._locationOptions=n.Util.extend(this._defaultLocateOptions,e);if(!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=n.Util.bind(this._handleGeolocationResponse,this),r=n.Util.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=180*e.coords.accuracy/4e7,r=t*2,i=e.coords.latitude,s=e.coords.longitude,o=new n.LatLng(i,s),u=new n.LatLng(i-t,s-r),a=new n.LatLng(i+t,s+r),f=new n.LatLngBounds(u,a),l=this._locationOptions;if(l.setView){var c=Math.min(this.getBoundsZoom(f),l.maxZoom);this.setView(o,c)}this.fire("locationfound",{latlng:o,bounds:f,accuracy:e.coords.accuracy})}})}(this),define("leaflet",["jquery","splunk.util","contrib/text!contrib/leaflet/leaflet.css","contrib/text!contrib/leaflet/leaflet.ie.css"],function(e){return function(){var t,n;return n=function(e,t,n,r){n=n.replace(/url\(images/g,"url("+t.make_url("/static/js/contrib/leaflet/images")),e("head").append('<style type="text/css">'+n+"</style>"),e.browser.msie&&Number(e.browser.version)<=8&&e("head").append('<style type="text/css">'+r+"</style>")},t=n.apply(e,arguments),t||e.L}}(this)),define("splunk/events/GenericEventData",["require","jg_global","jgatt"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").events.EventData;return t(n,function(e,t){this.constructor=function(e){if(e!=null)for(var t in e)e.hasOwnProperty(t)&&!(t in this)&&(this[t]=e[t])}})}),define("splunk/mapping/LatLon",["require","jg_global"],function(e){var t=e("jg_global").jg_extend;return t(Object,function(e,t){this.lat=0,this.lon=0,this.constructor=function(e,t){this.lat=e!==undefined?e:0,this.lon=t!==undefined?t:0},this.normalize=function(t){var n=this.lat;n<-90?n=-90:n>90&&(n=90);var r=t?t.lon:0,i=(this.lon-r)%360;return i<-180?i+=360:i>180&&(i-=360),i+=r,new e(n,i)},this.isFinite=function(){return this.lat-this.lat===0&&this.lon-this.lon===0},this.equals=function(e){return this.lat==e.lat&&this.lon==e.lon},this.clone=function(){return new e(this.lat,this.lon)},this.toString=function(){return"("+this.lat+", "+this.lon+")"}})}),define("splunk/mapping/LatLonBounds",["require","jg_global","splunk/mapping/LatLon"],function(e){var t=e("jg_global").jg_extend,n=e("splunk/mapping/LatLon");return t(Object,function(e,t){this.s=0,this.w=0,this.n=0,this.e=0,this.constructor=function(e,t,n,r){this.s=e!==undefined?e:0,this.w=t!==undefined?t:0,this.n=n!==undefined?n:0,this.e=r!==undefined?r:0},this.getSW=function(){return new n(this.s,this.w)},this.getSE=function(){return new n(this.s,this.e)},this.getNW=function(){return new n(this.n,this.w)},this.getNE=function(){return new n(this.n,this.e)},this.getCenter=function(){return new n((this.s+this.n)/2,(this.w+this.e)/2)},this.expand=function(e){e.lat<this.s&&(this.s=e.lat),e.lat>this.n&&(this.n=e.lat),e.lon<this.w&&(this.w=e.lon),e.lon>this.e&&(this.e=e.lon)},this.contains=function(e){return e.lat>=this.s&&e.lat<=this.n&&e.lon>=this.w&&e.lon<=this.e},this.normalize=function(t){var n=this.s;n<-90?n=-90:n>90&&(n=90);var r=this.n;r<n?r=n:r>90&&(r=90);var i=t?t.lon:0,s=this.w-i,o=this.e-i;return o-s>=360?(s=-180,o=180):(s%=360,s<-180?s+=360:s>180&&(s-=360),o%=360,o<-180?o+=360:o>180&&(o-=360),o<s&&(o>-s?s-=360:o+=360)),s+=i,o+=i,new e(n,s,r,o)},this.isFinite=function(){return this.s-this.s===0&&this.w-this.w===0&&this.n-this.n===0&&this.e-this.e===0},this.equals=function(e){return this.s==e.s&&this.w==e.w&&this.n==e.n&&this.e==e.e},this.clone=function(){return new e(this.s,this.w,this.n,this.e)},this.toString=function(){return"("+this.s+", "+this.w+", "+this.n+", "+this.e+")"}})}),define("splunk/viz/MRenderTarget",["require","jg_global","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt"],function(e){var t=e("jg_global").jg_static,n=e("jg_global").jg_mixin,r=e("jgatt").events.MObservable,i=e("jgatt").properties.MPropertyTarget,s=e("jgatt").utils.PropertyComparator,o=e("jgatt").validation.MValidateTarget,u=e("jgatt").validation.ValidatePass;return t(function(e){this.mixin=function(e){e=n(this,r,e),e=n(this,i,e),e=n(this,o,e)},this.renderPass=new u("render",3,new s("renderPriority")),this.renderPriority=0,this.render=function(){}})}),define("splunk/mapping/layers/LayerBase",["require","jg_global","jg_global","jgatt","jgatt","splunk/viz/MRenderTarget"],function(e){var t=e("jg_global").jg_extend,n=e("jg_global").jg_mixin,r=e("jgatt").properties.Property,i=e("jgatt").utils.FunctionUtils,s=e("splunk/viz/MRenderTarget");return t(Object,function(e,t){t=n(this,s,t),e.METADATA_KEY="__splunk_mapping_layers_LayerBase_metadata",this.map=new r("map",Object,null,!0),this.leafletLayer=null,this.constructor=function(){t.constructor.call(this),this._map_boundsChanged=i.bind(this._map_boundsChanged,this),this.leafletLayer=this.createLeafletLayer();if(!this.leafletLayer)throw new Error("Value returned from createLeafletLayer() must be non-null.")},this.render=function(){this.validatePreceding("renderPass");if(this.isValid("renderPass"))return;var e=this.getInternal("map");e&&this.renderOverride(e),this.setValid("renderPass")},this.createLeafletLayer=function(){throw new Error("Must implement method createLeafletLayer.")},this.renderOverride=function(e){},this.onAddedToMap=function(e){this.setInternal("map",e),e.addEventListener("boundsChanged",this._map_boundsChanged),this.invalidate("renderPass")},this.onRemovedFromMap=function(e){e.removeEventListener("boundsChanged",this._map_boundsChanged),this.setInternal("map",null)},this._map_boundsChanged=function(e){this.invalidate("renderPass")}})}),define("splunk/viz/VizBase",["require","jquery","jg_global","jg_global","jgatt","jgatt","jgatt","jgatt"],function(e){var t=e("jquery"),n=e("jg_global").jg_extend,r=e("jg_global").jg_mixin,i=e("jgatt").events.MObservable,s=e("jgatt").properties.MPropertyTarget,o=e("jgatt").properties.Property,u=e("jgatt").validation.MValidateTarget;return n(Object,function(e,n){n=r(this,i,n),n=r(this,s,n),n=r(this,u,n);var a="__splunk_viz_VizBase_instance",f=0;e.getInstance=function(n){if(n==null)return null;n=t(n);if(n.length==0)return null;n=n[0];var r=n[a];return r instanceof e?r:null},this.id=new o("id",String,null,!0),this.element=null,this.$element=null,this.constructor=function(e){if(e!=null&&typeof e!="string")throw new Error("Parameter html must be a string.");var r=t(e?e:"<div></div>");if(r.length==0)throw new Error("Parameter html must be valid markup.");n.constructor.call(this);var i="splunk-viz-VizBase-"+ ++f;this.element=r[0],this.$element=t(this.element),this.setInternal("id",i),this.addStyleClass("splunk-viz-VizBase")},this.addStyleClass=function(e){this.$element.addClass(e)},this.removeStyleClass=function(e){this.$element.removeClass(e)},this.setStyle=function(e){this.$element.css(e)},this.appendTo=function(n){if(n==null)throw new Error("Parameter parentElement must be non-null.");n instanceof e&&(n=n.element),n=t(n);if(n.length==0)return;n=n[0];var r=this.element.parentNode;r&&r!==n&&this.onRemove(),n.appendChild(this.element),r!==n&&this.onAppend()},this.replace=function(n){if(n==null)throw new Error("Parameter element must be non-null.");n instanceof e&&(n=n.element),n=t(n);if(n.length==0)return;n=n[0];var r=n.parentNode;if(r==null)return;var i=this.element.parentNode;i&&i!==r&&this.onRemove(),r.replaceChild(this.element,n),i!==r&&this.onAppend()},this.remove=function(){var e=this.element,t=e.parentNode;if(!t)return;this.onRemove(),t.removeChild(e)},this.dispose=function(){this.remove(),this.$element.remove()},this.onAppend=function(){},this.onRemove=function(){}})}),define("splunk/mapping/Map",["require","leaflet","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/events/GenericEventData","splunk/mapping/LatLon","splunk/mapping/LatLonBounds","splunk/mapping/layers/LayerBase","splunk/viz/VizBase"],function(e){var t=e("leaflet"),n=e("jg_global").jg_extend,r=e("jgatt").events.ChainedEvent,i=e("jgatt").events.Event,s=e("jgatt").events.EventData,o=e("jgatt").properties.ObservableArrayProperty,u=e("jgatt").properties.ObservableProperty,a=e("jgatt").properties.Property,f=e("jgatt").utils.ArrayUtils,l=e("jgatt").utils.FunctionUtils,c=e("jgatt").utils.NumberUtils,h=e("jgatt").utils.StringUtils,p=e("jgatt").validation.ValidatePass,d=e("splunk/events/GenericEventData"),v=e("splunk/mapping/LatLon"),m=e("splunk/mapping/LatLonBounds"),g=e("splunk/mapping/layers/LayerBase"),y=e("splunk/viz/VizBase"),b=n(y,function(e,n){var c=-85.051128779806,y=85.051128779806;this.updateLeafletMapSizePass=new p("updateLeafletMapSize",-1),this.updateTilesPass=new p("updateTiles",0),this.boundsChanged=new r("boundsChanged",this.changed,s),this.mapClicked=new i("mapClicked",d),this.center=(new a("center",v,null)).getter(function(){var e=this.leafletMap.getCenter();return new v(e.lat,e.lng)}).setter(function(e){e=e&&e.isFinite()?e:new v,this.validate(),this.leafletMap.setView(new t.LatLng(e.lat,e.lon),this.leafletMap.getZoom(),!0),this._checkBoundsChanged(),clearTimeout(this._setCenterTimeout),this._setCenterTimeout=setTimeout(l.bind(function(){this.leafletMap.setView(new t.LatLng(e.lat,e.lon),this.leafletMap.getZoom(),!0),this._checkBoundsChanged()},this),250)}),this.zoom=(new a("zoom",Number,0)).getter(function(){return this.leafletMap.getZoom()}).setter(function(e){e=e>=0&&e<Infinity?e:0,this.validate(),this.leafletMap.setView(this.leafletMap.getCenter(),e,!0),this._checkBoundsChanged()}),this.tileURL=(new u("tileURL",String,null)).onChanged(function(e){this.invalidate("updateTilesPass")}),this.tileSubdomains=(new o("tileSubdomains",String,["a","b","c"])).readFilter(function(e){return e.concat()}).writeFilter(function(e){return e?e.concat():[]}).changedComparator(function(e,t){if(e.length!==t.length)return!0;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!0;return!1}).onChanged(function(e){this.invalidate("updateTilesPass")}),this.tileMinZoom=(new u("tileMinZoom",Number,0)).writeFilter(function(e){return e>=0&&e<Infinity?Math.floor(e):0}).onChanged(function(e){this.invalidate("updateTilesPass")}),this.tileMaxZoom=(new u("tileMaxZoom",Number,Infinity)).writeFilter(function(e){return e>=0&&e<Infinity?Math.floor(e):Infinity}).onChanged(function(e){this.invalidate("updateTilesPass")}),this.tileInvertY=(new u("tileInvertY",Boolean,!1)).onChanged(function(e){this.invalidate("updateTilesPass")}),this.tileAttribution=(new u("tileAttribution",String,null)).onChanged(function(e){this.invalidate("updateTilesPass")}),this.leafletMap=null,this.formatNumber=null,this.formatDegrees=null,this._tooltip=null,this._tooltipMetadata=null,this._layers=null,this._tileLayer=null,this._width=0,this._height=0,this._bounds=null,this._updateSizeInterval=0,this._setCenterTimeout=0,this.constructor=function(){n.constructor.call(this),this.addStyleClass("splunk-mapping-Map"),this.setStyle({position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"none"}),this.updateSize=l.bind(this.updateSize,this),this._leafletMap_moveend=l.bind(this._leafletMap_moveend,this),this._leafletMap_zoomend=l.bind(this._leafletMap_zoomend,this),this._self_mouseOver=l.bind(this._self_mouseOver,this),this._self_mouseOut=l.bind(this._self_mouseOut,this),this._self_mouseMove=l.bind(this._self_mouseMove,this),this._self_click=l.bind(this._self_click,this),this.leafletMap=new t.Map(this.element,{center:new t.LatLng(0,0),zoom:0,trackResize:!1,worldCopyJump:!1}),this.leafletMap.attributionControl.setPrefix(""),this.leafletMap.on("moveend",this._leafletMap_moveend),this.leafletMap.on("zoomend",this._leafletMap_zoomend),this._tooltip=new w,this._layers=[],this.$element.bind("mouseover",this._self_mouseOver),this.$element.bind("mouseout",this._self_mouseOut),this.$element.bind("mousemove",this._self_mouseMove),this.$element.bind("click",this._self_click)},this.updateLeafletMapSize=function(){this.validatePreceding("updateLeafletMapSizePass");if(this.isValid("updateLeafletMapSizePass"))return;this.leafletMap.invalidateSize(),clearTimeout(this.leafletMap._sizeTimer),this.leafletMap.fire("moveend"),this.setValid("updateLeafletMapSizePass")},this.updateTiles=function(){this.validatePreceding("updateTilesPass");if(this.isValid("updateTilesPass"))return;var e=this.leafletMap,n=this._tileLayer;n&&(e.removeLayer(n),this._tileLayer=null);var r={};r.subdomains=this.getInternal("tileSubdomains"),r.minZoom=this.getInternal("tileMinZoom"),r.maxZoom=this.getInternal("tileMaxZoom"),r.tms=this.getInternal("tileInvertY"),r.attribution=this.getInternal("tileAttribution");var i=this.getInternal("tileURL");i&&(n=this._tileLayer=new t.TileLayer(i,r),e.addLayer(n,!0)),e.options.minZoom=r.minZoom,e.options.maxZoom=r.maxZoom,e.setZoom(e.getZoom()),this.setValid("updateTilesPass"),this._checkBoundsChanged()},this.addLayer=function(e){if(e==null)throw new Error("Parameter layer must be non-null.");if(!(e instanceof g))throw new Error("Parameter layer must be an instance of splunk.mapping.layers.LayerBase");var t=this._layers;if(f.indexOf(t,e)>=0)return;t.push(e),this.leafletMap.addLayer(e.leafletLayer),e.onAddedToMap(this)},this.removeLayer=function(e){if(e==null)throw new Error("Parameter layer must be non-null.");if(!(e instanceof g))throw new Error("Parameter layer must be an instance of splunk.mapping.layers.LayerBase");var t=this._layers,n=f.indexOf(t,e);if(n<0)return;e.onRemovedFromMap(this),this.leafletMap.removeLayer(e.leafletLayer),t.splice(n,1)},this.fitWorld=function(e){if(e!=null&&typeof e!="boolean")throw new Error("Parameter viewportInside must be a boolean.");this.fitBounds(new m(-60,-180,85,180),e)},this.fitBounds=function(e,n){if(e==null)throw new Error("Parameter latLonBounds must be non-null.");if(!(e instanceof m))throw new Error("Parameter latLonBounds must be an instance of splunk.mapping.LatLonBounds.");if(n!=null&&typeof n!="boolean")throw new Error("Parameter viewportInside must be a boolean.");e=e.isFinite()?e:new m(-60,-180,85,180),n=n===!0;var r=new t.LatLngBounds(new t.LatLng(e.s,e.w),new t.LatLng(e.n,e.e)),i=e.getCenter();i=new t.LatLng(i.lat,i.lon);var s=this.leafletMap.getBoundsZoom(r,n);this.leafletMap.setView(i,s,!0),this._checkBoundsChanged()},this.getLatLonBounds=function(){var e=this.leafletMap.getBounds(),t=e.getSouthWest(),n=e.getNorthEast();return new m(t.lat,t.lng,n.lat,n.lng)},this.updateSize=function(){var e=this.$element.width(),t=this.$element.height();if(e===this._width&&t===this._height)return;this._width=e,this._height=t,this.leafletMap.invalidateSize(),this.invalidate("updateLeafletMapSizePass"),this._checkBoundsChanged()},this.dispose=function(){clearTimeout(this._setCenterTimeout);var e=this._layers.concat();for(var t=e.length-1;t>=0;t--)this.removeLayer(e[t]);n.dispose.call(this)},this.onAppend=function(){this._updateSizeInterval=setInterval(this.updateSize,50),this.updateSize()},this.onRemove=function(){clearInterval(this._updateSizeInterval)},this._checkBoundsChanged=function(){var e=this._bounds,t=this.getLatLonBounds();if(e&&e.equals(t))return;this._bounds=t,this.dispatchEvent("boundsChanged",new s)},this._updateTooltip=function(e){var t=this._tooltip,n=this._getMetadataFromElement(e);if(n&&n!==this._tooltipMetadata){this._tooltipMetadata=n;var r=n.data,i=n.fields,s=n.sliceList,o=n.tooltipLatLng,u=n.tooltipOffsetRadius;if(r&&i&&o){var a="",f,l,c,p;a+='<table style="border: 0 none; border-spacing: 0; border-collapse: collapse;">';for(c=0,p=Math.min(i.length,2);c<p;c++)f=i[c],a+="<tr>",a+='<td style="padding: 0; text-align: left; white-space: nowrap; color: #333333;">'+h.escapeHTML(f)+':&nbsp;&nbsp;</td><td style="padding: 0; text-align: right; white-space: nowrap;">'+h.escapeHTML(this._formatDegrees(r[f],c===0?"ns":"ew"))+"</td>",a+="</tr>";for(c=0,p=s.length;c<p;c++)l=s[c],a+="<tr>",a+='<td style="padding: 0; text-align: left; white-space: nowrap; color: '+("#"+(l.series.color|16777216).toString(16).substring(1))+';">'+h.escapeHTML(l.series.name)+':&nbsp;&nbsp;</td><td style="padding: 0; text-align: right; white-space: nowrap;">'+h.escapeHTML(this._formatNumber(l.value))+"</td>",a+="</tr>";a+="</table>",t.setLatLng(o),t.setOffsetRadius(u),t.setContent(a),this.leafletMap.openPopup(t)}else this.leafletMap.closePopup()}else!n&&this._tooltipMetadata&&(this._tooltipMetadata=null,this.leafletMap.closePopup())},this._getMetadataFromElement=function(e){while(e){if(e[g.METADATA_KEY])return e[g.METADATA_KEY];e=e.parentNode}return null},this._formatNumber=function(e){var t=this.formatNumber;return typeof t=="function"?t(Number(e)):String(e)},this._formatDegrees=function(e,t){var n=this.formatDegrees;return typeof n=="function"?n(Number(e),t):String(e)},this._leafletMap_moveend=function(e){this._checkBoundsChanged()},this._leafletMap_zoomend=function(e){this._checkBoundsChanged()},this._self_mouseOver=function(e){this._updateTooltip(e.target)},this._self_mouseOut=function(e){this._updateTooltip(e.target)},this._self_mouseMove=function(e){this._updateTooltip(e.target)},this._self_click=function(e){if(this.leafletMap.dragging&&this.leafletMap.dragging.moved())return;var t=this._getMetadataFromElement(e.target);if(!t||!t.data||!t.fields)return;e.preventDefault();var n={};for(var r in t.data)n[r]=t.data[r];var i=t.fields.concat();this.dispatchEvent("mapClicked",new d({data:n,fields:i,altKey:e.altKey,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,jQueryEvent:e,originalEvent:e.originalEvent}))}}),w=t.Popup.extend({options:{paddingX:5,paddingY:5},_offsetRadius:0,initialize:function(e){e=t.Util.extend(e||{},{maxWidth:Infinity,maxHeight:Infinity,autoPan:!1,closeButton:!1}),t.Popup.prototype.initialize.call(this,e)},setOffsetRadius:function(e){return this._offsetRadius=e,this._update(),this},_initLayout:function(){t.Popup.prototype._initLayout.call(this),this._tipContainer.style.display="none"},_updatePosition:function(){var e=this._map,n=e.containerPointToLayerPoint(new t.Point(0,0)),r=e.containerPointToLayerPoint(e.getSize()),i=n.x,s=n.y,o=r.x,u=r.y,a=this._container,f=a.offsetWidth,l=a.offsetHeight,h=L.Browser.any3d,p=this._offsetRadius,d=this.options.paddingX,v=this.options.paddingY,m=e.latLngToLayerPoint(this._latlng),g=m.x>(i+o)/2?-f-p-d:p+d,y=c.maxMin(m.y-l/2,u-l-v,s+v)-m.y;h&&L.DomUtil.setPosition(a,m);var b=g+(h?0:m.x),w=y+(h?0:m.y);a.style.left=Math.round(b)+"px",a.style.top=Math.round(w)+"px"}});return t.Control.Attribution.include({_update:function(){if(!this._map)return;var e=[];for(var t in this._attributions)this._attributions.hasOwnProperty(t)&&this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", "));var r=n.join(" &#8212; ");this._container.innerHTML=r,this._container.style.display=r?"":"none"}}),b}),define("splunk/vectors/VectorElement",["require","jg_global","jg_global","jg_global"],function(e){var t=e("jg_global").jg_extend,n=e("jg_global").jg_mixin,r=e("jg_global").jg_static;return t(Object,function(e,t){var i=typeof document.createElementNS=="function",s=!i&&function(){try{document.namespaces.add("splvml","urn:schemas-microsoft-com:vml");var e=".splvml { behavior: url(#default#VML); display: inline-block; position: absolute; }",t=document.createElement("style");t.setAttribute("type","text/css");var n=document.getElementsByTagName("head")[0];return n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),!0}catch(r){return!1}}();e.mixin=function(e,t,r){i?(n(e,t),t.constructor!==Object&&typeof t.constructor=="function"&&(e.constructor=t.constructor)):s&&(n(e,r),r.constructor!==Object&&typeof r.constructor=="function"&&(e.constructor=r.constructor))},this.hasSVG=i,this.hasVML=s,this.element=null,this.constructor=function(e){if(e!=null&&typeof e!="string")throw new Error("Parameter tagName must be a string.");this.element=this.createElement(e||null)},this.appendTo=function(t){if(t==null)throw new Error("Parameter parentElement must be non-null.");if(t instanceof e)return t.element.appendChild(this.element),this;throw new Error("Parameter parentElement must be an instance of splunk.vectors.VectorElement.")},this.remove=function(){return this.element.parentNode&&this.element.parentNode.removeChild(this.element),this},this.dispose=function(){this.remove(),this.element=null},this.display=function(e){return this.element.style.display=e?e:"",this},this.visibility=function(e){return this.element.style.visibility=e?e:"",this},this.translate=function(e,t){return e=e!=null&&e>-Infinity&&e<Infinity?e:0,t=t!=null&&t>-Infinity&&t<Infinity?t:0,this.element.style.left=e!=0?e+"px":"",this.element.style.top=t!=0?t+"px":"",this},this.createElement=function(e){var t=document.createElement("div");return t.style.position="absolute",t};var o=r(function(e){var t="http://www.w3.org/2000/svg";this.display=function(e){return e?this.element.setAttribute("display",e):this.element.removeAttribute("display"),this},this.visibility=function(e){return e?this.element.setAttribute("visibility",e):this.element.removeAttribute("visibility"),this},this.translate=function(e,t){return e=e!=null&&e>-Infinity&&e<Infinity?e:0,t=t!=null&&t>-Infinity&&t<Infinity?t:0,e!=0||t!=0?this.element.setAttribute("transform","translate("+e+","+t+")"):this.element.removeAttribute("transform"),this},this.createElement=function(e){return document.createElementNS(t,e||"g")}}),u=r(function(e){this.createElement=function(e){return document.createElement("<splvml:"+(e||"group")+' class="splvml">')}});e.mixin(this,o,u)})}),define("splunk/vectors/Group",["require","jg_global","jg_global","splunk/vectors/VectorElement"],function(e){var t=e("jg_global").jg_extend,n=e("jg_global").jg_static,r=e("splunk/vectors/VectorElement");return t(r,function(e,t){this.constructor=function(){t.constructor.call(this)};var i=n(function(e){this.constructor=function(){t.constructor.call(this,"g")}}),s=n(function(e){this.constructor=function(){t.constructor.call(this,"group"),this.element.style.width="1px",this.element.style.height="1px",this.element.coordsize="1,1"}});r.mixin(this,i,s)})}),define("splunk/vectors/VectorUtils",["require","jg_global"],function(e){var t=e("jg_global").jg_static;return t(function(e){e.toSVGString=function(e){var t=e.cloneNode(!0),n=document.createElement("div");n.appendChild(t);var r=n.innerHTML;return r=r.replace(/xlink:href=|href=/g,"x:href="),r=r.replace(/<image([\S\s]*?)\s*\/?>\s*(<\/image>)?/g,"<image$1></image>"),r=r.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:x="http://www.w3.org/1999/xlink"'),t=null,n=null,r},e.concatSVGStrings=function(){var e="",t,n,r,i=0,s=0;for(var o=0,u=arguments.length;o<u;o++)t=arguments[o],n=t.match(/^<svg[^>]*viewBox=\"([^ ]+) ([^ ]+) ([^ ]+) ([^\"]+)\"[^>]*>/),n&&n.length==5?(r={x:Number(n[1]),y:Number(n[2]),width:Number(n[3]),height:Number(n[4])},i=Math.max(i,r.width),s=Math.max(s,r.height)):r=null,!r||r.x==0&&r.y==0?t=t.replace(/^<svg[^>]*>/,"<g>"):t=t.replace(/^<svg[^>]*>/,'<g transform="translate('+ -r.x+", "+ -r.y+')">'),t=t.replace(/<\/svg>$/,"</g>"),e+=t;return t="<svg",t+=' xmlns="http://www.w3.org/2000/svg"',t+=' xmlns:x="http://www.w3.org/1999/xlink"',t+=' width="'+i+'"',t+=' height="'+s+'"',t+=' viewBox="0 0 '+i+" "+s+'"',t+=">",t+=e,t+="</svg>",t}})}),define("splunk/vectors/Viewport",["require","jg_global","jg_global","jgatt","splunk/vectors/VectorElement","splunk/vectors/VectorUtils"],function(e){var t=e("jg_global").jg_extend,n=e("jg_global").jg_static,r=e("jgatt").geom.Rectangle,i=e("splunk/vectors/VectorElement"),s=e("splunk/vectors/VectorUtils");return t(i,function(e,t){this.constructor=function(e,n,r,i){t.constructor.call(this)},this.width=function(e){return this},this.height=function(e){return this},this.viewBox=function(e){return this},this.preserveAspectRatio=function(e){return this},this.toSVGString=function(){return""};var o=n(function(e){this.constructor=function(e,n,r,i){t.constructor.call(this,"svg"),this.width(e!=null?e:0),this.height(n!=null?n:0),r!=null&&this.viewBox(r),i!=null&&this.preserveAspectRatio(i)},this.appendTo=function(e){if(e==null)throw new Error("Parameter parentElement must be non-null.");if(e.appendChild==null)throw new Error("Parameter parentElement must be a DOM node.");return e.appendChild(this.element),this},this.width=function(e){return e!=null&&e<Infinity?this.element.setAttribute("width",Math.max(e,0)):this.element.setAttribute("width",0),this},this.height=function(e){return e!=null&&e<Infinity?this.element.setAttribute("height",Math.max(e,0)):this.element.setAttribute("height",0),this},this.viewBox=function(e){return e&&e instanceof r&&e.isFinite()?this.element.setAttribute("viewBox",e.x+" "+e.y+" "+e.width+" "+e.height):this.element.removeAttribute("viewBox"),this},this.preserveAspectRatio=function(e){return e?this.element.setAttribute("preserveAspectRatio",e):this.element.removeAttribute("preserveAspectRatio"),this},this.toSVGString=function(){return s.toSVGString(this.element)}}),u=n(function(e){this._containerElement=null,this._width=0,this._height=0,this._viewBox=null,this.constructor=function(e,n,r,i){t.constructor.call(this,"group"),this._containerElement=document.createElement("div"),this._containerElement.style.position="relative",this._containerElement.style.overflow="hidden",this._containerElement.appendChild(this.element),this.width(e!=null?e:0),this.height(n!=null?n:0),r!=null&&this.viewBox(r),i!=null&&this.preserveAspectRatio(i)},this.appendTo=function(e){if(e==null)throw new Error("Parameter parentElement must be non-null.");if(e.appendChild==null)throw new Error("Parameter parentElement must be a DOM node.");return e.appendChild(this._containerElement),this},this.remove=function(){return this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement),this},this.dispose=function(){t.dispose.call(this),this._containerElement=null},this.display=function(e){return this._containerElement.style.display=e?e:"",this},this.visibility=function(e){return this._containerElement.style.visibility=e?e:"",this},this.translate=function(e,t){return e=e!=null&&e>-Infinity&&e<Infinity?e:0,t=t!=null&&t>-Infinity&&t<Infinity?t:0,this._containerElement.style.left=e!=0?e+"px":"",this._containerElement.style.top=t!=0?t+"px":"",this},this.width=function(e){return this._width=e!=null&&e<Infinity?Math.max(e,0):0,this._updateView(),this},this.height=function(e){return this._height=e!=null&&e<Infinity?Math.max(e,0):0,this._updateView(),this},this.viewBox=function(e){return this._viewBox=e&&e instanceof r&&e.isFinite()?e.clone():null,this._updateView(),this},this.preserveAspectRatio=function(e){return this},this._updateView=function(){var e=Math.round(this._width),t=Math.round(this._height),n=this._viewBox,r=n?Math.round(n.x):0,i=n?Math.round(n.y):0,s=n?Math.round(Math.max(n.width,1)):e,o=n?Math.round(Math.max(n.height,1)):t,u=this.element,a=u.style,f=this._containerElement.style;a.display="none",u.coordorigin=r+","+i,u.coordsize=s+","+o,a.width=e+"px",a.height=t+"px",f.width=e+"px",f.height=t+"px",a.display=""}});i.mixin(this,o,u)})}),define("splunk/mapping/layers/VectorLayerBase",["require","leaflet","jg_global","jgatt","jgatt","splunk/mapping/layers/LayerBase","splunk/vectors/Group","splunk/vectors/Viewport"],function(e){var t=e("leaflet"),n=e("jg_global").jg_extend,r=e("jgatt").geom.Rectangle,i=e("jgatt").utils.FunctionUtils,s=e("splunk/mapping/layers/LayerBase"),o=e("splunk/vectors/Group"),u=e("splunk/vectors/Viewport"),a=n(s,function(e,t){this.vectorContainer=null,this.vectorBounds=null,this._isZooming=!1,this.constructor=function(){t.constructor.call(this),this._leafletMap_move=i.bind(this._leafletMap_move,this),this._leafletMap_zoomstart=i.bind(this._leafletMap_zoomstart,this),this._leafletMap_zoomend=i.bind(this._leafletMap_zoomend,this),this.vectorContainer=this.leafletLayer.vectorContainer,this.vectorBounds={minX:0,minY:0,maxX:0,maxY:0}},this.createLeafletLayer=function(){return new f},this.renderOverride=function(e){this._isZooming||this.vectorContainer.display(null)},this.onAddedToMap=function(e){t.onAddedToMap.call(this,e);var n=e.leafletMap;this.vectorContainer.hasSVG?n.on("move",this._leafletMap_move):n.on("moveend",this._leafletMap_move),n.on("viewreset",this._leafletMap_move),n.on("zoomstart",this._leafletMap_zoomstart),n.on("zoomend",this._leafletMap_zoomend),this.vectorBounds=n._vectorLayerBounds,this.vectorContainer.display("none")},this.onRemovedFromMap=function(e){var n=e.leafletMap;this.vectorContainer.hasSVG?n.off("move",this._leafletMap_move):n.off("moveend",this._leafletMap_move),n.off("viewreset",this._leafletMap_move),n.off("zoomstart",this._leafletMap_zoomstart),n.off("zoomend",this._leafletMap_zoomend),this.vectorBounds={minX:0,minY:0,maxX:0,maxY:0},t.onRemovedFromMap.call(this,e)},this._leafletMap_move=function(e){this.invalidate("renderPass")},this._leafletMap_zoomstart=function(e){this._isZooming=!0,this.vectorContainer.display("none")},this._leafletMap_zoomend=function(e){this._isZooming=!1,this.invalidate("renderPass")}}),f=t.Class.extend({includes:[t.Mixin.Events],options:{clickable:!0},vectorContainer:null,initialize:function(e){t.Util.setOptions(this,e),this.vectorContainer=new o},onAdd:function(e){this._map=e,e._initVectorLayerViewport(),this.vectorContainer.appendTo(e._vectorLayerViewport)},onRemove:function(e){this._map=null,this.vectorContainer.remove()}});return t.Map.include({_initVectorLayerViewport:function(){if(this._vectorLayerRoot)return;var e=this._vectorLayerRoot=document.createElement("div");e.style.position="absolute",this._panes.overlayPane.appendChild(e);var t=this._vectorLayerViewport=new u;t.appendTo(e),this._vectorLayerBounds={minX:0,minY:0,maxX:0,maxY:0},t.hasSVG?this.on("move",this._updateVectorLayerBounds):this.on("moveend",this._updateVectorLayerBounds),this._updateVectorLayerBounds()},_updateVectorLayerBounds:function(){var e=this._vectorLayerRoot,n=this._vectorLayerViewport,i=this._vectorLayerBounds,s=n.hasSVG?0:.5,o=this.getSize(),u=t.DomUtil.getPosition(this._mapPane),a=u.multiplyBy(-1)._subtract(o.multiplyBy(s)),f=a.add(o.multiplyBy(1+s*2)),l=f.x-a.x,c=f.y-a.y;i.minX=a.x,i.minY=a.y,i.maxX=f.x,i.maxY=f.y,t.DomUtil.setPosition(e,a),n.width(l),n.height(c),n.viewBox(new r(a.x,a.y,l,c))}}),a}),define("splunk/palettes/ColorPalette",["require","jg_global","jg_global","jgatt","jgatt","jgatt","jgatt"],function(e){var t=e("jg_global").jg_extend,n=e("jg_global").jg_mixin,r=e("jgatt").events.MObservable,i=e("jgatt").properties.MPropertyTarget,s=e("jgatt").properties.Property,o=e("jgatt").properties.PropertyEventData;return t(Object,function(e,t){t=n(this,r,t),t=n(this,i,t),this._properties=null,this.constructor=function(){t.constructor.call(this),this.addEventListener(this.changed,this._self_changed,Infinity)},this.getColor=function(e,t,n){if(e!=null&&typeof e!="string")throw new Error("Parameter field must be a string.");if(t==null)throw new Error("Parameter index must be non-null.");if(typeof t!="number")throw new Error("Parameter index must be a number.");if(n==null)throw new Error("Parameter count must be non-null.");if(typeof n!="number")throw new Error("Parameter count must be a number.");return this._properties||(this._properties=this._getProperties()),this.getColorOverride(this._properties,e,Math.floor(t),Math.floor(n))},this.getColorOverride=function(e,t,n,r){return 0},this._getProperties=function(){var e={},t;for(var n in this)t=this[n],t instanceof s&&(e[n]=this.getInternal(t));return e},this._self_changed=function(e){e.target===this&&e instanceof o&&(this._properties=null)}})}),define("splunk/palettes/ListColorPalette",["require","jg_global","jgatt","jgatt","jgatt","splunk/palettes/ColorPalette"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").graphics.ColorUtils,r=e("jgatt").properties.ObservableArrayProperty,i=e("jgatt").properties.ObservableProperty,s=e("splunk/palettes/ColorPalette");return t(s,function(e,t){this.colors=(new r("colors",Number,[])).readFilter(function(e){return e.concat()}).writeFilter(function(e){return e?e.concat():[]}),this.interpolate=new i("interpolate",Boolean,!1),this.constructor=function(e,n){t.constructor.call(this),e!=null&&this.set(this.colors,e),n!=null&&this.set(this.interpolate,n)},this.getColorOverride=function(e,t,r,i){var s=e.colors,o=s.length;if(o==0)return 0;r<0&&(r=0);if(e.interpolate){i<1&&(i=1),r>i&&(r=i);var u=i==1?0:(o-1)*(r/(i-1)),a=Math.floor(u),f=Math.min(a+1,o-1);return u-=a,n.interpolate(s[a],s[f],u)}return s[r%o]}})}),define("splunk/vectors/Shape",["require","jg_global","jg_global","jgatt","splunk/vectors/VectorElement"],function(e){var t=e("jg_global").jg_extend,n=e("jg_global").jg_static,r=e("jgatt").utils.NumberUtils,i=e("splunk/vectors/VectorElement");return t(i,function(e,t){this.constructor=function(e){t.constructor.call(this,e)},this.fillColor=function(e){return this},this.fillOpacity=function(e){return this},this.strokeColor=function(e){return this},this.strokeOpacity=function(e){return this},this.strokeWidth=function(e){return this},this.strokeLineCap=function(e){return this},this.strokeLineJoin=function(e){return this},this.strokeMiterLimit=function(e){return this};var s=n(function(e){this.constructor=function(e){t.constructor.call(this,e),this.fillColor(NaN),this.strokeColor(NaN),this.strokeLineCap("none"),this.strokeLineJoin("miter")},this.fillColor=function(e){return e!=null&&!isNaN(e)?(e=r.minMax(Math.floor(e),0,16777215),this.element.setAttribute("fill","#"+(e|16777216).toString(16).substring(1))):this.element.setAttribute("fill","none"),this},this.fillOpacity=function(e){return e!=null&&!isNaN(e)?this.element.setAttribute("fill-opacity",r.minMax(e,0,1)):this.element.removeAttribute("fill-opacity"),this},this.strokeColor=function(e){return e!=null&&!isNaN(e)?(e=r.minMax(Math.floor(e),0,16777215),this.element.setAttribute("stroke","#"+(e|16777216).toString(16).substring(1))):this.element.removeAttribute("stroke"),this},this.strokeOpacity=function(e){return e!=null&&!isNaN(e)?this.element.setAttribute("stroke-opacity",r.minMax(e,0,1)):this.element.removeAttribute("stroke-opacity"),this},this.strokeWidth=function(e){return e!=null&&e<Infinity?this.element.setAttribute("stroke-width",Math.max(e,1)):this.element.removeAttribute("stroke-width"),this},this.strokeLineCap=function(e){return e==="round"?this.element.setAttribute("stroke-linecap","round"):e==="square"?this.element.setAttribute("stroke-linecap","square"):this.element.removeAttribute("stroke-linecap"),this},this.strokeLineJoin=function(e){return e==="round"?this.element.setAttribute("stroke-linejoin","round"):e==="bevel"?this.element.setAttribute("stroke-linejoin","bevel"):this.element.removeAttribute("stroke-linejoin"),this},this.strokeMiterLimit=function(e){return e!=null&&e<Infinity?this.element.setAttribute("stroke-miterlimit",Math.max(e,1)):this.element.removeAttribute("stroke-miterlimit"),this}}),o=n(function(e){this._fillElement=null,this._strokeElement=null,this.constructor=function(e){t.constructor.call(this,e),this._fillElement=this.createElement("fill"),this._strokeElement=this.createElement("stroke"),this.element.appendChild(this._fillElement),this.element.appendChild(this._strokeElement),this.fillColor(NaN),this.strokeColor(NaN),this.strokeLineCap("none"),this.strokeLineJoin("miter")},this.dispose=function(){t.dispose.call(this),this._fillElement=null,this._strokeElement=null},this.fillColor=function(e){return e!=null&&!isNaN(e)?(e=r.minMax(Math.floor(e),0,16777215),this._fillElement.on=!0,this._fillElement.color="#"+(e|16777216).toString(16).substring(1)):(this._fillElement.on=!1,this._fillElement.color="#000000"),this},this.fillOpacity=function(e){return e!=null&&!isNaN(e)?this._fillElement.opacity=r.minMax(e,0,1):this._fillElement.opacity=1,this},this.strokeColor=function(e){return e!=null&&!isNaN(e)?(e=r.minMax(Math.floor(e),0,16777215),this._strokeElement.on=!0,this._strokeElement.color="#"+(e|16777216).toString(16).substring(1)):(this._strokeElement.on=!1,this._strokeElement.color="#000000"),this},this.strokeOpacity=function(e){return e!=null&&!isNaN(e)?this._strokeElement.opacity=r.minMax(e,0,1):this._strokeElement.opacity=1,this},this.strokeWidth=function(e){return e!=null&&e<Infinity?this._strokeElement.weight=Math.max(e,1)+"px":this._strokeElement.weight="1px",this},this.strokeLineCap=function(e){return e==="round"?this._strokeElement.endcap="round":e==="square"?this._strokeElement.endcap="square":this._strokeElement.endcap="flat",this},this.strokeLineJoin=function(e){return e==="round"?this._strokeElement.joinstyle="round":e==="bevel"?this._strokeElement.joinstyle="bevel":this._strokeElement.joinstyle="miter",this},this.strokeMiterLimit=function(e){return e!=null&&e<Infinity?this._strokeElement.miterlimit=Math.max(e,1):this._strokeElement.miterlimit=4,this}});i.mixin(this,s,o)})}),define("splunk/vectors/Wedge",["require","jg_global","jg_global","jgatt","splunk/vectors/Shape","splunk/vectors/VectorElement"],function(e){var t=e("jg_global").jg_extend,n=e("jg_global").jg_static,r=e("jgatt").utils.NumberUtils,i=e("splunk/vectors/Shape"),s=e("splunk/vectors/VectorElement");return t(i,function(e,t){this.constructor=function(){t.constructor.call(this)},this.draw=function(e,t,n,r,i,s){return this};var i=n(function(e){this.constructor=function(){t.constructor.call(this,"path")},this.draw=function(e,t,n,i,s,o){e=e!=null&&e>-Infinity&&e<Infinity?e:0,t=t!=null&&t>-Infinity&&t<Infinity?t:0,n=n!=null&&n<Infinity?Math.max(n,0):0,i=i!=null&&i<Infinity?Math.max(i,0):0,s=s!=null&&s>-Infinity&&s<Infinity?s:0,o=o!=null&&o!=null&&!isNaN(o)?r.minMax(o,-360,360):0;if(n==0||i==0||o==0)return this.element.removeAttribute("d"),this;var u=s/180*Math.PI,a=e+Math.cos(u)*n,f=t+Math.sin(u)*i,l=(s+o/2)/180*Math.PI,c=e+Math.cos(l)*n,h=t+Math.sin(l)*i,p=(s+o)/180*Math.PI,d=e+Math.cos(p)*n,v=t+Math.sin(p)*i,m=o<0?0:1,g="";return o>-360&&o<360?(g+="M"+e+","+t,g+=" L"+a+","+f):g+="M"+a+","+f,g+=" A"+n+","+i+" 0 0 "+m+" "+c+","+h,g+=" "+n+","+i+" 0 0 "+m+" "+d+","+v,g+=" Z",this.element.setAttribute("d",g),this}}),o=n(function(e){var n=64;this._pathElement=null,this.constructor=function(){t.constructor.call(this,"shape"),this._pathElement=this.createElement("path"),this.element.style.width="1px",this.element.style.height="1px",this.element.coordsize=n+","+n,this.element.appendChild(this._pathElement)},this.dispose=function(){t.dispose.call(this),this._pathElement=null},this.draw=function(e,t,i,s,o,u){e=e!=null&&e>-Infinity&&e<Infinity?e:0,t=t!=null&&t>-Infinity&&t<Infinity?t:0,i=i!=null&&i<Infinity?Math.max(i,0):0,s=s!=null&&s<Infinity?Math.max(s,0):0,o=o!=null&&o>-Infinity&&o<Infinity?o:0,u=u!=null&&u!=null&&!isNaN(u)?r.minMax(u,-360,360):0;if(i==0||s==0||u==0)return this._pathElement.v=" ",this;var a=o/180*Math.PI,f=e+Math.cos(a)*i,l=t+Math.sin(a)*s,c=(o+u/2)/180*Math.PI,h=e+Math.cos(c)*i,p=t+Math.sin(c)*s,d=(o+u)/180*Math.PI,v=e+Math.cos(d)*i,m=t+Math.sin(d)*s,g=Math.round((e-i)*n),y=Math.round((t-s)*n),b=Math.round((e+i)*n),w=Math.round((t+s)*n);e=Math.round(e*n),t=Math.round(t*n),f=Math.round(f*n),l=Math.round(l*n),h=Math.round(h*n),p=Math.round(p*n),v=Math.round(v*n),m=Math.round(m*n);var E="";return u>-360&&u<360?(E+="m "+e+","+t,E+=" l "+f+","+l):E+="m "+f+","+l,E+=u<0?" at":" wa",E+=" "+g+","+y+","+b+","+w+", "+f+","+l+", "+h+","+p,E+=", "+g+","+y+","+b+","+w+", "+h+","+p+", "+v+","+m,E+=" x",this._pathElement.v=E,this}});s.mixin(this,i,o)})}),define("splunk/viz/MDataTarget",["require","jg_global","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/charting/Legend"],function(e){var t=e("jg_global").jg_static,n=e("jg_global").jg_mixin,r=e("jgatt").events.MObservable,i=e("jgatt").properties.MPropertyTarget,s=e("jgatt").properties.ObservableArrayProperty,o=e("jgatt").properties.ObservableProperty,u=e("jgatt").utils.FunctionUtils,a=e("jgatt").validation.MValidateTarget,f=e("jgatt").validation.ValidatePass,l=e("splunk/charting/Legend");return t(function(e){this.mixin=function(e){e=n(this,r,e),e=n(this,i,e),e=n(this,a,e)},this.processDataPass=new f("processData",.1),this.updateLegendLabelsPass=new f("updateLegendLabels",.2),this.renderDataPass=new f("renderData",.3),this.data=(new o("data",Array,null)).onChanged(function(e){this.invalidate("processDataPass")}),this.fields=(new s("fields",String,null)).onChanged(function(e){this.invalidate("processDataPass")}),this.legend=(new o("legend",l,null)).onChanged(function(e){if(e.target===this){var t=e.oldValue,n=e.newValue;t&&(t.removeEventListener("settingLabels",this._legend_settingLabels),t.unregister(this)),n&&(n.register(this),n.addEventListener("settingLabels",this._legend_settingLabels)),this.invalidate("updateLegendLabelsPass");return}if(e.event===e.target.labelIndexMapChanged){this.invalidate("renderDataPass");return}}),this._cachedData=null,this._cachedFields=null,this._cachedLegend=null,this.constructor=function(){this._legend_settingLabels=u.bind(this._legend_settingLabels,this)},this.processData=function(){this.validatePreceding("processDataPass");if(this.isValid("processDataPass"))return;this.invalidate("updateLegendLabelsPass");var e=this._cachedData=this.getInternal("data")||[],t=this._cachedFields=this.getInternal("fields")||[];this.processDataOverride(e,t),this.setValid("processDataPass")},this.updateLegendLabels=function(){this.validatePreceding("updateLegendLabelsPass");if(this.isValid("updateLegendLabelsPass"))return;this.invalidate("renderDataPass");var e=this._cachedLegend=this.getInternal("legend"),t=null;e&&(t=this.updateLegendLabelsOverride(this._cachedData,this._cachedFields)),this.setValid("updateLegendLabelsPass"),e&&e.setLabels(this,t)},this.renderData=function(){this.validatePreceding("renderDataPass");if(this.isValid("renderDataPass"))return;this.renderDataOverride(this._cachedData,this._cachedFields,this._cachedLegend),this.setValid("renderDataPass")},this.processDataOverride=function(e,t){},this.updateLegendLabelsOverride=function(e,t){return null},this.renderDataOverride=function(e,t,n){},this._legend_settingLabels=function(e){this.validate("updateLegendLabelsPass")}})}),define("splunk/mapping/layers/PieMarkerLayer",["require","leaflet","jg_global","jg_global","jgatt","jgatt","jgatt","jgatt","splunk/mapping/LatLon","splunk/mapping/LatLonBounds","splunk/mapping/layers/LayerBase","splunk/mapping/layers/VectorLayerBase","splunk/palettes/ColorPalette","splunk/palettes/ListColorPalette","splunk/vectors/Group","splunk/vectors/Wedge","splunk/viz/MDataTarget"],function(e){var t=e("leaflet"),n=e("jg_global").jg_extend,r=e("jg_global").jg_mixin,i=e("jgatt").geom.Point,s=e("jgatt").geom.Rectangle,o=e("jgatt").properties.ObservableProperty,u=e("jgatt").utils.NumberUtils,a=e("splunk/mapping/LatLon"),f=e("splunk/mapping/LatLonBounds"),l=e("splunk/mapping/layers/LayerBase"),c=e("splunk/mapping/layers/VectorLayerBase"),h=e("splunk/palettes/ColorPalette"),p=e("splunk/palettes/ListColorPalette"),d=e("splunk/vectors/Group"),v=e("splunk/vectors/Wedge"),m=e("splunk/viz/MDataTarget"),g=n(c,function(e,n){n=r(this,m,n),this.markerColorPalette=(new o("markerColorPalette",h,new p([52224,13421568,13369344],!0))).onChanged(function(e){this.invalidate("renderDataPass")}),this.markerOpacity=(new o("markerOpacity",Number,1)).writeFilter(function(e){return e>=0&&e<=Infinity?Math.min(e,1):0}).onChanged(function(e){this.invalidate("renderDataPass")}),this.markerMinSize=(new o("markerMinSize",Number,10)).writeFilter(function(e){return e>=0&&e<Infinity?e:0}).onChanged(function(e){this.invalidate("renderDataPass")}),this.markerMaxSize=(new o("markerMaxSize",Number,50)).writeFilter(function(e){return e>=0&&e<Infinity?e:0}).onChanged(function(e){this.invalidate("renderDataPass")}),this.wrapX=(new o("wrapX",Boolean,!0)).onChanged(function(e){this.invalidate("renderPass")}),this.wrapY=(new o("wrapY",Boolean,!1)).onChanged(function(e){this.invalidate("renderPass")}),this._seriesList=null,this._markerList=null,this.constructor=function(){n.constructor.call(this),this._seriesList=[],this._markerList=[]},this.getLatLonBounds=function(e){if(e==null||e instanceof a){this.validate();var t=new f(Infinity,Infinity,-Infinity,-Infinity),n=this._markerList;for(var r=0,i=n.length;r<i;r++)t.expand(n[r].latLon.normalize(e));return t.isFinite()?t:null}throw new Error("Parameter center must be an instance of splunk.mapping.LatLon.")},this.processDataOverride=function(e,t){var n=this._seriesList,r=0,i,s=this._markerList,o=0,f,l,c,h,p,d,v=e.length,m=t.length;if(v>0&&m>2){var g=this.vectorContainer,E=t[0],S=t[1],x,T,N,C,k=Infinity,L=-Infinity,A=0,O,M,_,D;for(p=2;p<m;p++)x=t[p],r<n.length?i=n[r]:(i=new y,n.push(i)),i.name=x,r++;for(p=0;p<v;p++){obj=e[p];if(obj==null)continue;T=u.parseNumber(obj[E]),N=u.parseNumber(obj[S]);if(isNaN(T)||isNaN(N))continue;o<s.length?f=s[o]:(f=new b,f.appendTo(g),s.push(f)),l=f.sliceList,c=0,O=0;for(d=0;d<r;d++){i=n[d],C=u.parseNumber(obj[i.name]);if(isNaN(C)||C<=0)continue;c<l.length?h=l[c]:(h=new w,h.appendTo(f),l.push(h)),h.series=i,h.value=C,O+=C,c++}if(c===0)continue;f.latLon=new a(T,N),f.data=obj,f.fields=t,f.magnitude=O,O<k&&(k=O),O>L&&(L=O),M=0,_=0,D=0;for(d=0;d<c;d++)h=l[d],M+=h.value,_=D,D=360*(M/O),h.startAngle=_-90,h.arcAngle=D-_;for(d=l.length-1;d>=c;d--)h=l.pop(),h.dispose();o++}A=L-k;for(p=0;p<o;p++)f=s[p],f.scale=A>0?u.minMax((f.magnitude-k)/A,0,1):1/o}for(p=s.length-1;p>=o;p--)f=s.pop(),f.dispose();for(p=n.length-1;p>=r;p--)n.pop()},this.updateLegendLabelsOverride=function(e,t){var n=this._seriesList,r=n.length,i=r>0?new Array(r):null;for(var s=0;s<r;s++)i[s]=n[s].name;return i},this.renderDataOverride=function(e,t,n){this.invalidate("renderPass");var r=this._seriesList,i=r.length,s,o,a,f=this.getInternal("markerColorPalette"),l=this.getInternal("markerOpacity"),c=this.getInternal("markerMinSize"),h=this.getInternal("markerMaxSize"),p=this._markerList,d=p.length,v,m,g,y,b,w;a=n?n.getNumLabels():i;for(b=0;b<i;b++)s=r[b],o=n?n.getLabelIndex(s.name):b,s.color=f?f.getColor(s.name,o,a):0;for(b=0;b<d;b++){v=p[b],m=v.sliceList,g=m.length,v.radius=Math.round(u.interpolate(c,h,v.scale))/2,v.tooltipOffsetRadius=v.radius,v.display("none");for(w=0;w<g;w++)y=m[w],y.fillColor(y.series.color),y.fillOpacity(l),y.draw(0,0,v.radius,v.radius,y.startAngle,y.arcAngle)}},this.renderOverride=function(e){n.renderOverride.call(this,e);var r=e.leafletMap,i=r.getCenter(),s=this.getInternal("wrapX"),o=this.getInternal("wrapY"),u=this.vectorBounds,a=u.minX,f=u.minY,l=u.maxX,c=u.maxY,h=this._markerList,p,d,v;for(var m=0,g=h.length;m<g;m++)p=h[m],d=new t.LatLng(p.latLon.lat,p.latLon.lon),s&&(d.lng-=i.lng,d.lng%=360,d.lng>180?d.lng-=360:d.lng<-180&&(d.lng+=360),d.lng+=i.lng),o&&(d.lat-=i.lat,d.lat%=180,d.lat>90?d.lat-=180:d.lat<-90&&(d.lat+=180),d.lat+=i.lat),p.tooltipLatLng=d,v=r.latLngToLayerPoint(d),p.translate(v.x,v.y),v.x+p.radius<a||v.x-p.radius>l||v.y+p.radius<f||v.y-p.radius>c?p.display("none"):p.display(null)}}),y=n(Object,function(e,t){this.name=null,this.color=0,this.constructor=function(){}}),b=n(d,function(e,t){this.sliceList=null,this.latLon=null,this.data=null,this.fields=null,this.magnitude=0,this.scale=0,this.radius=0,this.tooltipLatLng=null,this.tooltipOffsetRadius=0,this.constructor=function(){t.constructor.call(this),this.element[l.METADATA_KEY]=this,this.sliceList=[]},this.dispose=function(){var e=this.sliceList;for(var n=e.length-1;n>=0;n--)e[n].dispose();this.element[l.METADATA_KEY]=null,t.dispose.call(this)}}),w=n(v,function(e,t){this.series=null,this.value=0,this.startAngle=0,this.arcAngle=0,this.constructor=function(){t.constructor.call(this)}});return g}),define("splunk/parsers/Parser",["require","jg_global"],function(e){var t=e("jg_global").jg_extend;return t(Object,function(e,t){this.stringToValue=function(e){return null},this.valueToString=function(e){return null}})}),define("splunk/parsers/ParseUtils",["require","jg_global"],function(e){var t=e("jg_global").jg_static;return t(function(e){var t=/\\([.\n\r]?)/g,n=/\\/g,r=/"/g;e.prepareArray=function(t){if(!t||typeof t!="string")return null;t=e.trimWhiteSpace(t);if(!t)return null;var n=t.length;if(n<2)return null;if(t.charAt(0)!="[")return null;if(t.charAt(n-1)!="]")return null;t=t.substring(1,n-1),n=t.length;var r=[],s=-1,o;while(s<n)s++,o=i(t,s,","),s+=o.length,o=e.trimWhiteSpace(o),(o||s<n||r.length>0)&&r.push(e.unescapeString(o));return r},e.prepareObject=function(t){if(!t||typeof t!="string")return null;t=e.trimWhiteSpace(t);if(!t)return null;var n=t.length;if(n<2)return null;if(t.charAt(0)!="{")return null;if(t.charAt(n-1)!="}")return null;t=t.substring(1,n-1),n=t.length;var r={},s=0,o,u;while(s<n){o=i(t,s,":"),s+=o.length+1;if(s>n)break;u=i(t,s,","),s+=u.length+1,o=e.unescapeString(o),o&&(r[o]=e.unescapeString(u))}return r},e.prepareTuple=function(t){if(!t||typeof t!="string")return null;t=e.trimWhiteSpace(t);if(!t)return null;var n=t.length;if(n<2)return null;if(t.charAt(0)!="(")return null;if(t.charAt(n-1)!=")")return null;t=t.substring(1,n-1),n=t.length;var r=[],s=-1,o;while(s<n)s++,o=i(t,s,","),s+=o.length,o=e.trimWhiteSpace(o),(o||s<n||r.length>0)&&r.push(e.unescapeString(o));return r},e.unescapeString=function(n){if(n==null||typeof n!="string")return null;if(!n)return n;n=e.trimWhiteSpace(n);if(!n)return n;var r=n.length;return r<2?n:n.charAt(0)!='"'?n:n.charAt(r-1)!='"'?n:(n=n.substring(1,r-1),n?(n=n.replace(t,"$1"),n):n)},e.escapeString=function(e){return e==null||typeof e!="string"?null:(e=e.replace(n,"\\\\"),e=e.replace(r,'\\"'),'"'+e+'"')},e.trimWhiteSpace=function(t){if(t==null||typeof t!="string")return null;if(!t)return t;var n=0,r=t.length-1;for(n;n<=r;n++)if(!e.isWhiteSpace(t.charAt(n)))break;for(r;r>=n;r--)if(!e.isWhiteSpace(t.charAt(r)))break;return t.substring(n,r+1)},e.isWhiteSpace=function(e){return e===" "||e==="	"||e==="\n"||e==="\r"};var i=function(e,t,n){var r="",i=t,s=e.length,o,u=!1,a=0,f,l;while(i<s){o=e.charAt(i);if(u)o=='"'?u=!1:o=="\\"&&(r+=o,i++,o=e.charAt(i));else if(a>0)o==l?a--:o==f?a++:o=='"'&&(u=!0);else{if(o==n)break;o=="["?(a=1,f="[",l="]"):o=="{"?(a=1,f="{",l="}"):o=="("?(a=1,f="(",l=")"):o=='"'&&(u=!0)}r+=o,i++}return r}})}),define("splunk/parsers/NumberParser",["require","jg_global","splunk/parsers/Parser","splunk/parsers/ParseUtils"],function(e){var t=e("jg_global").jg_extend,n=e("splunk/parsers/Parser"),r=e("splunk/parsers/ParseUtils");return t(n,function(e,t){var n=null;e.getInstance=function(){return n||(n=new e),n},this.stringToValue=function(e){return e=r.trimWhiteSpace(e),e?Number(e):NaN},this.valueToString=function(e){return typeof e=="number"?String(e):String(NaN)}})}),define("splunk/mapping/parsers/LatLonBoundsParser",["require","jg_global","splunk/mapping/LatLonBounds","splunk/parsers/NumberParser","splunk/parsers/Parser","splunk/parsers/ParseUtils"],function(e){var t=e("jg_global").jg_extend,n=e("splunk/mapping/LatLonBounds"),r=e("splunk/parsers/NumberParser"),i=e("splunk/parsers/Parser"),s=e("splunk/parsers/ParseUtils");return t(i,function(e,t){var i=null;e.getInstance=function(){return i||(i=new e),i},this.numberParser=null,this.constructor=function(){this.numberParser=r.getInstance()},this.stringToValue=function(e){var t=s.prepareTuple(e);if(!t)return null;var r=new n,i=t.length;return i>0&&(r.s=this.numberParser.stringToValue(t[0])),i>1&&(r.w=this.numberParser.stringToValue(t[1])),i>2&&(r.n=this.numberParser.stringToValue(t[2])),i>3&&(r.e=this.numberParser.stringToValue(t[3])),r},this.valueToString=function(e){var t=e instanceof n?e:null;if(!t)return null;var r="";return r+=this.numberParser.valueToString(t.s)+",",r+=this.numberParser.valueToString(t.w)+",",r+=this.numberParser.valueToString(t.n)+",",r+=this.numberParser.valueToString(t.e),"("+r+")"}})}),define("splunk/mapping/parsers/LatLonParser",["require","jg_global","splunk/mapping/LatLon","splunk/parsers/NumberParser","splunk/parsers/Parser","splunk/parsers/ParseUtils"],function(e){var t=e("jg_global").jg_extend,n=e("splunk/mapping/LatLon"),r=e("splunk/parsers/NumberParser"),i=e("splunk/parsers/Parser"),s=e("splunk/parsers/ParseUtils");return t(i,function(e,t){var i=null;e.getInstance=function(){return i||(i=new e),i},this.numberParser=null,this.constructor=function(){this.numberParser=r.getInstance()},this.stringToValue=function(e){var t=s.prepareTuple(e);if(!t)return null;var r=new n,i=t.length;return i>0&&(r.lat=this.numberParser.stringToValue(t[0])),i>1&&(r.lon=this.numberParser.stringToValue(t[1])),r},this.valueToString=function(e){var t=e instanceof n?e:null;if(!t)return null;var r="";return r+=this.numberParser.valueToString(t.lat)+",",r+=this.numberParser.valueToString(t.lon),"("+r+")"}})}),define("splunk/palettes/FieldColorPalette",["require","jg_global","jgatt","splunk/palettes/ColorPalette"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").properties.ObservableProperty,r=e("splunk/palettes/ColorPalette");return t(r,function(e,t){var i=function(e){var t={};for(var n in e)e[n]!=null&&(t[n]=Number(e[n]));return t};this.fieldColors=(new n("fieldColors",Object,{})).readFilter(function(e){return i(e)}).writeFilter(function(e){return i(e)}),this.defaultColorPalette=new n("defaultColorPalette",r,null),this.constructor=function(e,n){t.constructor.call(this),e!=null&&this.set(this.fieldColors,e),n!=null&&this.set(this.defaultColorPalette,n)},this.getColorOverride=function(e,t,n,r){if(t){var i=e.fieldColors[t];if(i!=null&&!isNaN(i))return i}return e.defaultColorPalette?e.defaultColorPalette.getColor(t,n,r):0}})}),define("splunk/parsers/StringParser",["require","jg_global","splunk/parsers/Parser"],function(e){var t=e("jg_global").jg_extend,n=e("splunk/parsers/Parser");return t(n,function(e,t){var n=null;e.getInstance=function(){return n||(n=new e),n},this.stringToValue=function(e){return e==null||typeof e!="string"?null:e},this.valueToString=function(e){return e==null?null:String(e)}})}),define("splunk/parsers/ArrayParser",["require","jg_global","jgatt","splunk/parsers/Parser","splunk/parsers/ParseUtils","splunk/parsers/StringParser"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").utils.Dictionary,r=e("splunk/parsers/Parser"),i=e("splunk/parsers/ParseUtils"),s=e("splunk/parsers/StringParser");return t(r,function(e,t){var o=new n;e.getInstance=function(t){var n=o.get(t);return n||(n=o.set(t,new e(t))),n},this.elementParser=null,this.constructor=function(e){if(e==null)throw new Error("Parameter elementParser must be non-null.");if(!(e instanceof r))throw new Error("Parameter elementParser must be an instance of splunk.parsers.Parser.");this.elementParser=e},this.stringToValue=function(e){var t=i.prepareArray(e);if(!t)return null;var n=this.elementParser;for(var r=0,s=t.length;r<s;r++)t[r]=n.stringToValue(t[r]);return t},this.valueToString=function(e){var t=e instanceof Array?e:null;if(!t)return null;var n="",r=this.elementParser,o;for(var u=0,a=t.length;u<a;u++)o=t[u],n&&(n+=","),r instanceof s?n+=i.escapeString(r.valueToString(o)):n+=r.valueToString(o);return"["+n+"]"}})}),define("splunk/parsers/BooleanParser",["require","jg_global","splunk/parsers/Parser","splunk/parsers/ParseUtils"],function(e){var t=e("jg_global").jg_extend,n=e("splunk/parsers/Parser"),r=e("splunk/parsers/ParseUtils");return t(n,function(e,t){var n=null;e.getInstance=function(){return n||(n=new e),n},this.stringToValue=function(e){return e=r.trimWhiteSpace(e),e&&(e=e.toLowerCase()),e==="true"||e==="t"||e==="1"},this.valueToString=function(e){return e?"true":"false"}})}),define("splunk/parsers/ObjectParser",["require","jg_global","jgatt","splunk/parsers/Parser","splunk/parsers/ParseUtils","splunk/parsers/StringParser"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").utils.Dictionary,r=e("splunk/parsers/Parser"),i=e("splunk/parsers/ParseUtils"),s=e("splunk/parsers/StringParser");return t(r,function(e,t){var o=new n;e.getInstance=function(t){var n=o.get(t);return n||(n=o.set(t,new e(t))),n},this.elementParser=null,this.constructor=function(e){if(e==null)throw new Error("Parameter elementParser must be non-null.");if(!(e instanceof r))throw new Error("Parameter elementParser must be an instance of splunk.parsers.Parser.");this.elementParser=e},this.stringToValue=function(e){var t=i.prepareObject(e);if(!t)return null;var n=this.elementParser;for(var r in t)t.hasOwnProperty(r)&&(t[r]=n.stringToValue(t[r]));return t},this.valueToString=function(e){var t=e instanceof Object?e:null;if(!t)return null;var n="",r=this.elementParser;for(var o in t)t.hasOwnProperty(o)&&(n&&(n+=","),n+=i.escapeString(o)+":",r instanceof s?n+=i.escapeString(r.valueToString(t[o])):n+=r.valueToString(t[o]));return"{"+n+"}"}})}),define("views/shared/Map",["require","exports","module","jquery","splunk.i18n","splunk.util","jgatt","jgatt","splunk/charting/ExternalLegend","splunk/mapping/Map","splunk/mapping/layers/PieMarkerLayer","splunk/mapping/parsers/LatLonBoundsParser","splunk/mapping/parsers/LatLonParser","splunk/palettes/FieldColorPalette","splunk/palettes/ListColorPalette","splunk/parsers/ArrayParser","splunk/parsers/BooleanParser","splunk/parsers/NumberParser","splunk/parsers/ObjectParser","splunk/parsers/StringParser","views/Base","util/console"],function(e,t,n){var r=e("jquery"),i=e("splunk.i18n"),s=i._,o=e("splunk.util"),u=o.sprintf,a=e("jgatt").utils.FunctionUtils,f=e("jgatt").validation.ValidateQueue,l=e("splunk/charting/ExternalLegend"),c=e("splunk/mapping/Map"),h=e("splunk/mapping/layers/PieMarkerLayer"),p=e("splunk/mapping/parsers/LatLonBoundsParser"),d=e("splunk/mapping/parsers/LatLonParser"),v=e("splunk/palettes/FieldColorPalette"),m=e("splunk/palettes/ListColorPalette"),g=e("splunk/parsers/ArrayParser"),y=e("splunk/parsers/BooleanParser"),b=e("splunk/parsers/NumberParser"),w=e("splunk/parsers/ObjectParser"),E=e("splunk/parsers/StringParser"),S=e("views/Base"),x=e("util/console"),T={fieldColors:"",seriesColors:"[0x6CB8CA,0xFAC61D,0xD85E3D,0x956E96,0xF7912C,0x9AC23C,0x5479AF,0x999755,0xDD87B0,0x65AA82,0xA7D4DF,0xFCDD77,0xE89E8B,0xBFA8C0,0xFABD80,0xC2DA8A,0x98AFCF,0xC2C199,0xEBB7D0,0xA3CCB4,0x416E79,0x967711,0x823825,0x59425A,0x94571A,0x5C7424,0x324969,0x5C5B33,0x85516A,0x3D664E]","data.maxClusters":"100","tileLayer.url":"/splunkd/__raw/services/mbtiles/splunk-tiles/{z}/{x}/{y}","tileLayer.subdomains":"[a,b,c]","tileLayer.minZoom":"0","tileLayer.maxZoom":"7","tileLayer.invertY":"false","tileLayer.attribution":"","markerLayer.markerOpacity":"1","markerLayer.markerMinSize":"10","markerLayer.markerMaxSize":"50"},N=/^display\.visualizations\.mapping\./;return S.extend({moduleId:n.id,_map:null,_markerLayer:null,_externalLegend:null,_fieldColorPalette:null,_seriesColorPalette:null,_propertyValues:null,_booleanParser:null,_numberParser:null,_stringParser:null,_numberArrayParser:null,_stringArrayParser:null,_numberObjectParser:null,_latLonParser:null,_latLonBoundsParser:null,_maxClusters:100,_isPrinting:!1,_prePrintCenter:null,_prePrintZoom:0,initialize:function(e){S.prototype.initialize.apply(this,arguments),this.options=e||{},this.$el.width(this.options.width||"100%"),this.$el.height(this.options.height||"400px"),this.model.searchResultsRow?this.model.searchResultsRow.on("change destroy error",this.updateData,this):this.model.searchResultsColumn&&this.model.searchResultsColumn.on("change destroy error",this.updateData,this),this.model.state&&this.model.state.on("change",this._state_change,this),this._map_boundsChanged=a.bind(this._map_boundsChanged,this),this._map_mapClicked=a.bind(this._map_mapClicked,this),this._document_PrintStart=a.bind(this._document_PrintStart,this),this._document_PrintEnd=a.bind(this._document_PrintEnd,this),this._propertyValues={},this._booleanParser=y.getInstance(),this._numberParser=b.getInstance(),this._stringParser=E.getInstance(),this._numberArrayParser=g.getInstance(this._numberParser),this._stringArrayParser=g.getInstance(this._stringParser),this._numberObjectParser=w.getInstance(this._numberParser),this._latLonParser=d.getInstance(),this._latLonBoundsParser=p.getInstance(),this._seriesColorPalette=new m,this._fieldColorPalette=new v(null,this._seriesColorPalette),this._externalLegend=new l,this._externalLegend.connect(),this._markerLayer=new h,this._markerLayer.set("legend",this._externalLegend),this._markerLayer.set("markerColorPalette",this._fieldColorPalette),this._map=new c,this._map.formatNumber=this._formatNumber,this._map.formatDegrees=this._formatDegrees,this._map.addLayer(this._markerLayer),this._map.addEventListener("boundsChanged",this._map_boundsChanged),this._map.addEventListener("mapClicked",this._map_mapClicked),this._map.appendTo(this.$el),this._map.fitWorld(!0),r(document).bind("PrintStart",this._document_PrintStart),r(document).bind("PrintEnd",this._document_PrintEnd),this.updateData(),this.updateProperties(),this._updateDataBounds()},getLatLonBounds:function(){return this._map.getLatLonBounds().normalize()},getPostProcessSearch:function(){var e=this._map.getLatLonBounds().normalize();return"geofilter south="+e.s+" west="+e.w+" north="+e.n+" east="+e.e+" maxclusters="+this._maxClusters},getMaxClusters:function(){return this._maxClusters},updateData:function(){var e=null;this.model.searchResultsRow?e=this._extractRowData(this.model.searchResultsRow):this.model.searchResultsColumn&&(e=this._extractColumnData(this.model.searchResultsColumn)),x.debug("Updating map data to",e),this._markerLayer.set("data",e?e.data:null),this._markerLayer.set("fields",e?this._filterFields(e.fields):null)},updateProperties:function(){var e=this._propertyValues,t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=null);var r=T;for(n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);var i=this.model.state?this.model.state.toJSON():{},s=N;for(n in i)i.hasOwnProperty(n)&&s.test(n)&&(t[n.replace(s,"")]=i[n]);t.hasOwnProperty("map.zoom")&&this._setMapProperty("map.zoom",t["map.zoom"]),t.hasOwnProperty("map.center")&&this._setMapProperty("map.center",t["map.center"]),t.hasOwnProperty("map.fitBounds")&&this._setMapProperty("map.fitBounds",t["map.fitBounds"]);for(n in t)t.hasOwnProperty(n)&&this._setMapProperty(n,t[n])},render:function(){return this},remove:function(){return r(document).unbind("PrintStart",this._document_PrintStart),r(document).unbind("PrintEnd",this._document_PrintEnd),this._map.removeEventListener("boundsChanged",this._map_boundsChanged),this._map.removeEventListener("mapClicked",this._map_mapClicked),this._map.dispose(),this._externalLegend.close(),this.model.searchResultsRow?this.model.searchResultsRow.off("change destroy error",this.updateData,this):this.model.searchResultsColumn&&this.model.searchResultsColumn.off("change destroy error",this.updateData,this),this.model.state&&this.model.state.off("change",this._state_change,this),S.prototype.remove.apply(this,arguments)},onShow:function(){this._map.updateSize(),this._map.validate(),S.prototype.onShow.call(this)},_updateDataBounds:function(){var e=this.model.state;if(!e)return;var t=this._map.getLatLonBounds().normalize();e.set({"display.visualizations.mapping.data.bounds":this._latLonBoundsParser.valueToString(t)})},_needsPropertyUpdate:function(e){if(!e)return!1;for(var t in e)if(e.hasOwnProperty(t)&&t!=="display.visualizations.mapping.data.bounds")return!0;return!1},_extractRowData:function(e){var t={},n=e.get("fields"),r=e.get("rows");if(n&&r){var i=n.length,s=r.length,o,u,a,f,l;t.fields=n.concat(),t.data=[];for(f=0;f<s;f++){u=r[f],o=Math.min(u.length,i),a={};for(l=0;l<o;l++)a[n[l]]=u[l];t.data.push(a)}}return t},_extractColumnData:function(e){var t={},n=e.get("fields"),r=e.get("columns");if(n&&r){var i=Math.min(n.length,r.length),s=i>0?r[0].length:0,o,u,a;for(u=1;u<i;u++)s=Math.min(s,r[u].length);t.fields=n.slice(0,i),t.data=[];for(u=0;u<s;u++){o={};for(a=0;a<i;a++)o[n[a]]=r[a][u];t.data.push(o)}}return t},_filterFields:function(e){if(!e)return null;var t=[],n;for(var r=0,i=e.length;r<i;r++)n=e[r],n&&n.charAt(0)!=="_"&&t.push(n);return t},_setMapProperty:function(e,t){t=t!=null?String(t):null;if(this._propertyValues[e]==t)return;t!=null?this._propertyValues[e]=t:delete this._propertyValues[e];switch(e){case"fieldColors":this._fieldColorPalette.set("fieldColors",this._numberObjectParser.stringToValue(t));break;case"seriesColors":this._seriesColorPalette.set("colors",this._numberArrayParser.stringToValue(t));break;case"data.maxClusters":var n=this._numberParser.stringToValue(t);this._maxClusters=n<Infinity?Math.max(Math.floor(n),1):100;break;case"map.center":var r=this._latLonParser.stringToValue(t);r&&this._map.set("center",r);break;case"map.zoom":var i=this._numberParser.stringToValue(t);isNaN(i)||this._map.set("zoom",i);break;case"map.fitBounds":var s=this._latLonBoundsParser.stringToValue(t);s&&this._map.fitBounds(s);break;case"tileLayer.url":this._map.set("tileURL",this._resolveURL(t));break;case"tileLayer.subdomains":this._map.set("tileSubdomains",this._stringArrayParser.stringToValue(t));break;case"tileLayer.minZoom":this._map.set("tileMinZoom",this._numberParser.stringToValue(t));break;case"tileLayer.maxZoom":this._map.set("tileMaxZoom",this._numberParser.stringToValue(t));break;case"tileLayer.invertY":this._map.set("tileInvertY",this._booleanParser.stringToValue(t));break;case"tileLayer.attribution":this._map.set("tileAttribution",this._stringParser.stringToValue(t));break;case"markerLayer.markerOpacity":this._markerLayer.set("markerOpacity",this._numberParser.stringToValue(t));break;case"markerLayer.markerMinSize":this._markerLayer.set("markerMinSize",this._numberParser.stringToValue(t));break;case"markerLayer.markerMaxSize":this._markerLayer.set("markerMaxSize",this._numberParser.stringToValue(t))}},_resolveURL:function(e){var t=e?o.trim(e):e;if(t&&t.charAt(0)==="/"){var n=t.charAt(t.length-1)==="/";t=o.make_url(t);var r=t.charAt(t.length-1)==="/";r!=n&&(t=n?t+"/":t.substring(0,t.length-1)),e=t}return e},_formatNumber:function(e){var t=Math.abs(e);return t>0&&(t<.001||t>=1e9)?i.format_scientific(e,"##0E0"):i.format_decimal(e)},_formatDegrees:function(e,t){var n=Math.abs(e),r=Math.floor(n),i=""+r,o=(n-r)*60,a=Math.floor(o),f=a<10?"0"+a:""+a,l=(o-a)*60,c=Math.floor(l),h=c<10?"0"+c:""+c,p="";return e>0?p=t==="ns"?s("N"):s("E"):e<0&&(p=t==="ns"?s("S"):s("W")),c>0?u("%(degrees)s°%(minutes)s'%(seconds)s\"%(direction)s",{degrees:i,minutes:f,seconds:h,direction:p}):a>0?u("%(degrees)s°%(minutes)s'%(direction)s",{degrees:i,minutes:f,direction:p}):u("%(degrees)s°%(direction)s",{degrees:i,direction:p})},_state_change:function(){if(this.model.state.get("display.visualizations.type")==="mapping"){var e=this.model.state.filterChangedByWildcards(N,{allowEmpty:!0});this._needsPropertyUpdate(e)&&this.updateProperties()}},_map_boundsChanged:function(e){if(this._isPrinting)return;this._updateDataBounds(),this.trigger("boundsChanged",{})},_map_mapClicked:function(e){if(this._isPrinting)return;this.trigger("mapClicked",{data:e.data,fields:e.fields,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey})},_document_PrintStart:function(e){if(this._isPrinting)return;this._isPrinting=!0,this._prePrintCenter=this._map.get("center"),this._prePrintZoom=this._map.get("zoom"),this._map.updateSize();var t=this._markerLayer.getLatLonBounds(this._prePrintCenter);t&&this._map.fitBounds(t),f.validateAll()},_document_PrintEnd:function(e){if(!this._isPrinting)return;this._map.set("center",this._prePrintCenter),this._map.set("zoom",this._prePrintZoom),this._prePrintCenter=null,this._prePrintZoom=0,this._isPrinting=!1}},{DEFAULT_PROPERTY_VALUES:T})}),define("splunkjs/mvc/splunkmapview",["require","exports","module","jquery","underscore","./mvc","models/Base","./basesplunkview","./messages","splunk.util","views/shared/Map","backbone","./utils","uri/route","JS_CACHE/config","util/console","jquery.ui.resizable","splunk.util","./tokenawaremodel"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("./mvc"),o=e("models/Base"),u=e("./basesplunkview"),a=e("./messages"),f=e("splunk.util"),l=e("views/shared/Map"),c=e("backbone"),h=e("./utils"),p=e("uri/route"),d=e("JS_CACHE/config"),v=e("util/console"),m=e("jquery.ui.resizable"),g=e("splunk.util"),y=e("./tokenawaremodel"),b={openStreetMap:{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:18}},w=u.extend({moduleId:n.id,className:"splunk-map",options:{data:"preview",height:"400px",tileSource:undefined,tileUrl:undefined,maxZoom:undefined,drilldown:!0,drilldownRedirect:!0,resizable:!1},omitFromSettings:["el","reportModel"],initialize:function(){this.configure(),this.model=this.options.reportModel||y._createReportModel(),this.settings._sync=h.syncModels(this.settings,this.model,{auto:!0,prefix:"display.visualizations.",alias:{tileUrl:"display.visualizations.mapping.tileLayer.url",maxZoom:"display.visualizations.mapping.tileLayer.maxZoom"},exclude:["managerid","data","tileSource","drilldown","type","drilldownRedirect"]}),this.results=new c.Model({columns:[],fields:[]}),this._currentHeight=parseInt(this.settings.get("height"),10),this.$map=r("<div></div>"),this.$msg=r("<div></div>"),this.createMap=i.debounce(i.bind(this.createMap,this),0),this.createMap(),this.settings.on("change:tileSource",this._updateTileSource,this),this._updateTileSource(),this.bindToComponentSetting("managerid",this._onManagerChange,this)},_updateTileSource:function(){if(this.settings.has("tileSource")){var e=b[this.settings.get("tileSource")];e?this.settings.set({tileUrl:e.url,maxZoom:e.maxZoom}):v.warn("Invalid tileSource parameter value=%o",e)}},destroyMap:function(){this.map&&(this.map.off(),this.map.remove(),this.map=null)},createMap:function(){this.destroyMap(),this.map=new l({el:this.$map.appendTo(this.el),model:{searchResultsColumn:this.results,state:this.model},height:this.settings.get("height")}),this.map.on("boundsChanged",this._onBoundsChanged,this),this.map.on("mapClicked",this._onMapClicked,this),this._onBoundsChanged(),this._onResizeMouseup=i.bind(this._onResizeMouseup,this),this.settings.on("change:resizable",function(e,t,n){t?this._enableResize():this._disableResize()},this),this.settings.get("resizable")&&this._enableResize()},_enableResize:function(){this._canEnableResize()&&(this.map.$el.resizable({autoHide:!0,handles:"s",stop:this._onResizeStop.bind(this)}),this.map.$el.on("mouseup",this._onResizeMouseup))},_disableResize:function(){this._canEnableResize()&&(this.map.$el.resizable("destroy"),this.map.$el.off("mouseup",this._onResizeMouseup))},_onResizeMouseup:function(e){r(this).width("100%")},_onResizeStop:function(e,t){r(e.target).width("100%"),this._currentHeight=parseInt(this.settings.get("height"),10),this.$msg.height(this._currentHeight).css("overflow","hidden")},_canEnableResize:function(){return!(r.browser.safari&&r.browser.version<"526")},_onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.resultsModel&&(this.resultsModel.off(null,null,this),this.resultsModel=null),this._clearResults();if(!t){this.message("no-search");return}this.manager=t,this.manager.on("search:start",this._onSearchStart,this),this.manager.on("search:progress",this._onSearchProgress,this),this.manager.on("search:cancelled",this._onSearchCancelled,this),this.manager.on("search:fail",this._onSearchFail,this),this.manager.on("search:error",this._onSearchError,this),this.resultsModel=this.manager.data(this.settings.get("data"),{serialfetch:!0,output_mode:"json_cols",offset:0,count:this.map?this.map.getMaxClusters():100,show_empty_fields:"True",search:this.map?this.map.getPostProcessSearch():""}),this.resultsModel.on("data",this._onDataUpdate,this),this.resultsModel.on("error",this._onSearchError,this),this.manager.replayLastSearchEvent(this)},_onSearchStart:function(){this._clearResults()},_onSearchProgress:function(e){},_onSearchCancelled:function(){this.message("cancelled")},_onSearchFail:function(e){var t=a.getSearchFailureMessage(e);this.message({level:"error",icon:"warning-sign",message:t})},_onSearchError:function(e,t){var n=a.getSearchErrorMessage(t)||e;this.message({level:"error",icon:"warning-sign",message:n})},_onDataUpdate:function(){this.resultsModel.hasData()?(this.$msg.detach(),this.$map.css("visibility",""),this.results.set(this.resultsModel.data())):this._clearResults(),this.render()},_onBoundsChanged:function(){this.resultsModel&&this.resultsModel.set("search",this.map.getPostProcessSearch())},_onMapClicked:function(e){if(!this.settings.get("drilldown"))return;e=e||{};var t=!1,n=i.once(i.bind(this._doDrilldown,this,e,this.manager)),r=function(){t=!0};e.preventDefault=r,e.drilldown=n,this.trigger("drilldown click click:marker",e,this),this.settings.get("drilldownRedirect")&&!t&&n()},_doDrilldown:function(e,t){if(!e||!t)return;var n=e.data;if(!n||!n._geo_lat_field||!n._geo_long_field||!n._geo_bounds_south||!n._geo_bounds_west||!n._geo_bounds_north||!n._geo_bounds_east)return;var r={_geo_lat_field:n._geo_lat_field,_geo_lon_field:n._geo_long_field,_geo_bounds_south:n._geo_bounds_south,_geo_bounds_west:n._geo_bounds_west,_geo_bounds_north:n._geo_bounds_north,_geo_bounds_east:n._geo_bounds_east};e.altKey&&(r.negate="true");var i,s;t.job&&(i=t.job.properties().searchEarliestTime,s=t.job.properties().searchLatestTime,!i&&t.job.properties().earliestTime&&(i=g.getEpochTimeFromISO(t.job.properties().earliestTime)),!s&&t.job.properties().latestTime&&(s=g.getEpochTimeFromISO(t.job.properties().latestTime))),this._parseIntentions(t.query.resolve(),"geoviz",r).done(function(t){var n={q:t,earliest:i||"",latest:s||""},r=h.getPageInfo(),o=p.search(r.root,r.locale,r.app,{data:n});h.redirect(o,e.ctrlKey)})},_parseIntentions:function(e,t,n){var i=r.Deferred(),s={};for(var o in n)n.hasOwnProperty(o)&&(s[o]=n[o]);return s.q=f.addLeadingSearchCommand(e),s.action=t,s.output_mode="json",r.ajax({url:f.make_url("/splunkd/__raw/services/search/intentionsparser"),data:s,type:"get",dataType:"json",async:!0,success:function(e){i.resolve(f.stripLeadingSearchCommand(e.fullSearch))},error:function(e,t,n){i.reject(n)}}),i.promise()},_clearResults:function(){this.results.set({columns:[],fields:[]})},message:function(e){this.$map.css("visibility","hidden"),this.$msg.detach(),a.render(e,this.$msg),this.$msg.prependTo(this.$el)},render:function(){return this.$el.css({overflow:"hidden",position:"relative"}),this.$msg.height(this._currentHeight).css({overflow:"hidden",position:"absolute",width:"100%"}),this},remove:function(){this.destroyMap(),this.settings&&(this.settings.off(),this.settings._sync&&this.settings._sync.destroy()),u.prototype.remove.call(this)}});return w}),define("splunkjs/mvc/simplexml/element/map",["require","underscore","jquery","backbone","../../../mvc","./base","../../splunkmapview","../mapper","util/console"],function(e){var t=e("underscore"),n=e("jquery"),r=e("backbone"),i=e("../../../mvc"),s=e("./base"),o=e("../../splunkmapview"),u=e("../mapper"),a=e("util/console"),f="display.visualizations.mapping.",l="display.visualizations.";u.register("visualizations:mapping",u.extend({tagName:"map",map:function(e,n,r){t(e.toJSON()).each(function(t,i){i.substring(0,f.length)===f&&(n.options[i.substring(l.length)]=e.get(i,r))})}}));var c=o.extend({panelClassName:"map",options:t.defaults({drilldown:!0,resizable:!0},o.prototype.options),reportDefaults:{"display.visualizations.show":!0,"display.visualizations.type":"mapping","display.general.type":"visualizations"},getResultsLinkOptions:function(){return{}}});s.registerVisualization("visualizations:mapping",c);var h=s.extend({initialVisualization:"visualizations:mapping",createPanelElementEditor:function(){}});return h}),define("splunkjs/mvc/simplexml/element/list",["require","underscore","jquery","backbone","../../../mvc","./base","util/console"],function(e){var t=e("underscore"),n=e("jquery"),r=e("backbone"),i=e("../../../mvc"),s=e("./base"),o=e("util/console"),u=s.extend({initialVisualization:"statistics",constructor:function(e){return t.extend(e,{displayRowNumbers:!1,fields:[e.labelField||"",e.valueField||""],sortKey:e.initialSort||e.labelField,sortDirection:e.initialSortDir||"asc"}),o.log("[%o] Creating table with options: %o",e.id,e),s.prototype.constructor.call(this,e)}});return u}),define("splunkjs/mvc/simplexml/element/html",["require","underscore","jquery","backbone","../../../mvc","../../utils","./base","../controller","../../tokenutils","splunk.util"],function(e){var t=e("underscore"),n=e("jquery"),r=e("backbone"),i=e("../../../mvc"),s=e("../../utils"),o=e("./base"),u=e("../controller"),a=e("../../tokenutils"),f=e("splunk.util"),l=o.extend({configure:function(){this.options.settingsOptions=t.extend({tokenEscaper:a.getEscaper("html")},this.options.settingsOptions||{}),o.prototype.configure.apply(this,arguments)},initialize:function(){this.configure(),this.model=new r.Model,this.reportReady=n.Deferred(),this.reportReady.resolve(this.model),this.model.mapToXML=t.bind(this.mapToXML,this),this.settings.on("change",this.render,this),this.listenTo(u.getStateModel(),"change:edit",this.onEditModeChange,this)},mapToXML:function(e,t,n){return{type:"html",content:this.settings.get("html",n),cdata:!0,attributes:{encoded:"1"}}},updateTitle:function(){this.$(".panel-head").remove(),u.isEditMode()&&n('<div class="panel-head"><h3><span class="untitled">HTML Panel</span></h3></div>').prependTo(this.$el)},createPanelElementEditor:function(){},createRefreshTimeIndicator:function(){},render:function(){return this.$("script").remove(),this.settings.has("html")||this.settings.set("html",n.trim(this.$(".panel-body").html()),{tokens:!0}),this.$(".panel-body").html(this.settings.get("html")),this.$("a").each(function(){var e=n(this),t=e.attr("href");t&&t[0]==="/"&&t[1]!=="/"&&e.attr("href",f.make_url(t))}),this.onEditModeChange(u.getStateModel()),this},getExportParams:function(){return{}}});return l}),define("splunkjs/mvc/simplexml/urltokenmodel",["require","exports","module","../basetokenmodel","models/classicurl","./controller","underscore","util/general_utils"],function(e,t,n){var r=e("../basetokenmodel"),i=e("models/classicurl"),s=e("./controller"),o=e("underscore"),u=e("util/general_utils"),a=r.extend({moduleId:n.id,initialize:function(){i.on("change",function(e,t){this.set(e.toJSON())},this),this.set(i.toJSON()),s.router.on("route",function(){this.trigger("url:navigate")},this)},save:function(e,t){var n={};this.set(e),o.each(this.toJSON(),function(e,t){o.isObject(e)||(n[t]=e)}),i.save(n,t)},saveOnlyWithPrefix:function(e,t,n){var r=["^"+e+".*","^earliest$","^latest$"];this.save(u.filterObjectByRegexes(t,r,{allowEmpty:!0}),n)}});return a}),define("contrib/text!views/shared/splunkbar/AppMenu.html",[],function(){return'<%\n    currentAppname = currentApp ? currentApp.name : \'search\';   // TODO: search fallback is not always safe assumption\n%>\n<a href="#" class="dropdown-toggle"><%- currentApp ? _(\'App: \').t() + _(currentApp.label).t() : _(\'Apps\').t() %><b class="caret"></b></a>\n<div class="dropdown-menu dropdown-menu-selectable dropdown-menu-tall" id="global-apps-menu">\n    <div class="arrow"></div>\n    <ul class="menu-list">\n        <% _.each(apps, function(i) { %>\n        <li>\n            <a href="<%- i.href %>">\n                <% if (currentApp && i.name === currentApp.name) { %> <i class="icon-check"></i><% } %>\n                <% if (i.icon) { %> <img data-icosrc="<%-i.icon%>" alt="menu icon" class="menu-icon" style="display:none;"><% } %>\n                <span class="menu-label"><%= _(i.label).t() %></span>\n            </a>\n        </li>\n        <% }); %>\n    </ul>\n\n    <a class="btn nav-btn" href="<%- make_url(\'manager\', currentAppname, \'apps\',\'remote\') %>"><%- _("Find More Apps").t() %></a>\n    <a class="btn nav-btn" href="<%- make_url(\'manager\', currentAppname, \'apps\',\'local\') %>"><%- _("Manage Apps").t() %></a>\n</div>\n'}),define("views/shared/splunkbar/AppMenu",["jquery","module","views/Base","views/shared/delegates/Popdown","splunk.util","contrib/text!views/shared/splunkbar/AppMenu.html","uri/route"],function(e,t,n,r,i,s,o){return n.extend({moduleId:t.id,template:s,tagName:"li",className:"dropdown menu-apps",initialize:function(){this.haveIcons=!1,n.prototype.initialize.apply(this,arguments),this.options.activeMenu&&this.options.activeMenu.name==="app"&&(this.currentApp=this.model.application.get("app")),this.render(),this.collection.apps.on("ready change",this.debouncedRender,this),this.collection.apps.length>0&&this.debouncedRender()},render:function(){this.haveIcons=!1;var e=this,t,n=null,s=this.collection.apps.map(function(r,s,u){var a=o.appIconAlt(e.model.application.get("root"),e.model.application.get("locale"),e.model.application.get("owner"),r.entry.get("name"));return t={href:i.make_url("/app/"+r.entry.get("name")),label:r.entry.content.get("label"),name:r.entry.get("name"),icon:a},r.entry.get("name")===e.currentApp&&(n=t),t}),u=this.compiledTemplate({apps:s,currentApp:n,make_url:i.make_url});return this.$el.html(u),this.popdown=new r({el:this.$("#global-apps-menu").parent(),mode:"dialog"}),this.popdown.on("show",this.setIcons,this),this},setIcons:function(){if(this.haveIcons)return;this.haveIcons=!0;var t=this.$el.find(".menu-icon");t.each(function(t,n){n=e(n),n.attr("src",n.attr("data-icosrc")).show()})}})}),define("contrib/text!views/shared/splunkbar/SystemMenuSection.html",[],function(){return"\n<i class=\"icon icon-<%-this.model.get('icon')%>\"></i>\n<h5><%=this.model.get('label')%></h5>\n<ul class=\"menu\">\n    <%_.each(this.model.get('items'), function(item, i){ %>\n        <li><a href=\"<%-item.get('url')%>\"><%-_(item.entry.content.get('menu.label')).t() || _(item.entry.get('name')).t() || ''%></a></li>\n    <%});%>\n</ul>"}),define("views/shared/splunkbar/SystemMenuSection",["jquery","underscore","module","views/Base","contrib/text!views/shared/splunkbar/SystemMenuSection.html"],function(e,t,n,r,i){return r.extend({moduleId:n.id,template:i,className:"menu-section",initialize:function(){r.prototype.initialize.apply(this,arguments);var e=this.model.get("items");e.sort(function(e,t){return parseInt(e.get("order"),10)-parseInt(t.get("order"),10)})},render:function(){var e=this.compiledTemplate(this.model);return this.$el.html(e),this}})}),define("contrib/text!views/shared/splunkbar/SystemMenu.html",[],function(){return'<a href="#" class="dropdown-toggle"><%- _("Settings").t() %><b class="caret"></b></a>\n<div class="popdown-dialog mega-menu" id="global-system-menu">\n    <div class="arrow"></div>\n    <div class="popdown-dialog-body">\n    </div><!-- /.popdown-dialog-body -->\n</div><!-- /.podown -->'}),define("views/shared/splunkbar/SystemMenu",["jquery","underscore","backbone","module","splunk.util","views/Base","views/shared/delegates/Popdown","views/shared/splunkbar/SystemMenuSection","contrib/text!views/shared/splunkbar/SystemMenu.html"],function(e,t,n,r,i,s,o,u,a){return s.extend({moduleId:r.id,template:a,tagName:"li",className:"dropdown menu-system",initialize:function(){var e=this;s.prototype.initialize.apply(this,arguments),e.debouncedRender(),this.collection.sections.on("ready",function(){e.debouncedRender()},this)},render:function(){var t=this.compiledTemplate({}),n=e(t),r=n.find(".popdown-dialog-body");this.addSections(r),this.sectionCount<2&&r.parent().addClass("mega-menu-narrow"),this.$el.html(n);var i=this.$el.find("#global-system-menu");return this.children.popdown=new o({el:i.parent(),mode:"dialog"}),this},addSections:function(e){var t=this;this.sectionCount=0,this.collection.sections.each(function(n){if(n.get("items")&&n.get("items").length===0)return;var r=t.children[n.get("id")]=new u({model:n});t.sectionCount++,e.append(r.render().el)})}})}),define("contrib/text!views/shared/splunkbar/UserMenu.html",[],function(){return'<a href="#" class="dropdown-toggle"><span class="realname"><%-realName%></span><b class="caret"></b></a>\n<div class="dropdown-menu dropdown-menu-narrow global-user-menu">\n    <div class="arrow"></div>\n    <ul>\n        <li><a href="<%-accountLink%>" class="edit"><%- _("Edit Account").t() %></a></li>\n        <% if (logoutLink) { %>\n        <li><a href="<%-logoutLink%>" class="logout"><%- _("Logout").t() %></a></li>\n        <% } %>\n    </ul>\n</div>'}),define("views/shared/splunkbar/UserMenu",["underscore","module","views/Base","views/shared/delegates/Popdown","contrib/text!views/shared/splunkbar/UserMenu.html","uri/route"],function(e,t,n,r,i,s){return n.extend({moduleId:t.id,template:i,tagName:"li",className:"dropdown user",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.user.on("change",this.render,this),this.model.webConf.on("change",function(){this.SSOModeOn=typeof this.model.webConf.entry.content.get("trustedIP")!="undefined"&&this.model.webConf.entry.content.get("trustedIP").length>0,this.render()},this),this.model.user.entry.get("name")&&this.render()},render:function(){var e=this.model.user.entry.content.get("realname"),t=this.model.user.entry.get("name");if(!e||!e.length)e=t;var n=this.model.application.get("root"),i=this.model.application.get("locale"),o=s.manager(n,i,this.model.application.get("app"),["authentication","changepassword",t],{data:{action:"edit"}}),u=this.SSOModeOn?null:s.logout(n,i),a=this.compiledTemplate({userName:t,realName:e,accountLink:o,logoutLink:u});this.$el.html(a);var f=this.$el.find(".global-user-menu");return this.popdown=new r({el:f.parent(),mode:"dialog"}),this}})}),define("views/shared/delegates/StopScrollPropagation",["jquery","underscore","views/shared/delegates/Base"],function(e,t,n){return n.extend({initialize:function(){var e={selector:""};t.defaults(this.options,e),this.events={},this.events["mousewheel "+this.options.selector]="mousewheel",this.events["DOMMouseScroll "+this.options.selector]="mousewheel",this.delegateEvents(this.events)},mousewheel:function(e){var t=-e.originalEvent.wheelDelta||e.originalEvent.detail*20;e.currentTarget.scrollTop+=t,e.stopPropagation(),e.preventDefault()}})}),define("models/services/Message",["models/SplunkDBase"],function(e){return e.extend({url:"messages",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/Messages",["jquery","models/services/Message","collections/SplunkDsBase"],function(e,t,n){return n.extend({model:t,url:"messages",initialize:function(){n.prototype.initialize.apply(this,arguments)},destroyAll:function(){if(this.destroying===!0)return this.destroyDFD;this.destroying=!0;var t=this;return this.destroyDFD=new e.Deferred(function(n){function r(){var i=new e.Deferred;if(t.length>0){var s=t.pop(),o=s.destroy()||i.resolve().promise();return o.always(r),o}n.resolve()}r()}),this.destroyDFD.then(function(){t.destroying=!1}),this.destroyDFD.promise()}})}),define("views/shared/splunkbar/messages/Message",["jquery","underscore","backbone","module","views/Base","splunk.util","util/time_utils"],function(e,t,n,r,i,s,o){return i.extend({moduleId:r.id,className:"view-navbar-global navbar navbar-fixed-top",messageMap:{restart_required:t("Splunk must be restarted for changes to take effect. [[/manager/search/control|Click here to restart from the Manager]].").t()},initialize:function(){i.prototype.initialize.apply(this,arguments)},render:function(){var t=this.model.id,n=this.model.entry.get("name")||"",r,i=this.model.entry.content.get("severity")||"warn";n&&this.messageMap[n]?r=this.messageMap[n]:r=this.model.entry.content.get("message")||"";var u=this.model.entry.content.get("timeCreated_epochSecs");u=u?o.convertToLocalTime(u):"";var a=this.compiledTemplate({msgId:n,msgFullId:t,msg:s.getWikiTransform(r),msgLevel:i,msgTime:u});return this.$el=e(a),this},template:'<li class="<%- msgLevel %>" data-id="<%- msgFullId %>">                <i class="message-icon icon-<%- msgLevel %>"></i>                <span class="message-content"><%= msg %></span>                <span class="message-time"><%= msgTime %></span>                <a href="#" class="delete-message"><i class="icon-x-circle"></i></a>            </li>'})}),define("views/shared/splunkbar/messages/LegacyMessage",["jquery","underscore","backbone","module","views/Base","splunk.util"],function(e,t,n,r,i,s){return i.extend({moduleId:r.id,className:"view-navbar-global navbar navbar-fixed-top",messageMap:{restart_required:t("Splunk must be restarted for changes to take effect. [[/manager/search/control|Click here to restart from the Manager]].").t()},initialize:function(){i.prototype.initialize.apply(this,arguments)},render:function(){var t=(this.model.get("id")||"").toLowerCase(),n,r=this.model.get("severity")||"warn";t&&this.messageMap[t]?n=this.messageMap[t]:n=this.model.get("content")||"";var i=this.compiledTemplate({msgId:t,msg:s.getWikiTransform(n),msgLevel:r});return this.$el=e(i),this},template:'<li class="<%- msgLevel %>" data-islegacy="1" data-id="<%- msgId %>">                <span class="message-content"><%= msg %></span>                <a href="#" class="delete-message"><i class="icon-x-circle"></i></a>            </li>'})}),define("contrib/text!views/shared/splunkbar/messages/Master.html",[],function(){return'<a href="#" class="dropdown-toggle">\n    <span class="label label-warning" style="display: none;"><%- collection.length %></span> <%- _("Messages").t() %><b class="caret"></b>\n</a>\n<div class="dropdown-menu" id="global-messages-menu">\n\n    <div class="arrow"></div>\n    <ul class="message-list" style="display: none;">\n    </ul>\n    <div class="no-messages">\n        <%- _("You have no messages.").t() %>\n    </div>\n    <a href="#" class="delete-all-messages btn pull-right" style="display: none;"><%- _("Delete All").t() %></a>\n</div>\n'}),define("views/shared/splunkbar/messages/Master",["jquery","underscore","module","views/Base","views/shared/delegates/Popdown","views/shared/delegates/StopScrollPropagation","collections/services/Messages","views/shared/splunkbar/messages/Message","views/shared/splunkbar/messages/LegacyMessage","contrib/text!views/shared/splunkbar/messages/Master.html","util/general_utils"],function(e,t,n,r,i,s,o,u,a,f,l){return r.extend({moduleId:n.id,template:f,tagName:"li",className:"dropdown messages",initialize:function(){r.prototype.initialize.apply(this,arguments),this.legacyMessages=this.collection.legacyMessages||!1,this.collection=this.collection.messages,this.collection.on("change reset remove",this.renderMessages,this),this.legacyMessages&&this.legacyMessages.on("reset remove",this.renderMessages,this),this.isLocalMouseSelection=!1},events:{"click .message-list .delete-message":"deleteMessage","click .delete-all-messages":"deleteAllMessages","mouseup .message-list":function(){this.isLocalMouseSelection=!0}},render:function(){var e=this.compiledTemplate({collection:this.collection});return this.$el.html(e),this.children.popdown=new i({el:this.el,mode:"dialog"}),this.children.stopScrollPropagation=new s({el:this.$("#global-messages-menu ul"),mode:"dialog"}),this},renderMessages:function(e){if(e!==!0&&this.isLocalMouseSelection&&l.getMouseSelection()&&l.getMouseSelection().length>0)return;this.isLocalMouseSelection=!1;var n=this.collection.length;this.legacyMessages&&(n+=this.legacyMessages.length),this.$(".label-warning").text(n),t.each(this.children,function(e,t){t.substr(0,7)=="message"&&(this.children[t].remove(),delete this.children[t])},this);var r;this.collection.each(function(e,t){r=new u({model:e}),this.children["message"+e.get("id")]=r,this.$("#global-messages-menu .message-list").append(r.render().$el)},this);var i=0;this.legacyMessages&&(i=this.legacyMessages.length,this.legacyMessages.each(function(e){r=new a({model:e}),this.children["messageLegacy"+e.get("id")]=r,this.$("#global-messages-menu .message-list").append(r.render().$el)},this)),this.collection.length>0||i>0?(this.$(".label-warning, .delete-all-messages, .message-list").show(),this.$("#global-messages-menu").addClass("dropdown-menu-wide"),this.$(".no-messages").hide(),this.$("#global-messages-menu").is(":visible")&&this.children.popdown.adjustPosition()):(this.$(".label-warning, .delete-all-messages, .message-list").hide(),this.$("#global-messages-menu").removeClass("dropdown-menu-wide"),this.$(".no-messages").show())},deleteMessage:function(t){t.preventDefault();var n=e(t.currentTarget).parent(),r=n.data("id"),i=n.data("islegacy"),s;this.legacyMessages&&i?(s=this.legacyMessages.get(r),s&&this.legacyMessages.remove(s)):(s=this.collection.get(r),s&&s.destroy()),this.collection.length===0&&(this.legacyMessages===!1||this.legacyMessages.length===0)&&this.children.popdown.hide(),this.renderMessages(!0)},deleteAllMessages:function(e){e.preventDefault(),this.collection.destroyAll(),this.legacyMessages&&this.legacyMessages.reset(),this.children.popdown.hide()}})}),define("contrib/text!views/shared/splunkbar/ActivityMenu.html",[],function(){return'<a href="#" class="dropdown-toggle"><%- _("Activity").t() %><b class="caret"></b></a>\n<div class="dropdown-menu dropdown-menu-narrow" id="global-activity-menu">\n    <div class="arrow"></div>\n    <ul>\n        <li>\n            <a class="primary-link" href="<%= jobLink %>"><%- _("Jobs").t() %></a>\n            <a class="secondary-link" href="<%= jobLink %>" target="_blank"><i class="icon-external"></i></a>\n        </li>\n        <li>\n            <a class="primary-link" href="<%= alertsLink %>"><%- _("Triggered Alerts").t() %></a>\n            <a class="secondary-link" href="<%= alertsLink %>" target="_blank"><i class="icon-external"></i></a>\n        </li>\n	<% if (typeof statusLink !== "undefined" && statusLink !== null) { %>\n		<li>\n		    <a class="primary-link" href="<%= statusLink %>"><%- _("System Activity").t() %></a>\n		    <a class="secondary-link" href="<%= statusLink %>" target="_blank"><i class="icon-external"></i></a>\n		</li>\n	<% } %>\n    </ul>\n</div>\n'}),define("views/shared/splunkbar/ActivityMenu",["underscore","jquery","module","views/Base","views/shared/delegates/Popdown","contrib/text!views/shared/splunkbar/ActivityMenu.html","splunk.util","uri/route"],function(e,t,n,r,i,s,o,u){return r.extend({moduleId:n.id,template:s,tagName:"li",className:"dropdown activity",initialize:function(){r.prototype.initialize.apply(this,arguments),this.render(),this.model.application.on("change",this.render),this.model.user.on("change",this.render)},render:function(){if(typeof this.model.application.get("app")=="undefined"||typeof this.model.user.entry.content.get("roles")=="undefined")return this;var e=this.model.application.get("app"),t=this.model.user.entry.content.get("roles").indexOf("admin")>-1,n=u.page(this.model.application.get("root"),this.model.application.get("locale"),e,"job_management"),r=u.triggeredAlerts(this.model.application.get("root"),this.model.application.get("locale"),e),s=null;e=="system"&&(n=u.page(this.model.application.get("root"),this.model.application.get("locale"),"search","job_management")),t&&(s=u.page(this.model.application.get("root"),this.model.application.get("locale"),"search","status_index"));var o=this.compiledTemplate({jobLink:n,alertsLink:r,statusLink:s});return this.$el.html(o),this.children.popdown=new i({el:this.el,mode:"dialog"}),this}})}),define("contrib/text!views/shared/whatsnewdialog/Master.html",[],function(){return'<h2><%=_("Powerful Analytics").t()%></h2>\n<div class="feature">\n    <h3><%=_("Data Models & Pivot").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/pivot.png">\n    <p><%=_("Define semantic models to represent data meaningfully and consistently. Explore and visualize data without the search language.").t()%></p>\n    <a href="<%=docLink%>whatsnew.pivot" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n<div class="feature">\n    <h3><%=_("High Performance Analytics Store").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/columnar.png">\n    <p><%=_("High performance store that accelerates data models by delivering extremely high performance data retrieval for analytical operations.").t()%></p>\n    <a href="<%=docLink%>whatsnew.columnaranalytics" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n<div class="feature">\n    <h3><%=_("Predictive Analytics").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/predictive.png">\n    <p><%=_("Find patterns in data to predict system capacity and resource utilization.").t()%></p>\n    <a href="<%=docLink%>whatsnew.predictiveanalytics" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n<h2><%=_("More Intuitive User Experience").t()%></h2>\n<div class="feature">\n    <h3><%=_("New Home Experience").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/home.png">\n    <p><%=_("New menu system enabling rapid navigation to key functions.").t()%></p>\n    <a href="<%=docLink%>whatsnew.newhome" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n<div class="feature">\n    <h3><%=_("New Search Experience").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/search.png">\n    <p><%=_("New interactive experience for rich report authoring and searching.").t()%></p>\n    <a href="<%=docLink%>whatsnew.newsearch" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n\n\n\n<h2><%=_("Simplified Management").t()%></h2>\n<div class="feature">\n    <h3><%=_("Simplified Cluster Management").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/clustering.png">\n    <p><%=_("Monitor Splunk high availability services for business critical deployments at scale.").t()%></p>\n    <a href="<%=docLink%>whatsnew.simplifiedclustermanagement" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n<div class="feature">\n    <h3><%=_("Forwarder Management").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/forwarders.png">\n    <p><%=_("New visual management interface to deploy and monitor thousands of configurations.").t()%></p>\n    <a href="<%=docLink%>whatsnew.forwardermanagement" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n<div class="feature">\n    <h3><%=_("Dynamic File Headers").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/fileheaders.png">\n    <p><%=_("Automatic mapping of fields from file headers either locally or from forwarders.").t()%></p>\n    <a href="<%=docLink%>whatsnew.dynamicfileheaders" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n<h2><%=_("Rich Developer Experience").t()%></h2>\n<div class="feature">\n    <h3><%=_("Simple XML Editing").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/simplexml.png">\n    <p><%=_("Build more interactive dashboards and user workflows with ease.").t()%></p>\n    <a href="<%=docLink%>whatsnew.simplexmlediting" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n<div class="feature">\n    <h3><%=_("Integrated Web Framework").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/webframework.png">\n    <p><%=_("New framework for building custom Splunk web applications using HTML, JavaScript, and Django.").t()%></p>\n    <a href="<%=docLink%>whatsnew.integratedwebframework" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>\n\n<div class="feature">\n    <h3><%=_("Native Splunk Maps").t()%></h3>\n    <img src="<%=imgPath%>/skins/default/whatsnew/maps.png">\n    <p><%=_("Integrated maps that display geographic data and summaries.").t()%></p>\n    <a href="<%=docLink%>whatsnew.nativemaps" class="external" target="_blank"><%=_("Documentation").t()%></a>\n</div>'}),define("views/shared/whatsnewdialog/Master",["jquery","underscore","module","views/Base","views/shared/Modal","uri/route","splunk.util","contrib/text!views/shared/whatsnewdialog/Master.html"],function(e,t,n,r,i,s,o,u){return i.extend({moduleId:n.id,template:u,initialize:function(){i.prototype.initialize.apply(this,arguments);var e=this;this.on("hidden",function(){e.$el.remove(),e.modalWrapper.remove(),e.model.userPref&&e.model.userPref.entry&&e.model.userPref.entry.content&&(e.model.userPref.entry.content.set("showWhatsNew",0),e.model.userPref.save())}),this.render()},render:function(){var n=o.make_url("/static/img/"),r=s.docHelp(this.model.application.get("root"),this.model.application.get("locale"),""),u=this.compiledTemplate({imgPath:n,docLink:r});return this.$el.html(i.TEMPLATE),this.$(i.HEADER_TITLE_SELECTOR).html(t("What's new in 6.0").t()),this.$(i.FOOTER_SELECTOR).append('<a href="http://splunk.com/goto/splunk6demoapp" class="btn btn-primary external btn-large modal-btn-primary pull-right" target="_blank">'+t("Learn More").t()+"</a>"),this.$(i.BODY_SELECTOR).html(u),this.modalWrapper=e('<div class="splunk-components"></div>'),e(this.el).appendTo(this.modalWrapper),this.modalWrapper.appendTo("body"),this.show(),this}})}),define("contrib/text!views/shared/splunkbar/HelpMenu.html",[],function(){return'<a href="#" class="dropdown-toggle"><%- _("Help").t() %><b class="caret"></b></a>\n<div class="dropdown-menu" id="global-help-menu">\n    <div class="arrow"></div>\n    <ul>\n        <li><a class="whatsnew" href="#"><%- _("What\'s New in 6.0").t() %></a></li>\n        <li><a class="external" href="<%- makeDocLink(\'search_app.tutorial\') %>" target="_blank"><%- _("Tutorials").t() %></a></li>\n        <li><a class="external" href="http://splunk-base.splunk.com/" target="_blank"><%- _("Splunk Answers").t() %></a></li>\n        <li><a class="external" href="http://www.splunk.com/support" target="_blank"><%- _("Contact Support").t() %></a></li>\n        <li><a class="external" href="<%- docLink %>" target="_blank"><%- _("Documentation").t() %></a></li>\n    </ul>\n    <form class="form-search" action="#help" method="get">\n    </form>\n</div>\n'}),define("views/shared/splunkbar/HelpMenu",["underscore","jquery","module","views/Base","views/shared/delegates/Popdown","views/shared/controls/TextControl","views/shared/whatsnewdialog/Master","contrib/text!views/shared/splunkbar/HelpMenu.html","splunk.util","uri/route"],function(e,t,n,r,i,s,o,u,a,f){return r.extend({moduleId:n.id,template:u,tagName:"li",className:"dropdown help",initialize:function(){r.prototype.initialize.apply(this,arguments),this.children.searchInput=new s({placeholder:e("Search Documentation").t(),inputClassName:"input-medium search-query"}),this.model.appLocal.on("change reset",this.debouncedRender,this),this.debouncedRender()},events:{"keypress input":"onDocsSearch","click .whatsnew":"onWhatsNew","click .dropdown-menu a":"closePopdown"},render:function(){var e=this.compiledTemplate({docLink:this.makeDocLinkForPage(),makeDocLink:this.makeDocLink.bind(this)});this.$el.html(e);var t=this.$("#global-help-menu");return t.find(".form-search").append(this.children.searchInput.render().el),this.children.popdown=new i({el:t.parent(),mode:"dialog"}),this},onDocsSearch:function(e){if(e.keyCode===13){var n=t(e.target).val();e.preventDefault(),e.stopPropagation(),t.when(this.serverInfoDfd).then(function(){var e=f.docSearch(this.model.application.get("locale"),this.model.serverInfo.entry.content.get("version"),a.normalizeBoolean(this.model.serverInfo.entry.content.get("isFree")),a.normalizeBoolean(this.model.serverInfo.entry.content.get("isTrial")),n);window.open(e)}.bind(this)),t(e.target).val(""),this.closePopdown(),e.preventDefault()}},makeDocLink:function(e){return f.docHelpInAppContext(this.model.application.get("root"),this.model.application.get("locale"),e,this.model.application.get("app"),this.model.appLocal.entry.content.get("version"),this.model.appLocal.appAllowsDisable(),this.model.appLocal.entry.content.get("docs_section_override"))},makeDocLinkForPage:function(){var e="/help",t;if(this.model.application.get("page")==="_admin"){t="manager";if(window&&window.location&&typeof window.location.pathname=="string"){var n=window.location.pathname;n=n.substring(n.indexOf("/manager/")+9),n=n.substring(n.indexOf("/")+1),n=n.replace(new RegExp("/","g"),"."),t+="."+n}e=f.docHelp(this.model.application.get("root"),this.model.application.get("locale"),t)}else t=["app",this.model.application.get("app"),this.model.application.get("page")].join("."),e=this.makeDocLink(t);return e},onWhatsNew:function(e){e&&e.preventDefault(),this.children.whatsNewDialog=new o({model:this.model})},closePopdown:function(e){this.children.popdown.hide()}})}),define("views/shared/WaitSpinner",["underscore","module","views/Base"],function(e,t,n,r){return n.extend({moduleId:t.id,tagName:"div",initialize:function(){var t={size:"small",color:"gray",frameWidth:14,frameCount:8,fps:10};e.defaults(this.options,t),n.prototype.initialize.apply(this,arguments),this.$el.addClass("spinner-"+this.options.size+"-"+this.options.color),this.frame=0},stop:function(){return this.active=!1,this.interval&&window.clearInterval(this.interval),this},start:function(){return this.active=!0,this.interval&&window.clearInterval(this.interval),this.interval=setInterval(this.step.bind(this),1e3/this.options.fps),this},step:function(){return this.$el.css("backgroundPosition","-"+this.frame*this.options.frameWidth+"px top "),this.frame++,this.frame=this.frame==this.options.frameCount?0:this.frame,this},remove:function(){this.stop(),n.prototype.remove.apply(this,arguments)},render:function(){return this}})}),define("contrib/text!views/shared/splunkbar/messages/NoConnectionOverlay.html",[],function(){return'<div class="modal-backdrop fade in"></div>\n<div class="modal disconnection-warning-modal">\n	<h3><%= _("Reconnecting to Splunk server").t() %></h3>\n	<p><%= _("Your network connection may have been lost or Splunk server may be down.").t() %></p>\n</div>\n'}),define("views/shared/splunkbar/messages/NoConnectionOverlay",["underscore","module","views/Base","views/shared/WaitSpinner","contrib/text!views/shared/splunkbar/messages/NoConnectionOverlay.html","splunk.util"],function(e,t,n,r,i,s){var o=new Image;o.src=s.make_url("/static/img/skins/default/loading_medium_green.png");var u=new Image;return u.src=s.make_url("/static/img/skins/default/loading_medium_green_2x.png"),n.extend({moduleId:t.id,template:i,className:"splunk-components",initialize:function(){n.prototype.initialize.apply(this,arguments);var e={color:"green",size:"medium",frameWidth:19};this.children.spinner=new r(e),this.visible=!1,this.$el.hide()},show:function(){if(this.visible)return;this.visible=!0,this.$el.show(),this.children.spinner.start()},hide:function(){if(!this.visible)return;this.visible=!1,this.$el.hide(),this.children.spinner.stop()},render:function(){return this.$el.html(this.compiledTemplate),this.$(".modal").append(this.children.spinner.render().el),this}})}),define("models/services/data/UserPref",["models/SplunkDBase"],function(e){return e.extend({url:"data/user-prefs",id:"data/user-prefs/general",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("models/services/configs/Web",["models/SplunkDBase"],function(e){return e.extend({url:"configs/conf-web",urlRoot:"configs/conf-web",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("models/services/authentication/CurrentContext",["models/SplunkDBase"],function(e){return e.extend({url:"authentication/current-context",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/authentication/CurrentContexts",["models/services/authentication/CurrentContext","collections/SplunkDsBase"],function(e,t){return t.extend({model:e,url:"authentication/current-context",initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("models/services/data/ui/Manager",["models/SplunkDBase"],function(e){return e.extend({url:"data/ui/manager",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/data/ui/Managers",["models/services/data/ui/Manager","collections/SplunkDsBase"],function(e,t){return t.extend({url:"data/ui/manager",model:e,initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("models/SystemMenuSection",["models/Base"],function(e){return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments),this.get("items")||this.set({items:[]})}})}),define("collections/SystemMenuSections",["models/SystemMenuSection","collections/Base"],function(e,t){return t.extend({model:e,initialize:function(){t.prototype.initialize.apply(this,arguments)},comparator:function(e,t){var n=e.get("order"),r=t.get("order");return n===r?0:n>r?1:-1}})}),define("contrib/text!views/shared/splunkbar/Master.html",[],function(){return'\n<div class="navbar-inner">\n    <div class="no_connection-overlay"></div>\n    <a href="<%-homeLink%>" class="brand" title="splunk &gt; <%- _(\'listen to your data\').t() %>">splunk<strong>&gt;</strong></a>\n    <ul class="navbar-global-nav nav">\n        <li class="dropdown apps">\n            <a href="#" class="dropdown-toggle"><%- _("Apps").t() %><b class="caret"></b></a>\n        </li>\n    </ul>\n\n    <ul class="navbar-global-nav nav pull-right">\n        <li class="dropdown user"></li>\n        <li class="dropdown messages"><a href="#" class="dropdown-toggle"><%- _("Messages").t() %><b class="caret"></b></a></li>\n        <li class="dropdown system<%- options.section==\'system\' ? \' active \' : \'\'%>">\n            <a href="#" class="dropdown-toggle"><%- _("System").t() %><b class="caret"></b></a>\n        </li>\n        <li class="dropdown activity"><a href="#"><%- _("Activity").t() %></a></li>\n        <li class="dropdown help"><a href="#" class="dropdown-toggle"><%- _("Help").t() %><b class="caret"></b></a></li>\n    </ul><!-- /.user-nav -->\n</div><!-- /.navbar-inner -->\n'}),define("util/csrf_protection",["jquery","splunk.util"],function(e,t){var n="X-Splunk-Form-Key",r=t.getFormKey();if(!e)throw"Splunk's jQuery.ajax extension requires jQuery.";e.ajaxPrefilter(function(e,t,i){if(e.type&&e["type"].toUpperCase()=="GET")return;i.setRequestHeader(n,r)}),e(document).ready(function(){e(document).bind("ajaxError",function(e,n,r,i){var s=window.location.pathname;if(n.status===401&&s.indexOf("/account/logout")===-1){document.location=t.make_url("account/login?return_to="+encodeURIComponent(s+document.location.search));return}})})}),define("views/shared/splunkbar/Master",["jquery","underscore","backbone","module","splunk.util","helpers/Session","views/Base","views/shared/delegates/Popdown","views/shared/splunkbar/AppMenu","views/shared/splunkbar/SystemMenu","views/shared/splunkbar/UserMenu","views/shared/splunkbar/messages/Master","views/shared/splunkbar/ActivityMenu","views/shared/splunkbar/HelpMenu","views/shared/splunkbar/messages/NoConnectionOverlay","models/services/data/UserPref","models/services/AppLocal","models/services/authentication/User","models/services/server/ServerInfo","models/services/configs/Web","models/Application","collections/services/authentication/CurrentContexts","collections/services/AppLocals","collections/services/Messages","collections/services/data/ui/Managers","collections/SystemMenuSections","helpers/polling_manager","contrib/text!views/shared/splunkbar/Master.html","uri/route","splunk.util","util/splunkd_utils","util/csrf_protection","util/ajax_no_cache"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O){var M=o.extend({moduleId:r.id,template:k,className:"navbar",initialize:function(){o.prototype.initialize.apply(this,arguments),this.MAX_RETRIES_BEFORE_FAIL=3,this.MESSAGES_POLLING_DELAY_STANDARD=6e4,this.MESSAGES_POLLING_DELAY_HI_FREQ=1e3,this.isFreeDfd=e.Deferred(),this.cntRetries=0,this.model.serverInfo.entry.content.has("isFree")?A.normalizeBoolean(this.model.serverInfo.entry.content.get("isFree"))?this.isFreeDfd.resolve():this.isFreeDfd.reject():this.model.serverInfo.on("change reset",function(){A.normalizeBoolean(this.model.serverInfo.entry.content.get("isFree"))?this.isFreeDfd.resolve():this.isFreeDfd.reject()}.bind(this)),s.on("restart timeout",function(){C.stop(this.collection.messages)},this),s.on("start",function(){C.start(this.collection.messages)},this)},remove:function(){return o.prototype.remove.apply(this,arguments),s.off("restart timeout start",null,this),this},render:function(){var n=L.page(this.model.application.get("root"),this.model.application.get("locale"),"launcher","home"),r=this.compiledTemplate({makeUrl:i.make_url,options:this.options,homeLink:n});this.$el.html(r);var s=this.getActiveMenu();return this.children.apps=new a({collection:this.collection,model:this.model,activeMenu:s}),this.$(".apps.dropdown").replaceWith(this.children.apps.el),this.children.systemMenu=new f({collection:{sections:this.collection.sections},model:{application:this.model.application}}),this.$(".system.dropdown").replaceWith(this.children.systemMenu.el),this.isFreeDfd.fail(function(){this.children.userMenu=new l({collection:{currentContext:this.model.currentContext},model:{user:this.model.user,application:this.model.application,webConf:this.model.webConf}}),this.$(".user.dropdown").replaceWith(this.children.userMenu.el)}.bind(this)),this.children.messages=new c({collection:{messages:this.collection.messages,legacyMessages:this.collection.legacyMessages}}),this.children.noConnectionOverlay=new d,e("body").append(this.children.noConnectionOverlay.render().el),this.collection.messages.on("serverValidated",function(e,n,r){if(e&&this.cntRetries>0){this.restartMessagePolling(this.MESSAGES_POLLING_DELAY_STANDARD),this.children.noConnectionOverlay.hide(),this.cntRetries=0;return}var i=t.find(r,function(e){return e.type==O.NETWORK_ERROR||"network_error"});i&&(this.cntRetries==0&&this.restartMessagePolling(this.MESSAGES_POLLING_DELAY_HI_FREQ),this.cntRetries>=this.MAX_RETRIES_BEFORE_FAIL&&this.children.noConnectionOverlay.show(),this.cntRetries+=1)},this),this.$(".messages.dropdown").replaceWith(this.children.messages.render().el),this.restartMessagePolling(this.MESSAGES_POLLING_DELAY_STANDARD),this.children.activityMenu=new h({model:{user:this.model.user,application:this.model.application}}),this.$(".activity").replaceWith(this.children.activityMenu.el),this.children.helpMenu=new p({model:this.model}),this.$(".help").replaceWith(this.children.helpMenu.el),s&&this.$(s.selector).addClass("active"),this},restartMessagePolling:function(e){C.stop(this.collection.messages),C.start(this.collection.messages,{delay:e,ui_inactivity:!0,stopOnError:!1,data:{count:1e3}})},getActiveMenu:function(){var e=n.history.location.pathname,t=e.split("/"),r=t.length,i=[t[r-2],t[r-1]],s=i.join("/"),o=this.model.application.get("locale"),u=this.model.application.get("app"),a=["search/status_index","search/search_status","search/search_detail_activity","search/search_activity_by_user","search/splunkweb_status","search/internal_messages","search/scheduler_status","search/scheduler_user_app","search/scheduler_savedsearch","search/scheduler_status_errors","search/pdf_activity"],f="authentication/changepassword",l=u+"/job_management",c=o+"/alerts",h="launcher/home",p=o+"/manager",d=null,v="";return a.indexOf(s)>-1||e.indexOf(l)>-1||e.indexOf(c)>-1?(d=".activity",v="activity"):e.indexOf(f)>-1?(d=".user",v="user"):e.indexOf(p)>-1?(d="menu-system",v="manager"):e.indexOf(h)>-1?(d=".brand",v="home"):(d=".menu-apps",v="app"),{selector:d,name:v}}},{create:function(n){n=n||{},n.collection=n.collection||{},n.model=n.model||{};var r=e.Deferred();n.model.application||(n.model.application=new w),n.model.application.get("app")?r.resolve():n.model.application.on("change",r.resolve),n.model.appLocal||(n.model.appLocal=new m,r.done(function(){n.model.application.get("app")!=="system"&&n.model.appLocal.fetch({url:O.fullpath(n.model.appLocal.url+"/"+encodeURIComponent(n.model.application.get("app"))),data:{app:n.model.application.get("app"),owner:n.model.application.get("owner")}})}));var s=e.Deferred();s.resolve(n.model.application.get("owner"));var o=e.Deferred(),u;n.collection.apps?o.resolve():(u=n.collection.apps=new S,e.when(s).done(function(){u.fetch({data:{sort_key:"name",sort_dir:"desc",app:"-",owner:n.model.application.get("owner"),search:"visible=true AND disabled=0 AND name!=launcher",count:-1}}),u.on("reset sort",o.resolve)})),n.model.userPref||(n.model.userPref=new v,n.model.userPref.fetch({data:{app:"user-prefs",owner:n.model.application.get("owner"),count:-1}}),u=n.collection.apps,n.model.userPref.on("change",function(){o.done(function(){u.sortWithString(n.model.userPref.entry.content.get("appOrder")),u.trigger("ready")})}));var a=e.Deferred();n.model.user||(n.model.user=new g,e.when(s).done(function(e){n.model.user.set("id",encodeURIComponent(e)),n.model.user.fetch()})),n.model.user.on("reset",function(){a.resolve(n.model.user)}),n.collection.messages||(n.collection.messages=new x),n.collection.managers||(n.collection.managers=new T,e.when(s).done(function(e){n.collection.managers.fetch({data:{app:"-",owner:e,count:0,digest:1}})}));var f=n.collection.sections=new N;return f.add({id:"knowledge_configurations",label:t("Knowledge").t(),icon:"bookmark",order:1}),f.add({id:"auth_configurations",label:t("Users and authentication").t(),icon:"user",order:6}),f.add({id:"deployment_configurations",label:t("Distributed environment").t(),icon:"distributed-environment",order:5}),f.add({id:"system_configurations",label:t("System").t(),icon:"settings",order:2}),f.add({id:"data_configurations",label:t("Data").t(),icon:"data",order:4}),n.collection.managers.on("reset",function(){n.collection.managers.each(function(e){var t=e.entry.content.get("menu.url")||"",r=e.entry.content.get("menu.name"),s=A.normalizeBoolean(e.entry.content.get("disabled_by_license")||!1),o=e.entry.content.get("menu.order")||1e3,u=L.encodeRoot(n.model.application.get("root"),n.model.application.get("locale")),a=u+i.sprintf(t,{namespace:n.model.application.get("app")||"NOTHING"});if(!s&&r){var l=f.get(r);if(l){var c=l.get("items");c&&c.push(e)}}e.set({url:a,order:o})}),f.trigger("ready")}),n.model.serverInfo||(n.model.serverInfo=new y,n.model.serverInfo.fetch()),n.model.webConf=new b({id:"settings"}),n.model.webConf.fetch(),new M(n)}});return M}),define("contrib/text!views/shared/appbar/NavItem.html",[],function(){return'<% var hasSubmenu = item.submenu && item.submenu.length && item.submenu.length > 0; %>\n<a href="<%-item.uri%>" title="<%-item.label%>" class="<%=hasSubmenu ? \'dropdown-toggle\' : \'\'%>" <%=hasSubmenu ? \'data-toggle="popdown"\' : \'\'%>>\n    <%=_(item.label).t()%>\n    <%if(hasSubmenu){%>\n       <b class="caret"></b>\n    <%}%>\n</a>\n<%if(hasSubmenu){%>\n    <div class="dropdown-menu">\n    	<div class="arrow"></div>\n    	<div class="slideNavPlaceHolder"></div>\n    </div>\n<%}%>\n'}),define("contrib/text!views/shared/AppNav-SlideNavTemplate.html",[],function(){return'<%if(!submenu){return "";}%>\n<ul class="slidenavList scroll-group">\n    <% _.each(submenu, function(i, index) { %>\n    <li data-index="<%=index%>" class="<%=i.divider ? \'divider\':\'\'%>">\n        <% if(!i.divider){ %>\n            <% if(i.submenu && i.submenu.length>0){ %>\n                <a href="#">\n                    <%- _.unescape(_(i.label).t()) %>\n                </a>\n                <i class="icon-triangle-right-small"></i>\n            <%}else if (i.hasOwnProperty(\'reportUri\')) { %>\n                <a href="<%=i.reportUri%>" class="primary-link">\n                    <%- _.unescape(_(i.label).t()) %>\n                </a>\n                <a href="<%=i.uri%>" class="secondary-link">\n                    <i class="icon-<%= i.hasOwnProperty(\'dispatchView\') && i.dispatchView === \'pivot\' ? \'pivot\' : \'search\' %>"></i>\n                </a>\n            <%} else { %>\n                <a href="<%=i.uri%>">\n                    <%- _.unescape(_(i.label).t()) %>\n                </a>\n            <%}%>\n        <%}%>\n    </li>\n    <% }); %>\n</ul>\n'}),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),define("jquery.ui.position",["jquery.ui.widget"],function(){}),define("splunk.widget.slidenav",["jquery","jquery.ui.widget","jquery.ui.position"],function(e){return e.widget("splunk.slidenav",{options:{levelTemplate:"",navData:{},childPropertyName:"children",backText:"Back"},_create:function(){var t=this;this.isAnimating=!1,this.$el=e(this.element),this.$wrap=e('<div class="auto"></div>'),this.$el.append(this.$wrap),this._chain=[this.addLevel(this.options.navData)],this.$backButton=e(t.templateBack()),this.$el.prepend(this.$backButton),this.$backButton.on("click",function(e){t.back(),e.preventDefault()}),this.$el.on("click","LI",function(n){var r=e(n.target).closest("LI");t.select(r,n)})},addLevel:function(t){var n=e(this.options.levelTemplate(t));return this.$wrap.append(n),this._chain&&n.position({of:this._chain[this._chain.length-1],my:"left top",at:"right top",collision:"none",offset:"0 0"}),n.data("slidenav",t),n},select:function(e,t){if(this.isAnimating)return!1;var n=e.closest("ul"),r=n.data("slidenav"),i=e.data("index");e=r[this.options.childPropertyName][i],e[this.options.childPropertyName]&&e[this.options.childPropertyName].length>0?(t&&t.preventDefault(),this.next(e)):this._trigger("select",t,e)},next:function(e){var t=this._chain[this._chain.length-1]||null;e.domReference=e.domReference||this.addLevel(e),this._chain.push(this.slide(e.domReference.show(),function(){t.find("a").prop("tabindex","-1"),e.domReference.find("a").first().focus()})),this.$backButton.show()},back:function(){if(this._chain.length<=1||this.isAnimating)return!1;this._chain.length===2&&this.$backButton.hide();var e=this._chain.pop(),t=this._chain[this._chain.length-1];this.slide(t,function(){e.scrollTop(0).hide(),t.find("a").prop("tabindex","0")})},slide:function(e,t){var n=this;return this.$wrap.outerHeight(e.outerHeight()),this.isAnimating=!0,this.$wrap.animate({left:-e.position().left},{duration:200,complete:function(){n.isAnimating=!1,t&&t.apply(n,arguments)}}),e},templateBack:function(){return this.options.templateBack||'<div class="backbutton" style="display: none;"><a href="#" class="slidenavback "><i class="icon-triangle-left-small"></i>'+this.options.backText+"</a></div>"}})}),define("views/shared/appbar/NavItem",["jquery","underscore","module","views/Base","views/shared/delegates/Popdown","contrib/text!views/shared/appbar/NavItem.html","contrib/text!views/shared/AppNav-SlideNavTemplate.html","views/shared/delegates/StopScrollPropagation","splunk.widget.slidenav"],function(e,t,n,r,i,s,o,u){var a=t.template(o),f=r.extend({moduleId:n.id,className:"nav-item",tagName:"li",initialize:function(){r.prototype.initialize.apply(this,arguments)},render:function(){var e;return this.options.navItemObj.divider?e=t.template(this.dividerTemplate,{}):e=t.template(s,{item:this.options.navItemObj,isActive:this.options.isActive}),this.$el.append(e),this.$el.addClass("nav-item-"+this.options.navItemObj.viewName),this.options.navItemObj.submenu&&this.options.navItemObj.submenu.length>0&&(this.$el.addClass("dropdown"),this.slideNav=this.$el.find(".slideNavPlaceHolder").slidenav({navData:this.options.navItemObj,levelTemplate:a,childPropertyName:"submenu",backText:t("Back").t()}),this.popdown=new i({el:this.$el,dialog:this.slidenav,mode:"dialog"}),this.children.stopScrollPropagation=new u({el:this.slideNav.find(".slidenavList")})),this},dividerTemplate:'<span class="divider" style="display: block;float: left;height: 10px;margin: 0 15px;opacity: 0.2;"></span>'});return f}),define("views/shared/appbar/AppNav",["jquery","underscore","backbone","module","views/Base","views/shared/appbar/NavItem"],function(e,t,n,r,i,s){return i.extend({moduleId:r.id,tagName:"ul",className:"nav nav-pills",initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.appNav.on("change:nav",this.debouncedRender,this),this.model.application.on("change:page",this.setActiveItem,this),this.debouncedRender()},render:function(){var t=this,n=this.model.appNav.get("nav");return n?(this.$el.html(""),e.each(n,function(e,n){var r=new s({navItemObj:n});t.$el.append(r.render().$el)}),this.setActiveItem.call(this),this):this},setActiveItem:function(){var e=this;if(this.model.application.get("page")){var t=this.model.application.get("page"),n=e.$el.find(".nav-item-"+t);n.addClass("active")}}})}),define("contrib/text!views/shared/appbar/AppLabel.html",[],function(){return'<a class="app-link" href="<%=appLink%>">\n    <div class="app-logo"></div>\n\n    <div class="app-name">\n        <span class="app-label">\n            <%-_(appLabel).t()%>\n        </span>\n    </div>\n</a>\n'}),define("views/shared/appbar/AppLabel",["underscore","module","views/Base","contrib/text!views/shared/appbar/AppLabel.html"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"app-bar-label-wrapper",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.appNav.on("change",this.render,this)},showLogo:function(){this.$el.find(".app-logo").show(),this.$el.find(".app-name").hide()},showName:function(){this.$el.find(".app-name").show(),this.$el.find(".app-logo").hide()},render:function(){var t=this.model.appNav.get("label")||"",n=e.template(r,{appLink:this.model.appNav.get("link"),appLabel:t,appIcon:this.model.appNav.get("icon"),appLogo:this.model.appNav.get("logo")});return this.$el.html(n),this.setAppLabelDisplay(),this},setAppLabelDisplay:function(){if(this.model.appNav.get("logo")){var e=new Image;e.onload=function(){parseInt(e.width,10)<2?this.showName():(this.$el.find(".app-logo").empty().append(e),this.showLogo())}.bind(this),e.onerror=function(){this.showName()}.bind(this),e.src=this.model.appNav.get("logo")}}})}),define("models/services/data/ui/Nav",["models/SplunkDBase"],function(e){return e.extend({url:"data/ui/nav",id:"data/ui/nav",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/data/ui/Views",["jquery","backbone","models/services/data/ui/View","collections/SplunkDsBase","splunk.util"],function(e,t,n,r,i){return r.extend({url:"data/ui/views",model:n,initialize:function(){r.prototype.initialize.apply(this,arguments)}})}),define("contrib/text!views/shared/appbar/Master.html",[],function(){return'<h2 class="app-name pull-right"></h2>\n<div class="nav">\n</div>\n'}),define("helpers/AppNav",["jquery","underscore","backbone","splunk.util"],function(e,t,n,r){function c(e,t,n){return e.filter(function(e){var r=e.entry.acl.get("app"),s=e.entry.get("name"),o=e.entry.acl.get("sharing")==="global";return!o&&r!==i?!1:t?s.toLowerCase().indexOf(t.toLowerCase())>-1&&!(n&&n.indexOf(i+"/"+s)>-1):!(n&&n.indexOf(i+"/"+s)>-1)})}function h(e){var t,n,o,u;s=s||[];for(o=0;o<s.length;o++){u=s.at(o);if(u.entry.get("name").toLowerCase()===e.toLowerCase()){if(u.entry.acl.get("app")==i){n=u;break}u.entry.acl.get("sharing")=="global"&&(n=u)}}return n?n.entry.content.get("isVisible")?(t={label:n.entry.content.get("label")||e,uri:r.make_url("app",i,e),viewName:e,app:i},t):!1:!1}function p(e){var t,n=u.find(function(t){return t.entry.get("name").toLowerCase()===e.toLowerCase()});return n?(t={uri:r.make_full_url("app/"+encodeURIComponent(i)+"/@go",{s:n.id}),sharing:n.get("sharing"),label:e,reportUri:r.make_full_url("app/"+encodeURIComponent(i)+"/report",{s:n.id})},n.entry.content.get("request.ui_dispatch_view")&&(t.dispatchView=n.entry.content.get("request.ui_dispatch_view")),t):!1}function d(t){if(typeof t!="string")return!1;var n=e("<div></div>").html(t).text();n=window.decodeURI(n),n=n.replace(/(\r\n|\n|\r|\s)/gm,"").toLowerCase();if(n.indexOf(":")>-1&&n.indexOf("javascript:")>-1||n.indexOf("vbscript:")>-1||n.indexOf("data:")>-1||n.indexOf("livescript:")>-1)t=!1;return t}function v(n){var o=[],a;for(a=0;a<n.length;a++){var m=n[a],g=e(m),y=r.lowerTrimStr(m.nodeName),b;if(y==="collection"){b={label:g.attr("label"),uri:"#"};var w=v(g.children());if(!w.submenu.length||!t.find(w.submenu,function(e){return!e.divider}))continue;t.extend(b,w)}else if(y==="view"){var E=g.attr("name"),S=r.normalizeBoolean(g.attr("default")||"false"),x=r.lowerTrimStr(g.attr("source")),T=g.attr("match");if(E){b=h(E);if(!b)continue;S&&(b.isDefault=S),f.push(i+"/"+E)}else if(x){var N=[],C;x=="all"?N=c(s,T):x=="unclassified"&&(N=c(s,T,f));for(C=0;C<N.length;C++){E=N[C].entry.get("name"),b=h(E);if(!b)continue;if(!N[C].entry.content.get("isDashboard"))continue;f.push(i+"/"+E),o.push(b)}b=!1}}else if(y==="saved"){var k=g.attr("name");x=r.lowerTrimStr(g.attr("source")),T=g.attr("match");if(k){b=p(k);if(!b)continue;l.push(i+"/"+k)}else if(x){var L=[];x=="all"?L=c(u,T):x=="unclassified"&&(L=c(u,T,l));for(C=0;C<L.length;C++){k=L[C].entry.get("name"),b=p(k);if(!b)continue;l.push(i+"/"+k),o.push(b)}b=!1}}else if(y==="a"){var A=d(g.attr("href"));A===!1?b=!1:(A.indexOf("/")===0&&A[1]!=="/"&&(A=r.make_url(A)),b={label:g.text(),uri:A,viewName:g.attr("name")||""})}else y==="divider"?b={label:"",divider:!0}:b={label:"unknown node in nav"};b&&o.push(b)}return{submenu:o}}function m(t,r,a,c){var h=t.entry.content.get("eai:data").replace(/\&/g,"&amp;"),p=e(e.parseXML(h)),d=p.find("nav"),m=d.attr("search_view"),g=d.attr("color");return f=l=[],i=t.entry.content.get("eai:appName"),s=r,o=c||"",u=new n.Collection(a.filter(function(e){var t=e.entry.acl.get("app")==i,n=e.entry.acl.get("sharing")=="global";return t||n})),{nav:v(d.children()).submenu,searchView:m,color:g}}function g(e,t,n,r){var i=[];return o=r||"",f=l=[],!e||e.length==0?null:(e.each(function(e){i.push(m(e,t,n))}),i)}var i,s,o,u,a,f=[],l=[];return{parseNavModel:m,parseNavCollection:g}}),define("util/color_utils",["underscore"],function(e){var t=function(e){var t=e[0],n=e[1],r=e[2],i=0,s=0,o=0;if(t===null||n===null||r===null||isNaN(t)||isNaN(n)||isNaN(r))return null;if(t<0||n<0||r<0||t>255||n>255||r>255)return null;t/=255,n/=255,r/=255;var u=Math.min(t,Math.min(n,r)),a=Math.max(t,Math.max(n,r)),f=a-u,l=0;f==0?l=0:a==t?l=(n-r)/f%6:a==n?l=(r-t)/f+2:a==r&&(l=(t-n)/f+4);var c=l*60;while(c<0)c+=360;while(c>360)c-=360;var h=.5*(a+u),p=0;return f==0?p=0:p=f/(1-Math.abs(2*h-1)),p<0&&(p=0),p>1&&(p=1),h<0&&(h=0),h>1&&(h=1),[c,p*100,h*100]},n=function(e){if(e.length!=3)return null;var t=e[0],n=e[1],r=e[2];n/=100,r/=100;while(t<0)t+=360;while(t>360)t-=360;if(t<0||t>360||n<0||n>1||r<0||r>1)return null;var i=(1-Math.abs(2*r-1))*n,s=t/60,o=i*(1-Math.abs(s%2-1)),u=0,a=0,f=0;s<1?(u=i,a=o):s<2?(u=o,a=i):s<3?(a=i,f=o):s<4?(a=o,f=i):s<5?(u=o,f=i):(u=i,f=o);var l=r-.5*i,c=u+l,h=a+l,p=f+l;return c*=255,h*=255,p*=255,[c,h,p]},r=function(e){var t=e.match(/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);if(t===null)return null;var n=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)];return n},i=function(t){if(t.length!=3)return null;var n=e.map(t,Math.round),r="rgb("+n[0]+", "+n[1]+", "+n[2]+")";return r},s=function(t){if(t.length!=3)return null;var n=e.map(t,Math.round),r="hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)";return r},o=function(e){var t=e.match(/^hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)$/);if(t===null)return null;var n=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)];return n},u=function(e){var t=f(e),n=t.match(/^#?([\dA-Fa-f]{2})([\dA-Fa-f]{2})([\dA-Fa-f]{2})$/);if(n===null)return null;var r=[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)];return r},a=function(t){if(t.length!=3)return null;var n=e.map(t,Math.round),r=e.map(n,function(e){var t=e.toString(16);return t.length<2&&(t="0"+t),t.toUpperCase()}),i="#"+r[0]+r[1]+r[2];return i},f=function(e){var t="#"+e.replace("#","");t=t.toUpperCase();var n=t.match(/^#?([\dA-F])([\dA-F])([\dA-F])$/);return n!==null&&(t="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),t},l=function(e,t){var n=e.slice(0);return n[2]*=t,n[2]>100?n[2]=100:n[2]<0&&(n[2]=100),n},c=function(e,r){var i=t(e),s=l(i,r),o=n(s);return o},h=function(e,t){var n=u(e),r=c(n,t),i=a(r);return i},p=function(e,t,n,r){var i=[" -webkit-gradient(linear, 0 0, 0 100%, from(@startColor), color-stop(@colorStop, @midColor), to(@endColor)) "," -webkit-linear-gradient(@startColor, @midColor @colorStop, @endColor) "," -moz-linear-gradient(top, @startColor, @midColor @colorStop, @endColor) "," -o-linear-gradient(@startColor, @midColor @colorStop, @endColor) "," linear-gradient(@startColor, @midColor @colorStop, @endColor) "," progid:DXImageTransform.Microsoft.gradient(startColorstr='@startColor', endColorstr='@endColor', GradientType=0) "];for(var s=0;s<i.length;s++)i[s]=i[s].replace(/@startColor/g,e),i[s]=i[s].replace(/@midColor/g,t),i[s]=i[s].replace(/@colorStop/g,n),i[s]=i[s].replace(/@endColor/g,r);return i},d=function(e,t){var n=[" -moz-linear-gradient(top, @startColor, @endColor) "," -webkit-gradient(linear, 0 0, 0 100%, from(@startColor), to(@endColor))"," -webkit-linear-gradient(top, @startColor, @endColor) "," -o-linear-gradient(top, @startColor, @endColor) "," linear-gradient(to bottom, @startColor, @endColor) "," progid:DXImageTransform.Microsoft.gradient(startColorstr='@startColor', endColorstr='@endColor', GradientType=0)  "];for(var r=0;r<n.length;r++)n[r]=n[r].replace(/@startColor/g,e),n[r]=n[r].replace(/@endColor/g,t);return n};return{hslColorFromRgbColor:t,rgbColorFromHslColor:n,hslColorFromHslString:o,rgbColorFromRgbString:r,hslStringFromHslColor:s,rgbStringFromRgbColor:i,rgbColorFromHexString:u,hexStringFromRgbColor:a,normalizeHexString:f,modifyLuminosityOfHslColor:l,modifyLuminosityOfRgbColor:c,modifyLuminosityOfHexString:h,generateGradientStylesWithMidColor:p,generateGradientStyles:d}}),define("views/shared/appbar/Master",["jquery","underscore","backbone","module","views/Base","views/shared/appbar/NavItem","views/shared/appbar/AppNav","views/shared/appbar/AppLabel","models/Application","models/services/data/ui/Nav","models/services/AppLocal","collections/services/data/ui/Views","collections/services/SavedSearches","contrib/text!views/shared/appbar/Master.html","helpers/AppNav","uri/route","util/color_utils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=i.extend({moduleId:r.id,className:"app-bar",initialize:function(){i.prototype.initialize.apply(this,arguments),this.children.appNav=new o({model:this.model,collection:this.collection}),this.children.appLabel=new u({model:this.model,collection:this.collection}),this.setBannerColor(),this.model.appNav.on("change:color",this.setBannerColor,this),this.debouncedRender()},render:function(){var e=t.template(p);return this.$el.html(e),this.$el.find(".nav").html(this.children.appNav.el),this.$el.find(".app-name").html(this.children.appLabel.render().el),this},setBannerColor:function(){if(!this.model.appNav)return!1;var e=this.model.appNav.get("color");if(!e)return!1;this.$el.css("background-color",e);var t=m.normalizeHexString(e),n=m.modifyLuminosityOfHexString(e,g.END_GRADIENT_LUMINOSITY),r=m.generateGradientStyles(t,n);for(var i=0;i<r.length;i++)this.$el.css("background-image",r[i])}},{END_GRADIENT_LUMINOSITY:.9,createWithAppNavUrl:function(t){var n=this,r=v.appNavUrl(t.model.application.get("root"),t.model.application.get("locale"),t.model.application.get("app"));e.ajax({url:r,dataType:"json"}).done(function(e){var n,r,i,s;n=v.page(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("app")),r=v.appIcon(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("owner"),t.model.application.get("app")),i=v.appLogo(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("owner"),t.model.application.get("app")),s=v.page(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("app"),"report"),t.model.appNav.set({nav:e.nav,color:e.color,label:e.label,icon:r,logo:i,link:n,defaultView:e.defaultView})}).fail(function(){n.createWithBackbone(t)})},createWithAppNavModel:function(e){var t,n,r,i;t=v.page(e.model.application.get("root"),e.model.application.get("locale")||"",e.model.application.get("app")),n=v.appIcon(e.model.application.get("root"),e.model.application.get("locale")||"",e.model.application.get("owner"),e.model.application.get("app")),r=v.appLogo(e.model.application.get("root"),e.model.application.get("locale")||"",e.model.application.get("owner"),e.model.application.get("app")),i=v.page(e.model.application.get("root"),e.model.application.get("locale")||"",e.model.application.get("app"),"report"),e.model.appNav.set({nav:e.model.appNav.entry.content.get("nav"),color:e.model.appNav.entry.content.get("color"),label:e.model.appNav.entry.content.get("label"),icon:n,logo:r,link:t,defaultView:e.model.appNav.entry.content.get("defaultView")})},createWithBackbone:function(t){function o(){if(r.state()==="resolved"&&i.state()==="resolved"&&s.state()==="resolved"){var e=d.parseNavModel(t.model.splunkDappNav,t.collection.views,t.collection.savedSearches,t.model.application.get("root")),n,o,u,a;n=v.page(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("app")),o=v.appIcon(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("owner"),t.model.application.get("app")),a=v.appLogo(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("owner"),t.model.application.get("app")),t.model.app&&t.model.app.entry&&t.model.app.entry.content&&t.model.app.entry.content.get("label")&&(u=t.model.app.entry.content.get("label")||""),t.model.appNav.set({nav:e.nav,color:e.color,label:u,icon:o,link:n,logo:a,searchView:e.searchView})}}var n=e.Deferred(),r=e.Deferred(),i=e.Deferred(),s=e.Deferred(),u=t.model.application.get("app"),a=t.model.application.get("owner");u&&a&&n.resolve(u,a),t.model.application.on("change",function(){var e=t.model.application.get("app"),r=t.model.application.get("owner");e&&r&&n.resolve(e,r)}),t.model.app||(t.model.app=new l,n.done(function(e,n){t.model.app.set({id:"apps/local/"+e}),t.model.app.fetch({data:{app:e,owner:n}})})),t.collection.views||(t.collection.views=new c,n.done(function(e,n){t.collection.views.fetch({data:{app:e,owner:n,count:-1,digest:1}})})),t.collection.savedSearches||(t.collection.savedSearches=new h,n.done(function(e,n){t.collection.savedSearches.fetch({data:{app:e,owner:"-",search:"is_visible=1 AND disabled=0",count:-1}})})),t.model.splunkDappNav||(t.model.splunkDappNav=new f,n.done(function(e,n){t.model.splunkDappNav.fetch({data:{app:e,owner:n}})})),t.collection.views.on("reset",function(){i.resolve(),o()}),t.collection.savedSearches.on("reset",function(){s.resolve(),o()}),t.model.splunkDappNav.on("change",function(){r.resolve(),o()})},create:function(e){return e=e||{},e.collection=e.collection||{},e.model=e.model||{},e.model.appNav?this.createWithAppNavModel(e):(e.model.appNav=new(n.Model.extend()),e.appServerUrl?this.createWithAppNavUrl(e):this.createWithBackbone(e)),new g(e)}});return g}),define("splunkjs/mvc/headerview",["require","exports","module","underscore","jquery","./mvc","./basesplunkview","views/shared/splunkbar/Master","views/shared/appbar/Master","./sharedmodels","helpers/user_agent"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("./mvc"),o=e("./basesplunkview"),u=e("views/shared/splunkbar/Master"),a=e("views/shared/appbar/Master"),f=e("./sharedmodels"),l=e("helpers/user_agent"),c=o.extend({moduleId:n.id,className:"splunk-header",options:{appbar:!0,acceleratedAppNav:!1},initialize:function(){this.configure(),this.model=this.model||{},this.model.application=f.get("app"),this.model.user=f.get("user"),this.model.appLocal=f.get("appLocal"),this.model.serverInfo=f.get("serverInfo");var e=this.settings.get("acceleratedAppNav")&&l.isIE7();this.collection=this.collection||{},this.collection.appLocals=f.get("appLocals"),this.dfd=i.when.apply(i,[this.model.application.dfd,this.model.user.dfd,this.model.appLocal.dfd,this.model.serverInfo.dfd,this.collection.appLocals.dfd]),this.dfd.done(r.bind(function(){this.globalNav=u.create({model:{application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo},collection:{apps:this.collection.appLocals}}),this.settings.get("appbar")&&(this.appNav=a.create({model:{application:this.model.application,app:this.model.appLocal},appServerUrl:e}))},this))},render:function(){return this.dfd.done(r.bind(function(){this.$el.empty().append(this.globalNav.render().el),this.settings.get("appbar")&&this.$el.append(this.appNav.render().el)},this)),this}});return c}),define("contrib/text!views/shared/footer/AboutDialog.html",[],function(){return"<dl class=\"list-dotted\">\n    <dt><%= _('Splunk Version').t() %></dt>\n    <dd><%= version %></dd>\n    <dt><%= _('Splunk Build').t() %></dt>\n    <dd><%= build %></dd>\n</dl>\n<dl class=\"list-dotted\">\n    <dt><%= _('Current App').t() %></dt>\n    <dd><%= currentApp %></dd>\n    <% if (appVersion) { %>\n        <dt><%= _('App Version').t() %></dt>\n        <dd><%= appVersion %></dd>\n    <% } %>\n    <% if (appBuild) { %>\n        <dt><%= _('App Build').t() %></dt>\n        <dd><%= appBuild %></dd>\n    <% } %>\n</dl>\n<% if (listOfProducts) { %>\n<dl class=\"list-dotted\">\n    <dt><%= _('List of Products: ').t() %></dt>\n    <dd><%= listOfProducts %></dd>\n</dl>\n<% } %>\n<dl class=\"list-dotted\">\n    <dt><%= _('Server Name').t() %></dt>\n    <dd><%= serverName %></dd>\n</dl>\n"}),define("views/shared/footer/AboutDialog",["underscore","module","views/Base","views/shared/Modal","contrib/text!views/shared/footer/AboutDialog.html"],function(e,t,n,r,i){return r.extend({moduleId:t.id,template:i,initialize:function(){r.prototype.initialize.apply(this,arguments);var t=this,n=t.model.applicationModel.get("app"),i;n==="launcher"?t.currentAppLabel=e("Home").t():(i=t.collection.find(function(e){return e.entry.get("name")===n}),t.currentAppLabel=i?i.entry.content.get("label"):e("N/A").t()),this.model.serverInfo.on("change reset",function(){this.render()},this)},getListOfProducts:function(){var t=this.model.serverInfo.entry.content.get("addOns"),n;return t&&!$.isEmptyObject(t)&&(n=e(t).keys().join(", ")),n},render:function(){this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("About Splunk").t());var t=this.compiledTemplate({serverName:this.model.serverInfo.entry.content.get("serverName")||e("N/A").t(),version:this.model.serverInfo.entry.content.get("version")||e("N/A").t(),build:this.model.serverInfo.entry.content.get("build")||e("N/A").t(),appVersion:this.model.appLocal.entry.content.get("version")||null,appBuild:this.model.appLocal.entry.content.get("build")||null,listOfProducts:this.getListOfProducts(),currentApp:this.currentAppLabel});return this.$(r.BODY_SELECTOR).html(t),this}})}),define("contrib/text!views/shared/footer/Master.html",[],function(){return'<ul class="nav nav-footer">\n    <li><a href="#" id="about"><%= _(\'About\').t() %></a></li>\n\n    <li><a href="http://www.splunk.com/r/support" target="_blank"><%= _(\'Support\').t() %></a></li>\n    <li><a href="http://www.splunk.com/r/bugs" target="_blank"><%= _(\'File a Bug\').t() %></a></li>\n    <li><a href="<%- makeDocLink(currentPageDocLocation) %>" target="_blank"><%- _("Documentation").t() %></a></li>\n    <li><a href="http://www.splunk.com/r/privacy" target="_blank"><%= _(\'Privacy Policy\').t() %></a></li>\n</ul>\n<p class="copyright">&copy; 2005-<%=new Date().getFullYear()%> <%= _(\'Splunk Inc. All rights reserved.\').t() %></p>\n'}),define("views/shared/footer/Master",["jquery","module","views/Base","./AboutDialog","models/services/server/ServerInfo","models/Application","models/services/AppLocal","collections/services/AppLocals","contrib/text!views/shared/footer/Master.html","uri/route","util/splunkd_utils"],function(e,t,n,r,i,s,o,u,a,f,l){var c=n.extend({moduleId:t.id,className:"splunkified",template:a,initialize:function(){n.prototype.initialize.apply(this,arguments);var t=e.Deferred(),r=e.Deferred();this.options.model.application.get("app")?t.resolve():this.options.model.application.on("change reset",t.resolve),this.options.model.appLocal.entry.content.get("version")?r.resolve():this.options.model.appLocal.on("change reset",r.resolve),e.when(t,r).done(this.render.bind(this))},events:{"click a[id=about]":function(t){this.children.aboutDialog=new r({collection:this.options.collection.apps,model:{applicationModel:this.options.model.application,appLocal:this.options.model.appLocal,serverInfo:this.options.model.serverInfo},onHiddenRemove:!0}),this.modalWrapper=e('<div class="splunk-components">').appendTo("body").append(this.children.aboutDialog.render().el),this.children.aboutDialog.once("hidden",function(){this.modalWrapper.remove()},this),this.children.aboutDialog.show(),t.preventDefault()}},makeDocLink:function(e){return f.docHelpInAppContext(this.model.application.get("root"),this.model.application.get("locale"),e,this.model.application.get("app"),this.model.appLocal.entry.content.get("version"),this.model.appLocal.appAllowsDisable(),this.model.appLocal.entry.content.get("docs_section_override"))},render:function(){var e=["app",this.model.application.get("app"),this.model.application.get("page")].join("."),t=this.compiledTemplate({makeDocLink:this.makeDocLink.bind(this),currentPageDocLocation:e});return this.$el.html(t),this}},{create:function(t){t=t||{},t.model=t.model||{},t.collection=t.collection||{},t.model.serverInfo||(t.model.serverInfo=new i,t.model.serverInfo.fetch());var n=e.Deferred();return t.model.application||(t.model.application=new s),t.model.application.get("app")?n.resolve():t.model.application.on("change",n.resolve),t.model.appLocal||(t.model.appLocal=new o,n.done(function(){t.model.application.get("app")!=="system"&&t.model.appLocal.fetch({url:l.fullpath(t.model.appLocal.url+"/"+encodeURIComponent(t.model.application.get("app"))),data:{app:t.model.application.get("app"),owner:t.model.application.get("owner")}})})),t.collection.apps||(t.collection.apps=new u,t.collection.apps.fetch({data:{sort_key:"name",sort_dir:"desc",app:"-",owner:t.model.application.get("owner"),search:"visible=true AND disabled=0 AND name!=launcher",count:-1}})),new c(t)}});return c}),define("splunkjs/mvc/footerview",["require","exports","module","jquery","underscore","./mvc","./basesplunkview","views/shared/footer/Master","./sharedmodels"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("./mvc"),o=e("./basesplunkview"),u=e("views/shared/footer/Master"),a=e("./sharedmodels"),f=o.extend({moduleId:n.id,className:"splunk-footer",initialize:function(){var e=a.get("app"),t=a.get("appLocal"),n=a.get("serverInfo"),s=a.get("appLocals");this.dfd=r.when.apply(r,[e.dfd,t.dfd,n.dfd,s.dfd]),this.dfd.done(i.bind(function(){this.footer=u.create({model:{application:e,appLocal:t,serverInfo:n},collection:{apps:s}})},this))},render:function(){return this.dfd.done(i.bind(function(){this.$el.append(this.footer.render().el)},this)),this}});return f}),define("splunkjs/mvc/simpleform/input/submit",["require","underscore","jquery","../../basesplunkview","../../mvc"],function(e){var t=e("underscore"),n=e("jquery"),r=e("../../basesplunkview"),i=e("../../mvc"),s=r.extend({className:"splunk-submit-button",options:{text:t("Search").t(),useIcon:!1,submitType:undefined},events:{"click button":"onButtonClick"},initialize:function(){this.configure(),this.settings.on("change",this.render,this)},onButtonClick:function(){this.trigger("submit",this)},render:function(){var e=this.$("button");return e.length||(e=n('<button class="btn btn-primary"></button>').appendTo(this.el)),this.settings.get("useIcon")?e.html('<i class="icon-search"></i>'):this.settings.has("text")?e.text(this.settings.get("text")):this.settings.set("text",e.text()),this}});return s}),define("splunkjs/mvc/simplesplunkview",["require","exports","module","underscore","./mvc","./basesplunkview","./messages"],function(e,t,n){var r=e("underscore"),i=e("./mvc"),s=e("./basesplunkview"),o=e("./messages"),u=s.extend({moduleId:n.id,className:null,outputMode:"json_rows",returnCount:0,offset:0,resultOptions:{},data_types:{json_rows:"rows",json_cols:"columns",json:"results"},options:{data:"preview"},initialize:function(){this.configure(),this._viz=null,this._data=null,this.bindToComponentSetting("managerid",this._onManagerChange,this),this.manager||this._onManagerChange(i.Components,null)},createView:function(){throw new Error("Not implemented error.")},onDataChanged:function(){return this.formatResults.apply(this,arguments)},formatResults:function(e){if(!e)return[];var t=this.output_mode||this.outputMode,n=this.data_types[t],r=e.data();return this.formatData(r[n])},formatData:function(e){return e},updateView:function(e,t){throw new Error("Not implemented error.")},displayMessage:function(e){return this._viz=null,o.render(e,this.$el),this},_checkManagerState:function(){var e=this.manager;if(!e)return;if(!e.job&&e.lastError){this._onSearchError(e.lastError);return}if(!e.job)return;var t=e.job.state();if(t&&t.content&&(t.content.isDone||t.content.isFailed)){this._onSearchProgress(t);return}},_onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.resultsModel&&(this.resultsModel.off(null,null,this),this.resultsModel.destroy(),this.resultsModel=null),this.manager=t;if(!t){this._displayMessage("no-search");return}this._displayMessage("empty");var n=this.output_mode||this.outputMode;this.resultsModel=this.manager.data(this.settings.get("data")||"preview",r.extend({output_mode:n,count:this.returnCount,offset:this.offset},this.resultOptions)),t.on("search:start",this._onSearchStart,this),t.on("search:progress",this._onSearchProgress,this),t.on("search:cancelled",this._onSearchCancelled,this),t.on("search:error",this._onSearchError,this),t.on("search:fail",this._onSearchFailed,this),this.resultsModel.on("data",this._onDataChanged,this),this.resultsModel.on("error",this._onSearchError,this),this._checkManagerState(),t.replayLastSearchEvent(this)},_displayMessage:function(e){return this.displayMessage(e)},render:function(){return this._createView(this._data),this.resultsModel&&this._onDataChanged(),this},_createView:function(e){if(!e)return;this._viz||(this._viz=this.createView())},_updateView:function(){if(!this._data||r.isEmpty(this._data))return;var e=this._data;this._viz||this._createView(e);if(!this._viz)return;this.updateView(this._viz,this._data)},_onDataChanged:function(){if(!this.resultsModel.hasData()){this._isJobDone&&this._displayMessage("no-results");return}this._data=this.onDataChanged(this.resultsModel),this._updateView()},_onSearchProgress:function(e){e=e||{};var t=e.content||{},n=t.resultPreviewCount||0,r=this._isJobDone=t.isDone||!1;if(n===0){this._displayMessage(r?"no-results":"waiting");return}},_onSearchStart:function(){this._isJobDone=!1,this._displayMessage("waiting")},_onSearchCancelled:function(){this._isJobDone=!1,this._displayMessage("cancelled")},_onSearchError:function(e,t){this._isJobDone=!1;var n=o.getSearchErrorMessage(t)||e;this._displayMessage({level:"error",icon:"warning-sign",message:n})},_onSearchFailed:function(e,t){var n=o.getSearchFailureMessage(e);this._displayMessage({level:"error",icon:"warning-sign",message:n})}});return u}),define("splunkjs/mvc/baseinputview",["require","exports","module","underscore","jquery","./simplesplunkview"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("./simplesplunkview"),o=s.extend({output_mode:"json",options:{disabled:!1,managerid:null,data:"preview"},initialize:function(e){s.prototype.initialize.apply(this,arguments),this.settings.enablePush("value"),this._onDefaultChange(),this.settings.on("change:disabled",this._onDisable,this),this.settings.on("change:default",this._onDefaultChange,this)},_onDefaultChange:function(e,t,n){var i=this.settings.previous("default"),s=this.settings.get("default"),o=!e;if(s===undefined&&o){var u=r.contains(r.keys(this.constructor.prototype.options),"seed");u&&(s=this.settings.get("seed"))}var a=this.settings.get("value");s!==undefined&&(a===i||a===undefined)&&this.val(s)},_onChange:function(e){this.trigger("change",this.val(),this)},_onDisable:function(e){var t=this.settings.get("disabled");this._disable(t)},_disable:function(e){this.$("input").prop("disabled",e)},render:function(){return this._updateView(this._viz,this._data||[]),this},_updateView:function(){var e=this._data||[];this._viz||this._createView(e);if(!this._viz)return;this.updateView(this._viz,e),this._onDisable()},createView:function(){return!0},val:function(e,t){t=t||"input";var n=i(t,this.$el);return e?n.val(e):n.val()}});return o}),define("splunkjs/mvc/textinputview",["require","exports","module","underscore","jquery","./baseinputview"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("./baseinputview"),o=s.extend({moduleId:n.id,className:"splunk-textinput",options:{"default":undefined,type:"text",seed:undefined,value:undefined,disabled:!1},events:{"change input":"_onDomValueChange"},initialize:function(){this.options=r.extend({},s.prototype.options,this.options),s.prototype.initialize.apply(this,arguments),this.settings.on("change:value",this._onValueChange,this),this.settings.on("change",this.render,this);var e=this;this.on("change",function(){e.settings.set("value",e.val())}),r.contains(["text","password"],this.settings.get("type"))||this.settings.set("type","text"),this._inputId=this.id+"-input"},_onDomValueChange:function(){var e=i("input",this.$el);this.val(e.val())},_onValueChange:function(e,t,n){var r=i("input",this.$el);r.val(this.settings.get("value")),this._onChange()},getInputId:function(){return this._inputId},createView:function(){var e=i(r.template("<input type='<%= type %>' id='<%= id %>' value='<%- value %>'/>",{type:this.settings.get("type"),id:this._inputId,value:this.settings.get("value")}));return this.$el.html(e),e},updateView:function(e,t){return this},val:function(e){var t=i("input",this.$el);return arguments.length===0?this.settings.get("value"):(e!==this.settings.get("value")&&(t.val(e||""),this.settings.set("value",e)),this.val())}});return o}),define("splunkjs/mvc/simpleform/input/text",["require","underscore","jquery","./base","../../textinputview"],function(e){var t=e("underscore"),n=e("jquery"),r=e("./base"),i=e("../../textinputview"),s=r.extend({initialize:function(){var e=t.defaults({el:n('<div class="splunk-view"></div>').appendTo(this.el),id:t.uniqueId(this.id+"-input")},this.options);this.textbox=new i(e),this.textbox.on("change",this.handleChange,this),this.options.settings=this.textbox.settings,r.prototype.initialize.call(this,{inputId:this.textbox.getInputId()}),this.delegateEvents({"change input":"handleChange","keyup input":"checkEnterKey"})},hasValue:function(){var e=this.settings.get("value"),t=this.settings.get("default");return e!==undefined&&e!==null&&e!==""||t===undefined||e===t},getValue:function(){return this.textbox.val()},setValue:function(e){this.textbox.val(e)},render:function(){return this.renderLabel(),this.textbox.render(),this},_getWrappedView:function(){return this.textbox},checkEnterKey:function(e){e.keyCode===13&&this.submit()}});return s}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/choice.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/basechoiceview",["require","exports","module","underscore","util/console","./baseinputview","./messages","bootstrap.tooltip","css!../css/choice.css"],function(e,t,n){var r=e("underscore"),i=e("util/console"),s=e("./baseinputview"),o=e("./messages"),u=e("bootstrap.tooltip");e("css!../css/choice.css");var a=s.extend({options:{choices:[],selectFirstChoice:!1},initialize:function(){var e=this;this._$messageEl=this.$(".splunk-choice-input-message span"),this.options=r.extend({},s.prototype.options,this.options),s.prototype.initialize.apply(this,arguments),this.manager=null,this.resultsModel=null,this.settings.on("change:value",this._onValueChange,this),this.settings.on("change:choices change:valueField change:labelField change:default",r.debounce(this.render,0),this)},updateDomVal:function(e){throw new Error("Abstract method.  Must override")},_onValueChange:function(e,t,n){this.updateDomVal(t),this.trigger("change",this.val(),this)},_displayMessage:function(e){var t=e;r.isString(e)&&(t=o.resolve(e));var n="",i="";switch(e){case"no-events":case"no-results":case"no-stats":n=r("Search produced no results.").t(),i="",this._updateView(this._viz,[]);break;case"waiting":case"waiting-queued":case"waiting-preparing":n=r("Populating...").t(),i="";break;default:t.level==="error"?(n=r("Could not create search.").t(),i=t.message||""):(n="",i="")}this._$messageEl.text(n),this._$messageEl.attr("title",i),this._$messageEl.tooltip("destroy"),this._$messageEl.tooltip({animation:!1})},convertDataToChoices:function(e){e=e||this._data;var t=this.settings.get("valueField")||"value",n=this.settings.get("labelField")||t,s=Array.prototype.slice.call(this.settings.get("choices")||[]);s=s.concat(r.map(e||[],function(e){return{label:e[n],value:e[t]}}));var o=s.length;return s=r.uniq(s,!1,function(e){return e.value}),o!=s.length&&i.log("Choice control received search result with duplicate values. Recommend dedupe of data source."),s},_updateView:function(e,t){t=this.convertDataToChoices(t);if(!this._viz){this._createView(t);if(!this._viz)return}this.updateView(this._viz,t);if(this.settings.get("selectFirstChoice")){var n=t&&t.length>0;n&&!this._hasValue()&&this.val(t[0].value)}if(!this._$messageEl.length){var r=$("<div class='splunk-choice-input-message'></div>").appendTo(this.el);this._$messageEl=$("<span></span>").appendTo(r)}this._$messageEl.text(""),!t||t.length===0?this._disable(!0):this._onDisable()},_hasValue:function(){var e=this.val();return!r.isUndefined(e)&&!r.isNull(e)},val:function(e){return arguments.length===0?this.settings.get("value"):(e!==this.settings.get("value")&&this.settings.set("value",e),this.settings.get("value"))}});return a}),function(e){typeof e.fn.each2=="undefined"&&e.fn.extend({each2:function(t){var n=e([0]),r=-1,i=this.length;while(++r<i&&(n.context=n[0]=this[r])&&t.call(n[0],r,n)!==!1);return this}})}(jQuery),function(e,t){function l(e,t){var n=0,r=t.length;for(;n<r;n+=1)if(c(e,t[n]))return n;return-1}function c(e,n){return e===n?!0:e===t||n===t?!1:e===null||n===null?!1:e.constructor===String?e===n+"":n.constructor===String?n===e+"":!1}function h(t,n){var r,i,s;if(t===null||t.length<1)return[];r=t.split(n);for(i=0,s=r.length;i<s;i+=1)r[i]=e.trim(r[i]);return r}function p(e){return e.outerWidth(!1)-e.width()}function d(n){var r="keyup-change-value";n.bind("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.bind("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function v(n){n.bind("mousemove",function(n){var r=a;(r===t||r.x!==n.pageX||r.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function m(e,n,r){r=r||t;var i;return function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function g(e){var t=!1,n;return function(){return t===!1&&(n=e(),t=!0),n}}function y(e,t){var n=m(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){l(e.target,t.get())>=0&&n(e)})}function b(e){if(e[0]===document.activeElement)return;window.setTimeout(function(){var t=e[0],n=e.val().length,r;e.focus(),t.setSelectionRange?t.setSelectionRange(n,n):t.createTextRange&&(r=t.createTextRange(),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",n),r.select())},0)}function w(e){e.preventDefault(),e.stopPropagation()}function E(e){e.preventDefault(),e.stopImmediatePropagation()}function S(t){if(!u){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);u=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),u.attr("class","select2-sizer"),e("body").append(u)}return u.text(t.val()),u.width()}function x(t,n,r){var i,s=[],o;i=t.attr("class"),typeof i=="string"&&e(i.split(" ")).each2(function(){this.indexOf("select2-")===0&&s.push(this)}),i=n.attr("class"),typeof i=="string"&&e(i.split(" ")).each2(function(){this.indexOf("select2-")!==0&&(o=r(this),typeof o=="string"&&o.length>0&&s.push(this))}),t.attr("class",s.join(" "))}function T(e,t,n,r){var i=e.toUpperCase().indexOf(t.toUpperCase()),s=t.length;if(i<0){n.push(r(e));return}n.push(r(e.substring(0,i))),n.push("<span class='select2-match'>"),n.push(r(e.substring(i,i+s))),n.push("</span>"),n.push(r(e.substring(i+s,e.length)))}function N(t){var n,r=0,i=null,s=t.quietMillis||100,o=t.url,u=this;return function(a){window.clearTimeout(n),n=window.setTimeout(function(){r+=1;var n=r,s=t.data,f=o,l=t.transport||e.ajax,c=t.type||"GET",h={};s=s?s.call(u,a.term,a.page,a.context):null,f=typeof f=="function"?f.call(u,a.term,a.page,a.context):f,null!==i&&i.abort(),t.params&&(e.isFunction(t.params)?e.extend(h,t.params.call(u)):e.extend(h,t.params)),e.extend(h,{url:f,dataType:t.dataType,data:s,type:c,cache:!1,success:function(e){if(n<r)return;var i=t.results(e,a.page);a.callback(i)}}),i=l.call(u,h)},s)}}function C(t){var n=t,r,i,s=function(e){return""+e.text};e.isArray(n)&&(i=n,n={results:i}),e.isFunction(n)===!1&&(i=n,n=function(){return i});var o=n();return o.text&&(s=o.text,e.isFunction(s)||(r=n.text,s=function(e){return e[r]})),function(t){var r=t.term,i={results:[]},o;if(r===""){t.callback(n());return}o=function(n,i){var u,a;n=n[0];if(n.children){u={};for(a in n)n.hasOwnProperty(a)&&(u[a]=n[a]);u.children=[],e(n.children).each2(function(e,t){o(t,u.children)}),(u.children.length||t.matcher(r,s(u),n))&&i.push(u)}else t.matcher(r,s(n),n)&&i.push(n)},e(n().results).each2(function(e,t){o(t,i.results)}),t.callback(i)}}function k(n){var r=e.isFunction(n);return function(i){var s=i.term,o={results:[]};e(r?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;(s===""||i.matcher(s,n))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o)}}function L(t,n){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error("formatterName must be a function or a falsy value")}function A(t){return e.isFunction(t)?t():t}function O(t){var n=0;return e.each(t,function(e,t){t.children?n+=O(t.children):n++}),n}function M(e,n,r,i){var s=e,o=!1,u,a,f,l,h;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return t;for(;;){a=-1;for(f=0,l=i.tokenSeparators.length;f<l;f++){h=i.tokenSeparators[f],a=e.indexOf(h);if(a>=0)break}if(a<0)break;u=e.substring(0,a),e=e.substring(a+h.length);if(u.length>0){u=i.createSearchChoice(u,n);if(u!==t&&u!==null&&i.id(u)!==t&&i.id(u)!==null){o=!1;for(f=0,l=n.length;f<l;f++)if(c(i.id(u),i.id(n[f]))){o=!0;break}o||r(u)}}}if(s!==e)return e}function _(t,n){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}if(window.Select2!==t)return;var n,r,i,s,o,u,a,f;n={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case n.SHIFT:case n.CTRL:case n.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123}},f=e(document),o=function(){var e=1;return function(){return e++}}(),f.bind("mousemove",function(e){a={x:e.pageX,y:e.pageY}}),r=_(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,i,s=".select2-results",u;this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&n.element.data("select2")!==null&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+o()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=g(function(){return n.element.closest("body")}),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(A(n.containerCss)),this.container.addClass(A(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabIndex"),this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){e(this).select2("focus")}).attr("tabIndex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(A(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=r=this.container.find(s),this.search=i=this.container.find("input.select2-input"),i.attr("tabIndex",this.elementTabIndex),this.resultsPage=0,this.context=null,this.initContainer(),v(this.results),this.dropdown.delegate(s,"mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent)),y(80,this.results),this.dropdown.delegate(s,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var s=r.scrollTop(),o;i>0&&s-i<=0?(r.scrollTop(0),w(e)):i<0&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),w(e))}),d(i),i.bind("keyup-change input paste",this.bind(this.updateResults)),i.bind("focus",function(){i.addClass("select2-focused")}),i.bind("blur",function(){i.removeClass("select2-focused")}),this.dropdown.delegate(s,"mouseup",this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(n.element.is(":disabled")||n.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(n){var r,i,s,o;r=n.element,r.get(0).tagName.toLowerCase()==="select"&&(this.select=i=n.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(r,i,s){var o,u,a,f,l=this.opts.id,c=this;o=function(r,i,u){var a,f,h,p,d,v,m,g,y,b;r=n.sortResults(r,i,s);for(a=0,f=r.length;a<f;a+=1)h=r[a],d=h.disabled===!0,p=!d&&l(h)!==t,v=h.children&&h.children.length>0,m=e("<li></li>"),m.addClass("select2-results-dept-"+u),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),d&&m.addClass("select2-disabled"),v&&m.addClass("select2-result-with-children"),m.addClass(c.opts.formatResultCssClass(h)),g=e(document.createElement("div")),g.addClass("select2-result-label"),b=n.formatResult(h,g,s,c.opts.escapeMarkup),b!==t&&g.html(b),m.append(g),v&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),o(h.children,y,u+1),m.append(y)),m.data("select2-data",h),i.append(m)},o(i,r,0)}},e.fn.select2.defaults,n),typeof n.id!="function"&&(s=n.id,n.id=function(e){return e[s]});if(e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.attr("data-select2-tags")}i?(n.query=this.bind(function(n){var i={results:[],more:!1},s=n.term,o,u,a;a=function(e,t){var r;e.is("option")?n.matcher(s,e.text(),e)&&t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:c(e.attr("disabled"),"disabled")}):e.is("optgroup")&&(r={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){a(t,r.children)}),r.children.length>0&&t.push(r))},o=r.children(),this.getPlaceholder()!==t&&o.length>0&&(u=o[0],e(u).text()===""&&(o=o.not(u))),o.each2(function(e,t){a(t,i.results)}),n.callback(i)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(o=n.element.data("ajax-url"),o&&o.length>0&&(n.ajax.url=o),n.query=N.call(n.element,n.ajax)):"data"in n?n.query=C(n.data):"tags"in n&&(n.query=k(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(e){return{id:e,text:e}}),n.initSelection===t&&(n.initSelection=function(t,r){var i=[];e(h(t.val(),n.separator)).each(function(){var t=this,r=this,s=n.tags;e.isFunction(s)&&(s=s()),e(s).each(function(){if(c(this.id,t))return r=this.text,!1}),i.push({id:t,text:r})}),r(i)})));if(typeof n.query!="function")throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var e=this.opts.element,t;e.bind("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),t=this.bind(function(){var e,t,n=this;e=this.opts.element.attr("disabled")!=="disabled",t=this.opts.element.attr("readonly")==="readonly",e=e&&!t,this.enabled!==e&&(e?this.enable():this.disable()),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(A(this.opts.containerCssClass)),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(A(this.opts.dropdownCssClass))}),e.bind("propertychange.select2 DOMAttrModified.select2",t),typeof WebKitMutationObserver!="undefined"&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(e){e.forEach(t)}),this.propertyObserver.observe(e.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){if(this.enabled)return;this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled")},disable:function(){if(!this.enabled)return;this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled")},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t=this.container.offset(),n=this.container.outerHeight(!1),r=this.container.outerWidth(!1),i=this.dropdown.outerHeight(!1),s=e(window).scrollLeft()+e(window).width(),o=e(window).scrollTop()+e(window).height(),u=t.top+n,a=t.left,f=u+i<=o,l=t.top-i>=this.body().scrollTop(),c=this.dropdown.outerWidth(!1),h=a+c<=s,p=this.dropdown.hasClass("select2-drop-above"),d,v,m;this.body().css("position")!=="static"&&(d=this.body().offset(),u-=d.top,a-=d.left),p?(v=!0,!l&&f&&(v=!1)):(v=!1,!f&&l&&(v=!0)),h||(a=t.left+r-c),v?(u=t.top-i,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),m=e.extend({top:u,left:a,width:r},A(this.opts.dropdownCss)),this.dropdown.css(m)},shouldOpen:function(){var t;return this.opened()?!1:(t=e.Event("opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var t=this.containerId,n="scroll."+t,r="resize."+t,i="orientationchange."+t,s;this.clearDropdownAlignmentPreference(),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.updateResults(!0),s=e("#select2-drop-mask"),s.length==0&&(s=e(document.createElement("div")),s.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),s.hide(),s.appendTo(this.body()),s.bind("mousedown touchstart",function(t){var n=e("#select2-drop"),r;n.length>0&&(r=n.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close())})),this.dropdown.prev()[0]!==s[0]&&this.dropdown.before(s),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s.css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight}),s.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var o=this;this.container.parents().add(window).each(function(){e(this).bind(r+" "+n+" "+i,function(t){e("#select2-drop-mask").css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight}),o.positionDropdown()})}),this.focusSearch()},close:function(){if(!this.opened())return;var t=this.containerId,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).unbind(n).unbind(r).unbind(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(e.Event("close"))},clearSearch:function(){},getMaximumSelectionSize:function(){return A(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t=this.results,n,r,i,s,o,u,a;r=this.highlight();if(r<0)return;if(r==0){t.scrollTop(0);return}n=this.findHighlightableChoices(),i=e(n[r]),s=i.offset().top+i.outerHeight(!0),r===n.length-1&&(a=t.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=t.offset().top+t.outerHeight(!0),s>o&&t.scrollTop(t.scrollTop()+(s-o)),u=i.offset().top-t.offset().top,u<0&&i.css("display")!="none"&&t.scrollTop(t.scrollTop()+u)},findHighlightableChoices:function(){var e=this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)");return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){var n=this.findHighlightableChoices(),r=this.highlight();while(r>-1&&r<n.length){r+=t;var i=e(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(t){var n=this.findHighlightableChoices(),r,i;if(arguments.length===0)return l(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1),t<0&&(t=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),r=e(n[t]),r.addClass("select2-highlighted"),this.ensureHighlightVisible(),i=r.data("select2-data"),i&&this.opts.element.trigger({type:"highlight",val:this.id(i),choice:i})},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else n.length==0&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n,r=-1,i=this.resultsPage+1,s=this,o=this.search.val(),u=this.context;if(t.length===0)return;n=t.offset().top-e.offset().top-e.height(),n<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:u,matcher:this.opts.matcher,callback:this.bind(function(n){if(!s.opened())return;s.opts.populateResults.call(this,e,n.results,{term:o,page:i,context:u}),n.more===!0?(t.detach().appendTo(e).text(s.opts.formatLoadMore(i+1)),window.setTimeout(function(){s.loadMoreIfNeeded()},10)):t.remove(),s.positionDropdown(),s.resultsPage=i,s.context=n.context})}))},tokenize:function(){},updateResults:function(n){function f(){i.scrollTop(0),r.removeClass("select2-active"),u.positionDropdown()}function l(e){i.html(e),f()}var r=this.search,i=this.results,s=this.opts,o,u=this,a;if(n!==!0&&(this.showSearchInput===!1||!this.opened()))return;r.addClass("select2-active");var h=this.getMaximumSelectionSize();if(h>=1){o=this.data();if(e.isArray(o)&&o.length>=h&&L(s.formatSelectionTooBig,"formatSelectionTooBig")){l("<li class='select2-selection-limit'>"+s.formatSelectionTooBig(h)+"</li>");return}}if(r.val().length<s.minimumInputLength){L(s.formatInputTooShort,"formatInputTooShort")?l("<li class='select2-no-results'>"+s.formatInputTooShort(r.val(),s.minimumInputLength)+"</li>"):l("");return}s.formatSearching()&&n===!0&&l("<li class='select2-searching'>"+s.formatSearching()+"</li>");if(s.maximumInputLength&&r.val().length>s.maximumInputLength){L(s.formatInputTooLong,"formatInputTooLong")?l("<li class='select2-no-results'>"+s.formatInputTooLong(r.val(),s.maximumInputLength)+"</li>"):l("");return}a=this.tokenize(),a!=t&&a!=null&&r.val(a),this.resultsPage=1,s.query({element:s.element,term:r.val(),page:this.resultsPage,context:null,matcher:s.matcher,callback:this.bind(function(o){var a;if(!this.opened())return;this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&r.val()!==""&&(a=this.opts.createSearchChoice.call(null,r.val(),o.results),a!==t&&a!==null&&u.id(a)!==t&&u.id(a)!==null&&e(o.results).filter(function(){return c(u.id(this),u.id(a))}).length===0&&o.results.unshift(a));if(o.results.length===0&&L(s.formatNoMatches,"formatNoMatches")){l("<li class='select2-no-results'>"+s.formatNoMatches(r.val())+"</li>");return}i.empty(),u.opts.populateResults.call(this,i,o.results,{term:r.val(),page:this.resultsPage,context:null}),o.more===!0&&L(s.formatLoadMore,"formatLoadMore")&&(i.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(s.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),f()})})},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){b(this.search)},selectHighlighted:function(e){var t=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r&&(this.highlight(t),this.onSelect(r,e))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function n(){var n,r,i,s,o;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){n=this.opts.element.attr("style");if(n!==t){r=n.split(";");for(s=0,o=r.length;s<o;s+=1){i=r[s].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(i!==null&&i.length>=1)return i[1]}}return this.opts.width==="resolve"?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var r=n.call(this);r!==null&&this.container.css("width",r)}}),i=_(r,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop' style='display:none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},disable:function(){if(!this.enabled)return;this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled")},enable:function(){if(this.enabled)return;this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled")},opening:function(){this.parent.opening.apply(this,arguments),this.focusser.attr("disabled","disabled"),this.opts.element.trigger(e.Event("open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),b(this.focusser)},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var e,t=this.container,r=this.dropdown,i=!1;this.showSearch(this.opts.minimumResultsForSearch>=0),this.selection=e=t.find(".select2-choice"),this.focusser=t.find(".select2-focusser"),this.search.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN){w(e);return}switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1),w(e);return;case n.TAB:case n.ENTER:this.selectHighlighted(),w(e);return;case n.ESC:this.cancel(e),w(e);return}})),this.focusser.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.ESC)return;if(this.opts.openOnEnter===!1&&e.which===n.ENTER){w(e);return}if(e.which==n.DOWN||e.which==n.UP||e.which==n.ENTER&&this.opts.openOnEnter){this.open(),w(e);return}if(e.which==n.DELETE||e.which==n.BACKSPACE){this.opts.allowClear&&this.clear(),w(e);return}})),d(this.focusser),this.focusser.bind("keyup-change input",this.bind(function(e){if(this.opened())return;this.open(),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.focusser.val(""),w(e)})),e.delegate("abbr","mousedown",this.bind(function(e){if(!this.enabled)return;this.clear(),E(e),this.close(),this.selection.focus()})),e.bind("mousedown",this.bind(function(e){i=!0,this.opened()?this.close():this.enabled&&this.open(),w(e),i=!1})),r.bind("mousedown",this.bind(function(){this.search.focus()})),e.bind("focus",this.bind(function(e){w(e)})),this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")})),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.setPlaceholder()},clear:function(){var e=this.selection.data("select2-data");this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),this.opts.element.trigger({type:"removed",val:this.id(e),choice:e}),this.triggerChange({removed:e})},initSelection:function(){var e;if(this.opts.element.val()===""&&this.opts.element.text()==="")this.close(),this.setPlaceholder();else{var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(t,n){var r=t.find(":selected");e.isFunction(n)&&n({id:r.attr("value"),text:r.text(),element:r})}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=n.val();t.query({matcher:function(e,n,r){return c(i,t.id(r))},callback:e.isFunction(r)?function(e){r(e.results.length?e.results[0]:null)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.select.find("option").first().text()!==""?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.opts.element.val()===""&&e!==t){if(this.select&&this.select.find("option:first").text()!=="")return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(e,t){var n=0,r=this,i=!0;this.findHighlightableChoices().each2(function(e,t){if(c(r.id(t.data("select2-data")),r.opts.element.val()))return n=e,!1}),this.highlight(n);if(t===!0){var s=this.opts.minimumResultsForSearch;i=s<0?!1:O(e.results)>=s,this.showSearch(i)}},showSearch:function(t){this.showSearchInput=t,this.dropdown.find(".select2-search")[t?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[t?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(e,t){var n=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.close(),(!t||!t.noFocus)&&this.selection.focus(),c(n,this.id(e))||this.triggerChange()},updateSelection:function(e){var n=this.selection.find("span"),r;this.selection.data("select2-data",e),n.empty(),r=this.opts.formatSelection(e,n),r!==t&&n.append(this.opts.escapeMarkup(r)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,n=!1,r=null,i=this;if(arguments.length===0)return this.opts.element.val();e=arguments[0],arguments.length>1&&(n=arguments[1]);if(this.select)this.select.val(e).find(":selected").each2(function(e,t){return r={id:t.attr("value"),text:t.text()},!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange();else{if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");if(!e&&e!==0){this.clear(),n&&this.triggerChange();return}this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange()})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n;if(arguments.length===0)return n=this.selection.data("select2-data"),n==t&&(n=null),n;!e||e===""?this.clear():(this.opts.element.val(e?this.id(e):""),this.updateSelection(e))}}),s=_(r,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var n=[];e.find(":selected").each2(function(e,t){n.push({id:t.attr("value"),text:t.text(),element:t[0]})}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=h(n.val(),t.separator);t.query({matcher:function(n,r,s){return e.grep(i,function(e){return c(e,t.id(s))}).length},callback:e.isFunction(r)?function(e){r(e.results)}:e.noop})}),t},initContainer:function(){var t=".select2-choices",r;this.searchContainer=this.container.find(".select2-search-field"),this.selection=r=this.container.find(t),this.search.bind("input paste",this.bind(function(){if(!this.enabled)return;this.opened()||this.open()})),this.search.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which===n.BACKSPACE&&this.search.val()===""){this.close();var t,i=r.find(".select2-search-choice-focus");if(i.length>0){this.unselect(i.first()),this.search.width(10),w(e);return}t=r.find(".select2-search-choice:not(.select2-locked)"),t.length>0&&t.last().addClass("select2-search-choice-focus")}else r.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1),w(e);return;case n.ENTER:case n.TAB:this.selectHighlighted(),w(e);return;case n.ESC:this.cancel(e),w(e);return}if(e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.BACKSPACE||e.which===n.ESC)return;if(e.which===n.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN)&&w(e)})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.opened()||this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(t,"mousedown",this.bind(function(t){if(!this.enabled)return;if(e(t.target).closest(".select2-search-choice").length>0)return;this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault()})),this.container.delegate(t,"focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder()})),this.initContainerWidth(),this.clearSearch()},enable:function(){if(this.enabled)return;this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled")},disable:function(){if(!this.enabled)return;this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0)},initSelection:function(){var e;this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||this.opts.element.val()!==""){var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.resizeSearch()):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch(),this.opts.element.trigger(e.Event("open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus(),this.opts.element.triggerHandler("focus")},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],i=this;e(t).each(function(){l(i.id(this),n)<0&&(n.push(i.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){i.addSelectedChoice(this)}),i.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),e!=null&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),(!t||!t.noFocus)&&this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r=!n.locked,i=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),o=r?i:s,u=this.id(n),a=this.getVal(),f;f=this.opts.formatSelection(n,o.find("div")),f!=t&&o.find("div").replaceWith("<div>"+this.opts.escapeMarkup(f)+"</div>"),r&&o.find(".select2-search-choice-close").bind("mousedown",w).bind("click dblclick",this.bind(function(t){if(!this.enabled)return;e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),w(t)})).bind("focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active")})),o.data("select2-data",n),o.insertBefore(this.searchContainer),a.push(u),this.setVal(a)},unselect:function(e){var t=this.getVal(),n,r;e=e.closest(".select2-search-choice");if(e.length===0)throw"Invalid argument: "+e+". Must be .select2-search-choice";n=e.data("select2-data");if(!n)return;r=l(this.id(n),t),r>=0&&(t.splice(r,1),this.setVal(t),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(n),choice:n}),this.triggerChange({removed:n})},postprocessResults:function(){var e=this.getVal(),t=this.results.find(".select2-result"),n=this.results.find(".select2-result-with-children"),r=this;t.each2(function(t,n){var i=r.id(n.data("select2-data"));l(i,e)>=0&&(n.addClass("select2-selected"),n.find(".select2-result-selectable").addClass("select2-selected"))}),n.each2(function(e,t){!t.is(".select2-result-selectable")&&t.find(".select2-result-selectable:not(.select2-selected)").length===0&&t.addClass("select2-selected")}),this.highlight()==-1&&r.highlight(0)},resizeSearch:function(){var e,t,n,r,i,s=p(this.search);e=S(this.search)+10,t=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(t-r)-s,i<e&&(i=n-s),i<40&&(i=n-s),i<=0&&(i=e),this.search.width(i)},getVal:function(){var e;return this.select?(e=this.select.val(),e===null?[]:e):(e=this.opts.element.val(),h(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){l(this,n)<0&&n.push(this)}),this.opts.element.val(n.length===0?"":n.join(this.opts.separator)))},val:function(){var n,r=!1,i=[],s=this;if(arguments.length===0)return this.getVal();n=arguments[0],arguments.length>1&&(r=arguments[1]);if(!n&&n!==0){this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),r&&this.triggerChange();return}this.setVal(n);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange();else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e(t).map(s.id);s.setVal(n),s.updateSelection(t),s.clearSearch(),r&&s.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t){var n=this,r;if(arguments.length===0)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();t||(t=[]),r=e.map(t,function(e){return n.opts.id(e)}),this.setVal(r),this.updateSelection(t),this.clearSearch()}}),e.fn.select2=function(){var n=Array.prototype.slice.call(arguments,0),r,o,u,a,f=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(n.length===0||typeof n[0]=="object")r=n.length===0?{}:e.extend({},n[0]),r.element=e(this),r.element.get(0).tagName.toLowerCase()==="select"?a=r.element.attr("multiple"):(a=r.multiple||!1,"tags"in r&&(r.multiple=a=!0)),o=a?new s:new i,o.init(r);else{if(typeof n[0]!="string")throw"Invalid arguments to select2 plugin: "+n;if(l(n[0],f)<0)throw"Unknown method: "+n[0];u=t,o=e(this).data("select2");if(o===t)return;n[0]==="container"?u=o.container:u=o[n[0]].apply(o,n.slice(1));if(u!==t)return!1}}),u===t?this:u},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return T(e.text,n.term,i,r),i.join("")},formatSelection:function(e,n){return e?e.text:t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(n==1?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please enter "+n+" less character"+(n==1?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(e==1?"":"s")},formatLoadMore:function(e){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return t.toUpperCase().indexOf(e.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(e).replace(/[&<>"'/\\]/g,function(e){return t[e[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null}},window.Select2={query:{ajax:N,local:C,tags:k},util:{debounce:m,markMatch:T},"class":{"abstract":r,single:i,multi:s}}}(jQuery),define("select2/select2",["jquery"],function(e){return function(){var t,n;return t||e.Select2}}(this)),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("contrib/select2-3.3.1/select2.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/select2.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/basedropdownviewmixin",["require","exports","module","underscore","jquery","select2/select2","util/console","css!contrib/select2-3.3.1/select2.css","css!../css/select2.css"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("select2/select2"),o=e("util/console");e("css!contrib/select2-3.3.1/select2.css"),e("css!../css/select2.css");var u={options:{managerid:null,valueField:"",labelField:"",choices:[],selectFirstChoice:!1,"default":undefined,width:200,minimumResultsForSearch:8,showClearButton:!0,disabled:!1,value:undefined},events:{"change select":"onDomChange","selected select":"onDomChange"},_setSelect2Value:function(e){var t=this.valueIsList?e:[e],n=[];r.each(this._vizData,function(e){r.contains(t,e.value)&&n.push({id:e.value,text:e.label})}),this.valueIsList?this._viz.select2("data",n):!this.valueIsList&&n.length>0?this._viz.select2("data",n[0]):this._viz.select2("val",undefined)},updateDomVal:function(){if(this.$(".select2-container.placeholder").length==0){var e=this.settings.get("value");this.$("option:selected").prop("selected",!1),this._viz.val(this.settings.get("value")),this._setSelect2Value(e)}},_domVal:function(){var e=undefined,t=this._viz.select2("data");return this.valueIsList?e=r.pluck(t,"id"):e=t===null?undefined:t.id,e},onDomChange:function(e){var t=this._domVal();if(this.valueIsList&&e.type==="selected")return;if(!this.valueIsList&&e.type==="change"&&t!==undefined)return;this.val(t)},_onDisable:function(e){if(!this._viz)return;this._disable(this.settings.get("disabled"))},_disable:function(e){this._viz.prop("disabled",e)},_select2:function(e,t){var n=r.extend({minimumResultsForSearch:parseInt(this.settings.get("minimumResultsForSearch"),10),allowClear:this.settings.get("showClearButton"),placeholder:"",formatResult:function(e,t){return t.attr("title",e.text),r.escape(e.text)},formatSelection:function(e,t){return t.attr("title",e.text),e.text}},t||{});e.select2("close"),e.select2(n)},createView:function(){var e=i(this.selectRoot);return this.$el.html(e),e.width(this.settings.get("width")),this._select2(e),e},updateView:function(e,t){e.empty(),this._vizData=t;if(t.length===0)return this._select2(e,{placeholder:""}),this;var n=r.any(t,function(e){return e.value===""});e.append(i("<option/>").attr("value",n?"__placeholder":undefined));var s=this.valueIsList?this.settings.get("value"):[this.settings.get("value")];return r.each(t,function(t){var n=i("<option/>").text(t.label||"").attr("value",t.value);r.contains(s,t.value)&&n.attr("selected","selected"),e.append(n)}),this.updateDomVal(),this}};return u}),define("splunkjs/mvc/dropdownview",["require","exports","module","underscore","./basechoiceview","./basedropdownviewmixin"],function(e,t,n){var r=e("underscore"),i=e("./basechoiceview"),s=e("./basedropdownviewmixin"),o=i.extend(r.extend({},s,{moduleId:n.id,className:"splunk-dropdown splunk-choice-input",selectRoot:"<select />",valueIsList:!1,initialize:function(){this.options=r.extend({},i.prototype.options,this.options),i.prototype.initialize.apply(this,arguments),this.settings.on("change:width",r.debounce(this.render,0),this)}}));return o}),define("splunkjs/mvc/simpleform/input/dropdown",["require","underscore","jquery","./base","../../dropdownview"],function(e){var t=e("underscore"),n=e("jquery"),r=e("./base"),i=e("../../dropdownview"),s=r.extend({initialize:function(){var e=t.defaults({el:n('<div class="splunk-view"></div>').appendTo(this.el),id:t.uniqueId(this.id+"-input")},this.options);this.select=new i(e),this.select.on("change",this.handleChange,this),this.options.settings=this.select.settings,r.prototype.initialize.call(this,{inputId:e.id})},getValue:function(){return this.select.val()},setValue:function(e){this.select.val(e)},render:function(){return this.renderLabel(),this.select.render(),this},_getWrappedView:function(){return this.select}});return s}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/radio.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/radiogroupview",["require","exports","module","underscore","jquery","./basechoiceview","css!../css/radio.css"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("./basechoiceview");e("css!../css/radio.css");var o=s.extend({moduleId:n.id,className:"splunk-radiogroup splunk-choice-input",options:{valueField:"",labelField:"","default":undefined,choices:[],selectFirstChoice:!1,disabled:!1,value:undefined},events:{"change input:radio":"onDomChange"},initialize:function(){this.options=r.extend({},s.prototype.options,this.options),s.prototype.initialize.apply(this,arguments)},_domVal:function(){return this.$("input:radio:checked").val()},onDomChange:function(){this.val(this._domVal())},updateDomVal:function(e){this.$("input:radio").prop("checked",!1),this.$('input:radio[value="'+e+'"]').prop("checked","checked")},createView:function(){return this.$el.empty(),i("<fieldset class='splunk-radiogroup-choices'/>").appendTo(this.el)},updateView:function(e,t){e.empty();if(!t||t.length===0)t=[{value:"",label:" "}];var n=this,s=this.settings.get("value"),o=this.id;return r.each(t||[],function(t,n){var r=o+String(n),u=i('<input type="radio" />').attr({name:o,value:t.value,id:r});t.value==s&&u.prop({checked:"checked"});var a=i('<div class="choice" />').append(u).append(i("<label />").attr("for",r).text(t.label));e.append(a)}),this}});return o}),define("splunkjs/mvc/simpleform/input/radiogroup",["require","underscore","jquery","./base","../../radiogroupview"],function(e){var t=e("underscore"),n=e("jquery"),r=e("./base"),i=e("../../radiogroupview"),s=r.extend({events:{"change input":"handleChange"},initialize:function(){var e=t.defaults({el:n('<div class="splunk-view"></div>').appendTo(this.el),id:t.uniqueId(this.id+"-input")},this.options);this.radiogroup=new i(e),this.options.settings=this.radiogroup.settings,r.prototype.initialize.call(this,{inputId:e.id})},getValue:function(){return this.radiogroup.val()},setValue:function(e){this.radiogroup.settings.set("default",e),this.radiogroup.val(e)},render:function(){return this.renderLabel(),this.radiogroup.render(),this},_getWrappedView:function(){return this.radiogroup}});return s}),define("splunkjs/mvc/simpleform/input",["require","./input/submit","./input/text","./input/dropdown","./input/radiogroup","./input/timerange","./input/submit","./input/text","./input/dropdown","./input/radiogroup","./input/timerange"],function(e){return{SubmitButton:e("./input/submit"),TextInput:e("./input/text"),DropdownInput:e("./input/dropdown"),RadioGroupInput:e("./input/radiogroup"),TimeRangeInput:e("./input/timerange"),Submit:e("./input/submit"),Text:e("./input/text"),Dropdown:e("./input/dropdown"),Radio:e("./input/radiogroup"),TimeRangePicker:e("./input/timerange")}}),define("splunkjs/mvc/simplexml",["require","./simplexml/controller","./simplexml/dashboard","./simplexml/element/table","./simplexml/element/chart","./simplexml/element/event","./simplexml/element/single","./simplexml/element/map","./simplexml/element/list","./simplexml/element/html","./simplexml/urltokenmodel","./searchmanager","./savedsearchmanager","./postprocessmanager","./drilldown","./headerview","./footerview","./simpleform/input","./simpleform/input/submit","./simpleform/input/text","./simpleform/input/dropdown","./simpleform/input/radiogroup","./simpleform/input/timerange","./utils"],function(e){var t=e("./simplexml/controller");return e("./simplexml/dashboard"),e("./simplexml/element/table"),e("./simplexml/element/chart"),e("./simplexml/element/event"),e("./simplexml/element/single"),e("./simplexml/element/map"),e("./simplexml/element/list"),e("./simplexml/element/html"),e("./simplexml/urltokenmodel"),e("./searchmanager"),e("./savedsearchmanager"),e("./postprocessmanager"),e("./drilldown"),e("./headerview"),e("./footerview"),e("./simpleform/input"),e("./simpleform/input/submit"),e("./simpleform/input/text"),e("./simpleform/input/dropdown"),e("./simpleform/input/radiogroup"),e("./simpleform/input/timerange"),e("./utils"),t}),define("pm/contrib/d3/d3.amd",[],function(){var e=function(){function e(e){return null!=e&&!isNaN(e)}function t(e){return e.length}function n(e){for(var t=1;e*t%1;)t*=10;return t}function r(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function i(){}function s(){}function o(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function u(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,r=cu.length;r>n;++n){var i=cu[n]+t;if(i in e)return i}}function a(){}function f(){}function l(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new i;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function c(){Jo.event.preventDefault()}function h(){for(var e,t=Jo.event;e=t.sourceEvent;)t=e;return t}function p(e){for(var t=new f,n=0,r=arguments.length;++n<r;)t[arguments[n]]=l(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=Jo.event;i.target=e,Jo.event=i,t[i.type].apply(n,r)}finally{Jo.event=s}}},t}function d(e){return pu(e,yu),e}function v(e){return"function"==typeof e?e:function(){return du(e,this)}}function m(e){return"function"==typeof e?e:function(){return vu(e,this)}}function g(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=Jo.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function y(e){return e.trim().replace(/\s+/g," ")}function b(e){return new RegExp("(?:^|\\s+)"+Jo.requote(e)+"(?:\\s+|$)","g")}function w(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=e.trim().split(/\s+/).map(E);var i=e.length;return"function"==typeof t?r:n}function E(e){var t=b(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",y(i+" "+e))):n.setAttribute("class",y(i.replace(t," ")))}}function S(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function x(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function T(e){return"function"==typeof e?e:(e=Jo.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function N(e){return{__data__:e}}function C(e){return function(){return gu(this,e)}}function k(e){return arguments.length||(e=Jo.ascending),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function L(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,s=e[n],o=0,u=s.length;u>o;o++)(i=s[o])&&t(i,o,n);return e}function A(e){return pu(e,wu),e}function O(e){var t,n;return function(r,i,s){var o,u=e[s].update,a=u.length;for(s!=n&&(n=s,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<a;);return o}}function M(){var e=this.__transition__;e&&++e.active}function _(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=f(t,Qo(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+Jo.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),f=D;u>0&&(e=e.substring(0,u));var l=Su.get(e);return l&&(e=l,f=P),u?t?i:r:t?a:s}function D(e,t){return function(n){var r=Jo.event;Jo.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{Jo.event=r}}}function P(e,t){var n=D(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function H(){var e=".dragsuppress-"+ ++Tu,t="click"+e,n=Jo.select(Zo).on("touchmove"+e,c).on("dragstart"+e,c).on("selectstart"+e,c);if(xu){var r=Yo.style,i=r[xu];r[xu]="none"}return function(s){function o(){n.on(t,null)}n.on(e,null),xu&&(r[xu]=i),s&&(n.on(t,function(){c(),o()},!0),setTimeout(o,0))}}function B(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Nu&&(Zo.scrollX||Zo.scrollY)){n=Jo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();Nu=!i.f&&!i.e,n.remove()}return Nu?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function j(e){return e>0?1:0>e?-1:0}function F(e){return e>1?0:-1>e?Cu:Math.acos(e)}function I(e){return e>1?Lu:-1>e?-Lu:Math.asin(e)}function q(e){return((e=Math.exp(e))-1/e)/2}function R(e){return((e=Math.exp(e))+1/e)/2}function U(e){return((e=Math.exp(2*e))-1)/(e+1)}function z(e){return(e=Math.sin(e/2))*e}function W(){}function X(e,t,n){return new V(e,t,n)}function V(e,t,n){this.h=e,this.s=t,this.l=n}function $(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?s+(o-s)*e/60:180>e?o:240>e?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(255*r(e))}var s,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,s=2*n-o,ot(i(e+120),i(e),i(e-120))}function J(e,t,n){return new K(e,t,n)}function K(e,t,n){this.h=e,this.c=t,this.l=n}function Q(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),G(n,Math.cos(e*=Mu)*t,Math.sin(e)*t)}function G(e,t,n){return new Y(e,t,n)}function Y(e,t,n){this.l=e,this.a=t,this.b=n}function Z(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=tt(i)*Uu,r=tt(r)*zu,s=tt(s)*Wu,ot(rt(3.2404542*i-1.5371385*r-.4985314*s),rt(-0.969266*i+1.8760108*r+.041556*s),rt(.0556434*i-.2040259*r+1.0572252*s))}function et(e,t,n){return e>0?J(Math.atan2(n,t)*_u,Math.sqrt(t*t+n*n),e):J(0/0,0/0,e)}function tt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function nt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function rt(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function it(e){return ot(e>>16,255&e>>8,255&e)}function st(e){return it(e)+""}function ot(e,t,n){return new ut(e,t,n)}function ut(e,t,n){this.r=e,this.g=t,this.b=n}function at(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ft(e,t,n){var r,i,s,o=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(pt(i[0]),pt(i[1]),pt(i[2]))}return(s=$u.get(e))?t(s.r,s.g,s.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(o=e.charAt(1),o+=o,u=e.charAt(2),u+=u,a=e.charAt(3),a+=a):7===e.length&&(o=e.substring(1,3),u=e.substring(3,5),a=e.substring(5,7)),o=parseInt(o,16),u=parseInt(u,16),a=parseInt(a,16)),t(o,u,a))}function lt(e,t,n){var r,i,s=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-s,a=(o+s)/2;return u?(i=.5>a?u/(o+s):u/(2-o-s),r=e==o?(t-n)/u+(n>t?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=0/0,i=a>0&&1>a?0:r),X(r,i,a)}function ct(e,t,n){e=ht(e),t=ht(t),n=ht(n);var r=nt((.4124564*e+.3575761*t+.1804375*n)/Uu),i=nt((.2126729*e+.7151522*t+.072175*n)/zu),s=nt((.0193339*e+.119192*t+.9503041*n)/Wu);return G(116*i-16,500*(r-i),200*(i-s))}function ht(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function dt(e){return"function"==typeof e?e:function(){return e}}function vt(e){return e}function mt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),gt(t,n,e,r)}}function gt(e,t,n,r){function i(){var e,t=a.status;if(!t&&a.responseText||t>=200&&300>t||304===t){try{e=n.call(s,a)}catch(r){return o.error.call(s,r),void 0}o.load.call(s,e)}else o.error.call(s,a)}var s={},o=Jo.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,f=null;return!Zo.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(e){var t=Jo.event;Jo.event=e;try{o.progress.call(s,a)}finally{Jo.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",s):t},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return n=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(Qo(arguments)))}}),s.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),a.setRequestHeader)for(var l in u)a.setRequestHeader(l,u[l]);return null!=t&&a.overrideMimeType&&a.overrideMimeType(t),null!=f&&(a.responseType=f),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(s,a),a.send(null==r?null:r),s},s.abort=function(){return a.abort(),s},Jo.rebind(s,o,"on"),null==r?s:s.get(yt(r))}function yt(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function bt(){var e=wt(),t=Et()-e;t>24?(isFinite(t)&&(clearTimeout(Gu),Gu=setTimeout(bt,t)),Qu=0):(Qu=1,Zu(bt))}function wt(){var e=Date.now();for(Yu=Ju;Yu;)e>=Yu.t&&(Yu.f=Yu.c(e-Yu.t)),Yu=Yu.n;return e}function Et(){for(var e,t=Ju,n=1/0;t;)t.f?t=e?e.n=t.n:Ju=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Ku=e,n}function St(e,t){var n=Math.pow(10,3*au(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function xt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Tt(e){return e+""}function Nt(){}function Ct(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function kt(e,t){e&&ca.hasOwnProperty(e.type)&&ca[e.type](e,t)}function Lt(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function At(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Lt(e[n],t,1);t.polygonEnd()}function Ot(){function e(e,t){e*=Mu,t=t*Mu/2+Cu/4;var n=e-r,o=Math.cos(t),u=Math.sin(t),a=s*u,f=i*o+a*Math.cos(n),l=a*Math.sin(n);pa.add(Math.atan2(l,f)),r=e,i=o,s=u}var t,n,r,i,s;da.point=function(o,u){da.point=e,r=(t=o)*Mu,i=Math.cos(u=(n=u)*Mu/2+Cu/4),s=Math.sin(u)},da.lineEnd=function(){e(t,n)}}function Mt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function _t(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Dt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Pt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ht(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Bt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function jt(e){return[Math.atan2(e[1],e[0]),I(e[2])]}function Ft(e,t){return au(e[0]-t[0])<Au&&au(e[1]-t[1])<Au}function It(e,t){e*=Mu;var n=Math.cos(t*=Mu);qt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function qt(e,t,n){++va,ga+=(e-ga)/va,ya+=(t-ya)/va,ba+=(n-ba)/va}function Rt(){function e(e,i){e*=Mu;var s=Math.cos(i*=Mu),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=n*a-r*u)*f+(f=r*o-t*a)*f+(f=t*u-n*o)*f),t*o+n*u+r*a);ma+=f,wa+=f*(t+(t=o)),Ea+=f*(n+(n=u)),Sa+=f*(r+(r=a)),qt(t,n,r)}var t,n,r;Ca.point=function(i,s){i*=Mu;var o=Math.cos(s*=Mu);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(s),Ca.point=e,qt(t,n,r)}}function Ut(){Ca.point=It}function zt(){function e(e,t){e*=Mu;var n=Math.cos(t*=Mu),o=n*Math.cos(e),u=n*Math.sin(e),a=Math.sin(t),f=i*a-s*u,l=s*o-r*a,c=r*u-i*o,h=Math.sqrt(f*f+l*l+c*c),p=r*o+i*u+s*a,d=h&&-F(p)/h,v=Math.atan2(h,p);xa+=d*f,Ta+=d*l,Na+=d*c,ma+=v,wa+=v*(r+(r=o)),Ea+=v*(i+(i=u)),Sa+=v*(s+(s=a)),qt(r,i,s)}var t,n,r,i,s;Ca.point=function(o,u){t=o,n=u,Ca.point=e,o*=Mu;var a=Math.cos(u*=Mu);r=a*Math.cos(o),i=a*Math.sin(o),s=Math.sin(u),qt(r,i,s)},Ca.lineEnd=function(){e(t,n),Ca.lineEnd=Ut,Ca.point=It}}function Wt(){return!0}function Xt(e,t,n,r,i){var s=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Ft(n,r)){i.lineStart();for(var u=0;t>u;++u)i.point((n=e[u])[0],n[1]);return i.lineEnd(),void 0}var a=new $t(n,e,null,!0),f=new $t(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new $t(r,e,null,!1),f=new $t(r,null,a,!0),a.o=f,s.push(a),o.push(f)}}),o.sort(t),Vt(s),Vt(o),s.length){for(var u=0,a=n,f=o.length;f>u;++u)o[u].e=a=!a;for(var l,c,h=s[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,f=l.length;f>u;++u)i.point((c=l[u])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Vt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function $t(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Jt(e,t,n,r){return function(i,s){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function u(e,t){var n=i(e,t);m.point(n[0],n[1])}function a(){y.point=u,m.lineStart()}function f(){y.point=o,m.lineEnd()}function l(e,t){v.push([e,t]);var n=i(e,t);w.point(n[0],n[1])}function c(){w.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),r=n.length;if(v.pop(),d.push(v),v=null,r){if(1&t){e=n[0];var i,r=e.length-1,o=-1;for(s.lineStart();++o<r;)s.point((i=e[o])[0],i[1]);return s.lineEnd(),void 0}r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Kt))}}var p,d,v,m=t(s),g=i.invert(r[0],r[1]),y={point:o,lineStart:a,lineEnd:f,polygonStart:function(){y.point=l,y.lineStart=c,y.lineEnd=h,p=[],d=[],s.polygonStart()},polygonEnd:function(){y.point=o,y.lineStart=a,y.lineEnd=f,p=Jo.merge(p);var e=Yt(g,d);p.length?Xt(p,Gt,e,n,s):e&&(s.lineStart(),n(null,null,1,s),s.lineEnd()),s.polygonEnd(),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}},b=Qt(),w=t(b);return y}}function Kt(e){return e.length>1}function Qt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:a,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Gt(e,t){return((e=e.x)[0]<0?e[1]-Lu-Au:Lu-e[1])-((t=t.x)[0]<0?t[1]-Lu-Au:Lu-t[1])}function Yt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;pa.reset();for(var u=0,a=t.length;a>u;++u){var f=t[u],l=f.length;if(l)for(var c=f[0],h=c[0],p=c[1]/2+Cu/4,d=Math.sin(p),v=Math.cos(p),m=1;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+Cu/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=au(E)>Cu,x=d*b;if(pa.add(Math.atan2(x*Math.sin(E),v*w+x*Math.cos(E))),s+=S?E+(E>=0?ku:-ku):E,S^h>=n^g>=n){var T=Dt(Mt(c),Mt(e));Bt(T);var N=Dt(i,T);Bt(N);var C=(S^E>=0?-1:1)*I(N[2]);(r>C||r===C&&(T[0]||T[1]))&&(o+=S^E>=0?1:-1)}if(!(m++))break;h=g,d=b,v=w,c=e}}return(-Au>s||Au>s&&0>pa)^1&o}function Zt(e){var t,n=0/0,r=0/0,i=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var u=s>0?Cu:-Cu,a=au(s-n);au(a-Cu)<Au?(e.point(n,r=(r+o)/2>0?Lu:-Lu),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(s,r),t=0):i!==u&&a>=Cu&&(au(n-i)<Au&&(n-=i*Au),au(s-u)<Au&&(s-=u*Au),r=en(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=s,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function en(e,t,n,r){var i,s,o=Math.sin(e-n);return au(o)>Au?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function tn(e,t,n,r){var i;if(null==e)i=n*Lu,r.point(-Cu,i),r.point(0,i),r.point(Cu,i),r.point(Cu,0),r.point(Cu,-i),r.point(0,-i),r.point(-Cu,-i),r.point(-Cu,0),r.point(-Cu,i);else if(au(e[0]-t[0])>Au){var s=e[0]<t[0]?Cu:-Cu;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function nn(e){function t(e,t){return Math.cos(e)*Math.cos(t)>s}function n(e){var n,s,a,f,l;return{lineStart:function(){f=a=!1,l=1},point:function(c,h){var p,d=[c,h],v=t(c,h),m=o?v?0:i(c,h):v?i(c+(0>c?Cu:-Cu),h):0;if(!n&&(f=a=v)&&e.lineStart(),v!==a&&(p=r(n,d),(Ft(n,p)||Ft(d,p))&&(d[0]+=Au,d[1]+=Au,v=t(d[0],d[1]))),v!==a)l=0,v?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(u&&n&&o^v){var g;m&s||!(g=r(d,n,!0))||(l=0,o?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||n&&Ft(n,d)||e.point(d[0],d[1]),n=d,a=v,s=m},lineEnd:function(){a&&e.lineEnd(),n=null},clean:function(){return l|(f&&a)<<1}}}function r(e,t,n){var r=Mt(e),i=Mt(t),o=[1,0,0],u=Dt(r,i),a=_t(u,u),f=u[0],l=a-f*f;if(!l)return!n&&e;var c=s*a/l,h=-s*f/l,p=Dt(o,u),d=Ht(o,c),v=Ht(u,h);Pt(d,v);var m=p,g=_t(d,m),y=_t(m,m),b=g*g-y*(_t(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),E=Ht(m,(-g-w)/y);if(Pt(E,d),E=jt(E),!n)return E;var S,x=e[0],T=t[0],N=e[1],C=t[1];x>T&&(S=x,x=T,T=S);var k=T-x,L=au(k-Cu)<Au,A=L||Au>k;if(!L&&N>C&&(S=N,N=C,C=S),A?L?N+C>0^E[1]<(au(E[0]-x)<Au?N:C):N<=E[1]&&E[1]<=C:k>Cu^(x<=E[0]&&E[0]<=T)){var O=Ht(m,(-g+w)/y);return Pt(O,d),[E,jt(O)]}}}function i(t,n){var r=o?e:Cu-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var s=Math.cos(e),o=s>0,u=au(s)>Au,a=Mn(e,6*Mu);return Jt(t,n,a,o?[0,-e]:[-Cu,e-Cu])}function rn(e,t,n,r){return function(i){var s,o=i.a,u=i.b,a=o.x,f=o.y,l=u.x,c=u.y,h=0,p=1,d=l-a,v=c-f;if(s=e-a,d||!(s>0)){if(s/=d,0>d){if(h>s)return;p>s&&(p=s)}else if(d>0){if(s>p)return;s>h&&(h=s)}if(s=n-a,d||!(0>s)){if(s/=d,0>d){if(s>p)return;s>h&&(h=s)}else if(d>0){if(h>s)return;p>s&&(p=s)}if(s=t-f,v||!(s>0)){if(s/=v,0>v){if(h>s)return;p>s&&(p=s)}else if(v>0){if(s>p)return;s>h&&(h=s)}if(s=r-f,v||!(0>s)){if(s/=v,0>v){if(s>p)return;s>h&&(h=s)}else if(v>0){if(h>s)return;p>s&&(p=s)}return h>0&&(i.a={x:a+h*d,y:f+h*v}),1>p&&(i.b={x:a+p*d,y:f+p*v}),i}}}}}}function sn(e,t,n,r){function i(r,i){return au(r[0]-e)<Au?i>0?0:3:au(r[0]-n)<Au?i>0?2:1:au(r[1]-t)<Au?i>0?1:0:i>0?3:2}function s(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function a(e){for(var t=0,n=g.length,r=e[1],i=0;n>i;++i)for(var s,o=1,u=g[i],a=u.length,l=u[0];a>o;++o)s=u[o],l[1]<=r?s[1]>r&&f(l,s,e)>0&&++t:s[1]<=r&&f(l,s,e)<0&&--t,l=s;return 0!==t}function f(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function l(s,u,a,f){var l=0,c=0;if(null==s||(l=i(s,a))!==(c=i(u,a))||o(s,u)<0^a>0){do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+a+4)%4)!==c)}else f.point(u[0],u[1])}function c(i,s){return i>=e&&n>=i&&s>=t&&r>=s}function h(e,t){c(e,t)&&u.point(e,t)}function p(){O.point=v,g&&g.push(y=[]),N=!0,T=!1,S=x=0/0}function d(){m&&(v(b,w),E&&T&&L.rejoin(),m.push(L.buffer())),O.point=h,T&&u.lineEnd()}function v(e,t){e=Math.max(-La,Math.min(La,e)),t=Math.max(-La,Math.min(La,t));var n=c(e,t);if(g&&y.push([e,t]),N)b=e,w=t,E=n,N=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&T)u.point(e,t);else{var r={a:{x:S,y:x},b:{x:e,y:t}};A(r)?(T||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),C=!1):n&&(u.lineStart(),u.point(e,t),C=!1)}S=e,x=t,T=n}var m,g,y,b,w,E,S,x,T,N,C,k=u,L=Qt(),A=rn(e,t,n,r),O={point:h,lineStart:p,lineEnd:d,polygonStart:function(){u=L,m=[],g=[],C=!0},polygonEnd:function(){u=k,m=Jo.merge(m);var t=a([e,r]),n=C&&t,i=m.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),l(null,null,1,u),u.lineEnd()),i&&Xt(m,s,t,l,u),u.polygonEnd()),m=g=y=null}};return O}}function on(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function un(e){var t=0,n=Cu/3,r=xn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Cu/180,n=e[1]*Cu/180):[180*(t/Cu),180*(n/Cu)]},i}function an(e,t){function n(e,t){var n=Math.sqrt(s-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,s=1+r*(2*i-r),o=Math.sqrt(s)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,I((s-(e*e+n*n)*i*i)/(2*i))]},n}function fn(){function e(e,t){Oa+=i*e-r*t,r=e,i=t}var t,n,r,i;Ha.point=function(s,o){Ha.point=e,t=r=s,n=i=o},Ha.lineEnd=function(){e(t,n)}}function ln(e,t){Ma>e&&(Ma=e),e>Da&&(Da=e),_a>t&&(_a=t),t>Pa&&(Pa=t)}function cn(){function e(e,t){o.push("M",e,",",t,s)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var s=hn(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return s=hn(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function hn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function pn(e,t){ga+=e,ya+=t,++ba}function dn(){function e(e,r){var i=e-t,s=r-n,o=Math.sqrt(i*i+s*s);wa+=o*(t+e)/2,Ea+=o*(n+r)/2,Sa+=o,pn(t=e,n=r)}var t,n;ja.point=function(r,i){ja.point=e,pn(t=r,n=i)}}function vn(){ja.point=pn}function mn(){function e(e,t){var n=e-r,s=t-i,o=Math.sqrt(n*n+s*s);wa+=o*(r+e)/2,Ea+=o*(i+t)/2,Sa+=o,o=i*e-r*t,xa+=o*(r+e),Ta+=o*(i+t),Na+=3*o,pn(r=e,i=t)}var t,n,r,i;ja.point=function(s,o){ja.point=e,pn(t=r=s,n=i=o)},ja.lineEnd=function(){e(t,n)}}function gn(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,o,0,ku)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function s(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=s},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:a};return u}function yn(e){function t(e){return(u?r:n)(e)}function n(t){return En(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=0/0,T.point=s,t.lineStart()}function s(n,r){var s=Mt([n,r]),o=e(n,r);i(b,w,y,E,S,x,b=o[0],w=o[1],y=n,E=s[0],S=s[1],x=s[2],u,t),t.point(b,w)}function o(){T.point=n,t.lineEnd()}function a(){r(),T.point=f,T.lineEnd=l}function f(e,t){s(c=e,h=t),p=b,d=w,v=E,m=S,g=x,T.point=s}function l(){i(b,w,y,E,S,x,p,d,c,v,m,g,u,t),T.lineEnd=o,o()}var c,h,p,d,v,m,g,y,b,w,E,S,x,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=a},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,u,a,f,l,c,h,p,d,v,m,g){var y=l-t,b=c-n,w=y*y+b*b;if(w>4*s&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=au(au(x)-1)<Au||au(r-h)<Au?(r+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-t,M=A-n,_=b*O-y*M;(_*_/w>s||au((y*O+b*M)/w-.5)>.3||o>u*p+a*d+f*v)&&(i(t,n,r,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),i(L,A,C,E,S,x,l,c,h,p,d,v,m,g))}}var s=.5,o=Math.cos(30*Mu),u=16;return t.precision=function(e){return arguments.length?(u=(s=e*e)>0&&16,t):Math.sqrt(s)},t}function bn(e){var t=yn(function(t,n){return e([t*_u,n*_u])});return function(e){return Tn(t(e))}}function wn(e){this.stream=e}function En(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Sn(e){return xn(function(){return e})()}function xn(e){function t(e){return e=u(e[0]*Mu,e[1]*Mu),[e[0]*h+a,f-e[1]*h]}function n(e){return e=u.invert((e[0]-a)/h,(f-e[1])/h),e&&[e[0]*_u,e[1]*_u]}function r(){u=on(o=kn(g,y,b),s);var e=s(v,m);return a=p-e[0]*h,f=d+e[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),t}var s,o,u,a,f,l,c=yn(function(e,t){return e=s(e,t),[e[0]*h+a,f-e[1]*h]}),h=150,p=480,d=250,v=0,m=0,g=0,y=0,b=0,w=ka,E=vt,S=null,x=null;return t.stream=function(e){return l&&(l.valid=!1),l=Tn(w(o,c(E(e)))),l.valid=!0,l},t.clipAngle=function(e){return arguments.length?(w=null==e?(S=e,ka):nn((S=+e)*Mu),i()):S},t.clipExtent=function(e){return arguments.length?(x=e,E=e?sn(e[0][0],e[0][1],e[1][0],e[1][1]):vt,i()):x},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(v=e[0]%360*Mu,m=e[1]%360*Mu,r()):[v*_u,m*_u]},t.rotate=function(e){return arguments.length?(g=e[0]%360*Mu,y=e[1]%360*Mu,b=e.length>2?e[2]%360*Mu:0,r()):[g*_u,y*_u,b*_u]},Jo.rebind(t,c,"precision"),function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function Tn(e){return En(e,function(t,n){e.point(t*Mu,n*Mu)})}function Nn(e,t){return[e,t]}function Cn(e,t){return[e>Cu?e-ku:-Cu>e?e+ku:e,t]}function kn(e,t,n){return e?t||n?on(An(e),On(t,n)):An(e):t||n?On(t,n):Cn}function Ln(e){return function(t,n){return t+=e,[t>Cu?t-ku:-Cu>t?t+ku:t,n]}}function An(e){var t=Ln(e);return t.invert=Ln(-e),t}function On(e,t){function n(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*r+u*i;return[Math.atan2(a*s-l*o,u*r-f*i),I(l*s+a*o)]}var r=Math.cos(e),i=Math.sin(e),s=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*s-a*o;return[Math.atan2(a*s+f*o,u*r+l*i),I(l*r-u*i)]},n}function Mn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;null!=i?(i=_n(n,i),s=_n(n,s),(o>0?s>i:i>s)&&(i+=o*ku)):(i=e+o*ku,s=e-.5*a);for(var f,l=i;o>0?l>s:s>l;l-=a)u.point((f=jt([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function _n(e,t){var n=Mt(t);n[0]-=e,Bt(n);var r=F(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Au)%(2*Math.PI)}function Dn(e,t,n){var r=Jo.range(e,t-Au,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function Pn(e,t,n){var r=Jo.range(e,t-Au,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Hn(e){return e.source}function Bn(e){return e.target}function jn(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(z(r-t)+i*o*z(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*_u,Math.atan2(o,Math.sqrt(r*r+i*i))*_u]}:function(){return[e*_u,t*_u]};return d.distance=h,d}function Fn(){function e(e,i){var s=Math.sin(i*=Mu),o=Math.cos(i),u=au((e*=Mu)-t),a=Math.cos(u);Fa+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*s-n*o*a)*u),n*s+r*o*a),t=e,n=s,r=o}var t,n,r;Ia.point=function(i,s){t=i*Mu,n=Math.sin(s*=Mu),r=Math.cos(s),Ia.point=e},Ia.lineEnd=function(){Ia.point=Ia.lineEnd=a}}function In(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function qn(e,t){function n(e,t){var n=au(au(t)-Lu)<Au?0:o/Math.pow(i(t),s);return[n*Math.sin(s*e),o-n*Math.cos(s*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Cu/4+e/2)},s=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),s)/s;return s?(n.invert=function(e,t){var n=o-t,r=j(s)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/s,2*Math.atan(Math.pow(o/r,1/s))-Lu]},n):Un}function Rn(e,t){function n(e,t){var n=s-t;return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),s=r/i+e;return au(i)<Au?Nn:(n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,s-j(i)*Math.sqrt(e*e+n*n)]},n)}function Un(e,t){return[e,Math.log(Math.tan(Cu/4+t/2))]}function zn(e){var t,n=Sn(e),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=s.apply(n,arguments);if(o===n){if(t=null==e){var u=Cu*r(),a=i();s([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else t&&(o=null);return o},n.clipExtent(null)}function Wn(e,t){var n=Math.cos(t)*Math.sin(e);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(t),Math.cos(e))]}function Xn(e){return e[0]}function Vn(e){return e[1]}function $n(e,t,n,r){var i,s,o,u,a,f,l;return i=r[e],s=i[0],o=i[1],i=r[t],u=i[0],a=i[1],i=r[n],f=i[0],l=i[1],(l-o)*(u-s)-(a-o)*(f-s)>0}function Jn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Kn(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Qn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Gn(){yr(this),this.edge=this.site=this.circle=null}function Yn(e){var t=Ga.pop()||new Gn;return t.site=e,t}function Zn(e){fr(e),Ja.remove(e),Ga.push(e),yr(e)}function er(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];Zn(e);for(var a=s;a.circle&&au(n-a.circle.x)<Au&&au(r-a.circle.cy)<Au;)s=a.P,u.unshift(a),Zn(a),a=s;u.unshift(a),fr(a);for(var f=o;f.circle&&au(n-f.circle.x)<Au&&au(r-f.circle.cy)<Au;)o=f.N,u.push(f),Zn(f),f=o;u.push(f),fr(f);var l,c=u.length;for(l=1;c>l;++l)f=u[l],a=u[l-1],vr(f.edge,a.site,f.site,i);a=u[0],f=u[c-1],f.edge=pr(a.site,f.site,null,i),ar(a),ar(f)}function tr(e){for(var t,n,r,i,s=e.x,o=e.y,u=Ja._;u;)if(r=nr(u,o)-s,r>Au)u=u.L;else{if(i=s-rr(u,o),!(i>Au)){r>-Au?(t=u.P,n=u):i>-Au?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}var a=Yn(e);if(Ja.insert(t,a),t||n){if(t===n)return fr(t),n=Yn(t.site),Ja.insert(a,n),a.edge=n.edge=pr(t.site,a.site),ar(t),ar(n),void 0;if(!n)return a.edge=pr(t.site,a.site),void 0;fr(t),fr(n);var f=t.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=n.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};vr(n.edge,f,d,w),a.edge=pr(f,e,null,w),n.edge=pr(e,d,null,w),ar(t),ar(n)}}function nr(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-1/0;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function rr(e,t){var n=e.N;if(n)return nr(n,t);var r=e.site;return r.y===t?r.x:1/0}function ir(e){this.site=e,this.edges=[]}function sr(e){for(var t,n,r,i,s,o,u,a,f,l,c=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],v=$a,m=v.length;m--;)if(s=v[m],s&&s.prepare())for(u=s.edges,a=u.length,o=0;a>o;)l=u[o].end(),r=l.x,i=l.y,f=u[++o%a].start(),t=f.x,n=f.y,(au(r-t)>Au||au(i-n)>Au)&&(u.splice(o,0,new mr(dr(s.site,l,au(r-c)<Au&&d-i>Au?{x:c,y:au(t-c)<Au?n:d}:au(i-d)<Au&&h-r>Au?{x:au(n-d)<Au?t:h,y:d}:au(r-h)<Au&&i-p>Au?{x:h,y:au(t-h)<Au?n:p}:au(i-p)<Au&&r-c>Au?{x:au(n-p)<Au?t:c,y:p}:null),s.site,null)),++a)}function or(e,t){return t.angle-e.angle}function ur(){yr(this),this.x=this.y=this.arc=this.site=this.cy=null}function ar(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,s=n.site;if(r!==s){var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(!(h>=-Ou)){var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=Ya.pop()||new ur;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;for(var y=null,b=Qa._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Qa.insert(y,g),y||(Ka=g)}}}}function fr(e){var t=e.circle;t&&(t.P||(Ka=t.N),Qa.remove(t),Ya.push(t),yr(t),e.circle=null)}function lr(e){for(var t,n=Va,r=rn(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!cr(t,e)||!r(t)||au(t.a.x-t.b.x)<Au&&au(t.a.y-t.b.y)<Au)&&(t.a=t.b=null,n.splice(i,1))}function cr(e,t){var n=e.b;if(n)return!0;var r,i,s=e.a,o=t[0][0],u=t[1][0],a=t[0][1],f=t[1][1],l=e.l,c=e.r,h=l.x,p=l.y,d=c.x,v=c.y,m=(h+d)/2,g=(p+v)/2;if(v===p){if(o>m||m>=u)return;if(h>d){if(s){if(s.y>=f)return}else s={x:m,y:a};n={x:m,y:f}}else{if(s){if(s.y<a)return}else s={x:m,y:f};n={x:m,y:a}}}else if(r=(h-d)/(v-p),i=g-r*m,-1>r||r>1)if(h>d){if(s){if(s.y>=f)return}else s={x:(a-i)/r,y:a};n={x:(f-i)/r,y:f}}else{if(s){if(s.y<a)return}else s={x:(f-i)/r,y:f};n={x:(a-i)/r,y:a}}else if(v>p){if(s){if(s.x>=u)return}else s={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(s){if(s.x<o)return}else s={x:u,y:r*u+i};n={x:o,y:r*o+i}}return e.a=s,e.b=n,!0}function hr(e,t){this.l=e,this.r=t,this.a=this.b=null}function pr(e,t,n,r){var i=new hr(e,t);return Va.push(i),n&&vr(i,e,t,n),r&&vr(i,t,e,r),$a[e.i].edges.push(new mr(i,e,t)),$a[t.i].edges.push(new mr(i,t,e)),i}function dr(e,t,n){var r=new hr(e,null);return r.a=t,r.b=n,Va.push(r),r}function vr(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function mr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function gr(){this._=null}function yr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function br(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function wr(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Er(e){for(;e.L;)e=e.L;return e}function Sr(e,t){var n,r,i,s=e.sort(xr).pop();for(Va=[],$a=new Array(e.length),Ja=new gr,Qa=new gr;;)if(i=Ka,s&&(!i||s.y<i.y||s.y===i.y&&s.x<i.x))(s.x!==n||s.y!==r)&&($a[s.i]=new ir(s),tr(s),n=s.x,r=s.y),s=e.pop();else{if(!i)break;er(i.arc)}t&&(lr(t),sr(t));var o={cells:$a,edges:Va};return Ja=Qa=Va=$a=null,o}function xr(e,t){return t.y-e.y||t.x-e.x}function Tr(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function Nr(e){return e.x}function Cr(e){return e.y}function kr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Lr(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=.5*(n+i),u=.5*(r+s),a=t.nodes;a[0]&&Lr(e,a[0],n,r,o,u),a[1]&&Lr(e,a[1],o,r,i,u),a[2]&&Lr(e,a[2],n,u,o,s),a[3]&&Lr(e,a[3],o,u,i,s)}}function Ar(e,t){e=Jo.rgb(e),t=Jo.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+at(Math.round(n+s*e))+at(Math.round(r+o*e))+at(Math.round(i+u*e))}}function Or(e,t){var n,r={},i={};for(n in e)n in t?r[n]=Dr(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Mr(e,t){return t-=e=+e,function(n){return e+t*n}}function _r(e,t){var n,r,i,s,o,u=0,a=0,f=[],l=[];for(e+="",t+="",ef.lastIndex=0,r=0;n=ef.exec(t);++r)n.index&&f.push(t.substring(u,a=n.index)),l.push({i:f.length,x:n[0]}),f.push(null),u=ef.lastIndex;for(u<t.length&&f.push(t.substring(u)),r=0,s=l.length;(n=ef.exec(e))&&s>r;++r)if(o=l[r],o.x==n[0]){if(o.i)if(null==f[o.i+1])for(f[o.i-1]+=o.x,f.splice(o.i,1),i=r+1;s>i;++i)l[i].i--;else for(f[o.i-1]+=o.x+f[o.i+1],f.splice(o.i,2),i=r+1;s>i;++i)l[i].i-=2;else if(null==f[o.i+1])f[o.i]=o.x;else for(f[o.i]=o.x+f[o.i+1],f.splice(o.i+1,1),i=r+1;s>i;++i)l[i].i--;l.splice(r,1),s--,r--}else o.x=Mr(parseFloat(n[0]),parseFloat(o.x));for(;s>r;)o=l.pop(),null==f[o.i+1]?f[o.i]=o.x:(f[o.i]=o.x+f[o.i+1],f.splice(o.i+1,1)),s--;return 1===f.length?null==f[0]?(o=l[0].x,function(e){return o(e)+""}):function(){return t}:function(e){for(r=0;s>r;++r)f[(o=l[r]).i]=o.x(e);return f.join("")}}function Dr(e,t){for(var n,r=Jo.interpolators.length;--r>=0&&!(n=Jo.interpolators[r](e,t)););return n}function Pr(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;u>n;++n)r.push(Dr(e[n],t[n]));for(;s>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;u>n;++n)i[n]=r[n](e);return i}}function Hr(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Br(e){return function(t){return 1-e(1-t)}}function jr(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Fr(e){return e*e}function Ir(e){return e*e*e}function qr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Rr(e){return function(t){return Math.pow(t,e)}}function Ur(e){return 1-Math.cos(e*Lu)}function zr(e){return Math.pow(2,10*(e-1))}function Wr(e){return 1-Math.sqrt(1-e*e)}function Xr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/ku*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*ku/t)}}function Vr(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function $r(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Jr(e,t){e=Jo.hcl(e),t=Jo.hcl(t);var n=e.h,r=e.c,i=e.l,s=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return Q(n+s*e,r+o*e,i+u*e)+""}}function Kr(e,t){e=Jo.hsl(e),t=Jo.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return $(n+s*e,r+o*e,i+u*e)+""}}function Qr(e,t){e=Jo.lab(e),t=Jo.lab(t);var n=e.l,r=e.a,i=e.b,s=t.l-n,o=t.a-r,u=t.b-i;return function(e){return Z(n+s*e,r+o*e,i+u*e)+""}}function Gr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Yr(e){var t=[e.a,e.b],n=[e.c,e.d],r=ei(t),i=Zr(t,n),s=ei(ti(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*_u,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*_u:0}function Zr(e,t){return e[0]*t[0]+e[1]*t[1]}function ei(e){var t=Math.sqrt(Zr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function ti(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function ni(e,t){var n,r=[],i=[],s=Jo.transform(e),o=Jo.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:Mr(u[0],a[0])},{i:3,x:Mr(u[1],a[1])})):a[0]||a[1]?r.push("translate("+a+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Mr(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),c!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Mr(c,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:Mr(p[0],d[0])},{i:n-2,x:Mr(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(e){for(var t,s=-1;++s<n;)r[(t=i[s]).i]=t.x(e);return r.join("")}}function ri(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function ii(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function si(e){for(var t=e.source,n=e.target,r=ui(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;n!==r;)i.splice(s,0,n),n=n.parent;return i}function oi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function ui(e,t){if(e===t)return e;for(var n=oi(e),r=oi(t),i=n.pop(),s=r.pop(),o=null;i===s;)o=i,i=n.pop(),s=r.pop();return o}function ai(e){e.fixed|=2}function fi(e){e.fixed&=-7}function li(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ci(e){e.fixed&=-5}function hi(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var s,o=e.nodes,u=o.length,a=-1;++a<u;)s=o[a],null!=s&&(hi(s,t,n),e.charge+=s.charge,r+=s.charge*s.cx,i+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function pi(e,t){return Jo.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=gi,e}function di(e){return e.children}function vi(e){return e.value}function mi(e,t){return t.value-e.value}function gi(e){return Jo.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function yi(e){return e.x}function bi(e){return e.y}function wi(e,t,n){e.y0=t,e.y=n}function Ei(e){return Jo.range(e.length)}function Si(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function xi(e){for(var t,n=1,r=0,i=e[0][1],s=e.length;s>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function Ti(e){return e.reduce(Ni,0)}function Ni(e,t){return e+t[1]}function Ci(e,t){return ki(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ki(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];++n<=t;)s[n]=i*n+r;return s}function Li(e){return[Jo.min(e),Jo.max(e)]}function Ai(e,t){return e.parent==t.parent?1:2}function Oi(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function Mi(e){var t,n=e.children;return n&&(t=n.length)?n[t-1]:e._tree.thread}function _i(e,t){var n=e.children;if(n&&(i=n.length))for(var r,i,s=-1;++s<i;)t(r=_i(n[s],t),e)>0&&(e=r);return e}function Di(e,t){return e.x-t.x}function Pi(e,t){return t.x-e.x}function Hi(e,t){return e.depth-t.depth}function Bi(e,t){function n(e,r){var i=e.children;if(i&&(o=i.length))for(var s,o,u=null,a=-1;++a<o;)s=i[a],n(s,u),u=s;t(e,r)}n(e,null)}function ji(e){for(var t,n=0,r=0,i=e.children,s=i.length;--s>=0;)t=i[s]._tree,t.prelim+=n,t.mod+=n,n+=t.shift+(r+=t.change)}function Fi(e,t,n){e=e._tree,t=t._tree;var r=n/(t.number-e.number);e.change+=r,t.change-=r,t.shift+=n,t.prelim+=n,t.mod+=n}function Ii(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function qi(e,t){return e.value-t.value}function Ri(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ui(e,t){e._pack_next=t,t._pack_prev=e}function zi(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Wi(e){function t(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(f=n.length)){var n,r,i,s,o,u,a,f,l=1/0,c=-1/0,h=1/0,p=-1/0;if(n.forEach(Xi),r=n[0],r.x=-r.r,r.y=0,t(r),f>1&&(i=n[1],i.x=i.r,i.y=0,t(i),f>2))for(s=n[2],Ji(r,i,s),t(s),Ri(r,s),r._pack_prev=s,Ri(s,i),i=r._pack_next,o=3;f>o;o++){Ji(r,i,s=n[o]);var d=0,v=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(zi(u,s)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!zi(a,s);a=a._pack_prev,m++);d?(m>v||v==m&&i.r<r.r?Ui(r,i=u):Ui(r=a,i),o--):(Ri(r,s),i=s,t(s))}var g=(l+c)/2,y=(h+p)/2,b=0;for(o=0;f>o;o++)s=n[o],s.x-=g,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));e.r=b,n.forEach(Vi)}}function Xi(e){e._pack_next=e._pack_prev=e}function Vi(e){delete e._pack_next,delete e._pack_prev}function $i(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var s=-1,o=i.length;++s<o;)$i(i[s],t,n,r)}function Ji(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Ki(e){return 1+Jo.max(e,function(e){return e.y})}function Qi(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Gi(e){var t=e.children;return t&&t.length?Gi(t[0]):e}function Yi(e){var t,n=e.children;return n&&(t=n.length)?Yi(n[t-1]):e}function Zi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function es(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>s&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function ts(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function ns(e){return e.rangeExtent?e.rangeExtent():ts(e.range())}function rs(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function is(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return s>o&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function ss(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:cf}function os(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=Jo.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function us(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?os:rs,a=r?ii:ri;return o=i(e,t,a,n),u=i(t,e,a,Dr),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(Gr)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return cs(e,t)},s.tickFormat=function(t,n){return hs(e,t,n)},s.nice=function(t){return fs(e,t),i()},s.copy=function(){return us(e,t,n,r)},i()}function as(e,t){return Jo.rebind(e,t,"range","rangeRound","interpolate","clamp")}function fs(e,t){return is(e,ss(ls(e,t)[2]))}function ls(e,t){null==t&&(t=10);var n=ts(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return.15>=s?i*=10:.35>=s?i*=5:.75>=s&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function cs(e,t){return Jo.range.apply(Jo,ls(e,t))}function hs(e,t,n){var r=ls(e,t);return Jo.format(n?n.replace(sa,function(e,t,n,i,s,o,u,a,f,l){return[t,n,i,s,o,u,a,f||"."+ds(l,r),l].join("")}):",."+ps(r[2])+"f")}function ps(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ds(e,t){var n=ps(t[2]);return e in hf?Math.abs(n-ps(Math.max(Math.abs(t[0]),Math.abs(t[1]))))+ +("e"!==e):n-2*("%"===e)}function vs(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function s(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return s(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=is(r.map(i),n?Math:df);return e.domain(t),r=t.map(s),o},o.ticks=function(){var e=ts(r),o=[],u=e[0],a=e[1],f=Math.floor(i(u)),l=Math.ceil(i(a)),c=t%1?2:t;if(isFinite(l-f)){if(n){for(;l>f;f++)for(var h=1;c>h;h++)o.push(s(f)*h);o.push(s(f))}else for(o.push(s(f));f++<l;)for(var h=c-1;h>0;h--)o.push(s(f)*h);for(f=0;o[f]<u;f++);for(l=o.length;o[l-1]>a;l--);o=o.slice(f,l)}return o},o.tickFormat=function(e,t){if(!arguments.length)return pf;arguments.length<2?t=pf:"function"!=typeof t&&(t=Jo.format(t));var r,u=Math.max(.1,e/o.ticks().length),a=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/s(a(i(e)+r))<=u?t(e):""}},o.copy=function(){return vs(e.copy(),t,n,r)},as(o,e)}function ms(e,t,n){function r(t){return e(i(t))}var i=gs(t),s=gs(1/t);return r.invert=function(t){return s(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return cs(n,e)},r.tickFormat=function(e,t){return hs(n,e,t)},r.nice=function(e){return r.domain(fs(n,e))},r.exponent=function(o){return arguments.length?(i=gs(t=o),s=gs(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return ms(e.copy(),t,n)},as(r,e)}function gs(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ys(e,t){function n(n){return o[((s.get(n)||"range"===t.t&&s.set(n,e.push(n)))-1)%o.length]}function r(t,n){return Jo.range(e.length).map(function(e){return t+n*e})}var s,o,u;return n.domain=function(r){if(!arguments.length)return e;e=[],s=new i;for(var o,u=-1,a=r.length;++u<a;)s.has(o=r[u])||s.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(o=e,u=0,t={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var a=i[0],f=i[1],l=(f-a)/(Math.max(1,e.length-1)+s);return o=r(e.length<2?(a+f)/2:a+l*s/2,l),u=0,t={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,s,a){arguments.length<2&&(s=0),arguments.length<3&&(a=s);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-s+2*a);return o=r(l+h*a,h),f&&o.reverse(),u=h*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,a){arguments.length<2&&(s=0),arguments.length<3&&(a=s);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-s+2*a)),p=c-l-(e.length-s)*h;return o=r(l+Math.round(p/2),h),f&&o.reverse(),u=Math.round(h*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return u},n.rangeExtent=function(){return ts(t.a[0])},n.copy=function(){return ys(e,t)},n.domain(e)}function bs(e,t){function n(){var n=0,s=t.length;for(i=[];++n<s;)i[n-1]=Jo.quantile(e,n/s);return r}function r(e){return isNaN(e=+e)?void 0:t[Jo.bisect(i,e)]}var i;return r.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(Jo.ascending),n()):e},r.range=function(e){return arguments.length?(t=e,n()):t},r.quantiles=function(){return i},r.invertExtent=function(n){return n=t.indexOf(n),0>n?[0/0,0/0]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},r.copy=function(){return bs(e,t)},n()}function ws(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/s+e,[t,t+1/s]},r.copy=function(){return ws(e,t,n)},i()}function Es(e,t){function n(n){return n>=n?t[Jo.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return Es(e,t)},n}function Ss(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return cs(e,t)},t.tickFormat=function(t,n){return hs(e,t,n)},t.copy=function(){return Ss(e)},t}function xs(e){return e.innerRadius}function Ts(e){return e.outerRadius}function Ns(e){return e.startAngle}function Cs(e){return e.endAngle}function ks(e){function t(t){function o(){f.push("M",s(e(l),u))}for(var a,f=[],l=[],c=-1,h=t.length,p=dt(n),d=dt(r);++c<h;)i.call(this,a=t[c],c)?l.push([+p.call(this,a,c),+d.call(this,a,c)]):l.length&&(o(),l=[]);return l.length&&o(),f.length?f.join(""):null}var n=Xn,r=Vn,i=Wt,s=Ls,o=s.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?s=e:(s=Ef.get(e)||Ls).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function Ls(e){return e.join("L")}function As(e){return Ls(e)+"Z"}function Os(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Ms(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function _s(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Ds(e,t){return e.length<4?Ls(e):e[1]+Bs(e.slice(1,e.length-1),js(e,t))}function Ps(e,t){return e.length<3?Ls(e):e[0]+Bs((e.push(e[0]),e),js([e[e.length-2]].concat(e,[e[1]]),t))}function Hs(e,t){return e.length<3?Ls(e):e[0]+Bs(e,js(e,t))}function Bs(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Ls(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2),t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function js(e,t){for(var n,r=[],i=(1-t)/2,s=e[0],o=e[1],u=1,a=e.length;++u<a;)n=s,s=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Fs(e){if(e.length<3)return Ls(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",Us(Tf,o),",",Us(Tf,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),zs(a,o,u);return e.pop(),a.push("L",r),a.join("")}function Is(e){if(e.length<4)return Ls(e);for(var t,n=[],r=-1,i=e.length,s=[0],o=[0];++r<3;)t=e[r],s.push(t[0]),o.push(t[1]);for(n.push(Us(Tf,s)+","+Us(Tf,o)),--r;++r<i;)t=e[r],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),zs(n,s,o);return n.join("")}function qs(e){for(var t,n,r=-1,i=e.length,s=i+4,o=[],u=[];++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[Us(Tf,o),",",Us(Tf,u)],--r;++r<s;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),zs(t,o,u);return t.join("")}function Rs(e,t){var n=e.length-1;if(n)for(var r,i,s=e[0][0],o=e[0][1],u=e[n][0]-s,a=e[n][1]-o,f=-1;++f<=n;)r=e[f],i=f/n,r[0]=t*r[0]+(1-t)*(s+i*u),r[1]=t*r[1]+(1-t)*(o+i*a);return Fs(e)}function Us(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function zs(e,t,n){e.push("C",Us(Sf,t),",",Us(Sf,n),",",Us(xf,t),",",Us(xf,n),",",Us(Tf,t),",",Us(Tf,n))}function Ws(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Xs(e){for(var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=Ws(i,s);++t<n;)r[t]=(o+(o=Ws(i=s,s=e[t+1])))/2;return r[t]=o,r}function Vs(e){for(var t,n,r,i,s=[],o=Xs(e),u=-1,a=e.length-1;++u<a;)t=Ws(e[u],e[u+1]),au(t)<Au?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=a;)i=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),s.push([i||0,o[u]*i||0]);return s}function $s(e){return e.length<3?Ls(e):e[0]+Bs(e,Vs(e))}function Js(e){for(var t,n,r,i=-1,s=e.length;++i<s;)t=e[i],n=t[0],r=t[1]+bf,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Ks(e){function t(t){function a(){v.push("M",u(e(g),c),l,f(e(m.reverse()),c),"Z")}for(var h,p,d,v=[],m=[],g=[],y=-1,b=t.length,w=dt(n),E=dt(i),S=n===r?function(){return p}:dt(r),x=i===s?function(){return d}:dt(s);++y<b;)o.call(this,h=t[y],y)?(m.push([p=+w.call(this,h,y),d=+E.call(this,h,y)]),g.push([+S.call(this,h,y),+x.call(this,h,y)])):m.length&&(a(),m=[],g=[]);return m.length&&a(),v.length?v.join(""):null}var n=Xn,r=Xn,i=0,s=Vn,o=Wt,u=Ls,a=u.key,f=u,l="L",c=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?u=e:(u=Ef.get(e)||Ls).key,f=u.reverse||u,l=u.closed?"M":"L",t):a},t.tension=function(e){return arguments.length?(c=e,t):c},t}function Qs(e){return e.radius}function Gs(e){return[e.x,e.y]}function Ys(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+bf;return[n*Math.cos(r),n*Math.sin(r)]}}function Zs(){return 64}function eo(){return"circle"}function to(e){var t=Math.sqrt(e/Cu);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function no(e,t){return pu(e,Of),e.id=t,e}function ro(e,t,n,r){var i=e.id;return L(e,"function"==typeof n?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function io(e){return null==e&&(e=""),function(){this.textContent=e}}function so(e,t,n,r){var s=e.__transition__||(e.__transition__={active:0,count:0}),o=s[n];if(!o){var u=r.time;o=s[n]={tween:new i,time:u,ease:r.ease,delay:r.delay,duration:r.duration},++s.count,Jo.timer(function(r){function i(r){return s.active>n?f():(s.active=n,o.event&&o.event.start.call(e,l,t),o.tween.forEach(function(n,r){(r=r.call(e,l,t))&&v.push(r)}),Jo.timer(function(){return d.c=a(r||1)?Wt:a,1},0,u),void 0)}function a(r){if(s.active!==n)return f();for(var i=r/p,u=c(i),a=v.length;a>0;)v[--a].call(e,u);return i>=1?(o.event&&o.event.end.call(e,l,t),f()):void 0}function f(){return--s.count?delete s[n]:delete e.__transition__,1}var l=e.__data__,c=o.ease,h=o.delay,p=o.duration,d=Yu,v=[];return d.t=h+u,r>=h?i(r-h):(d.c=i,void 0)},0,u)}}function oo(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function uo(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function ao(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function fo(e,t,n){function r(t){var n=e(t),r=s(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new jf(n-1)),1),n}function s(e,n){return t(e=new jf(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)for(;r>o;)n(o)%s||u.push(new Date(+o)),t(o,1);else for(;r>o;)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{jf=ao;var r=new ao;return r._=e,o(r,t,n)}finally{jf=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=lo(e);return a.floor=a,a.round=lo(r),a.ceil=lo(i),a.offset=lo(s),a.range=u,e}function lo(e){return function(t,n){try{jf=ao;var r=new ao;return r._=t,e(r,n)._}finally{jf=Date}}}function co(e){function t(t){for(var r,i,s,o=[],u=-1,a=0;++u<n;)37===e.charCodeAt(u)&&(o.push(e.substring(a,u)),null!=(i=nl[r=e.charAt(++u)])&&(r=e.charAt(++u)),(s=rl[r])&&(r=s(t,null==i?"e"===r?" ":"0":i)),o.push(r),a=u+1);return o.push(e.substring(a,u)),o.join("")}var n=e.length;return t.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=ho(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=null!=n.Z&&jf!==ao,s=new(i?ao:jf);return"j"in n?s.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(s.setFullYear(n.y,0,1),s.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(s.getDay()+5)%7:n.w+7*n.U-(s.getDay()+6)%7)):s.setFullYear(n.y,n.m,n.d),s.setHours(n.H+Math.floor(n.Z/100),n.M+n.Z%100,n.S,n.L),i?s._:s},t.toString=function(){return e},t}function ho(e,t,n,r){for(var i,s,o,u=0,a=t.length,f=n.length;a>u;){if(r>=f)return-1;if(i=t.charCodeAt(u++),37===i){if(o=t.charAt(u++),s=il[o in nl?t.charAt(u++):o],!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function po(e){return new RegExp("^(?:"+e.map(Jo.requote).join("|")+")","i")}function vo(e){for(var t=new i,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function mo(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",s=i.length;return r+(n>s?(new Array(n-s+1)).join(t)+i:i)}function go(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n));return r?(e.w=Qf.get(r[0].toLowerCase()),n+r[0].length):-1}function yo(e,t,n){$f.lastIndex=0;var r=$f.exec(t.substring(n));return r?(e.w=Jf.get(r[0].toLowerCase()),n+r[0].length):-1}function bo(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function wo(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n));return r?(e.U=+r[0],n+r[0].length):-1}function Eo(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n));return r?(e.W=+r[0],n+r[0].length):-1}function So(e,t,n){Zf.lastIndex=0;var r=Zf.exec(t.substring(n));return r?(e.m=el.get(r[0].toLowerCase()),n+r[0].length):-1}function xo(e,t,n){Gf.lastIndex=0;var r=Gf.exec(t.substring(n));return r?(e.m=Yf.get(r[0].toLowerCase()),n+r[0].length):-1}function To(e,t,n){return ho(e,rl.c.toString(),t,n)}function No(e,t,n){return ho(e,rl.x.toString(),t,n)}function Co(e,t,n){return ho(e,rl.X.toString(),t,n)}function ko(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Lo(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+2));return r?(e.y=Oo(+r[0]),n+r[0].length):-1}function Ao(e,t,n){return/^[+-]\d{4}$/.test(t=t.substring(n,n+5))?(e.Z=+t,n+5):-1}function Oo(e){return e+(e>68?1900:2e3)}function Mo(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function _o(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Do(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function Po(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Ho(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Bo(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jo(e,t,n){sl.lastIndex=0;var r=sl.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Fo(e,t,n){var r=ol.get(t.substring(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}function Io(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(au(t)/60),i=au(t)%60;return n+mo(r,"0",2)+mo(i,"0",2)}function qo(e,t,n){tl.lastIndex=0;var r=tl.exec(t.substring(n,n+1));return r?n+r[0].length:-1}function Ro(e){function t(e){try{jf=ao;var t=new jf;return t._=e,n(t)}finally{jf=Date}}var n=co(e);return t.parse=function(e){try{jf=ao;var t=n.parse(e);return t&&t._}finally{jf=Date}},t.toString=n.toString,t}function Uo(e){return e.toISOString()}function zo(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,s=Jo.bisect(al,i);return s==al.length?[t.year,ls(e.map(function(e){return e/31536e6}),n)[2]]:s?t[i/al[s-1]<al[s]/i?s-1:s]:[hl,ls(e,n)[2]]}return r.invert=function(t){return Wo(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Wo)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Wo(+n+1),t).length}var s=r.domain(),o=ts(s),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(is(s,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Wo(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Wo(+t+1);return t}}:e))},r.ticks=function(e,t){var n=ts(r.domain()),s=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return s&&(e=s[0],t=s[1]),e.range(n[0],Wo(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return zo(e.copy(),t,n)},as(r,e)}function Wo(e){return new Date(e)}function Xo(e){return function(t){for(var n=e.length-1,r=e[n];!r[1](t);)r=e[--n];return r[0](t)}}function Vo(e){return JSON.parse(e.responseText)}function $o(e){var t=Go.createRange();return t.selectNode(Go.body),t.createContextualFragment(e.responseText)}var Jo={version:"3.3.10"};Date.now||(Date.now=function(){return+(new Date)});var Ko=[].slice,Qo=function(e){return Ko.call(e)},Go=document,Yo=Go.documentElement,Zo=window;try{Qo(Yo.childNodes)[0].nodeType}catch(eu){Qo=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{Go.createElement("div").style.setProperty("opacity",0,"")}catch(tu){var nu=Zo.Element.prototype,ru=nu.setAttribute,iu=nu.setAttributeNS,su=Zo.CSSStyleDeclaration.prototype,ou=su.setProperty;nu.setAttribute=function(e,t){ru.call(this,e,t+"")},nu.setAttributeNS=function(e,t,n){iu.call(this,e,t,n+"")},su.setProperty=function(e,t,n){ou.call(this,e,t+"",n)}}Jo.ascending=function(e,t){return t>e?-1:e>t?1:e>=t?0:0/0},Jo.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},Jo.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},Jo.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},Jo.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o&&!(null!=(n=i=e[s])&&n>=n);)n=i=void 0;for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++s<o&&!(null!=(n=i=t.call(e,e[s],s))&&n>=n);)n=void 0;for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},Jo.sum=function(e,t){var n,r=0,i=e.length,s=-1;if(1===arguments.length)for(;++s<i;)isNaN(n=+e[s])||(r+=n);else for(;++s<i;)isNaN(n=+t.call(e,e[s],s))||(r+=n);return r},Jo.mean=function(t,n){var r,i=t.length,s=0,o=-1,u=0;if(1===arguments.length)for(;++o<i;)e(r=t[o])&&(s+=(r-s)/++u);else for(;++o<i;)e(r=n.call(t,t[o],o))&&(s+=(r-s)/++u);return u?s:void 0},Jo.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},Jo.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(e),t.length?Jo.quantile(t.sort(Jo.ascending),.5):void 0},Jo.bisector=function(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e.call(t,t[s],s)<n?r=s+1:i=s}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;n<e.call(t,t[s],s)?i=s:r=s+1}return r}}};var uu=Jo.bisector(function(e){return e});Jo.bisectLeft=uu.left,Jo.bisect=Jo.bisectRight=uu.right,Jo.shuffle=function(e){for(var t,n,r=e.length;r;)n=0|Math.random()*r--,t=e[r],e[r]=e[n],e[n]=t;return e},Jo.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},Jo.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(0>r?0:r);r>n;)s[n]=[t=i,i=e[++n]];return s},Jo.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,n=Jo.min(arguments,t),r=new Array(n);++e<n;)for(var i,s=-1,o=r[e]=new Array(i);++s<i;)o[s]=arguments[s][e];return r},Jo.transpose=function(e){return Jo.zip.apply(Jo,e)},Jo.keys=function(e){var t=[];for(var n in e)t.push(n);return t},Jo.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},Jo.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Jo.merge=function(e){for(var t,n,r,i=e.length,s=-1,o=0;++s<i;)o+=e[s].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var au=Math.abs;Jo.range=function(e,t,r){if(arguments.length<3&&(r=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/r)throw new Error("infinite range");var i,s=[],o=n(au(r)),u=-1;if(e*=o,t*=o,r*=o,0>r)for(;(i=e+r*++u)>t;)s.push(i/o);else for(;(i=e+r*++u)<t;)s.push(i/o);return s},Jo.map=function(e){var t=new i;if(e instanceof i)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},r(i,{has:function(e){return fu+e in this},get:function(e){return this[fu+e]},set:function(e,t){return this[fu+e]=t},remove:function(e){return e=fu+e,e in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===lu&&e.call(this,t.substring(1),this[t])}});var fu="\0",lu=fu.charCodeAt(0);Jo.nest=function(){function e(t,u,a){if(a>=o.length)return r?r.call(s,u):n?u.sort(n):u;for(var f,l,c,h,p=-1,d=u.length,v=o[a++],m=new i;++p<d;)(h=m.get(f=v(l=u[p])))?h.push(l):m.set(f,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,a))}):(l={},c=function(n,r){l[n]=e(t,r,a)}),m.forEach(c),l}function t(e,n){if(n>=o.length)return e;var r=[],i=u[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,s={},o=[],u=[];return s.map=function(t,n){return e(n,t,0)},s.entries=function(n){return t(e(Jo.map,n,0),0)},s.key=function(e){return o.push(e),s},s.sortKeys=function(e){return u[o.length-1]=e,s},s.sortValues=function(e){return n=e,s},s.rollup=function(e){return r=e,s},s},Jo.set=function(e){var t=new s;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},r(s,{has:function(e){return fu+e in this},add:function(e){return this[fu+e]=!0,e},remove:function(e){return e=fu+e,e in this&&delete this[e]},values:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===lu&&e.call(this,t.substring(1))}}),Jo.behavior={},Jo.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=o(e,t,t[n]);return e};var cu=["webkit","ms","moz","Moz","o","O"];Jo.dispatch=function(){for(var e=new f,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=l(e);return e},f.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.substring(n+1),e=e.substring(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},Jo.event=null,Jo.requote=function(e){return e.replace(hu,"\\$&")};var hu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,pu={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},du=function(e,t){return t.querySelector(e)},vu=function(e,t){return t.querySelectorAll(e)},mu=Yo[u(Yo,"matchesSelector")],gu=function(e,t){return mu.call(e,t)};"function"==typeof Sizzle&&(du=function(e,t){return Sizzle(e,t)[0]||null},vu=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},gu=Sizzle.matchesSelector),Jo.selection=function(){return Eu};var yu=Jo.selection.prototype=[];yu.select=function(e){var t,n,r,i,s=[];e=v(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return d(s)},yu.selectAll=function(e){var t,n,r=[];e=m(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=Qo(e.call(n,n.__data__,u,i))),t.parentNode=n);return d(r)};var bu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Jo.ns={prefix:bu,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),bu.hasOwnProperty(n)?{space:bu[n],local:e}:e}},yu.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=Jo.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(g(t,e[t]));return this}return this.each(g(e,t))},yu.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=e.trim().split(/^|\s+/g)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!b(e[i]).test(t))return!1;return!0}for(t in e)this.each(w(t,e[t]));return this}return this.each(w(e,t))},yu.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(S(n,e[n],t));return this}if(2>r)return Zo.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(S(e,t,n))},yu.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(x(t,e[t]));return this}return this.each(x(e,t))},yu.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},yu.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},yu.append=function(e){return e=T(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},yu.insert=function(e,t){return e=T(e),t=v(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},yu.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},yu.data=function(e,t){function n(e,n){var r,s,o,u=e.length,c=n.length,h=Math.min(u,c),p=new Array(c),d=new Array(c),v=new Array(u);if(t){var m,g=new i,y=new i,b=[];for(r=-1;++r<u;)m=t.call(s=e[r],s.__data__,r),g.has(m)?v[r]=s:g.set(m,s),b.push(m);for(r=-1;++r<c;)m=t.call(n,o=n[r],r),(s=g.get(m))?(p[r]=s,s.__data__=o):y.has(m)||(d[r]=N(o)),y.set(m,o),g.remove(m);for(r=-1;++r<u;)g.has(b[r])&&(v[r]=e[r])}else{for(r=-1;++r<h;)s=e[r],o=n[r],s?(s.__data__=o,p[r]=s):d[r]=N(o);for(;c>r;++r)d[r]=N(n[r]);for(;u>r;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,a.push(d),f.push(p),l.push(v)}var r,s,o=-1,u=this.length;if(!arguments.length){for(e=new Array(u=(r=this[0]).length);++o<u;)(s=r[o])&&(e[o]=s.__data__);return e}var a=A([]),f=d([]),l=d([]);if("function"==typeof e)for(;++o<u;)n(r=this[o],e.call(r,r.parentNode.__data__,o));else for(;++o<u;)n(r=this[o],e);return f.enter=function(){return a},f.exit=function(){return l},f},yu.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},yu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=C(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return d(i)},yu.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},yu.sort=function(e){e=k.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},yu.each=function(e){return L(this,function(t,n,r){e.call(t,t.__data__,n,r)})},yu.call=function(e){var t=Qo(arguments);return e.apply(t[0]=this,t),this},yu.empty=function(){return!this.node()},yu.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var s=n[r];if(s)return s}return null},yu.size=function(){var e=0;return this.each(function(){++e}),e};var wu=[];Jo.selection.enter=A,Jo.selection.enter.prototype=wu,wu.append=yu.append,wu.empty=yu.empty,wu.node=yu.node,wu.call=yu.call,wu.size=yu.size,wu.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return d(o)},wu.insert=function(e,t){return arguments.length<2&&(t=O(this)),yu.insert.call(this,e,t)},yu.transition=function(){for(var e,t,n=Cf||++Mf,r=[],i=kf||{time:Date.now(),ease:qr,delay:0,duration:250},s=-1,o=this.length;++s<o;){r.push(e=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(t=u[a])&&so(t,a,n,i),e.push(t)}return no(r,n)},yu.interrupt=function(){return this.each(M)},Jo.select=function(e){var t=["string"==typeof e?du(e,Go):e];return t.parentNode=Yo,d([t])},Jo.selectAll=function(e){var t=Qo("string"==typeof e?vu(e,Go):e);return t.parentNode=Yo,d([t])};var Eu=Jo.select(Yo);yu.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(_(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(_(e,t,n))};var Su=Jo.map({mouseenter:"mouseover",mouseleave:"mouseout"});Su.forEach(function(e){"on"+e in Go&&Su.remove(e)});var xu="onselectstart"in Go?null:u(Yo.style,"userSelect"),Tu=0;Jo.mouse=function(e){return B(e,h())};var Nu=/WebKit/.test(Zo.navigator.userAgent)?-1:0;Jo.touches=function(e,t){return arguments.length<2&&(t=h().touches),t?Qo(t).map(function(t){var n=B(e,t);return n.identifier=t.identifier,n}):[]},Jo.behavior.drag=function(){function e(){this.on("mousedown.drag",o).on("touchstart.drag",u)}function t(){return Jo.event.changedTouches[0].identifier}function n(e,t){return Jo.touches(e).filter(function(e){return e.identifier===t})[0]}function r(e,t,n,r){return function(){function o(){var e=t(l,p),n=e[0]-v[0],r=e[1]-v[1];m|=n|r,v=e,c({type:"drag",x:e[0]+a[0],y:e[1]+a[1],dx:n,dy:r})}function u(){g.on(n+"."+d,null).on(r+"."+d,null),y(m&&Jo.event.target===h),c({type:"dragend"})}var a,f=this,l=f.parentNode,c=i.of(f,arguments),h=Jo.event.target,p=e(),d=null==p?"drag":"drag-"+p,v=t(l,p),m=0,g=Jo.select(Zo).on(n+"."+d,o).on(r+"."+d,u),y=H();s?(a=s.apply(f,arguments),a=[a.x-v[0],a.y-v[1]]):a=[0,0],c({type:"dragstart"})}}var i=p(e,"drag","dragstart","dragend"),s=null,o=r(a,Jo.mouse,"mousemove","mouseup"),u=r(t,n,"touchmove","touchend");return e.origin=function(t){return arguments.length?(s=t,e):s},Jo.rebind(e,i,"on")};var Cu=Math.PI,ku=2*Cu,Lu=Cu/2,Au=1e-6,Ou=Au*Au,Mu=Cu/180,_u=180/Cu,Du=Math.SQRT2,Pu=2,Hu=4;Jo.interpolateZoom=function(e,t){function n(e){var t=e*y;if(g){var n=R(v),o=s/(Pu*h)*(n*U(Du*t+v)-q(v));return[r+o*f,i+o*l,s*n/R(Du*t+v)]}return[r+e*f,i+e*l,s*Math.exp(Du*t)]}var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2],f=o-r,l=u-i,c=f*f+l*l,h=Math.sqrt(c),p=(a*a-s*s+Hu*c)/(2*s*Pu*h),d=(a*a-s*s-Hu*c)/(2*a*Pu*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-v,y=(g||Math.log(a/s))/Du;return n.duration=1e3*y,n},Jo.behavior.zoom=function(){function e(e){e.on(k,f).on(Fu+".zoom",h).on(L,d).on("dblclick.zoom",v).on(O,l)}function t(e){return[(e[0]-T.x)/T.k,(e[1]-T.y)/T.k]}function n(e){return[e[0]*T.k+T.x,e[1]*T.k+T.y]}function r(e){T.k=Math.max(C[0],Math.min(C[1],e))}function i(e,t){t=n(t),T.x+=e[0]-t[0],T.y+=e[1]-t[1]}function s(){E&&E.domain(w.range().map(function(e){return(e-T.x)/T.k}).map(w.invert)),x&&x.domain(S.range().map(function(e){return(e-T.y)/T.k}).map(S.invert))}function o(e){e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:T.k,translate:[T.x,T.y]})}function a(e){e({type:"zoomend"})}function f(){function e(){l=1,i(Jo.mouse(r),h),u(s)}function n(){c.on(L,Zo===r?d:null).on(A,null),p(l&&Jo.event.target===f),a(s)}var r=this,s=_.of(r,arguments),f=Jo.event.target,l=0,c=Jo.select(Zo).on(L,e).on(A,n),h=t(Jo.mouse(r)),p=H();M.call(r),o(s)}function l(){function e(){var e=Jo.touches(d);return p=T.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=t(e))}),e}function n(){for(var t=Jo.event.changedTouches,n=0,s=t.length;s>n;++n)m[t[n].identifier]=null;var o=e(),a=Date.now();if(1===o.length){if(500>a-b){var f=o[0],l=m[f.identifier];r(2*T.k),i(f,l),c(),u(v)}b=a}else if(o.length>1){var f=o[0],h=o[1],p=f[0]-h[0],d=f[1]-h[1];g=p*p+d*d}}function s(){for(var e,t,n,s,o=Jo.touches(d),a=0,f=o.length;f>a;++a,s=null)if(n=o[a],s=m[n.identifier]){if(t)break;e=n,t=s}if(s){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=g&&Math.sqrt(l/g);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+s[0])/2,(t[1]+s[1])/2],r(c*p)}b=null,i(e,t),u(v)}function h(){if(Jo.event.touches.length){for(var t=Jo.event.changedTouches,n=0,r=t.length;r>n;++n)delete m[t[n].identifier];for(var i in m)return void e()}S.on(w,null).on(E,null),x.on(k,f).on(O,l),N(),a(v)}var p,d=this,v=_.of(d,arguments),m={},g=0,y=Jo.event.changedTouches[0].identifier,w="touchmove.zoom-"+y,E="touchend.zoom-"+y,S=Jo.select(Zo).on(w,s).on(E,h),x=Jo.select(d).on(k,null).on(O,n),N=H();M.call(d),n(),o(v)}function h(){var e=_.of(this,arguments);y?clearTimeout(y):(M.call(this),o(e)),y=setTimeout(function(){y=null,a(e)},50),c();var n=g||Jo.mouse(this);m||(m=t(n)),r(Math.pow(2,.002*Bu())*T.k),i(n,m),u(e)}function d(){m=null}function v(){var e=_.of(this,arguments),n=Jo.mouse(this),s=t(n),f=Math.log(T.k)/Math.LN2;o(e),r(Math.pow(2,Jo.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)),i(n,s),u(e),a(e)}var m,g,y,b,w,E,S,x,T={x:0,y:0,k:1},N=[960,500],C=ju,k="mousedown.zoom",L="mousemove.zoom",A="mouseup.zoom",O="touchstart.zoom",_=p(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=_.of(this,arguments),t=T;Cf?Jo.select(this).transition().each("start.zoom",function(){T=this.__chart__||{x:0,y:0,k:1},o(e)}).tween("zoom:zoom",function(){var n=N[0],r=N[1],i=n/2,s=r/2,o=Jo.interpolateZoom([(i-T.x)/T.k,(s-T.y)/T.k,n/T.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),a=n/r[2];this.__chart__=T={x:i-r[0]*a,y:s-r[1]*a,k:a},u(e)}}).each("end.zoom",function(){a(e)}):(this.__chart__=T,o(e),u(e),a(e))})},e.translate=function(t){return arguments.length?(T={x:+t[0],y:+t[1],k:T.k},s(),e):[T.x,T.y]},e.scale=function(t){return arguments.length?(T={x:T.x,y:T.y,k:+t},s(),e):T.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?ju:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(g=t&&[+t[0],+t[1]],e):g},e.size=function(t){return arguments.length?(N=t&&[+t[0],+t[1]],e):N},e.x=function(t){return arguments.length?(E=t,w=t.copy(),T={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(x=t,S=t.copy(),T={x:0,y:0,k:1},e):x},Jo.rebind(e,_,"on")};var Bu,ju=[0,1/0],Fu="onwheel"in Go?(Bu=function(){return-Jo.event.deltaY*(Jo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Go?(Bu=function(){return Jo.event.wheelDelta},"mousewheel"):(Bu=function(){return-Jo.event.detail},"MozMousePixelScroll");W.prototype.toString=function(){return this.rgb()+""},Jo.hsl=function(e,t,n){return 1===arguments.length?e instanceof V?X(e.h,e.s,e.l):ft(""+e,lt,X):X(+e,+t,+n)};var Iu=V.prototype=new W;Iu.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),X(this.h,this.s,this.l/e)},Iu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),X(this.h,this.s,e*this.l)},Iu.rgb=function(){return $(this.h,this.s,this.l)},Jo.hcl=function(e,t,n){return 1===arguments.length?e instanceof K?J(e.h,e.c,e.l):e instanceof Y?et(e.l,e.a,e.b):et((e=ct((e=Jo.rgb(e)).r,e.g,e.b)).l,e.a,e.b):J(+e,+t,+n)};var qu=K.prototype=new W;qu.brighter=function(e){return J(this.h,this.c,Math.min(100,this.l+Ru*(arguments.length?e:1)))},qu.darker=function(e){return J(this.h,this.c,Math.max(0,this.l-Ru*(arguments.length?e:1)))},qu.rgb=function(){return Q(this.h,this.c,this.l).rgb()},Jo.lab=function(e,t,n){return 1===arguments.length?e instanceof Y?G(e.l,e.a,e.b):e instanceof K?Q(e.l,e.c,e.h):ct((e=Jo.rgb(e)).r,e.g,e.b):G(+e,+t,+n)};var Ru=18,Uu=.95047,zu=1,Wu=1.08883,Xu=Y.prototype=new W;Xu.brighter=function(e){return G(Math.min(100,this.l+Ru*(arguments.length?e:1)),this.a,this.b)},Xu.darker=function(e){return G(Math.max(0,this.l-Ru*(arguments.length?e:1)),this.a,this.b)},Xu.rgb=function(){return Z(this.l,this.a,this.b)},Jo.rgb=function(e,t,n){return 1===arguments.length?e instanceof ut?ot(e.r,e.g,e.b):ft(""+e,ot,$):ot(~~e,~~t,~~n)};var Vu=ut.prototype=new W;Vu.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),ot(Math.min(255,~~(t/e)),Math.min(255,~~(n/e)),Math.min(255,~~(r/e)))):ot(i,i,i)},Vu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),ot(~~(e*this.r),~~(e*this.g),~~(e*this.b))},Vu.hsl=function(){return lt(this.r,this.g,this.b)},Vu.toString=function(){return"#"+at(this.r)+at(this.g)+at(this.b)};var $u=Jo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$u.forEach(function(e,t){$u.set(e,it(t))}),Jo.functor=dt,Jo.xhr=mt(vt),Jo.dsv=function(e,t){function n(e,n,s){arguments.length<3&&(s=n,n=null);var o=Jo.xhr(e,t,s);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o.row(n)}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(u).join(e)}function u(e){return a.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var a=new RegExp('["'+e+"\n]"),f=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(l>=a)return o;if(i)return i=!1,s;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<a;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}l=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++l):10===r&&(i=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;a>l;){var r=e.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(l)&&(++l,++u);else if(r!==f)continue;return e.substring(t,l-u)}return e.substring(t)}for(var r,i,s={},o={},u=[],a=e.length,l=0,c=0;(r=n())!==o;){for(var h=[];r!==s&&r!==o;)h.push(r),r=n();(!t||(h=t(h,c++)))&&u.push(h)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new s,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(u).join(e)].concat(t.map(function(t){return i.map(function(e){return u(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n},Jo.csv=Jo.dsv(",","text/csv"),Jo.tsv=Jo.dsv("	","text/tab-separated-values");var Ju,Ku,Qu,Gu,Yu,Zu=Zo[u(Zo,"requestAnimationFrame")]||function(e){setTimeout(e,17)};Jo.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};Ku?Ku.n=s:Ju=s,Ku=s,Qu||(Gu=clearTimeout(Gu),Qu=1,Zu(bt))},Jo.timer.flush=function(){wt(),Et()};var ea=".",ta=",",na=[3,3],ra="$",ia=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(St);Jo.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=Jo.round(e,xt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),ia[8+n/3]},Jo.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},Jo.format=function(e){var t=sa.exec(e),n=t[1]||" ",r=t[2]||">",i=t[3]||"",s=t[4]||"",o=t[5],u=+t[6],a=t[7],f=t[8],l=t[9],c=1,h="",p=!1;switch(f&&(f=+f.substring(1)),(o||"0"===n&&"="===r)&&(o=n="0",r="=",a&&(u-=Math.floor((u-1)/4))),l){case"n":a=!0,l="g";break;case"%":c=100,h="%",l="f";break;case"p":c=100,h="%",l="r";break;case"b":case"o":case"x":case"X":"#"===s&&(s="0"+l.toLowerCase());case"c":case"d":p=!0,f=0;break;case"s":c=-1,l="r"}"#"===s?s="":"$"===s&&(s=ra),"r"!=l||f||(l="g"),null!=f&&("g"==l?f=Math.max(1,Math.min(21,f)):("e"==l||"f"==l)&&(f=Math.max(0,Math.min(20,f)))),l=oa.get(l)||Tt;var d=o&&a;return function(e){if(p&&e%1)return"";var t=0>e||0===e&&0>1/e?(e=-e,"-"):i;if(0>c){var v=Jo.formatPrefix(e,f);e=v.scale(e),h=v.symbol}else e*=c;e=l(e,f);var m=e.lastIndexOf("."),g=0>m?e:e.substring(0,m),y=0>m?"":ea+e.substring(m+1);!o&&a&&(g=ua(g));var b=s.length+g.length+y.length+(d?0:t.length),w=u>b?(new Array(b=u-b+1)).join(n):"";return d&&(g=ua(w+g)),t+=s,e=g+y,("<"===r?t+e+w:">"===r?w+t+e:"^"===r?w.substring(0,b>>=1)+t+e+w.substring(b):t+(d?e:w+e))+h}};var sa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,oa=Jo.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=Jo.round(e,xt(e,t))).toFixed(Math.max(0,Math.min(20,xt(e*(1+1e-15),t))))}}),ua=vt;if(na){var aa=na.length;ua=function(e){for(var t=e.length,n=[],r=0,i=na[0];t>0&&i>0;)n.push(e.substring(t-=i,t+i)),i=na[r=(r+1)%aa];return n.reverse().join(ta)}}Jo.geo={},Nt.prototype={s:0,t:0,add:function(e){Ct(e,this.t,fa),Ct(fa.s,this.s,this),this.s?this.t+=fa.t:this.s=fa.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var fa=new Nt;Jo.geo.stream=function(e,t){e&&la.hasOwnProperty(e.type)?la[e.type](e,t):kt(e,t)};var la={Feature:function(e,t){kt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)kt(n[r].geometry,t)}},ca={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Lt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Lt(n[r],t,0)},Polygon:function(e,t){At(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)At(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)kt(n[r],t)}};Jo.geo.area=function(e){return ha=0,Jo.geo.stream(e,da),ha};var ha,pa=new Nt,da={sphere:function(){ha+=4*Cu},point:a,lineStart:a,lineEnd:a,polygonStart:function(){pa.reset(),da.lineStart=Ot},polygonEnd:function(){var e=2*pa;ha+=0>e?4*Cu+e:e,da.lineStart=da.lineEnd=da.point=a}};Jo.geo.bounds=function(){function e(e,t){b.push(w=[l=e,h=e]),c>t&&(c=t),t>p&&(p=t)}function t(t,n){var r=Mt([t*Mu,n*Mu]);if(g){var i=Dt(g,r),s=[i[1],-i[0],0],o=Dt(s,i);Bt(o),o=jt(o);var a=t-d,f=a>0?1:-1,v=o[0]*_u*f,m=au(a)>180;if(m^(v>f*d&&f*t>v)){var y=o[1]*_u;y>p&&(p=y)}else if(v=(v+360)%360-180,m^(v>f*d&&f*t>v)){var y=-o[1]*_u;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?d>t?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t)}else e(t,n);g=r,d=t}function n(){E.point=t}function r(){w[0]=l,w[1]=h,E.point=e,g=null}function i(e,n){if(g){var r=e-d;y+=au(r)>180?r+(r>0?360:-360):r}else v=e,m=n;da.point(e,n),t(e,n)}function s(){da.lineStart()}function o(){i(v,m),da.lineEnd(),au(y)>Au&&(l=-(h=180)),w[0]=l,w[1]=h,g=null}function u(e,t){return(t-=e)<0?t+360:t}function a(e,t){return e[0]-t[0]}function f(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var l,c,h,p,d,v,m,g,y,b,w,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=s,E.lineEnd=o,y=0,da.polygonStart()},polygonEnd:function(){da.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,0>pa?(l=-(h=180),c=-(p=90)):y>Au?p=90:-Au>y&&(c=-90),w[0]=l,w[1]=h}};return function(e){p=h=-(l=c=1/0),b=[],Jo.geo.stream(e,E);var t=b.length;if(t){b.sort(a);for(var n,r=1,i=b[0],s=[i];t>r;++r)n=b[r],f(n[0],i)||f(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):s.push(i=n);for(var o,n,d=-1/0,t=s.length-1,r=0,i=s[t];t>=r;i=n,++r)n=s[r],(o=u(i[1],n[0]))>d&&(d=o,l=n[0],h=i[1])}return b=w=null,1/0===l||1/0===c?[[0/0,0/0],[0/0,0/0]]:[[l,c],[h,p]]}}(),Jo.geo.centroid=function(e){va=ma=ga=ya=ba=wa=Ea=Sa=xa=Ta=Na=0,Jo.geo.stream(e,Ca);var t=xa,n=Ta,r=Na,i=t*t+n*n+r*r;return Ou>i&&(t=wa,n=Ea,r=Sa,Au>ma&&(t=ga,n=ya,r=ba),i=t*t+n*n+r*r,Ou>i)?[0/0,0/0]:[Math.atan2(n,t)*_u,I(r/Math.sqrt(i))*_u]};var va,ma,ga,ya,ba,wa,Ea,Sa,xa,Ta,Na,Ca={sphere:a,point:It,lineStart:Rt,lineEnd:Ut,polygonStart:function(){Ca.lineStart=zt},polygonEnd:function(){Ca.lineStart=Rt}},ka=Jt(Wt,Zt,tn,[-Cu,-Cu/2]),La=1e9;Jo.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=sn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(Jo.geo.conicEqualArea=function(){return un(an)}).raw=an,Jo.geo.albers=function(){return Jo.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},Jo.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return t=null,n(s,o),t||(r(s,o),t)||i(s,o),t}var t,n,r,i,s=Jo.geo.albers(),o=Jo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Jo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-0.425&&-0.214>r?o:i>=.166&&.234>i&&r>=-0.214&&-0.115>r?u:s).invert(e)},e.stream=function(e){var t=s.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),e):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(t){if(!arguments.length)return s.translate();var f=s.scale(),l=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[l-.455*f,c-.238*f],[l+.455*f,c+.238*f]]).stream(a).point,r=o.translate([l-.307*f,c+.201*f]).clipExtent([[l-.425*f+Au,c+.12*f+Au],[l-.214*f-Au,c+.234*f-Au]]).stream(a).point,i=u.translate([l-.205*f,c+.212*f]).clipExtent([[l-.214*f+Au,c+.166*f+Au],[l-.115*f-Au,c+.234*f-Au]]).stream(a).point,e},e.scale(1070)};var Aa,Oa,Ma,_a,Da,Pa,Ha={point:a,lineStart:a,lineEnd:a,polygonStart:function(){Oa=0,Ha.lineStart=fn},polygonEnd:function(){Ha.lineStart=Ha.lineEnd=Ha.point=a,Aa+=au(Oa/2)}},Ba={point:ln,lineStart:a,lineEnd:a,polygonStart:a,polygonEnd:a},ja={point:pn,lineStart:dn,lineEnd:vn,polygonStart:function(){ja.lineStart=mn},polygonEnd:function(){ja.point=pn,ja.lineStart=dn,ja.lineEnd=vn}};Jo.geo.path=function(){function e(e){return e&&("function"==typeof u&&s.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(s)),Jo.geo.stream(e,o)),s.result()}function t(){return o=null,e}var n,r,i,s,o,u=4.5;return e.area=function(e){return Aa=0,Jo.geo.stream(e,i(Ha)),Aa},e.centroid=function(e){return ga=ya=ba=wa=Ea=Sa=xa=Ta=Na=0,Jo.geo.stream(e,i(ja)),Na?[xa/Na,Ta/Na]:Sa?[wa/Sa,Ea/Sa]:ba?[ga/ba,ya/ba]:[0/0,0/0]},e.bounds=function(e){return Da=Pa=-(Ma=_a=1/0),Jo.geo.stream(e,i(Ba)),[[Ma,_a],[Da,Pa]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||bn(e):vt,t()):n},e.context=function(e){return arguments.length?(s=null==(r=e)?new cn:new gn(e),"function"!=typeof u&&s.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(s.pointRadius(+t),+t),e):u},e.projection(Jo.geo.albersUsa()).context(null)},Jo.geo.transform=function(e){return{stream:function(t){var n=new wn(t);for(var r in e)n[r]=e[r];return n}}},wn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Jo.geo.projection=Sn,Jo.geo.projectionMutator=xn,(Jo.geo.equirectangular=function(){return Sn(Nn)}).raw=Nn.invert=Nn,Jo.geo.rotation=function(e){function t(t){return t=e(t[0]*Mu,t[1]*Mu),t[0]*=_u,t[1]*=_u,t}return e=kn(e[0]%360*Mu,e[1]*Mu,e.length>2?e[2]*Mu:0),t.invert=function(t){return t=e.invert(t[0]*Mu,t[1]*Mu),t[0]*=_u,t[1]*=_u,t},t},Cn.invert=Nn,Jo.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=kn(-e[0]*Mu,-e[1]*Mu,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=_u,e[1]*=_u}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=Mn((t=+r)*Mu,i*Mu),e):t},e.precision=function(r){return arguments.length?(n=Mn(t*Mu,(i=+r)*Mu),e):i},e.angle(90)},Jo.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Mu,i=e[1]*Mu,s=t[1]*Mu,o=Math.sin(r),u=Math.cos(r),a=Math.sin(i),f=Math.cos(i),l=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((n=c*o)*n+(n=f*l-a*c*u)*n),a*l+f*c*u)},Jo.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Jo.range(Math.ceil(s/m)*m,i,m).map(h).concat(Jo.range(Math.ceil(f/g)*g,a,g).map(p)).concat(Jo.range(Math.ceil(r/d)*d,n,d).filter(function(e){return au(e%m)>Au}).map(l)).concat(Jo.range(Math.ceil(u/v)*v,o,v).filter(function(e){return au(e%g)>Au}).map(c))}var n,r,i,s,o,u,a,f,l,c,h,p,d=10,v=d,m=90,g=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(p(a).slice(1),h(i).reverse().slice(1),p(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],f=+t[0][1],a=+t[1][1],s>i&&(t=s,s=i,i=t),f>a&&(t=f,f=a,a=t),e.precision(y)):[[s,f],[i,a]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.minorStep=function(t){return arguments.length?(d=+t[0],v=+t[1],e):[d,v]},e.precision=function(t){return arguments.length?(y=+t,l=Dn(u,o,90),c=Pn(r,n,y),h=Dn(f,a,90),p=Pn(s,i,y),e):y},e.majorExtent([[-180,-90+Au],[180,90-Au]]).minorExtent([[-180,-80-Au],[180,80+Au]])},Jo.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=Hn,i=Bn;return e.distance=function(){return Jo.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},Jo.geo.interpolate=function(e,t){return jn(e[0]*Mu,e[1]*Mu,t[0]*Mu,t[1]*Mu)},Jo.geo.length=function(e){return Fa=0,Jo.geo.stream(e,Ia),Fa};var Fa,Ia={sphere:a,point:a,lineStart:Fn,lineEnd:a,polygonStart:a,polygonEnd:a},qa=In(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(Jo.geo.azimuthalEqualArea=function(){return Sn(qa)}).raw=qa;var Ra=In(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},vt);(Jo.geo.azimuthalEquidistant=function(){return Sn(Ra)}).raw=Ra,(Jo.geo.conicConformal=function(){return un(qn)}).raw=qn,(Jo.geo.conicEquidistant=function(){return un(Rn)}).raw=Rn;var Ua=In(function(e){return 1/e},Math.atan);(Jo.geo.gnomonic=function(){return Sn(Ua)}).raw=Ua,Un.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Lu]},(Jo.geo.mercator=function(){return zn(Un)}).raw=Un;var za=In(function(){return 1},Math.asin);(Jo.geo.orthographic=function(){return Sn(za)}).raw=za;var Wa=In(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(Jo.geo.stereographic=function(){return Sn(Wa)}).raw=Wa,Wn.invert=function(e,t){return[Math.atan2(q(e),Math.cos(t)),I(Math.sin(t)/R(e))]},(Jo.geo.transverseMercator=function(){return zn(Wn)}).raw=Wn,Jo.geom={},Jo.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i,s,o,u,a,f,l,c,h,p,d,v=dt(n),m=dt(r),g=e.length,y=g-1,b=[],w=[],E=0;if(v===Xn&&r===Vn)t=e;else for(s=0,t=[];g>s;++s)t.push([+v.call(this,i=e[s],s),+m.call(this,i,s)]);for(s=1;g>s;++s)(t[s][1]<t[E][1]||t[s][1]==t[E][1]&&t[s][0]<t[E][0])&&(E=s);for(s=0;g>s;++s)s!==E&&(a=t[s][1]-t[E][1],u=t[s][0]-t[E][0],b.push({angle:Math.atan2(a,u),index:s}));for(b.sort(function(e,t){return e.angle-t.angle}),p=b[0].angle,h=b[0].index,c=0,s=1;y>s;++s){if(o=b[s].index,p==b[s].angle){if(u=t[h][0]-t[E][0],a=t[h][1]-t[E][1],f=t[o][0]-t[E][0],l=t[o][1]-t[E][1],u*u+a*a>=f*f+l*l){b[s].index=-1;continue}b[c].index=-1}p=b[s].angle,c=s,h=o}for(w.push(E),s=0,o=0;2>s;++o)b[o].index>-1&&(w.push(b[o].index),s++);for(d=w.length;y>o;++o)if(!(b[o].index<0)){for(;!$n(w[d-2],w[d-1],b[o].index,t);)--d;w[d++]=b[o].index}var S=[];for(s=d-1;s>=0;--s)S.push(e[w[s]]);return S}var n=Xn,r=Vn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},Jo.geom.polygon=function(e){return pu(e,Xa),e};var Xa=Jo.geom.polygon.prototype=[];Xa.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},Xa.centroid=function(e){var t,n,r=-1,i=this.length,s=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],s+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[s*e,o*e]},Xa.clip=function(e){for(var t,n,r,i,s,o,u=Qn(e),a=-1,f=this.length-Qn(this),l=this[f-1];++a<f;){for(t=e.slice(),e.length=0,i=this[a],s=t[(r=t.length-u)-1],n=-1;++n<r;)o=t[n],Jn(o,l,i)?(Jn(s,l,i)||e.push(Kn(s,o,l,i)),e.push(o)):Jn(s,l,i)&&e.push(Kn(s,o,l,i)),s=o;u&&e.push(e[0]),l=i}return e};var Va,$a,Ja,Ka,Qa,Ga=[],Ya=[];ir.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(or),t.length},mr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},gr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Er(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(br(this,n),e=n,n=e.U),n.C=!1,r.C=!0,wr(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(wr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,br(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,o=e.R;if(n=s?o?Er(o):s:o,i?i.L===e?i.L=n:i.R=n:this._=n,s&&o?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return e.C=!1,void 0;do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,br(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,wr(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,br(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,wr(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,br(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,wr(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},Jo.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=u[0][0],i=u[0][1],s=u[1][0],o=u[1][1];return Sr(n(e),u).cells.forEach(function(n,u){var a=n.edges,f=n.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=r&&f.x<=s&&f.y>=i&&f.y<=o?[[r,o],[s,o],[s,i],[r,i]]:[];l.point=e[u]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(s(e,t)/Au)*Au,y:Math.round(o(e,t)/Au)*Au,i:t}})}var r=Xn,i=Vn,s=r,o=i,u=Za;return e?t(e):(t.links=function(e){return Sr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return Sr(n(e)).cells.forEach(function(n,r){for(var i,s,o=n.site,u=n.edges.sort(or),a=-1,f=u.length,l=u[f-1].edge,c=l.l===o?l.r:l.l;++a<f;)i=l,s=c,l=u[a].edge,c=l.l===o?l.r:l.l,r<s.i&&r<c.i&&Tr(o,s,c)<0&&t.push([e[r],e[s.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(s=dt(r=e),t):r},t.y=function(e){return arguments.length?(o=dt(i=e),t):i},t.clipExtent=function(e){return arguments.length?(u=null==e?Za:e,t):u===Za?null:u},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):u===Za?null:u&&u[1]},t)};var Za=[[-1e6,-1e6],[1e6,1e6]];Jo.geom.delaunay=function(e){return Jo.geom.voronoi().triangles(e)},Jo.geom.quadtree=function(e,t,n,r,i){function s(e){function s(e,t,n,r,i,s,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var a=e.x,l=e.y;if(null!=a)if(au(a-n)+au(l-r)<.01)f(e,t,n,r,i,s,o,u);else{var c=e.point;e.x=e.y=e.point=null,f(e,c,a,l,i,s,o,u),f(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else f(e,t,n,r,i,s,o,u)}function f(e,t,n,r,i,o,u,a){var f=.5*(i+u),l=.5*(o+a),c=n>=f,h=r>=l,p=(h<<1)+c;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=kr()),c?i=f:u=f,h?o=l:a=l,s(e,t,n,r,i,o,u,a)}var l,c,h,p,d,v,m,g,y,b=dt(u),w=dt(a);if(null!=t)v=t,m=n,g=r,y=i;else if(g=y=-(v=m=1/0),c=[],h=[],d=e.length,o)for(p=0;d>p;++p)l=e[p],l.x<v&&(v=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>y&&(y=l.y),c.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var E=+b(l=e[p],p),S=+w(l,p);v>E&&(v=E),m>S&&(m=S),E>g&&(g=E),S>y&&(y=S),c.push(E),h.push(S)}var x=g-v,T=y-m;x>T?y=m+x:g=v+T;var N=kr();if(N.add=function(e){s(N,e,+b(e,++p),+w(e,p),v,m,g,y)},N.visit=function(e){Lr(e,N,v,m,g,y)},p=-1,null==t){for(;++p<d;)s(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=l=null,N}var o,u=Xn,a=Vn;return(o=arguments.length)?(u=Nr,a=Cr,3===o&&(i=n,r=t,n=t=0),s(e)):(s.x=function(e){return arguments.length?(u=e,s):u},s.y=function(e){return arguments.length?(a=e,s):a},s.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[r,i]]},s.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),s):null==t?null:[r-t,i-n]},s)},Jo.interpolateRgb=Ar,Jo.interpolateObject=Or,Jo.interpolateNumber=Mr,Jo.interpolateString=_r;var ef=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;Jo.interpolate=Dr,Jo.interpolators=[function(e,t){var n=typeof t;return("string"===n?$u.has(t)||/^(#|rgb\(|hsl\()/.test(t)?Ar:_r:t instanceof W?Ar:"object"===n?Array.isArray(t)?Pr:Or:Mr)(e,t)}],Jo.interpolateArray=Pr;var tf=function(){return vt},nf=Jo.map({linear:tf,poly:Rr,quad:function(){return Fr},cubic:function(){return Ir},sin:function(){return Ur},exp:function(){return zr},circle:function(){return Wr},elastic:Xr,back:Vr,bounce:function(){return $r}}),rf=Jo.map({"in":vt,out:Br,"in-out":jr,"out-in":function(e){return jr(Br(e))}});Jo.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return n=nf.get(n)||tf,r=rf.get(r)||vt,Hr(r(n.apply(null,Ko.call(arguments,1))))},Jo.interpolateHcl=Jr,Jo.interpolateHsl=Kr,Jo.interpolateLab=Qr,Jo.interpolateRound=Gr,Jo.transform=function(e){var t=Go.createElementNS(Jo.ns.prefix.svg,"g");return(Jo.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Yr(n?n.matrix:sf)})(e)},Yr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sf={a:1,b:0,c:0,d:1,e:0,f:0};Jo.interpolateTransform=ni,Jo.layout={},Jo.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(si(e[n]));return t}},Jo.layout.chord=function(){function e(){var e,f,c,h,p,d={},v=[],m=Jo.range(s),g=[];for(n=[],r=[],e=0,h=-1;++h<s;){for(f=0,p=-1;++p<s;)f+=i[h][p];v.push(f),g.push(Jo.range(s)),e+=f}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),u&&g.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})}),e=(ku-l*s)/e,f=0,h=-1;++h<s;){for(c=f,p=-1;++p<s;){var y=m[h],b=g[y][p],w=i[y][b],E=f,S=f+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}r[y]={index:y,startAngle:c,endAngle:f,value:(f-c)/e},f+=l}for(h=-1;++h<s;)for(p=h-1;++p<s;){var x=d[h+"-"+p],T=d[p+"-"+h];(x.value||T.value)&&n.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}a&&t()}function t(){n.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,s,o,u,a,f={},l=0;return f.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,f):i},f.padding=function(e){return arguments.length?(l=e,n=r=null,f):l},f.sortGroups=function(e){return arguments.length?(o=e,n=r=null,f):o},f.sortSubgroups=function(e){return arguments.length?(u=e,n=null,f):u},f.sortChords=function(e){return arguments.length?(a=e,n&&t(),f):a},f.chords=function(){return n||e(),n},f.groups=function(){return r||e(),r},f},Jo.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=1/Math.sqrt(s*s+o*o);if(v>(i-n)*u){var a=t.charge*u*u;return e.px-=s*a,e.py-=o*a,!0}if(t.point&&isFinite(u)){var a=t.pointCharge*u*u;e.px-=s*a,e.py-=o*a}}return!t.charge}}function t(e){e.px=Jo.event.x,e.py=Jo.event.y,u.resume()}var n,r,i,s,o,u={},a=Jo.dispatch("start","tick","end"),f=[1,1],l=.9,c=of,h=uf,p=-30,d=.1,v=.8,m=[],g=[];return u.tick=function(){if((r*=.99)<.005)return a.end({type:"end",alpha:r=0}),!0;var t,n,u,c,h,v,y,b,w,E=m.length,S=g.length;for(n=0;S>n;++n)u=g[n],c=u.source,h=u.target,b=h.x-c.x,w=h.y-c.y,(v=b*b+w*w)&&(v=r*s[n]*((v=Math.sqrt(v))-i[n])/v,b*=v,w*=v,h.x-=b*(y=c.weight/(h.weight+c.weight)),h.y-=w*y,c.x+=b*(y=1-y),c.y+=w*y);if((y=r*d)&&(b=f[0]/2,w=f[1]/2,n=-1,y))for(;++n<E;)u=m[n],u.x+=(b-u.x)*y,u.y+=(w-u.y)*y;if(p)for(hi(t=Jo.geom.quadtree(m),r,o),n=-1;++n<E;)(u=m[n]).fixed||t.visit(e(u));for(n=-1;++n<E;)u=m[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);a.tick({type:"tick",alpha:r})},u.nodes=function(e){return arguments.length?(m=e,u):m},u.links=function(e){return arguments.length?(g=e,u):g},u.size=function(e){return arguments.length?(f=e,u):f},u.linkDistance=function(e){return arguments.length?(c="function"==typeof e?e:+e,u):c},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.friction=function(e){return arguments.length?(l=+e,u):l},u.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.gravity=function(e){return arguments.length?(d=+e,u):d},u.theta=function(e){return arguments.length?(v=+e,u):v},u.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(a.start({type:"start",alpha:r=e}),Jo.timer(u.tick)),u):r},u.start=function(){function e(e,r){if(!n){for(n=new Array(a),u=0;a>u;++u)n[u]=[];for(u=0;f>u;++u){var i=g[u];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var s,o=n[t],u=-1,f=o.length;++u<f;)if(!isNaN(s=o[u][e]))return s;return Math.random()*r}var t,n,r,a=m.length,l=g.length,d=f[0],v=f[1];for(t=0;a>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=g[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;a>t;++t)r=m[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof c)for(t=0;l>t;++t)i[t]=+c.call(this,g[t],t);else for(t=0;l>t;++t)i[t]=c;if(s=[],"function"==typeof h)for(t=0;l>t;++t)s[t]=+h.call(this,g[t],t);else for(t=0;l>t;++t)s[t]=h;if(o=[],"function"==typeof p)for(t=0;a>t;++t)o[t]=+p.call(this,m[t],t);else for(t=0;a>t;++t)o[t]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=Jo.behavior.drag().origin(vt).on("dragstart.force",ai).on("drag.force",t).on("dragend.force",fi)),arguments.length?(this.on("mouseover.force",li).on("mouseout.force",ci).call(n),void 0):n},Jo.rebind(u,a,"on")};var of=20,uf=1;Jo.layout.hierarchy=function(){function e(t,o,u){var a=i.call(n,t,o);if(t.depth=o,u.push(t),a&&(f=a.length)){for(var f,l,c=-1,h=t.children=new Array(f),p=0,d=o+1;++c<f;)l=h[c]=e(a[c],d,u),l.parent=t,p+=l.value;r&&h.sort(r),s&&(t.value=p)}else delete t.children,s&&(t.value=+s.call(n,t,o)||0);return t}function t(e,r){var i=e.children,o=0;if(i&&(u=i.length))for(var u,a=-1,f=r+1;++a<u;)o+=t(i[a],f);else s&&(o=+s.call(n,e,r)||0);return s&&(e.value=o),o}function n(t){var n=[];return e(t,0,n),n}var r=mi,i=di,s=vi;return n.sort=function(e){return arguments.length?(r=e,n):r},n.children=function(e){return arguments.length?(i=e,n):i},n.value=function(e){return arguments.length?(s=e,n):s},n.revalue=function(e){return t(e,0),e},n},Jo.layout.partition=function(){function e(t,n,r,i){var s=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,s&&(o=s.length)){var o,u,a,f=-1;for(r=t.value?r/t.value:0;++f<o;)e(u=s[f],n,a=u.value*r,i),n+=a}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,s=-1;++s<i;)r=Math.max(r,t(n[s]));return 1+r}function n(n,s){var o=r.call(this,n,s);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=Jo.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},pi(n,r)},Jo.layout.pie=function(){function e(s){var o=s.map(function(n,r){return+t.call(e,n,r)}),u=+("function"==typeof r?r.apply(this,arguments):r),a=(("function"==typeof i?i.apply(this,arguments):i)-u)/Jo.sum(o),f=Jo.range(s.length);null!=n&&f.sort(n===af?function(e,t){return o[t]-o[e]}:function(e,t){return n(s[e],s[t])});var l=[];return f.forEach(function(e){var t;l[e]={data:s[e],value:t=o[e],startAngle:u,endAngle:u+=t*a}}),l}var t=Number,n=af,r=0,i=ku;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e};var af={};Jo.layout.stack=function(){function e(u,a){var f=u.map(function(n,r){return t.call(e,n,r)}),l=f.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),o.call(e,t,n)]})}),c=n.call(e,l,a);f=Jo.permute(f,c),l=Jo.permute(l,c);var h,p,d,v=r.call(e,l,a),m=f.length,g=f[0].length;for(p=0;g>p;++p)for(i.call(e,f[0][p],d=v[p],l[0][p][1]),h=1;m>h;++h)i.call(e,f[h][p],d+=l[h-1][p][1],l[h][p][1]);return u}var t=vt,n=Ei,r=Si,i=wi,s=yi,o=bi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:ff.get(t)||Ei,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:lf.get(t)||Si,e):r},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var ff=Jo.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(xi),s=e.map(Ti),o=Jo.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(t=0;r>t;++t)n=o[t],a>u?(u+=s[n],f.push(n)):(a+=s[n],l.push(n));return l.reverse().concat(f)},reverse:function(e){return Jo.range(e.length).reverse()},"default":Ei}),lf=Jo.map({silhouette:function(e){var t,n,r,i=e.length,s=e[0].length,o=[],u=0,a=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;s>n;++n)a[n]=(u-o[n])/2;return a},wiggle:function(e){var t,n,r,i,s,o,u,a,f,l=e.length,c=e[0],h=c.length,p=[];for(p[0]=a=f=0,n=1;h>n;++n){for(t=0,i=0;l>t;++t)i+=e[t][n][1];for(t=0,s=0,u=c[n][0]-c[n-1][0];l>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;s+=o*e[t][n][1]}p[n]=a-=i?s/i*u:0,f>a&&(f=a)}for(n=0;h>n;++n)p[n]-=f;return p},expand:function(e){var t,n,r,i=e.length,s=e[0].length,o=1/i,u=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;s>n;++n)u[n]=0;return u},zero:Si});Jo.layout.histogram=function(){function e(e,s){for(var o,u,a=[],f=e.map(n,this),l=r.call(this,f,s),c=i.call(this,l,f,s),s=-1,h=f.length,p=c.length-1,d=t?1:1/h;++s<p;)o=a[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(p>0)for(s=-1;++s<h;)u=f[s],u>=l[0]&&u<=l[1]&&(o=a[Jo.bisect(c,u,1,p)-1],o.y+=d,o.push(e[s]));return a}var t=!0,n=Number,r=Li,i=Ci;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=dt(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return ki(e,t)}:dt(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},Jo.layout.tree=function(){function e(e,s){function o(e,t){var r=e.children,i=e._tree;if(r&&(s=r.length)){for(var s,u,f,l=r[0],c=l,h=-1;++h<s;)f=r[h],o(f,u),c=a(f,u,c),u=f;ji(e);var p=.5*(l._tree.prelim+f._tree.prelim);t?(i.prelim=t._tree.prelim+n(e,t),i.mod=i.prelim-p):i.prelim=p}else t&&(i.prelim=t._tree.prelim+n(e,t))}function u(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(r=n.length)){var r,i=-1;for(t+=e._tree.mod;++i<r;)u(n[i],t)}}function a(e,t,r){if(t){for(var i,s=e,o=e,u=t,a=e.parent.children[0],f=s._tree.mod,l=o._tree.mod,c=u._tree.mod,h=a._tree.mod;u=Mi(u),s=Oi(s),u&&s;)a=Oi(a),o=Mi(o),o._tree.ancestor=e,i=u._tree.prelim+c-s._tree.prelim-f+n(u,s),i>0&&(Fi(Ii(u,e,r),e,i),f+=i,l+=i),c+=u._tree.mod,f+=s._tree.mod,h+=a._tree.mod,l+=o._tree.mod;u&&!Mi(o)&&(o._tree.thread=u,o._tree.mod+=c-l),s&&!Oi(a)&&(a._tree.thread=s,a._tree.mod+=f-h,r=e)}return r}var f=t.call(this,e,s),l=f[0];Bi(l,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),o(l),u(l,-l._tree.prelim);var c=_i(l,Pi),h=_i(l,Di),p=_i(l,Hi),d=c.x-n(c,h)/2,v=h.x+n(h,c)/2,m=p.depth||1;return Bi(l,i?function(e){e.x*=r[0],e.y=e.depth*r[1],delete e._tree}:function(e){e.x=(e.x-d)/(v-d)*r[0],e.y=e.depth/m*r[1],delete e._tree}),f}var t=Jo.layout.hierarchy().sort(null).value(null),n=Ai,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},pi(e,t)},Jo.layout.pack=function(){function e(e,s){var o=n.call(this,e,s),u=o[0],a=i[0],f=i[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,Bi(u,function(e){e.r=+l(e.value)}),Bi(u,Wi),r){var c=r*(t?1:Math.max(2*u.r/a,2*u.r/f))/2;Bi(u,function(e){e.r+=c}),Bi(u,Wi),Bi(u,function(e){e.r-=c})}return $i(u,a/2,f/2,t?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t,n=Jo.layout.hierarchy().sort(qi),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},pi(e,n)},Jo.layout.cluster=function(){function e(e,s){var o,u=t.call(this,e,s),a=u[0],f=0;Bi(a,function(e){var t=e.children;t&&t.length?(e.x=Qi(t),e.y=Ki(t)):(e.x=o?f+=n(e,o):0,e.y=0,o=e)});var l=Gi(a),c=Yi(a),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return Bi(a,i?function(e){e.x=(e.x-a.x)*r[0],e.y=(a.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(a.y?e.y/a.y:1))*r[1]}),u}var t=Jo.layout.hierarchy().sort(null).value(null),n=Ai,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},pi(e,t)},Jo.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,s=e.length;++i<s;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var s=n.children;if(s&&s.length){var o,u,a,f=c(n),l=[],h=s.slice(),d=1/0,v="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?1&n.depth?f.dy:f.dx:Math.min(f.dx,f.dy);for(e(h,f.dx*f.dy/n.value),l.area=0;(a=h.length)>0;)l.push(o=h[a-1]),l.area+=o.area,"squarify"!==p||(u=r(l,v))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,v,f,!1),v=Math.min(f.dx,f.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,v,f,!0),l.length=l.area=0),s.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var s,o=c(t),u=r.slice(),a=[];for(e(u,o.dx*o.dy/t.value),a.area=0;s=u.pop();)a.push(s),a.area+=s.area,null!=s.z&&(i(a,s.z?o.dx:o.dy,o,!u.length),a.length=a.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,s=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(s>n&&(s=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*s*d)):1/0}function i(e,t,n,r){var i,s=-1,o=e.length,u=n.x,f=n.y,l=t?a(e.area/t):0;if(t==n.dx){for((r||l>n.dy)&&(l=n.dy);++s<o;)i=e[s],i.x=u,i.y=f,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++s<o;)i=e[s],i.x=u,i.y=f,i.dx=l,f+=i.dy=Math.min(n.y+n.dy-f,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-f,n.x+=l,n.dx-=l}}function s(r){var i=o||u(r),s=i[0];return s.x=0,s.y=0,s.dx=f[0],s.dy=f[1],o&&u.revalue(s),e([s],s.dx*s.dy/s.value),(o?n:t)(s),h&&(o=i),i}var o,u=Jo.layout.hierarchy(),a=Math.round,f=[1,1],l=null,c=Zi,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(f=e,s):f},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?Zi(t):es(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return es(t,e)}if(!arguments.length)return l;var r;return c=null==(l=e)?Zi:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(a=e?Math.round:Number,s):a!=Number},s.sticky=function(e){return arguments.length?(h=e,o=null,s):h},s.ratio=function(e){return arguments.length?(d=e,s):d},s.mode=function(e){return arguments.length?(p=e+"",s):p},pi(s,u)},Jo.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=Jo.random.normal.apply(Jo,arguments);return function(){return Math.exp(e())}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t/e}}},Jo.scale={};var cf={floor:vt,ceil:vt};Jo.scale.linear=function(){return us([0,1],[0,1],Dr,!1)};var hf={s:1,g:1,p:1,r:1,e:1};Jo.scale.log=function(){return vs(Jo.scale.linear().domain([0,1]),10,!0,[1,10])};var pf=Jo.format(".0e"),df={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};Jo.scale.pow=function(){return ms(Jo.scale.linear(),1,[0,1])},Jo.scale.sqrt=function(){return Jo.scale.pow().exponent(.5)},Jo.scale.ordinal=function(){return ys([],{t:"range",a:[[]]})},Jo.scale.category10=function(){return Jo.scale.ordinal().range(vf)},Jo.scale.category20=function(){return Jo.scale.ordinal().range(mf)},Jo.scale.category20b=function(){return Jo.scale.ordinal().range(gf)},Jo.scale.category20c=function(){return Jo.scale.ordinal().range(yf)};var vf=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(st),mf=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(st),gf=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(st),yf=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(st);Jo.scale.quantile=function(){return bs([],[])},Jo.scale.quantize=function(){return ws(0,1,[0,1])},Jo.scale.threshold=function(){return Es([.5],[0,1])},Jo.scale.identity=function(){return Ss([0,1])},Jo.svg={},Jo.svg.arc=function(){function e(){var e=t.apply(this,arguments),s=n.apply(this,arguments),o=r.apply(this,arguments)+bf,u=i.apply(this,arguments)+bf,a=(o>u&&(a=o,o=u,u=a),u-o),f=Cu>a?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=wf?e?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+ -e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":e?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+e*h+","+e*p+"A"+e+","+e+" 0 "+f+",0 "+e*l+","+e*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var t=xs,n=Ts,r=Ns,i=Cs;return e.innerRadius=function(n){return arguments.length?(t=dt(n),e):t},e.outerRadius=function(t){return arguments.length?(n=dt(t),e):n},e.startAngle=function(t){return arguments.length?(r=dt(t),e):r},e.endAngle=function(t){return arguments.length?(i=dt(t),e):i},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,s=(r.apply(this,arguments)+i.apply(this,arguments))/2+bf;return[Math.cos(s)*e,Math.sin(s)*e]},e};var bf=-Lu,wf=ku-Au;Jo.svg.line=function(){return ks(vt)};var Ef=Jo.map({linear:Ls,"linear-closed":As,step:Os,"step-before":Ms,"step-after":_s,basis:Fs,"basis-open":Is,"basis-closed":qs,bundle:Rs,cardinal:Hs,"cardinal-open":Ds,"cardinal-closed":Ps,monotone:$s});Ef.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Sf=[0,2/3,1/3,0],xf=[0,1/3,2/3,0],Tf=[0,1/6,2/3,1/6];Jo.svg.line.radial=function(){var e=ks(Js);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ms.reverse=_s,_s.reverse=Ms,Jo.svg.area=function(){return Ks(vt)},Jo.svg.area.radial=function(){var e=Ks(Js);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},Jo.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)+bf,l=f.call(e,i,r)+bf;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Cu)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=Hn,o=Bn,u=Qs,a=Ns,f=Cs;return e.radius=function(t){return arguments.length?(u=dt(t),e):u},e.source=function(t){return arguments.length?(s=dt(t),e):s},e.target=function(t){return arguments.length?(o=dt(t),e):o},e.startAngle=function(t){return arguments.length?(a=dt(t),e):a},e.endAngle=function(t){return arguments.length?(f=dt(t),e):f},e},Jo.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=Hn,n=Bn,r=Gs;return e.source=function(n){return arguments.length?(t=dt(n),e):t},e.target=function(t){return arguments.length?(n=dt(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},Jo.svg.diagonal.radial=function(){var e=Jo.svg.diagonal(),t=Gs,n=e.projection;return e.projection=function(e){return arguments.length?n(Ys(t=e)):t},e},Jo.svg.symbol=function(){function e(e,r){return(Nf.get(t.call(this,e,r))||to)(n.call(this,e,r))}var t=eo,n=Zs;return e.type=function(n){return arguments.length?(t=dt(n),e):t},e.size=function(t){return arguments.length?(n=dt(t),e):n},e};var Nf=Jo.map({circle:to,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Af)),n=t*Af;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});Jo.svg.symbolTypes=Nf.keys();var Cf,kf,Lf=Math.sqrt(3),Af=Math.tan(30*Mu),Of=[],Mf=0;Of.call=yu.call,Of.empty=yu.empty,Of.node=yu.node,Of.size=yu.size,Jo.transition=function(e){return arguments.length?Cf?e.transition():e:Eu.transition()},Jo.transition.prototype=Of,Of.select=function(e){var t,n,r,i=this.id,s=[];e=v(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)(r=a[f])&&(n=e.call(r,r.__data__,f,o))?("__data__"in r&&(n.__data__=r.__data__),so(n,f,i,r.__transition__[i]),t.push(n)):t.push(null)}return no(s,i)},Of.selectAll=function(e){var t,n,r,i,s,o=this.id,u=[];e=m(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(r=l[c]){s=r.__transition__[o],n=e.call(r,r.__data__,c,a),u.push(t=[]);for(var p=-1,d=n.length;++p<d;)(i=n[p])&&so(i,p,o,s),t.push(i)}return no(u,o)},Of.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=C(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return no(i,this.id)},Of.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):L(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},Of.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?ni:Dr,u=Jo.ns.qualify(e);return ro(this,"attr."+e,t,u.local?s:i)},Of.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=Jo.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Of.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=Zo.getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=Dr(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var s=arguments.length;if(3>s){if("string"!=typeof e){2>s&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return ro(this,"style."+e,t,i)},Of.styleTween=function(e,t,n){function r(r,i){var s=t.call(this,r,i,Zo.getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Of.text=function(e){return ro(this,"text",e,io)},Of.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},Of.ease=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof e&&(e=Jo.ease.apply(Jo,arguments)),L(this,function(n){n.__transition__[t].ease=e}))},Of.delay=function(e){var t=this.id;return L(this,"function"==typeof e?function(n,r,i){n.__transition__[t].delay=+e.call(n,n.__data__,r,i)}:(e=+e,function(n){n.__transition__[t].delay=e}))},Of.duration=function(e){var t=this.id;return L(this,"function"==typeof e?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},Of.each=function(e,t){var n=this.id;if(arguments.length<2){var r=kf,i=Cf;Cf=n,L(this,function(t,r,i){kf=t.__transition__[n],e.call(t,t.__data__,r,i)}),kf=r,Cf=i}else L(this,function(r){var i=r.__transition__[n];(i.event||(i.event=Jo.dispatch("start","end"))).on(e,t)});return this},Of.transition=function(){for(var e,t,n,r,i=this.id,s=++Mf,o=[],u=0,a=this.length;a>u;u++){o.push(e=[]);for(var t=this[u],f=0,l=t.length;l>f;f++)(n=t[f])&&(r=Object.create(n.__transition__[i]),r.delay+=r.duration,so(n,f,s,r)),e.push(n)}return no(o,s)},Jo.svg.axis=function(){function e(e){e.each(function(){var e,f=Jo.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),h=null==a?c.ticks?c.ticks.apply(c,u):c.domain():a,p=null==t?c.tickFormat?c.tickFormat.apply(c,u):vt:t,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Au),m=Jo.transition(d.exit()).style("opacity",Au).remove(),g=Jo.transition(d).style("opacity",1),y=ns(c),b=f.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),Jo.transition(b));v.append("line"),v.append("text");var E=v.select("line"),S=g.select("line"),x=d.select("text").text(p),T=v.select("text"),N=g.select("text");switch(r){case"bottom":e=oo,E.attr("y2",i),T.attr("y",Math.max(i,0)+o),S.attr("x2",0).attr("y2",i),N.attr("x",0).attr("y",Math.max(i,0)+o),x.attr("dy",".71em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+s+"V0H"+y[1]+"V"+s);break;case"top":e=oo,E.attr("y2",-i),T.attr("y",-(Math.max(i,0)+o)),S.attr("x2",0).attr("y2",-i),N.attr("x",0).attr("y",-(Math.max(i,0)+o)),x.attr("dy","0em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+ -s+"V0H"+y[1]+"V"+ -s);break;case"left":e=uo,E.attr("x2",-i),T.attr("x",-(Math.max(i,0)+o)),S.attr("x2",-i).attr("y2",0),N.attr("x",-(Math.max(i,0)+o)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),w.attr("d","M"+ -s+","+y[0]+"H0V"+y[1]+"H"+ -s);break;case"right":e=uo,E.attr("x2",i),T.attr("x",Math.max(i,0)+o),S.attr("x2",i).attr("y2",0),N.attr("x",Math.max(i,0)+o).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),w.attr("d","M"+s+","+y[0]+"H0V"+y[1]+"H"+s)}if(c.rangeBand){var C=c,k=C.rangeBand()/2;l=c=function(e){return C(e)+k}}else l.rangeBand?l=c:m.call(e,c);v.call(e,l),g.call(e,c)})}var t,n=Jo.scale.linear(),r=_f,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Df?t+"":_f,e):r},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var _f="bottom",Df={top:1,right:1,bottom:1,left:1};Jo.svg.brush=function(){function e(s){s.each(function(){var s=Jo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=s.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=s.selectAll(".resize").data(m,vt);u.exit().remove(),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Pf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var l,c=Jo.transition(s),h=Jo.transition(o);a&&(l=ns(a),h.attr("x",l[0]).attr("width",l[1]-l[0]),n(c)),f&&(l=ns(f),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(c)),t(c)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+l[+/e$/.test(e)]+","+h[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",l[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(e){e.select(".extent").attr("y",h[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==Jo.event.keyCode&&(L||(b=null,O[0]-=l[1],O[1]-=h[1],L=2),c())}function p(){32==Jo.event.keyCode&&2==L&&(O[0]+=l[1],O[1]+=h[1],L=0,c())}function m(){var e=Jo.mouse(E),i=!1;w&&(e[0]+=w[0],e[1]+=w[1]),L||(Jo.event.altKey?(b||(b=[(l[0]+l[1])/2,(h[0]+h[1])/2]),O[0]=l[+(e[0]<b[0])],O[1]=h[+(e[1]<b[1])]):b=null),C&&g(e,a,0)&&(n(T),i=!0),k&&g(e,f,1)&&(r(T),i=!0),i&&(t(T),x({type:"brush",mode:L?"move":"resize"}))}function g(e,t,n){var r,i,u=ns(t),a=u[0],f=u[1],c=O[n],p=n?h:l,m=p[1]-p[0];return L&&(a-=c,f-=m+c),r=(n?v:d)?Math.max(a,Math.min(f,e[n])):e[n],L?i=(r+=c)+m:(b&&(c=Math.max(a,Math.min(f,2*b[n]-r))),r>c?(i=r,r=c):i=c),p[0]!=r||p[1]!=i?(n?o=null:s=null,p[0]=r,p[1]=i,!0):void 0}function y(){m(),T.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),Jo.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),x({type:"brushend"})}var b,w,E=this,S=Jo.select(Jo.event.target),x=u.of(E,arguments),T=Jo.select(E),N=S.datum(),C=!/^(n|s)$/.test(N)&&a,k=!/^(e|w)$/.test(N)&&f,L=S.classed("extent"),A=H(),O=Jo.mouse(E),M=Jo.select(Zo).on("keydown.brush",i).on("keyup.brush",p);if(Jo.event.changedTouches?M.on("touchmove.brush",m).on("touchend.brush",y):M.on("mousemove.brush",m).on("mouseup.brush",y),T.interrupt().selectAll("*").interrupt(),L)O[0]=l[0]-O[0],O[1]=h[0]-O[1];else if(N){var _=+/w$/.test(N),D=+/^n/.test(N);w=[l[1-_]-O[0],h[1-D]-O[1]],O[0]=l[_],O[1]=h[D]}else Jo.event.altKey&&(b=O.slice());T.style("pointer-events","none").selectAll(".resize").style("display",null),Jo.select("body").style("cursor",S.style("cursor")),x({type:"brushstart"}),m()}var s,o,u=p(e,"brushstart","brush","brushend"),a=null,f=null,l=[0,0],h=[0,0],d=!0,v=!0,m=Hf[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:l,y:h,i:s,j:o},n=this.__chart__||t;this.__chart__=t,Cf?Jo.select(this).transition().each("start.brush",function(){s=n.i,o=n.j,l=n.x,h=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=Pr(l,t.x),r=Pr(h,t.y);return s=o=null,function(i){l=t.x=n(i),h=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=t.i,o=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(a=t,m=Hf[!a<<1|!f],e):a},e.y=function(t){return arguments.length?(f=t,m=Hf[!a<<1|!f],e):f},e.clamp=function(t){return arguments.length?(a&&f?(d=!!t[0],v=!!t[1]):a?d=!!t:f&&(v=!!t),e):a&&f?[d,v]:a?d:f?v:null},e.extent=function(t){var n,r,i,u,c;return arguments.length?(a&&(n=t[0],r=t[1],f&&(n=n[0],r=r[0]),s=[n,r],a.invert&&(n=a(n),r=a(r)),n>r&&(c=n,n=r,r=c),(n!=l[0]||r!=l[1])&&(l=[n,r])),f&&(i=t[0],u=t[1],a&&(i=i[1],u=u[1]),o=[i,u],f.invert&&(i=f(i),u=f(u)),i>u&&(c=i,i=u,u=c),(i!=h[0]||u!=h[1])&&(h=[i,u])),e):(a&&(s?(n=s[0],r=s[1]):(n=l[0],r=l[1],a.invert&&(n=a.invert(n),r=a.invert(r)),n>r&&(c=n,n=r,r=c))),f&&(o?(i=o[0],u=o[1]):(i=h[0],u=h[1],f.invert&&(i=f.invert(i),u=f.invert(u)),i>u&&(c=i,i=u,u=c))),a&&f?[[n,i],[r,u]]:a?[n,r]:f&&[i,u])},e.clear=function(){return e.empty()||(l=[0,0],h=[0,0],s=o=null),e},e.empty=function(){return!!a&&l[0]==l[1]||!!f&&h[0]==h[1]},Jo.rebind(e,u,"on")};var Pf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bf=Jo.time={},jf=Date,Ff=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];ao.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){If.setUTCDate.apply(this._,arguments)},setDay:function(){If.setUTCDay.apply(this._,arguments)},setFullYear:function(){If.setUTCFullYear.apply(this._,arguments)},setHours:function(){If.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){If.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){If.setUTCMinutes.apply(this._,arguments)},setMonth:function(){If.setUTCMonth.apply(this._,arguments)},setSeconds:function(){If.setUTCSeconds.apply(this._,arguments)},setTime:function(){If.setTime.apply(this._,arguments)}};var If=Date.prototype,qf="%a %b %e %X %Y",Rf="%m/%d/%Y",Uf="%H:%M:%S",zf=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Wf=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Xf=["January","February","March","April","May","June","July","August","September","October","November","December"],Vf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Bf.year=fo(function(e){return e=Bf.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Bf.years=Bf.year.range,Bf.years.utc=Bf.year.utc.range,Bf.day=fo(function(e){var t=new jf(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Bf.days=Bf.day.range,Bf.days.utc=Bf.day.utc.range,Bf.dayOfYear=function(e){var t=Bf.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},Ff.forEach(function(e,t){e=e.toLowerCase(),t=7-t;var n=Bf[e]=fo(function(e){return(e=Bf.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=Bf.year(e).getDay();return Math.floor((Bf.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Bf[e+"s"]=n.range,Bf[e+"s"].utc=n.utc.range,Bf[e+"OfYear"]=function(e){var n=Bf.year(e).getDay();return Math.floor((Bf.dayOfYear(e)+(n+t)%7)/7)}}),Bf.week=Bf.sunday,Bf.weeks=Bf.sunday.range,Bf.weeks.utc=Bf.sunday.utc.range,Bf.weekOfYear=Bf.sundayOfYear,Bf.format=co;var $f=po(zf),Jf=vo(zf),Kf=po(Wf),Qf=vo(Wf),Gf=po(Xf),Yf=vo(Xf),Zf=po(Vf),el=vo(Vf),tl=/^%/,nl={"-":"",_:" ",0:"0"},rl={a:function(e){return Wf[e.getDay()]},A:function(e){return zf[e.getDay()]},b:function(e){return Vf[e.getMonth()]},B:function(e){return Xf[e.getMonth()]},c:co(qf),d:function(e,t){return mo(e.getDate(),t,2)},e:function(e,t){return mo(e.getDate(),t,2)},H:function(e,t){return mo(e.getHours(),t,2)},I:function(e,t){return mo(e.getHours()%12||12,t,2)},j:function(e,t){return mo(1+Bf.dayOfYear(e),t,3)},L:function(e,t){return mo(e.getMilliseconds(),t,3)},m:function(e,t){return mo(e.getMonth()+1,t,2)},M:function(e,t){return mo(e.getMinutes(),t,2)},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e,t){return mo(e.getSeconds(),t,2)},U:function(e,t){return mo(Bf.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return mo(Bf.mondayOfYear(e),t,2)},x:co(Rf),X:co(Uf),y:function(e,t){return mo(e.getFullYear()%100,t,2)},Y:function(e,t){return mo(e.getFullYear()%1e4,t,4)},Z:Io,"%":function(){return"%"}},il={a:go,A:yo,b:So,B:xo,c:To,d:_o,e:_o,H:Po,I:Po,j:Do,L:jo,m:Mo,M:Ho,p:Fo,S:Bo,U:wo,w:bo,W:Eo,x:No,X:Co,y:Lo,Y:ko,Z:Ao,"%":qo},sl=/^\s*\d+/,ol=Jo.map({am:0,pm:1});co.utc=Ro;var ul=Ro("%Y-%m-%dT%H:%M:%S.%LZ");co.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?Uo:ul,Uo.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Uo.toString=ul.toString,Bf.second=fo(function(e){return new jf(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),Bf.seconds=Bf.second.range,Bf.seconds.utc=Bf.second.utc.range,Bf.minute=fo(function(e){return new jf(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),Bf.minutes=Bf.minute.range,Bf.minutes.utc=Bf.minute.utc.range,Bf.hour=fo(function(e){var t=e.getTimezoneOffset()/60;return new jf(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),Bf.hours=Bf.hour.range,Bf.hours.utc=Bf.hour.utc.range,Bf.month=fo(function(e){return e=Bf.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Bf.months=Bf.month.range,Bf.months.utc=Bf.month.utc.range;var al=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],fl=[[Bf.second,1],[Bf.second,5],[Bf.second,15],[Bf.second,30],[Bf.minute,1],[Bf.minute,5],[Bf.minute,15],[Bf.minute,30],[Bf.hour,1],[Bf.hour,3],[Bf.hour,6],[Bf.hour,12],[Bf.day,1],[Bf.day,2],[Bf.week,1],[Bf.month,1],[Bf.month,3],[Bf.year,1]],ll=[[co("%Y"),Wt],[co("%B"),function(e){return e.getMonth()}],[co("%b %d"),function(e){return 1!=e.getDate()}],[co("%a %d"),function(e){return e.getDay()&&1!=e.getDate()}],[co("%I %p"),function(e){return e.getHours()}],[co("%I:%M"),function(e){return e.getMinutes()}],[co(":%S"),function(e){return e.getSeconds()}],[co(".%L"),function(e){return e.getMilliseconds()}]],cl=Xo(ll);fl.year=Bf.year,Bf.scale=function(){return zo(Jo.scale.linear(),fl,cl)};var hl={range:function(e,t,n){return Jo.range(+e,+t,n).map(Wo)}},pl=fl.map(function(e){return[e[0].utc,e[1]]}),dl=[[Ro("%Y"),Wt],[Ro("%B"),function(e){return e.getUTCMonth()}],[Ro("%b %d"),function(e){return 1!=e.getUTCDate()}],[Ro("%a %d"),function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],[Ro("%I %p"),function(e){return e.getUTCHours()}],[Ro("%I:%M"),function(e){return e.getUTCMinutes()}],[Ro(":%S"),function(e){return e.getUTCSeconds()}],[Ro(".%L"),function(e){return e.getUTCMilliseconds()}]],vl=Xo(dl);return pl.year=Bf.year.utc,Bf.scale.utc=function(){return zo(Jo.scale.linear(),pl,vl)},Jo.text=mt(function(e){return e.responseText}),Jo.json=function(e,t){return gt(e,"application/json",Vo,t)},Jo.html=function(e,t){return gt(e,"text/html",$o,t)},Jo.xml=mt(function(e){return e.responseXML}),Jo}();return e}),define("pm/PMEventDispatcher",["underscore","jquery","backbone"],function(e,t,n){var r=e.clone(n.Events);return r.on("node:drill",function(e){if(e.type==="RootFolder")Splunk.util.redirect_to("/app/splunk_for_vmware/home_proactive_monitoring");else{var t={Type:e.type,nid:e.node_id,host:e.tree};Splunk.util.redirect_to("/custom/splunk_for_vmware/vmware_redirector/splunk_for_vmware/redirect",t)}}),r}),define("contrib/text!pm/PMLayout.html",[],function(){return'<div class="proactive-monitoring-layout">\n	<div class="proactive-monitoring-main-stage-container">\n		\n	</div>\n	<div class="proactive-monitoring-sidebar-container">\n		PUT THE PINNED FELLAS HERE!\n	</div>\n</div>'}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMLayout.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMLayoutView",["underscore","jquery","pm/contrib/d3/d3.amd","backbone","pm/PMEventDispatcher","contrib/text!pm/PMLayout.html","css!pm/PMLayout.css"],function(e,t,n,r,i,s,o){var u=r.View.extend({tagName:"div",className:"proactive-monitoring-layout",options:{sidebar_width:300,min_total_width:800,min_total_height:800},template:s,initialize:function(e){r.View.prototype.initialize.apply(this,arguments),this.min_total_width=e.min_total_width||this.options.min_total_width,this.min_total_height=e.min_total_height||this.options.min_total_height,this.sidebar_width=e.sidebar_width||this.options.sidebar_width},render:function(){this.$el.html(s),this.$main_stage=t(".proactive-monitoring-main-stage-container",this.$el),this.$sidebar=t(".proactive-monitoring-sidebar-container",this.$el),this.$panel_body=this.$el.closest(".panel-body"),this.$el.resizable({handles:"s",minHeight:this.min_total_height}),t(window).resize(this.onResize.bind(this)),this.$el.resize(this.onResize.bind(this)),this.onResize(null,{size:{height:this.min_total_height,width:this.min_total_width}})},onResize:function(e,t){var n=this.$panel_body.width();n===null&&(console.warn("[PMLayout] could not detect available panel width, defaulting to 1200px"),n=1200),n<this.min_total_width&&(n=this.min_total_width),this.$el.width(n);var r=n-this.sidebar_width-1;this.$main_stage.width(r);var s;t===null||t===undefined?s=this.min_total_height-12:s=t.size.height-12,this.$main_stage.height(s),this.$sidebar.height(s),i.trigger("layout:resize")}});return u}),define("pm/ThresholdModel",["underscore","models/SplunkDBase"],function(e,t){return t.extend({url:"configs/conf-sa_threshold",initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("pm/ThresholdCollection",["jquery","backbone","pm/ThresholdModel","collections/SplunkDsBase","splunk.util"],function(e,t,n,r,i){return r.extend({url:"configs/conf-sa_threshold",model:n,initialize:function(){r.prototype.initialize.apply(this,arguments)}})}),define("contrib/text!pm/PMPinnedDetailTable.html",[],function(){return'<table class="pm-pinned-detail-table">\n	<tbody>\n		<% _.each(data.fields, function(field, index) {%>\n			<tr>\n				<th>\n					<%= field %>\n				</th>\n				<td>\n					<%= data.data[index] %>\n				</td>\n			</tr>\n		<% }); %>\n	</tbody>\n</table>'}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMPinnedDetailTable.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMPinnedDetailTableView",["underscore","jquery","splunkjs/mvc/messages","splunkjs/mvc/simplesplunkview","contrib/text!pm/PMPinnedDetailTable.html","css!pm/PMPinnedDetailTable.css"],function(e,t,n,r,i){var s={},o=e.template(i,null,{variable:"data"}),u=r.extend({className:"proactive-monitoring-pinned-detail-table",output_mode:"json_rows",resultOptions:{output_time_format:"%s.%Q"},options:{data:"preview",managerid:undefined,message_container:undefined},displayMessage:function(t,r,i){if(i===null||i===undefined)i=this.$el,this._viz=null;if(s.hasOwnProperty(t)){var o=e.clone(s[t]);r!==null&&r!==undefined&&(o.message=o.message_template(r,{variable:"text"})),n.render(o,i)}else n.render(t,i);return this},_displayMessage:function(e,t,n){return(n===undefined||n===null)&&this.options.message_container!==undefined&&(n=this.options.message_container),this.displayMessage(e,t,n)},formatResults:function(e){if(!e)return{fields:[],rows:[[]],parse_error:!0};var t=this.output_mode||this.outputMode,n=this.data_types[t],r=e.data();return this.formatData({fields:r.fields,rows:r[n],parse_error:!1})},formatData:function(e){var t={parse_error:!1,fields:e.fields,data:e.rows[0]};return t},createView:function(){return this.$el.html(""),{template:o}},updateView:function(e,t){if(t.parse_error)return;this.$el.html(e.template(t,{variable:"data"}))}});return u}),define("pm/PMDistributionGraphView",["underscore","jquery","pm/contrib/d3/d3.amd","splunkjs/mvc/messages","splunkjs/mvc/simplesplunkview"],function(e,t,n,r,i){var s={cancelled:{icon:"info-circle",level:"info",message:e("Search was cancelled.").t(),compact:!0},empty:{icon:"blank",level:"info",message:"",compact:!0},"unresolved-search":{icon:"warning-sign",level:"error",message:e("Search query is not fully resolved.").t(),compact:!0},"no-events":{icon:"info-circle",level:"info",message:e("Search did not return any events.").t(),compact:!0},"no-results":{icon:"blank",level:"info",message:e("No results found.").t(),compact:!0},"no-search":{icon:"info-circle",level:"info",message:e("No search set.").t(),compact:!0},"no-stats":{icon:"warning-sign",level:"error",message:e("Search isn't generating any statistical results.").t(),compact:!0},"not-started":{icon:"info-circle",level:"info",message:e("No search started.").t(),compact:!0},waiting:{icon:"blank",level:"info",message:e("Waiting for data...").t(),compact:!0},"waiting-queued":{icon:"info-circle",level:"info",message:e("Waiting for search to start: job is queued.").t(),compact:!0},"waiting-preparing":{icon:"info-circle",level:"info",message:e("Waiting for search to start: job is preparing.").t(),compact:!0}},o=i.extend({className:"proactive-monitoring-distribution-graph",tagName:"g",output_mode:"json_rows",resultOptions:{output_time_format:"%s.%Q"},options:{data:"preview",managerid:undefined,message_container:undefined,color_scheme:undefined,chart_controller:undefined},colors:{dark:{inner_fill:"#909090",outer_fill:"#7A7A7A"},light:{inner_fill:"#D4D3D4",outer_fill:"#ECECEC"}},time_extent:undefined,y_extent:undefined,initialize:function(e){this.color_scheme=e.color_scheme==="light"?"light":"dark",this.message_container=e.message_container,this.chart_controller=e.chart_controller,i.prototype.initialize.apply(this,arguments)},displayMessage:function(t,n,i){if(i===null||i===undefined)i=this.$el,this._viz=null;if(s.hasOwnProperty(t)){var o=e.clone(s[t]);n!==null&&n!==undefined&&(o.message=o.message_template(n,{variable:"text"})),r.render(o,i)}else r.render(t,i);return this},_displayMessage:function(e,t,n){return(n===undefined||n===null)&&this.message_container!==undefined&&(n=this.message_container),this.displayMessage(e,t,n)},formatResults:function(e){if(!e)return{fields:[],rows:[[]],parse_error:!0};var t=this.output_mode||this.outputMode,n=this.data_types[t],r=e.data();return this.formatData({fields:r.fields,rows:r[n],parse_error:!1})},formatData:function(t){var r={parse_error:!1},i=e.indexOf(t.fields,"_time"),s=e.indexOf(t.fields,"upper_quartile"),o=e.indexOf(t.fields,"lower_quartile"),u=e.indexOf(t.fields,"upper_extreme"),a=e.indexOf(t.fields,"lower_extreme"),f=[],l=[],c,h,p,d,v,m;for(c=0;c<t.rows.length;c++)h=t.rows[c],d=h[i],v=h[o],m=h[s],e.isFinite(d)&&e.isFinite(v)&&e.isFinite(m)&&f.push([Number(d),Number(v),Number(m)]),v=h[a],m=h[u],e.isFinite(d)&&e.isFinite(v)&&e.isFinite(m)&&l.push([Number(d),Number(v),Number(m)]);return this.time_extent=n.extent(l,function(e){return e[0]}),this.y_extent=[e.min(l,function(e){return e[1]})[1],e.max(l,function(e){return e[2]})[2]],this.chart_controller.updateScales(),r.inner_stream_data=f,r.outer_stream_data=l,r},createView:function(){var e=n.select(this.$el.get(0));return e.append("path").attr("class","pm-distribution-outer-stream").attr("fill",this.colors[this.color_scheme].outer_fill),e.append("path").attr("class","pm-distribution-inner-stream").attr("fill",this.colors[this.color_scheme].inner_fill),{d3stage:e}},updateView:function(e,t){if(t.parse_error)return;this._displayMessage("empty"),this.chart_controller.renderGraphs()},_onSearchStart:function(){this._viz!==null&&this._viz!==undefined&&(this._viz.d3stage.select("path.pm-distribution-outer-stream").attr("opacity",1e-6),this._viz.d3stage.select("path.pm-distribution-inner-stream").attr("opacity",1e-6)),this._isJobDone=!1,this._displayMessage("waiting")},renderGraph:function(){if(this._data===undefined||this._data===null||this._viz===undefined||this._viz===null)return;var e=this.chart_controller,t=n.svg.area().x(function(t){return e.time_scale(t[0])}).y0(function(t){return e.y_scale(t[1])}).y1(function(t){return e.y_scale(t[2])});this._viz.d3stage.select("path.pm-distribution-outer-stream").datum(this._data.outer_stream_data).attr("d",t).attr("opacity",1),this._viz.d3stage.select("path.pm-distribution-inner-stream").datum(this._data.inner_stream_data).attr("d",t).attr("opacity",1)}});return o}),define("pm/PMSpecificGraphView",["underscore","jquery","pm/contrib/d3/d3.amd","splunkjs/mvc/messages","splunkjs/mvc/simplesplunkview"],function(e,t,n,r,i){var s={cancelled:{icon:"info-circle",level:"info",message:e("Search was cancelled.").t(),compact:!0},empty:{icon:"blank",level:"info",message:"",compact:!0},"unresolved-search":{icon:"warning-sign",level:"error",message:e("Search query is not fully resolved.").t(),compact:!0},"no-events":{icon:"info-circle",level:"info",message:e("Search did not return any events.").t(),compact:!0},"no-results":{icon:"blank",level:"info",message:e("No results found.").t(),compact:!0},"no-search":{icon:"info-circle",level:"info",message:e("No search set.").t(),compact:!0},"no-stats":{icon:"warning-sign",level:"error",message:e("Search isn't generating any statistical results.").t(),compact:!0},"not-started":{icon:"info-circle",level:"info",message:e("No search started.").t(),compact:!0},waiting:{icon:"blank",level:"info",message:e("Waiting for data...").t(),compact:!0},"waiting-queued":{icon:"info-circle",level:"info",message:e("Waiting for search to start: job is queued.").t(),compact:!0},"waiting-preparing":{icon:"info-circle",level:"info",message:e("Waiting for search to start: job is preparing.").t(),compact:!0}},o=i.extend({className:"proactive-monitoring-specific-graph",tagName:"g",output_mode:"json_rows",resultOptions:{output_time_format:"%s.%Q"},options:{data:"preview",managerid:undefined,message_container:undefined,color_scheme:undefined,chart_controller:undefined},colors:{light:{stroke:"#333333"},dark:{stroke:"#FFFFFF"}},time_extent:undefined,y_extent:undefined,initialize:function(e){this.color_scheme=e.color_scheme==="light"?"light":"dark",this.message_container=e.message_container,this.chart_controller=e.chart_controller,i.prototype.initialize.apply(this,arguments)},displayMessage:function(t,n,i){if(i===null||i===undefined)i=this.$el,this._viz=null;if(s.hasOwnProperty(t)){var o=e.clone(s[t]);n!==null&&n!==undefined&&(o.message=o.message_template(n,{variable:"text"})),r.render(o,i)}else r.render(t,i);return this},_displayMessage:function(e,t,n){return(n===undefined||n===null)&&this.message_container!==undefined&&(n=this.message_container),this.displayMessage(e,t,n)},formatResults:function(e){if(!e)return{fields:[],rows:[[]],parse_error:!0};var t=this.output_mode||this.outputMode,n=this.data_types[t],r=e.data();return this.formatData({fields:r.fields,rows:r[n],parse_error:!1})},formatData:function(t){var r={parse_error:!1},i=e.indexOf(t.fields,"_time"),s=e.indexOf(t.fields,"metric"),o=[],u,a,f,l,c;for(u=0;u<t.rows.length;u++)a=t.rows[u],l=a[i],c=a[s],e.isFinite(l)&&e.isFinite(c)&&o.push([Number(l),Number(c)]);return this.time_extent=n.extent(o,function(e){return e[0]}),this.y_extent=n.extent(o,function(e){return e[1]}),this.chart_controller.updateScales(),r.line_data=o,r},createView:function(){var e=n.select(this.$el.get(0));return e.append("path").attr("class","pm-specific-line").attr("fill","none").attr("stroke",this.colors[this.color_scheme].stroke).attr("stroke-width",3),{d3stage:e}},updateView:function(e,t){if(t.parse_error)return;this._displayMessage("empty"),this.chart_controller.renderGraphs()},_onSearchStart:function(){this._viz!==null&&this._viz!==undefined&&this._viz.d3stage.select("path.pm-specific-line").attr("opacity",1e-6),i.prototype._onSearchStart.apply(this,arguments)},renderGraph:function(){if(this._data===undefined||this._data===null||this._viz===undefined||this._viz===null)return;var e=this.chart_controller,t=n.svg.line().x(function(t){return e.time_scale(t[0])}).y(function(t){return e.y_scale(t[1])});this._viz.d3stage.select("path.pm-specific-line").datum(this._data.line_data).attr("d",t).attr("opacity",1)}});return o}),define("contrib/text!pm/PMChart.html",[],function(){return'<table class="pm-chart-layout">\n	<tbody>\n		<tr>\n			<td colspan="3" class="pm-legend">\n				<div style="float:right;">\n					<div style="margin-right:3px;display:inline-block;">\n						<span>This Node</span>\n						<div class="pm-legend-specific" style="display:inline-block;vertical-align:middle;height:2px;width:25px;"> </div>\n					</div>\n					<div style="display:inline-block;">\n						<span>Global</span>\n						<div style="display:inline-block;vertical-align:baseline;height:10px;width:25px;"> \n							<div class="pm-legend-global pm-legend-global-outer"></div>\n							<div class="pm-legend-global pm-legend-global-inner"></div>\n						</div>\n					</div>\n				</div>\n			</td>\n		</tr>\n		<tr>\n			<td class="pm-y-max-label pm-chart-axis-label">\n				100\n			</td>\n			<td rowspan="2" colspan="2">\n				<div class="pm-chart-plot-wrapper" style="height:80px;">\n					<svg height="80" width="250">\n						<g class="pm-distribution-graph-container"></g>\n						<g class="pm-specific-graph-container"></g>\n					</svg>\n				</div>\n			</td>\n		</tr>\n		<tr>\n			<td class="pm-y-min-label pm-chart-axis-label">\n				0\n			</td>\n		</tr>\n		<tr>\n			<td></td>\n			<td class="pm-x-min-label pm-chart-axis-label">\n				-24h\n			</td>\n			<td class="pm-x-max-label pm-chart-axis-label">\n				now\n			</td>\n		</tr>\n	</tbody>\n</table>\n<div class="pm-specific-search-message-container pm-search-message-container"></div>\n<div class="pm-distribution-search-message-container pm-search-message-container"></div>'}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMChart.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMChartView",["underscore","jquery","pm/contrib/d3/d3.amd","backbone","pm/PMDistributionGraphView","pm/PMSpecificGraphView","contrib/text!pm/PMChart.html","css!pm/PMChart.css"],function(e,t,n,r,i,s,o){var u=r.View.extend({tagName:"div",className:"proactive-monitoring-chart",options:{plot_width:250,plot_height:80,color_scheme:undefined,distribution_managerid:undefined,specific_managerid:undefined},time_scale:undefined,y_scale:undefined,distribution_view:undefined,specific_view:undefined,dynamic_time_labels:!1,initialize:function(e){this.specific_managerid=e.specific_managerid,this.distribution_managerid=e.distribution_managerid,this.plot_width=e.plot_width||this.options.plot_width,this.plot_height=e.plot_height||this.options.plot_height,this.color_scheme=e.color_scheme==="light"?"light":"dark",r.View.prototype.initialize.apply(this,arguments)},render:function(){this.$el.html(o),this.$(".pm-chart-layout").addClass("pm-"+this.color_scheme+"-style"),n.select(this.$el.get(0)).select("svg").attr("width",this.plot_width).attr("height",this.plot_height);var e=this.$(".pm-distribution-search-message-container"),t=this.$("g.pm-distribution-graph-container");this.distribution_view=new i({el:t,managerid:this.distribution_managerid,message_container:e,color_scheme:this.color_scheme,chart_controller:this}),this.distribution_view.render();var r=this.$(".pm-specific-search-message-container"),u=this.$("g.pm-specific-graph-container");this.specific_view=new s({el:u,managerid:this.specific_managerid,message_container:r,color_scheme:this.color_scheme,chart_controller:this}),this.specific_view.render()},updateScales:function(){var e=[],t=[];this.distribution_view!==undefined&&this.distribution_view.time_extent!==undefined&&this.distribution_view.y_extent!==undefined&&(t=t.concat(this.distribution_view.y_extent),e=e.concat(this.distribution_view.time_extent)),this.specific_view!==undefined&&this.specific_view.time_extent!==undefined&&this.specific_view.y_extent!==undefined&&(t=t.concat(this.specific_view.y_extent),e=e.concat(this.specific_view.time_extent));var r=n.extent(e),i=n.extent(t);this.time_scale=n.scale.linear().domain(r).range([0,this.plot_width]),this.y_scale=n.scale.linear().domain(i).range([this.plot_height,0]),this.updateLabels()},setTimeLabels:function(e,t){t==="now"?(this.$(".pm-x-min-label").text(e.split("@")[0]),this.$(".pm-x-max-label").text("now"),this.dynamic_time_labels=!1):this.dynamic_time_labels=!0},updateLabels:function(){var e=this.y_scale.domain();this.$(".pm-y-max-label").text(Number(e[1]).toFixed(1)),this.$(".pm-y-min-label").text(Number(e[0]).toFixed(1));if(this.dynamic_time_labels){var t=this.time_scale.domain(),n=this.convertEpochToDate(t[0]);this.$(".pm-x-min-label").text(n.toLocaleString()),n=this.convertEpochToDate(t[1]),this.$(".pm-x-max-label").text(n.toLocaleString())}},renderGraphs:function(){this.distribution_view!==undefined&&this.distribution_view.renderGraph(),this.specific_view!==undefined&&this.specific_view.renderGraph()},convertEpochToDate:function(e){var t=new Date(0);return t.setUTCSeconds(e),t}});return u}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMThresholdIndexCellRenderer.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMThresholdIndexCellRenderer",["underscore","jquery","backbone","splunkjs/mvc/tableview","css!pm/PMThresholdIndexCellRenderer.css"],function(e,t,n,r){var i=["critical","warning","normal","unknown"],s=r.BaseCellRenderer.extend({canRender:function(e){return e.field==="threshold_index"||e.field==="status"||e.field==="s"},render:function(e,t){var n=i[t.value]||"unknown";e.addClass("pm-threshold-indicator-cell"),e.html('<div class="pm-threshold-indicator-circle pm-threshold-'+n+'"/><div>')}});return s}),define("pm/PMLeafNameCellRenderer",["underscore","jquery","backbone","splunkjs/mvc/tableview"],function(e,t,n,r){var i=r.BaseCellRenderer.extend({canRender:function(e){return e.field==="name"},_clipName:function(e){if(e===null||e===undefined)e="";if(e.length>24){var t=e.substr(0,20);return t.concat("...")}return e},render:function(e,t){e.css("font-size","10px"),e.html(this._clipName(t.value))}});return i}),define("contrib/text!pm/PMPinnedDetail.html",[],function(){return'<div class="pm-pinned-detail">\n	<div class="pm-pinned-detail-title-bar">\n		<table style="table-layout:fixed;">\n			<tbody>\n				<tr>\n					<td style="text-align:left;width:250px;vertical-align:top;">\n						<div class="pm-pinned-detail-name">\n							<%= node.name %>\n						</div>\n					</td>\n					<td style="text-align:right;width:50px;vertical-align:top;">\n						<table class="pm-pinned-detail-button-container">\n							<tbody>\n								<tr>\n									<td>\n										<div class="pm-pinned-detail-icon-circle pm-pinned-detail-action-drill">\n											<span class="icon-arrow-right pm-pinned-detail-icon"></span>\n										</div>\n									</td>\n									<td>\n										<div class="pm-pinned-detail-icon-circle pm-pinned-detail-action-remove">\n											<span class="icon-close pm-pinned-detail-icon"></span>\n										</div>\n									</td>\n								</tr>\n							</tbody>\n						</table>\n					</td>\n				</tr>\n			</tbody>\n		</table>\n	</div>\n	<div class="pm-pinned-detail-body">\n		<div class="pm-pinned-detail-detail-section">\n		</div>\n		<div class="pm-pinned-detail-metric-section">\n			\n		</div>\n		<div class="pm-pinned-detail-chart-section">\n		</div>\n	</div>\n</div>'}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMPinnedDetail.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMPinnedDetailView",["underscore","jquery","backbone","splunkjs/mvc/searchmanager","splunkjs/mvc","splunkjs/mvc/tokenutils","splunkjs/mvc/tableview","pm/PMEventDispatcher","pm/PMPinnedDetailTableView","pm/PMChartView","pm/PMThresholdIndexCellRenderer","pm/PMLeafNameCellRenderer","contrib/text!pm/PMPinnedDetail.html","css!pm/PMPinnedDetail.css"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.template(h,null,{variable:"node"}),d=n.View.extend({tagName:"div",className:"proactive-monitoring-pinboard",events:{"click .pm-pinned-detail-title-bar":"toggleBody","click .pm-pinned-detail-icon-circle.pm-pinned-detail-action-remove":"removeNode","click .pm-pinned-detail-icon-circle.pm-pinned-detail-action-drill":"drillNode"},options:{sidebar_width:300,min_total_height:800},type_detail_search_map:{VirtualMachine:'sourcetype="vmware:inv:vm" earliest=1 | spath moid output=moid | search moid="$moid$" host="$host$" |spath collectionVersion output=collectionVersion | spath changeSet.name output=name | spath changeSet.summary.runtime.powerState output=powerState | spath changeSet.config.guestFullName output=guestFullName | spath changeSet.guest.toolsStatus output=toolsStatus | spath changeSet.config.hardware.numCPU output=numCPU | spath changeSet.config.hardware.numCoresPerSocket output=numCoresPerSocket | spath changeSet.config.hardware.memoryMB output=memorySizeMB | spath changeSet.resourceConfig.cpuAllocation.reservation output=cpuReservation | spath changeSet.resourceConfig.memoryAllocation.reservation output=memoryReservation | spath changeSet.resourceConfig.memoryAllocation.shares.level output=memSharesLevel | spath changeSet.resourceConfig.memoryAllocation.shares.shares output=memSharesShares | spath changeSet.resourceConfig.cpuAllocation.shares.level output=cpuSharesLevel | spath changeSet.resourceConfig.cpuAllocation.shares.shares output=cpuSharesShares | spath changeSet.summary.runtime.host.moid output=HostSystem | head (collectionVersion!=1) keeplast=t | stats first(name) AS name, first(powerState) AS powerState, first(numCPU) AS numCPU, first(guestFullName) AS guestFullName, first(toolsStatus) AS toolsStatus, first(numCoresPerSocket) AS numCoresPerSocket, first(memorySizeMB) AS memorySizeMB, first(cpuReservation) AS cpuReservation, first(memoryReservation) AS memoryReservation, first(memSharesLevel) AS memSharesLevel, first(memSharesShares) AS memSharesShares, first(cpuSharesLevel) AS cpuSharesLevel, first(cpuSharesShares) AS cpuSharesShares, first(HostSystem) AS HostSystem first(_time) AS _time by moid, host | fillnull value="Not Available" powerState numCoresPerSocket memorySizeMB cpuSharesShares memSharesShares memoryReservation cpuReservation numCPU | eval cpuSharesLevel=if(isnull(cpuSharesLevel), "Not Available", cpuSharesLevel) | eval memSharesLevel=if(isnull(memSharesLevel), "Not Available", memSharesLevel) | eval guestFullName=if(isnull(guestFullName), "Not Available", guestFullName) | eval toolsStatus=if(isnull(toolsStatus), "Not Available", toolsStatus) | fields - moid,host,name,HostSystem,_time',HostSystem:'sourcetype="vmware:inv:hostsystem" earliest=1 | spath moid output=moid | spath changeSet.name output=name | search moid="$moid$" host="$host$" | spath collectionVersion output=collectionVersion | spath changeSet.summary.overallStatus output=overallStatus | spath changeSet.summary.quickStats.overallCpuUsage output=overallCpuUsage | spath changeSet.summary.quickStats.overallMemoryUsage output=overallMemoryUsage | spath changeSet.summary.hardware.cpuMhz output=cpuMhz | spath changeSet.summary.hardware.memorySize output=memorySize | spath changeSet.summary.hardware.numCpuCores output=CPUCores | spath changeSet.summary.hardware.vendor output=manufacturer | spath changeSet.summary.hardware.model output=model | spath changeSet.summary.hardware.numNics output=numNics | spath changeSet.summary.hardware.cpuModel output=processorType | spath changeSet.summary.hardware.numCpuPkgs output=numCpuPkgs | spath changeSet.summary.hardware.numCpuThreads output=logicalProcessor | spath changeSet.config.hyperThread.active output=active | spath changeSet.summary.host.moid output=HostSystem | spath changeSet.parent.moid output=HostSystemParent | spath changeSet.parent.type output=HostSystemParentType | head (collectionVersion!=1) keeplast=t | stats first(overallStatus) As overallStatus  first(manufacturer) As Manufacturer first(model) As Model first(numNics) As NumberofNICs first(logicalProcessor) As LogicalProcessors first(processorType) As ProcessorType first(numCpuPkgs) As ProcessorSockets first(overallMemoryUsage) AS MemUsg first(overallCpuUsage) AS CpuUsg first(cpuMhz) AS MhzPerCore first(memorySize) AS Mem first(CPUCores) as CPUCores  first(name) As Host first(HostSystem) AS HostSystem first(HostSystemParent) As HostSystemParent first(HostSystemParentType) As HostSystemParentType first(active) as active by moid, host| eval MaxCpuMhz=MhzPerCore*CPUCores | eval MaxMemMB=((Mem/1024)/1024) | eval FreeMem=MaxMemMB-MemUsg | eval FreeCpu=MaxCpuMhz-CpuUsg |  eval CoresperSocket=CPUCores/ProcessorSockets |  eval Hyperthreading=if(active="True", "Active", "Inactive") |fillnull value="N/A"  overallStatus, Manufacturer, Model, NumberofNICs,LogicalProcessors,ProcessorType, ProcessorSockets, MemUsg, CpuUsg, MhzPerCore, Mem, CPUCores, CoresperSocket, FreeCpu, FreeMem, Hyperthreading, MaxCpuMhz, MaxMemMB|  fields - count,Host,HostSystemParent,HostSystem,HostSystemParentType,moid,host,Mem,active',ClusterComputeResource:'| stats count | eval moid="$moid$" | eval host="$host$" | `HandleInfoMaxTimeNow` | eval _time=info_max_time | lookup TimeClusterServicesAvailability moid, host OUTPUT p_average_clusterServices_effectivecpu_megaHertz p_average_clusterServices_effectivemem_megaBytes | lookup FullHierarchy moid, host OUTPUT  name | rename p_average_clusterServices_effectivecpu_megaHertz as AvgEffCpu_MHz | eval AvgEffMem=`format_bytes(p_average_clusterServices_effectivemem_megaBytes*1024*1024)` | eval AvgEffCpu_MHz=if(isnull(AvgEffCpu_MHz),"Unavailable",AvgEffCpu_MHz) | table AvgEffCpu_MHz AvgEffMem',RootFolder:'sourcetype=vmware:inv:hierarchy earliest=-8h latest=now host=$host$ "\\"type\\": \\"VirtualMachine\\"" OR "\\"type\\": \\"HostSystem\\"" OR "\\"type\\": \\"ClusterComputeResource\\"" | dedup moid | stats count(eval(type="HostSystem")) AS Hosts count(eval(type="VirtualMachine")) as VirtualMachines count(eval(type="ClusterComputeResource")) as Clusters'},specific_performance_search:'| `tstats` avg(p_$metric$) from vmw_perf_$perf_type$_$entity_type$ where (moid="$moid$" AND host="$host$") instance="aggregated" p_$metric$>=0 groupby _time span=1m | timechart minspan=1m avg(p_$metric$) AS metric',parent_performance_search:'| tstats local=true prestats=false avg(p_$metric$) AS avg_metric from vmw_perf_$perf_type$_$entity_type$ where (moid="$moid$" AND host="$host$") OR (hs="$moid$" AND host="$host$") OR (ccr="$moid$" AND host="$host$") instance="aggregated" groupby _time, host, moid | stats sparkline(avg(avg_metric), 5m) AS sparkline avg(avg_metric) AS avg_metric by host, moid | $threshold_snippet$ | eval _time=now() | lookup FullHierarchy moid, host OUTPUT name | table threshold_index, name, sparkline | sort threshold_index | rename threshold_index AS s | head 50',node:undefined,pinboard_controller:undefined,detail_manager:undefined,initialize:function(e){this.node=e.node,this.pinboard_controller=e.pinboard_controller,this.pin_id=e.pin_id,this.distribution_search_id=e.distribution_search_id,n.View.prototype.initialize.apply(this,arguments)},render:function(){this.$el.html(p(this.node,{variable:"node"}));var e=i.Components.get("submitted"),t=e.get("entity_type"),n=e.get("earliest"),u=e.get("latest");this.$(".pm-pinned-detail-metric-section").text(e.get("metric"));var h=this.node.id+"-detail-"+this.cid;this.detail_manager=new r({id:h,earliest_time:n,latest_time:u,preview:!1,cache:600,status_buckets:0,search:this._getDetailSearch(),time_format:"%s.%Q"},{tokens:!1}),this.detail_view=new a({el:this.$(".pm-pinned-detail-detail-section"),managerid:h});var d=this.node.id+"-chart-"+this.cid,v;this.node.type.toLowerCase()===t?(v=this.specific_performance_search.replace(/\$moid\$/g,this.node.node_id).replace(/\$host\$/g,this.node.tree),this.chart_search=new r({id:d,earliest_time:n,latest_time:u,preview:!1,cache:600,status_buckets:0,search:s.replaceTokens(v,i.Components,{tokenNamespace:"submitted"}),time_format:"%s.%Q"},{tokens:!1}),this.chart_view=new f({el:this.$(".pm-pinned-detail-chart-section"),color_scheme:"light",plot_width:230,distribution_managerid:this.distribution_search_id,specific_managerid:d}),this.chart_view.render()):(v=this.parent_performance_search.replace(/\$moid\$/g,this.node.node_id).replace(/\$host\$/g,this.node.tree),this.chart_search=new r({id:d,earliest_time:n,latest_time:u,preview:!0,cache:600,status_buckets:0,search:s.replaceTokens(v,i.Components,{tokenNamespace:"submitted"}),time_format:"%s.%Q"},{tokens:!1}),this.chart_view=(new o({id:this.node.id+"-table-"+this.cid,managerid:d,format:{sparkline:[{type:"sparkline",options:{width:"100px",lineColor:"#BCBCBC"}}]},pageSize:10,pagerPosition:"bottom",showPager:!0,el:this.$(".pm-pinned-detail-chart-section")})).render(),this.chart_view.table.addCellRenderer(new l),this.chart_view.table.addCellRenderer(new c),this.chart_view.table.render())},_getDetailSearch:function(){var e=this.type_detail_search_map[this.node.type];return e.replace(/\$moid\$/g,this.node.node_id).replace(/\$host\$/g,this.node.tree)},toggleBody:function(){console.log("[PMPinnedDetail] toggle body called on node:"+this.node.name);var e=this;this.$(".pm-pinned-detail-body").slideToggle(function(){var n=t(this);n.css("display")==="none"?e.$(".pm-pinned-detail-title-bar").css("border-bottom","1px solid #CCCCCC"):e.$(".pm-pinned-detail-title-bar").css("border-bottom","none")})},removeNode:function(e){e.stopPropagation(),console.log("[PMPinnedDetail] remove called on node:"+this.node.name),this.detail_manager.set("cancelOnUnload",!1),this.detail_manager.cancel(),this.detail_manager.off(),i.Components.revokeInstance(this.detail_manager.id),this.detail_view.off(),this.detail_view.remove(),this.pinboard_controller.removePin(this.pin_id),this.off(),this.remove()},drillNode:function(e){e.stopPropagation(),console.log("[PMPinnedDetail] drill called on node:"+this.node.name),u.trigger("node:drill",this.node)}});return d}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMPinboard.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMPinboardView",["underscore","jquery","backbone","splunkjs/mvc","splunkjs/mvc/tokenutils","splunkjs/mvc/searchmanager","pm/PMEventDispatcher","pm/PMPinnedDetailView","css!pm/PMPinboard.css"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({tagName:"div",className:"proactive-monitoring-pinboard",options:{sidebar_width:300,min_total_height:800},pinned_manifest:{},distribution_search_manifest:{},initialize:function(){n.View.prototype.initialize.apply(this,arguments),o.on("node:pin",this.pinNode,this)},render:function(){this.$el.html('<ul class="proactive-monitoring-pinboard-detail-list"></ul>')},pinNode:function(e){var n=r.Components.get("submitted"),o=n.get("metric"),a=n.get("entity_type"),f=n.get("earliest"),l=n.get("latest"),c="leaf-performance-distribution-"+[a,o,f,l].join("-"),h=e.id+":"+o;if(this.pinned_manifest.hasOwnProperty(h)){console.log("[PMPinboard] cancelled pin node since node is already pinned with same metric");return}this.distribution_search_manifest.hasOwnProperty(c)||(this.distribution_search_manifest[c]=new s({id:c,earliest_time:f,latest_time:l,preview:!1,cache:600,status_buckets:0,search:i.replaceTokens('| `tstats` median(p_$metric$) perc25(p_$metric$) perc75(p_$metric$) perc95(p_$metric$) min(p_$metric$) from vmw_perf_$perf_type$_$entity_type$ where instance="aggregated" p_$metric$>=0 groupby _time span=1m | timechart minspan=1m median(p_$metric$) AS center perc25(p_$metric$) as lower_quartile perc75(p_$metric$) as upper_quartile perc95(p_$metric$) as upper_extreme min(p_$metric$) as lower_extreme',r.Components,{tokenNamespace:"submitted"}),time_format:"%s.%Q"},{tokens:!1}));var p=t("<li>").appendTo(".proactive-monitoring-pinboard-detail-list").addClass("pm-pinned-detail-container"),d=new u({el:p,pinboard_controller:this,pin_id:h,distribution_search_id:c,node:e});d.render(),this.pinned_manifest[h]={view:d,metric:o,distribution_search_id:c}},removePin:function(t){if(this.pinned_manifest.hasOwnProperty(t)){var n=this.pinned_manifest[t].distribution_search_id;if(e.find(this.pinned_manifest,function(e,r){return e.distribution_search_id===n&&t!==r})===undefined){var i=this.distribution_search_manifest[n];i.set("cancelOnUnload",!1),i.cancel(),i.off(),r.Components.revokeInstance(i.id)}delete this.pinned_manifest[t]}}});return a}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMLeafNode.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMLeafNodeView",["underscore","jquery","pm/contrib/d3/d3.amd","backbone","css!pm/PMLeafNode.css"],function(e,t,n,r,i){var s=r.View.extend({tagName:"g",className:"proactive-monitoring-leaf-node",options:{leaf_node_r:8.5,colors:{critical:"#C44545",warning:"#DE9400",normal:"#57A116",unknown:"#808080"},color_scale:n.scale.ordinal().domain(n.range(4)).range(["#C44545","#DE9400","#57A116","#808080"]),node_labels:{HostSystem:"HS",ClusterComputeResource:"CL",RootFolder:"VC",VirtualMachine:"VM"},unselected_stroke_width:1,selected_stroke_width:2,unselected_stroke:"#D4D3D4",selected_stroke:"#FFFFFF"},first_render:!0,initialize:function(){r.View.prototype.initialize.apply(this,arguments)},render:function(e){var t=n.select(this.$el.get(0)),r=this,i;this.first_render&&(t.append("circle").attr("class","pm-leaf-node-emphasis-highlight").attr("r",this.options.leaf_node_r+1).attr("fill",this.options.colors.unknown).attr("stroke","#000000").attr("stroke-width",2).attr("opacity",1e-6),t.append("circle").attr("class","pm-leaf-node-marker").attr("r",this.options.leaf_node_r).attr("fill",this.options.colors.unknown).attr("stroke",this.options.unselected_stroke).attr("stroke-width",this.options.unselected_stroke_width),t.append("text").attr("class","node-label").attr("dy","4px").text(this.options.node_labels[e.type]),i=t.append("text").attr("class","name-label").attr("x",this.options.leaf_node_r+this.options.selected_stroke_width+4).attr("dy","3px").text(function(e){if(e.name.length>24){var t=e.name.substr(0,20);return t.concat("...")}return e.name}),this.first_render=!1);var s;e.value[0]>0?s=0:e.value[1]>0?s=1:e.value[2]>0?s=2:s=3,t.select("circle.pm-leaf-node-marker").attr("fill",this.options.color_scale(s))},highlightNode:function(){var e=n.select(this.$el.get(0));e.select("circle.pm-leaf-node-marker").attr("stroke",this.options.selected_stroke),e.select("circle.pm-leaf-node-emphasis-highlight").attr("opacity",1)},unhighlightNode:function(){var e=n.select(this.$el.get(0));e.select("circle.pm-leaf-node-marker").attr("stroke",this.options.unselected_stroke),e.select("circle.pm-leaf-node-emphasis-highlight").attr("opacity",1e-6)}});return s}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMParentNode.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMParentNodeView",["underscore","jquery","pm/contrib/d3/d3.amd","backbone","pm/PMLeafNodeView","css!pm/PMParentNode.css"],function(e,t,n,r,i){var s=r.View.extend({tagName:"g",className:"proactive-monitoring-parent-node",options:{tree_controller:undefined,parent_node_r:13,penultimate_parent_node_r:11.5,colors:{critical:"#C44545",warning:"#DE9400",normal:"#57A116",unknown:"#D5D5D5"},color_scale:n.scale.ordinal().domain(n.range(4)).range(["#C44545","#DE9400","#57A116","#D5D5D5"]),node_labels:{HostSystem:"HS",ClusterComputeResource:"CL",RootFolder:"VC",VirtualMachine:"VM"},unselected_stroke_width:1,selected_stroke_width:2,unselected_stroke:"#FFFFFF",selected_stroke:"#000000",label_rotation:-35,ring_width:5},first_render:!0,initialize:function(e){this.tree_controller=e.tree_controller,r.View.prototype.initialize.apply(this,arguments)},render:function(e){var t=n.select(this.$el.get(0)),r=this,i;if(e.id==="__ENV__:__ROOT__")this.first_render&&(i=t.append("text").attr("text-anchor","middle").attr("font-size","16px").text("Environment"),this.first_render=!1);else{var s=e.penultimate?this.options.penultimate_parent_node_r:this.options.parent_node_r;this.first_render&&(t.append("g").attr("class","donut"),t.append("circle").attr("r",s).attr("fill",this.options.colors.unknown).attr("stroke",this.options.unselected_stroke).attr("stroke-width",this.options.unselected_stroke_width),t.append("text").attr("class","node-label").attr("dy","5px").text(this.options.node_labels[e.type]),i=t.append("text").attr("class","name-label").attr("x",s+this.options.unselected_stroke_width+this.options.ring_width+4).attr("transform","rotate("+this.options.label_rotation+")").text(e.name),this.toggleChildren(e),this.bakePie(e),this.first_render=!1);var o=this._getValueIndex(e.value);t.select("circle").attr("fill",this.options.color_scale(o))}},_getValueIndex:function(e){var t;return e[0]>0?t=0:e[1]>0?t=1:e[2]>0?t=2:t=3,t},bakePie:function(e){if(e._children!==null&&e._children.length>0){var t=n.select(this.$el.get(0)),r=this._getValueIndex(e.value),i=e.penultimate?this.options.penultimate_parent_node_r:this.options.parent_node_r,s;r===3&&e.value[3]===0?s=[0,0,0,1]:s=e.value;var o=i+this.options.unselected_stroke_width+this.options.ring_width-1,u=t.select("g.donut");this._bakePie(u,s,o)}},_bakePie:function(e,t,r){var i=n.layout.pie().sort(null),s=this.options.color_scale,o=this.options.ring_width,u=n.svg.arc().outerRadius(r).innerRadius(r-o),a=e.selectAll("g.arc").data(i(t)),f=a.enter().append("g").attr("class","arc");f.append("path").attr("fill",function(e,t){return s(t)}),a.select("path").attr("d",u)},toggleChildren:function(t){if(!t.penultimate)return;if(t._children.length===0){console.log("[PMParentNode] cannot expand penultimate node with no children");return}var r=n.select(this.$el.get(0)),s=7,o=17,u=2,a=13,f=this,l,c,h;if(t.expanded){l=r.append("g").attr("class","proactive-monitoring-leaf-container").attr("transform","translate(0,"+(this.options.penultimate_parent_node_r+this.options.unselected_stroke_width+this.options.ring_width)+")"),h=l.append("rect").attr("width",1).attr("height",1).attr("fill","#D4D3D4"),c=l.selectAll("g.proactive-monitoring-leaf-node").data(t._children,function(e,t){return e.id||(e.id=++t)});var p=c.enter().append("g").attr("class","proactive-monitoring-leaf-node").attr("transform","translate("+a+","+s+") scale(0.2)").each(function(e){e.node_view=new i,e.node_view.setElement(this),e.node_view.render(e)}).on("click",function(){n.event.stopPropagation()}).on("mouseover",function(e){n.event.stopPropagation();var t=n.select(this),i=n.transform(r.attr("transform")),s=n.transform(t.attr("transform")),o=[s.translate[0]+i.translate[0],s.translate[1]+i.translate[1]+10];f.tree_controller._showNodeTooltip(e,o)}).on("mouseout",function(e){n.event.stopPropagation(),f.tree_controller._hideNodeTooltip(e)});h.transition().attr("height",s+(o+u)*(t._children.length-1));var d=this._getValueIndex,v=e.sortBy(t._children,function(e){return d(e.value)}),m=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return n}};c.transition().attr("transform",function(e,t){var n=e.id,r=m(v,n);return"translate("+a+","+(s+(o+u)*r)+") scale(1)"})}else l=r.select("g.proactive-monitoring-leaf-container"),c=l.selectAll("g.proactive-monitoring-leaf-node"),c.each(function(e){e.node_view=null}),c.transition().attr("transform","translate("+a+",0) scale(0.2)").remove(),h=l.selectAll("rect").transition().attr("height",1).remove().each("end",function(){l.remove()})},updateChildren:function(t){if(t.expanded){var r=n.select(this.$el.get(0)),i=7,s=17,o=2,u=13,a=r.select("g.proactive-monitoring-leaf-container"),f=a.selectAll("g.proactive-monitoring-leaf-node").data(t._children,function(e,t){return e.id||(e.id=++t)}),l=this._getValueIndex,c=e.sortBy(t._children,function(e){return l(e.value)}),h=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return n}};f.each(function(e){e.node_view.render(e)}),f.transition().attr("transform",function(e,t){var n=e.id,r=h(c,n);return"translate("+u+","+(i+(s+o)*r)+") scale(1)"})}},highlightNode:function(){var e=n.select(this.$el.get(0));e.select("circle").attr("stroke",this.options.selected_stroke),e.select("circle").attr("stroke-width",this.options.selected_stroke_width)},unhighlightNode:function(){var e=n.select(this.$el.get(0));e.select("circle").attr("stroke",this.options.unselected_stroke),e.select("circle").attr("stroke-width",this.options.unselected_stroke_width)}});return s}),define("contrib/text!pm/PMTooltip.html",[],function(){return'<div class="pm-tooltip-content pm-tooltip-background">\n	<table style="float:left;clear:both;">\n		<tbody>\n			<tr>\n				<td>\n					<div class="pm-tooltip-button-container">\n						<ul style="list-style:none;margin:0px;">\n							<li style="margin-bottom:4px;">\n								<div class="pm-tooltip-icon-circle pm-tooltip-action-pin">\n									<span class="noel-icon-push_pin pm-tooltip-icon"></span>\n								</div>\n							</li>\n							<li>\n								<div class="pm-tooltip-icon-circle pm-tooltip-action-drill">\n									<span class="icon-arrow-right pm-tooltip-icon"></span>\n								</div>\n							</li>\n						</ul>\n					</div>\n				</td>\n				<td>\n					<div class="pm-tooltip-text-container">\n						<div class="pm-tooltip-text pm-tooltip-title">\n							NODE NAME\n						</div>\n						<div class="pm-tooltip-text pm-tooltip-subtitle">\n							<span class="pm-tooltip-timerange-length">XX</span>\n							<span> Distribution - </span>\n							<span class="pm-tooltip-metric">XXXX</span>\n						</div>\n					</div>\n				</td>\n			</tr>\n		</tbody>\n	</table>\n	<div class="pm-tooltip-chart-container">\n		CHART GOES HERE!\n	</div>\n</div>\n'}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMTooltip.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMTooltipView",["underscore","jquery","./contrib/d3/d3.amd","backbone","pm/PMEventDispatcher","pm/PMChartView","contrib/text!pm/PMTooltip.html","css!pm/PMTooltip.css"],function(e,t,n,r,i,s,o){var u=r.View.extend({tagName:"div",className:"proactive-monitoring-tooltip",events:{"click .pm-tooltip-icon-circle.pm-tooltip-action-pin":"pinNode","click .pm-tooltip-icon-circle.pm-tooltip-action-drill":"drillNode"},options:{distribution_managerid:undefined,specific_managerid:undefined},current_node:undefined,initialize:function(e){this.distribution_managerid=e.distribution_managerid,this.specific_managerid=e.specific_managerid,r.View.prototype.initialize.apply(this,arguments)},render:function(){this.$el.html(o),this.$node_title=this.$(".pm-tooltip-title"),this.$timerange_length=this.$(".pm-tooltip-timerange-length"),this.$metric=this.$(".pm-tooltip-metric"),this.chart_view=new s({el:this.$(".pm-tooltip-chart-container"),distribution_managerid:this.distribution_managerid,specific_managerid:this.specific_managerid}),this.chart_view.render()},showDetail:function(e,t,n,r){this.current_node!==undefined&&this.current_node.node_view!==undefined&&this.current_node.node_view!==null&&this.current_node.node_view.unhighlightNode(),e.node_view!==undefined&&e.node_view!==null&&e.node_view.highlightNode(),this.current_node=e,this.$node_title.text(e.name),this.$metric.text(t),this.setTimeLabels(n,r),this.chart_view.setTimeLabels(n,r)},setTimeLabels:function(e,t){t==="now"?this.$timerange_length.text(e.split("@")[0]):this.$timerange_length.text("Custom Time")},pinNode:function(){console.log("[PMTooltip] pin called on node:"+this.current_node.name),i.trigger("node:pin",this.current_node)},drillNode:function(){console.log("[PMTooltip] drill called on node:"+this.current_node.name),i.trigger("node:drill",this.current_node)}});return u}),define("contrib/text!pm/PMTreeControls.html",[],function(){return'<div class="proactive-monitoring-tree-controls-container">\n	<table>\n		<tbody>\n			<tr>\n				<td style="vertical-align: top;">\n					<div class="pm-tree-button-container">\n						<ul style="list-style:none;margin:0px;">\n							<li style="margin-bottom:4px;">\n								<div class="pm-tree-icon-circle pm-tree-action-zoomin" title="Zoom In">\n									<span class="icon-plus pm-tree-icon"></span>\n								</div>\n							</li>\n							<li style="margin-bottom:4px;">\n								<div class="pm-tree-icon-circle pm-tree-action-zoomout" title="Zoom Out">\n									<span class="icon-minus pm-tree-icon"></span>\n								</div>\n							</li>\n							<li>\n								<div class="pm-tree-icon-circle pm-tree-action-center" title="Center View">\n									<span class="icon-location pm-tree-icon"></span>\n								</div>\n							</li>\n						</ul>\n					</div>\n				</td>\n				<td class="pm-tree-legend-container" style="display:none;">\n					<ul style="list-style:none;margin:0px;">\n						<li style="margin-bottom:4px;">\n							<div class="pm-tree-legend-circle pm-tree-legend-critical"></div>\n							<span class="pm-tree-legend-label">Critcal Threshold </span>\n							<span class="pm-tree-legend-label pm-tree-legend-comparator"></span>\n							<span class="pm-tree-legend-label pm-tree-legend-critical"></span>\n						</li>\n						<li style="margin-bottom:4px;">\n							<div class="pm-tree-legend-circle pm-tree-legend-warning"></div>\n							<span class="pm-tree-legend-label">Warning Threshold </span>\n							<span class="pm-tree-legend-label pm-tree-legend-comparator"></span>\n							<span class="pm-tree-legend-label pm-tree-legend-warning"></span>\n						</li>\n						<li style="margin-bottom:4px;">\n							<div class="pm-tree-legend-circle pm-tree-legend-normal"></div>\n							<span class="pm-tree-legend-label">Normal Threshold</span>\n						</li>\n						<li>\n							<div class="pm-tree-legend-circle pm-tree-legend-unknown"></div>\n							<span class="pm-tree-legend-label">Unknown/Offline</span>\n						</li>\n					</ul>\n				</td>\n				<td class="pm-tree-legend-undefined-container">\n					<ul style="list-style:none;margin:0px;">\n						<li style="margin-bottom:4px;">\n							<div class="alert alert-warning">\n								<i class="icon-alert"></i>\n								No threshold data for selected metric\n							</div>\n						</li>\n						<li>\n							<div class="pm-tree-legend-circle pm-tree-legend-unknown"></div>\n							<span class="pm-tree-legend-label">Unknown/Offline</span>\n						</li>\n					</ul>\n				</td>\n			</tr>\n		</tbody>\n	</table>\n</div>'}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("pm/PMTree.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pm/PMTreeView",["underscore","jquery","pm/contrib/d3/d3.amd","backbone","splunkjs/mvc/messages","splunkjs/mvc/simplesplunkview","splunkjs/mvc","pm/PMEventDispatcher","pm/PMParentNodeView","pm/PMTooltipView","contrib/text!pm/PMTreeControls.html","css!pm/PMTree.css"],function(e,t,n,r,i,s,o,u,a,f,l){var c={"processing-hierarchy":{icon:"info-circle",level:"info",message_template:e.template("Processing hierarchy: <%= text.complete%>% complete",null,{variable:"text"}),message:"Processing hierarchy, please wait."},"no-root-nodes":{icon:"warning-sign",level:"error",message:"Could not find any root nodes in the hierarchy. Please check your hierarchy data."},"parse-error":{icon:"warning-sign",level:"error",message:"Error parsing data from search. Please check searches."},empty:{icon:"blank",level:"blank alert-hide-icon",message:""},"no-results-performance":{icon:"warning-sign",level:"error",message:"No results from performance search, please check that you have performance data and that your tsidx namespaces are being populated with it."},"no-results":{icon:"warning-sign",level:"error",message:"No results from hierarchy search, please check that you have hierarchy data in your index over the last 8 hours."}},h=s.extend({className:"proactive-monitoring-tree",output_mode:"json_rows",resultOptions:{output_time_format:"%s.%Q"},events:{"click .pm-tree-icon-circle.pm-tree-action-zoomin":"zoomInTree","click .pm-tree-icon-circle.pm-tree-action-zoomout":"zoomOutTree","click .pm-tree-icon-circle.pm-tree-action-center":"centerTree"},options:{data:"preview",id_field:"moid",name_field:"name",parent_field:"parent",tree_field:"host",type_field:"type",leaf_type:"VirtualMachine",root_type:"RootFolder",managerid:undefined,metric:undefined,threshold_data:undefined,perf_managerid:undefined,perf_message_container:undefined,tooltip_distribution_managerid:undefined,tooltip_specific_managerid:undefined,tooltip_tree_token:undefined,tooltip_node_token:undefined,tooltip_earliest:undefined,tooltip_latest:undefined},threshold_data:undefined,tooltip_show_timeout:null,displayMessage:function(t,n,r){if(r===null||r===undefined)r=this.$el,this._viz=null;if(c.hasOwnProperty(t)){var s=e.clone(c[t]);n!==null&&n!==undefined&&(s.message=s.message_template(n,{variable:"text"})),i.render(s,r)}else i.render(t,r);return this},initialize:function(e){s.prototype.initialize.apply(this,arguments),this.settings.enablePush("tooltip_tree_token"),this.settings.enablePush("tooltip_node_token"),this.bindToComponentSetting("perf_managerid",this._onPerfManagerChange,this),this.perf_manager||this._onPerfManagerChange(o.Components,null),u.on("layout:resize",this.onLayoutResize,this),this.threshold_data=e.threshold_data,this.settings.on("change:metric",this.updateLegend,this)},formatResults:function(e){if(!e)return{fields:[],rows:[[]],parse_error:!0};var t=this.output_mode||this.outputMode,n=this.data_types[t],r=e.data();return this.formatData({fields:r.fields,rows:r[n],parse_error:!1})},formatData:function(t){var r=e.indexOf(t.fields,this.settings.get("id_field")),i=e.indexOf(t.fields,this.settings.get("parent_field")),s=e.indexOf(t.fields,this.settings.get("tree_field")),o=e.indexOf(t.fields,this.settings.get("type_field")),u=e.indexOf(t.fields,this.settings.get("name_field")),a=this.settings.get("leaf_type").toLowerCase(),f=[],l={},c,h,p,d,v,m,g,y,b,w,E=0;this.displayMessage("processing-hierarchy");for(c=0;c<t.rows.length;c++)d=t.rows[c],v=d[s],l.hasOwnProperty(v)||(l[v]={}),m=l[v],p=d[r],m.hasOwnProperty(p)||(m[p]={id:null,parent:null,name:null,type:null,tree:v,node_id:p,_children:[],node_view:null,penultimate:!1,expanded:!1,x0:null,y0:null,value:[0,0,0,0]}),y=m[p],h=d[i],m.hasOwnProperty(h)||(m[h]={id:null,name:null,parent:null,type:null,tree:v,node_id:h,_children:[],node_view:null,penultimate:!1,expanded:!1,x0:null,y0:null,value:[0,0,0,0]}),b=m[h],b._children.push(y),b.id=v+":"+h,w=d[o],y.id=v+":"+p,y.type=w,y.parent=b,y.name=d[u],w.toLowerCase()===a?(b.type!==this.settings.get("root_type")&&(b.penultimate=!0),y._children=null):w===this.settings.get("root_type")&&(y.expanded=!0,y.parent=null,y.penultimate=!1,f.push(y)),g=Math.floor(c/t.rows.length*100),g>E&&this.displayMessage("processing-hierarchy",{complete:g});var S;if(f.length===1)S=f[0];else{if(f.length===0)return this.displayMessage("no-root-nodes"),{parse_error:!0,message:"no-root-nodes"};S={id:"__ENV__:__ROOT__",name:"Environment",parent:null,type:null,tree:null,node_id:null,_children:f,node_view:null,penultimate:!1,expanded:!0,x0:null,y0:null,value:[0,0,0,0]}}var x=n.layout.cluster();x.children(function(e){return e.expanded&&!e.penultimate?e._children:null});var T=function(e){var t=e.value;return t[0]>0?[4,t[0]]:t[1]>0?[3,t[1]]:t[2]>0?[1,t[2]]:[0,t[3]]};return x.sort(function(e,t){var r=T(e),i=T(t);return r[0]===i[0]?n.descending(r[1],i[1]):n.descending(r[0],i[0])}),x.nodeSize([45,245]),x.separation(function(e,t){return t.penultimate&&t.expanded?3.7:e.parent===t.parent?1:2}),{tree_manifest:l,root_node:S,tree_layout:x,parse_error:!1}},createView:function(){this.$el.html("");var e=this.$el.width(),r=this.$el.height(),i=n.select(this.$el.get(0));this.$el.html(l);var s=i.selectAll("div.proactive-monitoring-node-tooltip-container").data([{tooltip_view:new f({distribution_managerid:this.settings.get("tooltip_distribution_managerid"),specific_managerid:this.settings.get("tooltip_specific_managerid")})}]).enter().append("div").attr("class","proactive-monitoring-node-tooltip-container").style("opacity","1e-6").style("display","none").each(function(e){e.tooltip_view.setElement(this),e.tooltip_view.render()}).on("mouseover",function(e){e.tooltip_view.current_node!==undefined&&e.tooltip_view.current_node.node_view.highlightNode();var t=n.select(this);t.transition().duration(2).style("display","block").transition().duration(150).style("opacity","1")}).on("mouseout",function(e){var t=n.select(this);t.transition().duration(300).style("opacity","1e-6").transition().duration(2).style("display","none").each("end",function(e){e.tooltip_view.current_node!==undefined&&e.tooltip_view.current_node.node_view!==null&&e.tooltip_view.current_node.node_view!==undefined&&e.tooltip_view.current_node.node_view.unhighlightNode()})}),o=i.append("svg").attr("class","proactive-monitoring-main-stage").attr("width",e).attr("height",r).append("g").attr("transform","translate(20,20)scale(1,1)"),u=n.behavior.drag().origin(Object).on("dragstart",function(){t(this).parent().addClass("active-drag-move")}).on("dragend",function(){t(this).parent().removeClass("active-drag-move")}).on("drag",function(e,t){var r=o,i=n.transform(r.attr("transform")),s=i.translate;s[0]=s[0]+n.event.dx,s[1]=s[1]+n.event.dy,r.attr("transform",i.toString())});return n.select(this.$el.get(0)).select("svg.proactive-monitoring-main-stage").call(u),{el_size:{width:e,height:r},d3stage:o,d3tooltip:s}},updateView:function(e,t){if(t.parse_error){console.error("[PMTree] Failed to parse data properly, cannot render tree."),t.hasOwnProperty("message")?this.displayMessage(t.message):this.displayMessage("parse-error");return}this._centerTree(e);var n=t.root_node;n.x0=0,n.y0=35,this.applyPerfToTree()||this._renderTree(n,e,t),this.updateLegend()},_renderTree:function(e,t,r){var i=300,s=n.svg.diagonal(),o=r.tree_layout,u=this._getFixedDepth(t),f=o.nodes(r.root_node),l=o.links(f),c=this,h=t.d3stage.selectAll("g.pm-node.proactive-monitoring-parent-node").data(f,function(e,t){return e.id||(e.id=++t)}),p=h.enter().append("g").attr("class","pm-node proactive-monitoring-parent-node").attr("transform",function(t){return"translate("+e.x0+","+e.y0+") scale(0.2)"}).each(function(e){e.node_view=new a({tree_controller:c}),e.node_view.setElement(this)}).on("click",this._toggleChildren.bind(this)).on("mouseover",function(e){if(e.id==="__ENV__:__ROOT__")return;var t=n.select(this),r=n.transform(t.attr("transform")),i=[r.translate[0],r.translate[1]];c.tooltip_show_timeout=setTimeout(function(){c._showNodeTooltip(e,i)},350)}).on("mouseout",function(e){if(e.id==="__ENV__:__ROOT__")return;clearTimeout(c.tooltip_show_timeout),c._hideNodeTooltip(e)}),d=h.exit().each(function(e){e.node_view=null}),v=h.each(function(e){e.node_view!==null&&e.node_view.render(e)}).transition().duration(i).attr("transform",function(e){return"translate("+e.x+","+e.y+")"});d.transition().duration(i).attr("transform",function(t){return"translate("+e.x+","+e.y+")  scale(0.2)"}).remove();var m=t.d3stage.selectAll("path.pm-link").data(l,function(e){return e.target.id});m.enter().insert("path","g").attr("class","pm-link").attr("d",function(t){var n={x:e.x0,y:e.y0};return s({source:n,target:n})}),m.transition().duration(i).attr("d",s),m.exit().transition().duration(i).attr("d",function(t){var n={x:e.x,y:e.y};return s({source:n,target:n})}).remove(),f.forEach(function(e){e.x0=e.x,e.y0=e.y})},_getFixedDepth:function(e){var t=e.el_size.height;return t>300&&(t=300),t},_showNodeTooltip:function(e,t){this.settings.set("tooltip_tree_token",e.tree),this.settings.set("tooltip_node_token",e.node_id);var r=n.transform(this._viz.d3stage.attr("transform")),i=[(t[0]+20)*r.scale[0]+r.translate[0],(t[1]-15)*r.scale[1]+r.translate[1]],s=this._viz.d3tooltip,o=s.data()[0].tooltip_view;o.showDetail(e,this.settings.get("metric"),this.settings.get("tooltip_earliest"),this.settings.get("tooltip_latest")),s.style("display","block").style("opacity","1e-6"),s.style("left",String(i[0])+"px").style("top",String(i[1])+"px"),s.transition().style("opacity","1")},_hideNodeTooltip:function(e){var t=this._viz.d3tooltip;t.transition().duration(300).style("opacity","1e-6").transition().duration(2).style("display","none").each("end",function(e){e.tooltip_view.current_node!==undefined&&e.tooltip_view.current_node.node_view!==null&&e.tooltip_view.current_node.node_view!==undefined&&e.tooltip_view.current_node.node_view.unhighlightNode()})},_toggleChildren:function(e,t){if(n.event.defaultPrevented)return;n.event.stopPropagation(),e.expanded?e.expanded=!1:e.expanded=!0,e.penultimate&&e.node_view.toggleChildren(e),this._renderTree(e,this._viz,this._data)},onLayoutResize:function(){this._data!==null&&this._viz!==null&&(this._updateViz(),this.updateView(this._viz,this._data))},_updateViz:function(){var e=this.$el.width(),t=this.$el.height();n.select(this.$el.get(0)).select("svg.proactive-monitoring-main-stage").attr("width",e).attr("height",t),this._viz.el_size={width:e,height:t}},updateLegend:function(){if(this._viz===undefined||this._viz===null||!this._viz.hasOwnProperty("d3stage")){console.log("PMTree failed to set legend due to lack of viz");return}var e=this.settings.get("metric"),n=this.settings.get("leaf_type"),r=this.threshold_data[n]||{},i=r["p_"+e];if(i!==null&&i!==undefined){this.$(".pm-tree-legend-undefined-container").hide();var s=this.$(".pm-tree-legend-container");t(".pm-tree-legend-comparator",s).text(i.comparator),t(".pm-tree-legend-critical.pm-tree-legend-label ",s).text(i.critical),t(".pm-tree-legend-warning.pm-tree-legend-label ",s).text(i.warning),s.show()}else this.$(".pm-tree-legend-container").hide(),this.$(".pm-tree-legend-undefined-container").show()},zoomInTree:function(e){e.preventDefault(),e.stopPropagation(),console.log("PMTree zoom in called on tree"),this._zoomTree(1.25)},zoomOutTree:function(e){e.preventDefault(),e.stopPropagation(),console.log("PMTree zoom out called on tree"),this._zoomTree(.8)},_zoomTree:function(e){if(this._viz===undefined||this._viz===null||!this._viz.hasOwnProperty("d3stage")){console.log("PMTree failed to zoom due to lack of d3stage in viz");return}var t=this._viz.d3stage,r=n.transform(t.attr("transform")),i=r.scale;i[0]=i[0]*e,i[1]=i[1]*e,t.transition().attr("transform",r.toString())},centerTree:function(e){e.preventDefault(),e.stopPropagation(),console.log("PMTree center called on tree"),this._centerTree(this._viz)},_centerTree:function(e){if(e===undefined||e===null||!e.hasOwnProperty("d3stage")){console.log("PMTree failed to center due to lack of d3stage in viz");return}var t=e.d3stage,r=n.transform(t.attr("transform")),i=r.scale;i[0]=1,i[1]=1;var s=r.translate;s[0]=(e.el_size.width-40)/2,s[1]=35,t.transition().attr("transform",r.toString())},formatPerfResults:function(t){if(!t)return{fields:[],rows:[[]],parse_error:!0};var n=this.output_mode||this.outputMode,r=this.data_types[n],i=t.data(),s=i[r],o=e.indexOf(i.fields,this.settings.get("id_field")),u=e.indexOf(i.fields,this.settings.get("tree_field")),a=e.indexOf(i.fields,"threshold_index");return{id_index:o,tree_index:u,threshold_index_index:a,rows:s,fields:i.fields}},applyPerfToTree:function(){if(this.perf_data===null||this._isPerfJobDone===!1){console.log("[PMTree] Cannot Apply Performance Data to Tree: performance data is not available");return}if(this._viz===null||this._viz===undefined||this._data===null||this._data===undefined||!this._data.hasOwnProperty("tree_manifest")){console.log("[PMTree] Cannot Apply Performance Data to Tree: hierarchy data is not available");return}var t=this._data.tree_manifest;e.each(t,function(t,n,r){e.each(t,function(e,t,n){e.value=[0,0,0,1]})});var n,r,i,s,o,u,a,f;for(n=0;n<this.perf_data.rows.length;n++)r=this.perf_data.rows[n],i=r[this.perf_data.tree_index],s=r[this.perf_data.id_index],o=r[this.perf_data.threshold_index_index],u=[0,0,0,0],u[o]=1,a=t[i],a===undefined||a===null?console.log("[PMTree] Cannot apply performance data to tree: could not find node manifest for tree "+i):(f=a[s],f===undefined||f===null?console.log("[PMTree] Cannot apply performance data to node: could not find node for id "+s+" in tree "+i):f.value=u);return this._aggregateNodeValues(this._data.root_node),this._renderTree(this._data.root_node,this._viz,this._data),!0},_aggregateNodeValues:function(t){var n;return t._children===null?n=t.value:n=e.reduce(t._children,function(e,t){var n=this._aggregateNodeValues(t);return e[0]=e[0]+n[0],e[1]=e[1]+n[1],e[2]=e[2]+n[2],e[3]=e[3]+n[3],e},[0,0,0,0],this),t.value=n,t.node_view!==null&&t._children!==null&&(t.node_view.bakePie(t),t.penultimate&&t.expanded&&t.node_view.updateChildren(t)),n},_onPerfManagerChange:function(t,n){this.perf_manager&&(this.perf_manager.off(null,null,this),this.perf_manager=null),this.perf_results_model&&(this.perf_results_model.off(null,null,this),this.perf_results_model.destroy(),this.perf_results_model=null),this.perf_manager=n;if(!n){this.displayMessage("no-search",null,this.settings.get("perf_message_container"));return}this.displayMessage("empty",null,this.settings.get("perf_message_container"));var r=this.output_mode||this.outputMode;this.perf_results_model=this.perf_manager.data(this.settings.get("data")||"preview",e.extend({output_mode:r,count:this.returnCount,offset:this.offset},this.resultOptions)),n.on("search:start",this._onPerfSearchStart,this),n.on("search:progress",this._onPerfSearchProgress,this),n.on("search:cancelled",this._onPerfSearchCancelled,this),n.on("search:error",this._onPerfSearchError,this),n.on("search:fail",this._onPerfSearchFailed,this),this.perf_results_model.on("data",this._onPerfDataChanged,this),this.perf_results_model.on("error",this._onPerfSearchError,this),this._checkPerfManagerState(),n.replayLastSearchEvent(this)},_checkPerfManagerState:function(){var e=this.perf_manager;if(!e)return;if(!e.job&&e.lastError){this._onPerfSearchError(e.lastError);return}if(!e.job)return;var t=e.job.state();if(t&&t.content&&(t.content.isDone||t.content.isFailed)){this._onPerfSearchProgress(t);return}},_onPerfDataChanged:function(){if(!this.perf_results_model.hasData()){this._isPerfJobDone&&this.displayMessage("no-results-performance",null,this.settings.get("perf_message_container"));return}this.perf_data=this.formatPerfResults(this.perf_results_model),this.applyPerfToTree(),this.displayMessage("empty",null,this.settings.get("perf_message_container"))},_onPerfSearchProgress:function(e){e=e||{};var t=e.content||{},n=t.resultPreviewCount||0,r=this._isPerfJobDone=t.isDone||!1;if(n===0){this.displayMessage(r?"no-results-performance":"waiting",null,this.settings.get("perf_message_container"));return}},_onPerfSearchStart:function(){this._isPerfJobDone=!1,this.perf_data=null,this.displayMessage("waiting",null,this.settings.get("perf_message_container"))},_onPerfSearchCancelled:function(){this._isPerfJobDone=!1,this.displayMessage("cancelled",null,this.settings.get("perf_message_container"))},_onPerfSearchError:function(e,t){this._isPerfJobDone=!1;var n=i.getSearchErrorMessage(t)||e;this.displayMessage({level:"error",icon:"warning-sign",message:n},null,this.settings.get("perf_message_container"))},_onPerfSearchFailed:function(e,t){var n=i.getSearchFailureMessage(e);this.displayMessage({level:"error",icon:"warning-sign",message:n},null,this.settings.get("perf_message_container"))}});return h}),require(["splunkjs/mvc","splunkjs/mvc/utils","splunkjs/mvc/tokenutils","underscore","jquery","splunkjs/mvc/simplexml","splunkjs/mvc/headerview","splunkjs/mvc/footerview","splunkjs/mvc/simpleform/input/dropdown","splunkjs/mvc/simpleform/input/timerange","splunkjs/mvc/simpleform/input/submit","splunkjs/mvc/searchmanager","splunkjs/mvc/postprocessmanager","splunkjs/mvc/simplexml/urltokenmodel","pm/PMLayoutView","pm/ThresholdCollection","pm/contrib/d3/d3.amd","pm/PMPinboardView","pm/PMTreeView"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=require;b(["../../static/app/splunk_for_vmware/dashboard.js"]);var w=!0,E=new p;e.Components.registerInstance("url",E);var S=e.Components.getInstance("default",{create:!0}),x=e.Components.getInstance("submitted",{create:!0});S.set(E.toJSON());var T={},N=r.debounce(function(e){x.set(S.toJSON()),E.saveOnlyWithPrefix("form\\.",S.toJSON(),{replaceState:e})}),C=function(){N(w)};E.on("url:navigate",function(){S.set(E.toJSON()),!r.isEmpty(E.toJSON())&&!r.all(E.toJSON(),r.isUndefined)?C():x.clear()});var k=new c({id:"metrics_search",latest_time:"2",earliest_time:"1",search:"| inputlookup VMWPerformanceMetrics",cancelOnUnload:!0,status_buckets:0,app:t.getCurrentApp(),auto_cancel:90,cache:6e3,preview:!1},{tokens:!0}),L=new h({managerid:"metrics_search",id:"search1",latest_time:"$latest$",search:"search entity=$entity_type$ | dedup perftype | table perftype",earliest_time:"$earliest$",cancelOnUnload:!0,status_buckets:0,app:t.getCurrentApp(),auto_cancel:90,preview:!0},{tokens:!0}),A=new h({managerid:"metrics_search",id:"search2",latest_time:"$latest$",search:"search entity=$entity_type$ perftype=$perf_type$ | table metric",earliest_time:"$earliest$",cancelOnUnload:!0,status_buckets:0,app:t.getCurrentApp(),auto_cancel:90,preview:!0},{tokens:!0});(new o({id:"header",section:"dashboards",el:i(".header"),acceleratedAppNav:!0},{tokens:!0})).render(),(new u({id:"footer",el:i(".footer")},{tokens:!0})).render();var O=(new a({id:"field1",choices:[{value:"virtualmachine",label:"Virtual Machine"},{value:"hostsystem",label:"Host System"}],"default":"virtualmachine",seed:"virtualmachine",value:"$form.entity_type$",showClearButton:!1,el:i("#field1")},{tokens:!0})).render();O.on("change",function(e,t,n){if(!O.hasValue()){T.field1=!0,this.val(O.settings.get("default"));return}var r=O.val()||O.settings.get("default"),i=r;S.set("entity_type",i)}),T.field1=!0,O.trigger("change",O.val(),O);var M=(new a({id:"field2",choices:[],"default":"cpu",seed:"cpu",labelField:"perftype",valueField:"perftype",value:"$form.perf_type$",showClearButton:!1,managerid:"search1",el:i("#field2")},{tokens:!0})).render();M.on("change",function(e,t,n){if(!M.hasValue()){T.field2=!0,this.val(M.settings.get("default"));return}var r=M.val()||M.settings.get("default"),i=r;S.set("perf_type",i)}),T.field2=!0,M.trigger("change",M.val(),M);var _=(new a({id:"field3",choices:[],valueField:"metric",labelField:"metric",value:"$form.metric$",managerid:"search2",showClearButton:!1,width:350,el:i("#field3")},{tokens:!0})).render();_.on("change",function(e,t,n){if(!_.hasValue()){T.field3=!0,this.val(_.settings.get("default"));return}var r=_.val()||_.settings.get("default"),i=r;S.set("metric",i)}),T.field3=!0,_.trigger("change",_.val(),_);var D=(new f({id:"field4","default":{latest_time:"now",earliest_time:"-24h@h"},earliest_time:"$earliest$",latest_time:"$latest$",el:i("#field4")},{tokens:!0})).render();D.on("change",function(e,t,n){if(!D.hasValue()){T.field4=!0,D.updateValueWithDefault();return}T.field4?T.field4=!1:C()}),T.field4=!0,D.trigger("change",D.val(),D);var P=(new l({id:"submit",el:i("#search_btn")},{tokens:!0})).render();P.on("submit",function(){var e=_.val(),t=_.select||_.visualization;e===undefined||r.find(t._data,function(t){return t.metric===e})===undefined?alert("You must select a metric to kick off performance searches!"):C()}),r.isEmpty(E.toJSON())||C(),s.ready(),w=!1,i("body").removeClass("preload");var H=i(".proactive-monitoring-container").first(),B=new d({el:H});B.render();var j=new v,F=e.Components.get("submitted"),I={};j.on("sync",function(){I=this.reduce(function(e,t){var n=t.entry.content.attributes.entitytype.toLowerCase();return e.hasOwnProperty(n)||(e[n]={}),e[n][t.entry.content.attributes.metric]=t.entry.content.attributes,e},I),F.trigger("change:metric")},j),j.fetch({data:{app:"splunk_for_vmware",search:"p_*",count:"0"}}),F.on("change:metric",r.debounce(function(){var e=F.get("metric"),t=F.get("entity_type"),n=I[t]||{};if(e!==null&&e!==undefined&&n.hasOwnProperty("p_"+e)){var r=n["p_"+e],i="eval threshold_severity=case(avg_metric"+r.comparator+r.critical+', "critical", avg_metric'+r.comparator+r.warning+', "warning", isnotnull(avg_metric), "normal", 1==1, "unknown")';i+=' | eval threshold_index=case(threshold_severity=="critical", 0, threshold_severity=="warning", 1, threshold_severity=="normal", 2, threshold_severity=="unknown", 3) ',F.set("threshold_snippet",i)}else F.set("threshold_snippet",'eval threshold_severity="unknown" | eval threshold_index=3')}));var q=new c({id:"virtualmachine-hierarchy",earliest_time:"-8h",latest_time:"now",preview:!1,cache:600,search:'sourcetype=vmware:inv:hierarchy earliest=-8h latest=now "\\"type\\": \\"VirtualMachine\\"" OR "\\"type\\": \\"RootFolder\\"" OR "\\"type\\": \\"HostSystem\\"" OR "\\"type\\": \\"ClusterComputeResource\\"" | spath changeSet.runtime.host.moid output=vmhost | spath moid output=moid | spath type output=type | spath changeSet.name output=name | search type="HostSystem" OR type="VirtualMachine" OR type="ClusterComputeResource" OR type="RootFolder" | spath changeSet.parent.moid output=parent   | spath changeSet.parent.type output=parentType   | spath rootFolder.moid output=rootFolderMoid   | eval parent=if(type="VirtualMachine", vmhost, if(parentType="ComputeResource" OR parentType="Folder", rootFolderMoid, parent)) | eval parentType=if(type="VirtualMachine", "HostSystem", if(parent=rootFolderMoid, "RootFolder", parentType))  | stats first(name) as name first(type) as type first(parent) as parent first(parentType) as parentType by host, moid | eval moid=if(type="RootFolder", "*", moid) | eval parent=if(parentType="RootFolder", "*", parent)',time_format:"%s.%Q"},{tokens:!0,tokenNamespace:"submitted"}),R=new c({id:"hostsystem-hierarchy",earliest_time:"-8h",latest_time:"now",preview:!1,cache:600,search:'sourcetype=vmware:inv:hierarchy earliest=-8h latest=now "\\"type\\": \\"RootFolder\\"" OR "\\"type\\": \\"HostSystem\\"" OR "\\"type\\": \\"ClusterComputeResource\\"" | spath moid output=moid | spath type output=type | spath changeSet.name output=name | search type="HostSystem" OR type="ClusterComputeResource" OR type="RootFolder" | spath changeSet.parent.moid output=parent   | spath changeSet.parent.type output=parentType   | spath rootFolder.moid output=rootFolderMoid | eval parent=if(parentType="ComputeResource" OR parentType="Folder", rootFolderMoid, parent) | eval parentType=if(parent=rootFolderMoid, "RootFolder", parentType) | stats first(name) as name first(type) as type first(parent) as parent first(parentType) as parentType by host, moid | eval moid=if(type="RootFolder", "*", moid) | eval parent=if(parentType="RootFolder", "*", parent)',time_format:"%s.%Q"},{tokens:!0,tokenNamespace:"submitted"}),U=new c({id:"leaf-performance",earliest_time:"$earliest$",latest_time:"$latest$",preview:!1,cache:600,status_buckets:0,search:'| `tstats` avg(p_$metric$) max(p_$metric$) from vmw_perf_$perf_type$_$entity_type$ where instance="aggregated" groupby host, moid | stats avg(p_$metric$) AS avg_metric max(p_$metric$) as max_metric by host, moid | $threshold_snippet$',time_format:"%s.%Q"},{tokens:!0,tokenNamespace:"submitted"}),z=new c({id:"leaf-performance-distribution",earliest_time:"$earliest$",latest_time:"$latest$",preview:!1,cache:600,status_buckets:0,search:'| `tstats` median(p_$metric$) perc25(p_$metric$) perc75(p_$metric$) perc95(p_$metric$) min(p_$metric$) from vmw_perf_$perf_type$_$entity_type$ where instance="aggregated" p_$metric$>=0 groupby _time span=1m | timechart minspan=1m median(p_$metric$) AS center perc25(p_$metric$) as lower_quartile perc75(p_$metric$) as upper_quartile perc95(p_$metric$) as upper_extreme min(p_$metric$) as lower_extreme',time_format:"%s.%Q"},{tokens:!0,tokenNamespace:"submitted"}),W=new c({id:"specific-node-performance",earliest_time:"$earliest$",latest_time:"$latest$",preview:!1,cache:600,status_buckets:0,search:'| `tstats` avg(p_$metric$) from vmw_perf_$perf_type$_$entity_type$ where (moid="$tooltip_node$" AND host="$tooltip_tree$") OR (hs="$tooltip_node$" AND host="$tooltip_tree$") OR (ccr="$tooltip_node$" AND host="$tooltip_tree$") instance="aggregated" p_$metric$>=0 groupby _time span=1m | timechart minspan=1m avg(p_$metric$) AS metric',time_format:"%s.%Q"},{tokens:!0,tokenNamespace:"submitted"}),X=new g({el:B.$sidebar});X.render();var V=new y({el:B.$main_stage,managerid:"$entity_type$-hierarchy",leaf_type:"$entity_type$",metric:"$metric$",threshold_data:I,perf_managerid:"leaf-performance",perf_message_container:i("#search_processing_indicator"),tooltip_distribution_managerid:"leaf-performance-distribution",tooltip_specific_managerid:"specific-node-performance",tooltip_tree_token:"$tooltip_tree$",tooltip_node_token:"$tooltip_node$",tooltip_earliest:"$earliest$",tooltip_latest:"$latest$"},{tokens:!0,tokenNamespace:"submitted"});window.xmasMode=function(){return window.mode=1,window.setInterval(function(){window.mode===1?(m.selectAll("circle").attr("opacity",1),window.mode=2):window.mode===2?(m.selectAll("circle").each(function(e,t){t%2===0?m.select(this).attr("opacity",1):m.select(this).attr("opacity",1e-6)}),window.mode=3):window.mode===3?(m.selectAll("circle").each(function(e,t){t%2===1?m.select(this).attr("opacity",1):m.select(this).attr("opacity",1e-6)}),window.mode=4):(m.selectAll("circle").attr("opacity",1e-6),window.mode=1)},500)}}),define("profiles/pages/proactive_monitoring",function(){}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer(".splunk-message-container {\n    padding: 54px 40px 90px 40px;\n}\n\n.splunk-message-container.compact {\n    padding: 0px 40px 10px 40px;\n    text-align: center;\n}.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:\"\";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.shared-timerangepicker-dialog{width:640px;}.shared-timerangepicker-dialog td{vertical-align:top;}\n.timeRangeMenu,.trpCustomDateTime{display:none;}\n.help-block-timestamp{min-height:1em;line-height:1em;padding:3px;margin-top:5px;margin-right:15px;border-radius:3px;background-color:#eeeeee;}\n.timerangepicker-range-type{margin-right:25px;float:left;}\n.timerangepicker-range-type .btn{min-width:65px;}\n.btn.timerange-control>.icon-triangle-right-small{padding-left:5px;}\ninput.timerangepicker-earliest-date{margin-right:0;}\ninput.timerangepicker-real-time-earliest-time,input.timerangepicker-relative-earliest-time{margin-right:0;}\n.timerangepicker-realtime_range_type,.timerangepicker-relative_range_type{display:inline-block;vertical-align:middle;margin-right:25px;}\n.shared-timerangepicker-dialog-daterange-betweendates>tr:first-child>td{padding-bottom:0;}.shared-timerangepicker-dialog-daterange-betweendates>tr:first-child>td>.alerts{margin-top:0;}\n.form-inline .radio{line-height:18px;padding-top:5px;padding-bottom:5px;display:block;}\n.form-inline .radio+.radio{padding-top:0;}\ninput.date-before-time{margin-right:5px;}\n.advanced-time-documentation{clear:left;margin:10px 0 0 55px;display:block;float:left;}\n.presets-group{float:left;width:130px;}\n.presets-group+.presets-group{margin-left:10px;}\n.presets-divider-wrap{float:left;margin:10px;}\n.presets-divider{position:absolute;top:10px;bottom:10px;border-right:1px solid #cccccc;}\n.presets-group li{color:#999999;padding-left:20px;text-indent:-20px;overflow:hidden;text-overflow:ellipsis;}\n.vis-area{*zoom:1;}.vis-area:before,.vis-area:after{display:table;content:\"\";line-height:0;}\n.vis-area:after{clear:both;}\n.slide-area{width:1090px;}\n.content-wrapper{width:450px;float:left;}\n.modal .timerange-picker-wrapper{float:left;}.modal .timerange-picker-wrapper .shared-timerangepicker-dialog{width:640px;}\n.modal .timerange-picker-wrapper .accordion .accordion-heading .accordion-toggle{border-left:none;border-right:none;}\n.modal .timerange-picker-wrapper .accordion .accordion-body{border:none;}\n.modal .timerange-picker-wrapper .accordion .accordion-group.active:last-child .accordion-body{border:none;}\n.modal .timerange-picker-wrapper .accordion .accordion-group:last-child .accordion-toggle{border-bottom:none;border-radius:0px;}\n.modal .timerange-picker-wrapper .accordion .accordion-group:first-child .accordion-toggle{border-top:none;border-radius:0px;}\n.popdown-dialog .accordion-body .shared-timerangepicker-dialog-dateandtimerange{padding-left:18px;padding-right:18px;}\n.shared-timerangepicker .btn{max-width:99%;}.shared-timerangepicker .btn .time-label{display:inline-block;*display:inline;vertical-align:middle;max-width:99%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}\n/*  */\n\n.splunk-paginator {\n    user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    margin-bottom: 5px;\n    padding-left: 15px;\n}\n.splunk-paginator .disabled, .splunk-paginator .selected {\n    color: #999;\n    cursor: default;\n}\n.splunk-paginator a {\n    border: 1px solid transparent;\n    border-radius: 3px;\n    padding-left: 5px;\n    padding-right: 5px;\n    text-decoration: none;\n    min-width: 20px;\n    line-height: 20px;\n    display: inline-block;\n    text-align: center;\n}\n.splunk-paginator a.selected, .splunk-paginator a:hover {\n    background: #eee;\n}\n.splunk-paginator span {\n    padding-left: 5px;\n    padding-right: 5px;\n}\n.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:\"\";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.shared-resultstable .simpleResultsTableWrapper{width:100%;overflow:auto;}\n.shared-resultstable table .pos{color:#999999;text-align:right;font-size:11px;width:50px;}\n.shared-resultstable table tr>th:first-child,.shared-resultstable table tr>td:first-child{padding-left:20px;}\n.shared-resultstable table tr>th:last-child,.shared-resultstable table tr>td:last-child{padding-right:20px;}\n.shared-resultstable .table-chrome th a{color:#333333;text-decoration:none;}\n.shared-resultstable .table-chrome th.pos:after{content:\"\";}\n.shared-resultstable-resultstablemaster{overflow-x:auto;}.shared-resultstable-resultstablemaster table tr>th:first-child,.shared-resultstable-resultstablemaster table tr>td:first-child{padding-left:20px;}\n.shared-resultstable-resultstablemaster table tr>th:last-child,.shared-resultstable-resultstablemaster table tr>td:last-child{padding-right:20px;}\n.shared-resultstable-resultstablemaster td.numeric .multivalue-subcell{text-align:right;}\n.shared-resultstable-resultstablemaster td.timestamp,.shared-resultstable-resultstablemaster th.timestamp{min-width:150px;}\n.shared-resultstable-resultstablemaster table.single-column-table th.numeric{text-align:left;}\n.shared-resultstable-resultstablemaster table.single-column-table td.numeric{text-align:left;}.shared-resultstable-resultstablemaster table.single-column-table td.numeric .multivalue-subcell{text-align:left;}\n.shared-resultstable-resultstablemaster>.table>tbody>tr>td.with-overlay{padding-right:20px !important;}\n.shared-resultstable-resultstablemaster .overlay-cell{height:24px;width:15px;float:right;margin:-4px -20px -24px 0;}\n.shared-resultstable-resultstablemaster .overlay-cell-value{height:24px;width:0;border-left:15px solid #f5f5f5;}\n.shared-resultstable-resultstablemaster .heat-value{border-left-color:#d85d3c;}\n.shared-resultstable-resultstablemaster .max-value{border-left-color:#d85d3c;}\n.shared-resultstable-resultstablemaster .min-value{border-left-color:#6ab7c7;}\n.shared-resultstable-resultstablemaster .no-value{border-left-color:transparent;}\n.shared-resultstable-resultstablemaster .tbody tr.even td{background-color:transparent;}\n.shared-resultstable-resultstablemaster .tbody tr.odd td{background-color:#f5f5f5;}\n.shared-resultstable-resultstablemaster .wrapped-results th,.shared-resultstable-resultstablemaster .wrapped-results td{white-space:normal;}\n.shared-resultstable-resultstablemaster .not-wrapped-results th,.shared-resultstable-resultstablemaster .not-wrapped-results td{white-space:nowrap;}\n.shared-resultstable-resultstablemaster thead tr.sorts th.highlighted{background-color:#f5f5f5;background-image:-moz-linear-gradient(top, #ffffff, #e5e5e5);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e5e5e5));background-image:-webkit-linear-gradient(top, #ffffff, #e5e5e5);background-image:-o-linear-gradient(top, #ffffff, #e5e5e5);background-image:linear-gradient(to bottom, #ffffff, #e5e5e5);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe5e5e5', GradientType=0);background-color:#eeeeee;border-color:#aeaeae;border-top-color:#b7b7b7;border-bottom-color:#989898;background-position:0 0;}\n.shared-resultstable-resultstablemaster tbody td.highlighted,.shared-resultstable-resultstablemaster tbody tr.highlighted>td{background-color:#e4e4e4 !important;cursor:pointer;}\n.shared-resultstable-resultstablemaster .multivalue-subcell.highlighted{background-color:#e4e4e4 !important;cursor:pointer;}\n.shared-resultstable-resultstablemaster .scroll-table-wrapper{height:100%;}\n.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:\"\";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.timeline-results-wrapper{clear:both;min-height:400px;*zoom:1;}.timeline-results-wrapper:before,.timeline-results-wrapper:after{display:table;content:\"\";line-height:0;}\n.timeline-results-wrapper:after{clear:both;}\n.event .raw-event,.event .json-event{font-family:\"Droid Sans Mono\",\"Consolas\",\"Monaco\",\"Courier New\",Courier,monospace;font-size:12px;color:#333333;padding:0;border:none;background-color:transparent;margin:auto;padding:auto;}.event .raw-event em,.event .json-event em{font-style:normal ;}\n.event .raw-event .a,.event .json-event .a,.event .raw-event .h,.event .json-event .h,.event .raw-event .fields .v:hover,.event .json-event .fields .v:hover,.event .raw-event .fields .tg:hover,.event .json-event .fields .tg:hover,.event .raw-event .time:hover,.event .json-event .time:hover{background-color:#fde9a8;border-top:4px solid #fde9a8;border-bottom:4px solid #fde9a8;color:#32496a;}\n.event .raw-event .key-name,.event .json-event .key-name{color:#d85d3c;font-weight:bold;}\n.event .raw-event .string,.event .json-event .string{color:#1abb97;}\n.event .raw-event .number,.event .json-event .number{color:#956d95;}\n.event .raw-event .boolean,.event .json-event .boolean{color:#f7902b;}\n.event .raw-event .null,.event .json-event .null{color:#f7902b;}\n.shared-eventsviewer{border-left:1px solid #e5e5e5;}.shared-eventsviewer th.col-0,.shared-eventsviewer th.line-num,.shared-eventsviewer th.col-time{width:1px;}\n.shared-eventsviewer th.col-time.ie7,.shared-eventsviewer th.col-0.ie7{width:150px;}\n.shared-eventsviewer th.line-num.ie7{width:50px;}\n.shared-eventsviewer th.col-0:last-child,.shared-eventsviewer th.col-time:last-child{width:auto;}\n.shared-eventsviewer td._time>span>span{white-space:nowrap;}\n.shared-eventsviewer .shared-eventsviewer-table-body-primaryrow>td.no-wrap{white-space:pre;}\n.shared-eventsviewer td.expands.et_blue{background-color:#5379af;border-right:1px solid #5379af !important;}.shared-eventsviewer td.expands.et_blue:hover{background-color:#6b8cba !important;}\n.shared-eventsviewer td.expands.et_green{background-color:#9ac23c;border-right:1px solid #9ac23c !important;}.shared-eventsviewer td.expands.et_green:hover{background-color:#a8cb57 !important;}\n.shared-eventsviewer td.expands.et_magenta{background-color:#dd86af;border-right:1px solid #dd86af !important;}.shared-eventsviewer td.expands.et_magenta:hover{background-color:#e5a2c1 !important;}\n.shared-eventsviewer td.expands.et_orange{background-color:#f7902b;border-right:1px solid #f7902b !important;}.shared-eventsviewer td.expands.et_orange:hover{background-color:#f8a24d !important;}\n.shared-eventsviewer td.expands.et_purple{background-color:#956d95;border-right:1px solid #956d95 !important;}.shared-eventsviewer td.expands.et_purple:hover{background-color:#a482a4 !important;}\n.shared-eventsviewer td.expands.et_red{background-color:#d85d3c;border-right:1px solid #d85d3c !important;}.shared-eventsviewer td.expands.et_red:hover{background-color:#de765a !important;}\n.shared-eventsviewer td.expands.et_sky{background-color:#6ab7c7;border-right:1px solid #6ab7c7 !important;}.shared-eventsviewer td.expands.et_sky:hover{background-color:#84c4d1 !important;}\n.shared-eventsviewer td.expands.et_teal{background-color:#1abb97;border-right:1px solid #1abb97 !important;}.shared-eventsviewer td.expands.et_teal:hover{background-color:#1edab0 !important;}\n.shared-eventsviewer td.expands.et_yellow{background-color:#fac51c;border-right:1px solid #fac51c !important;}.shared-eventsviewer td.expands.et_yellow:hover{background-color:#fbce3f !important;}\n.shared-eventsviewer .event-fields-loading{padding:20px 0;color:#999999;}\n.shared-eventsviewer ul.condensed-selected-fields{margin:5px 0 0 0;max-width:100%;}.shared-eventsviewer ul.condensed-selected-fields li{color:#999999;margin-right:10px;float:left;list-style:none;display:inline;max-width:100%;}.shared-eventsviewer ul.condensed-selected-fields li>:last-child{padding-right:10px;border-right:1px dashed #cccccc;}\n.shared-eventsviewer ul.condensed-selected-fields li:last-child{margin-right:0;}.shared-eventsviewer ul.condensed-selected-fields li:last-child>:last-child{padding-right:0;border-right:none;}\n.shared-eventsviewer ul.condensed-selected-fields li .field-value{display:inline-block;}\n.shared-eventsviewer ul.condensed-selected-fields li .f-v{display:inline-block;max-width:500px;word-wrap:normal;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:top;}\n.shared-eventsviewer ul.condensed-selected-fields li .f-v,.shared-eventsviewer ul.condensed-selected-fields li .more-fields{color:#333333;cursor:pointer;}.shared-eventsviewer ul.condensed-selected-fields li .f-v:hover,.shared-eventsviewer ul.condensed-selected-fields li .more-fields:hover{color:#32496a;}\n.shared-eventsviewer ul.condensed-selected-fields li>.tag{color:inherit;}.shared-eventsviewer ul.condensed-selected-fields li>.tag:hover{color:#32496a;}\n.shared-eventsviewer .formated-time:hover{color:#32496a;text-decoration:underline;cursor:pointer;}\n.shared-eventsviewer .table-embed{margin-top:10px;margin-bottom:0;background-color:transparent;width:auto;clear:left;min-width:0;}.shared-eventsviewer .table-embed th:first-child{padding-left:0;}\n.shared-eventsviewer .table-embed td>a._time-expand{display:inline;margin-left:2px;}\n.shared-eventsviewer .table-embed td>a._time-expand:hover{text-decoration:none;}\n.shared-eventsviewer .table-embed td{border-bottom:none ;line-height:20px;}\n.shared-eventsviewer .table-embed tbody:first-child tr:first-child td{border-top:none ;}\n.shared-eventsviewer .table-embed a{text-decoration:none;display:block;min-width:16px;padding:0 3px;}.shared-eventsviewer .table-embed a:hover{background:#ebebeb;color:#32496a !important;}\n.shared-eventsviewer .table-embed a._time-expand:hover,.shared-eventsviewer .table-embed a.more-fields:hover{text-decoration:underline;background:none;}\n.shared-eventsviewer .table-embed .field-actions{font-size:14px;height:20px;overflow:hidden;text-align:center;padding-right:0;}\n.shared-eventsviewer .table-embed .btn-group{font-size:inherit;}\n.shared-eventsviewer .table-embed .field-type{padding-left:0;}\n.shared-eventsviewer .table-embed .field-key{padding:0 8px 0 0;}\n.shared-eventsviewer .table-embed td.field-value{word-break:break-all;padding-left:0;}\n.shared-eventsviewer .table-embed .field-value a{display:inline-block;}\n.shared-eventsviewer tr.row-more-fields+tr>td{border-top:none;border-bottom:none;}\n.shared-eventsviewer .col-more-fields{padding-left:10px;vertical-align:middle;}\n.shared-eventsviewer .col-visibility{text-align:left;font-size:20px;padding:0 !important;width:auto;}.shared-eventsviewer .col-visibility .checkbox{padding:1px 5px 1px 0;margin:0;}.shared-eventsviewer .col-visibility .checkbox>a,.shared-eventsviewer .col-visibility .checkbox>a:hover{padding:0;color:#333333 !important;}\n.shared-eventsviewer th.col-visibility{padding-bottom:4px !important;}\n.shared-eventsviewer th.col-field-name,.shared-eventsviewer th.col-field-value{padding-left:4px;}\n.shared-eventsviewer a:hover .icon-hidden{color:inherit;}\n.shared-eventsviewer .table-expanded a{color:#5379af !important;}\n.shared-eventsviewer .table-expanded a:hover{color:#32496a !important;}\n.shared-eventsviewer .table{margin-bottom:0;}\n.shared-eventsviewer .hide-line-num th.line-num,.shared-eventsviewer .hide-line-num td.line-num{display:none;}\n.shared-eventsviewer .normal.raw-event{background-color:inherit;border:none;white-space:pre;}\n.shared-eventsviewer .normal.raw-event.wrap{white-space:pre-wrap;}\n.shared-eventsviewer .event-actions{margin-top:10px;}\n.shared-eventsviewer .showinline,.shared-eventsviewer .hideinline{white-space:nowrap;word-wrap:normal;display:block;}\n.shared-eventsviewer-list,.shared-eventsviewer-table,.shared-eventsviewer-raw{background:#ffffff;}\n.events-results-table{min-width:100%;width:auto;*width:100%;}.events-results-table>tbody>tr>td>a,.events-results-table>tbody>tr>td>span.field-val{text-decoration:none;display:block;}\n.events-results-table>tbody>tr>td.one-value-drilldown:hover,.events-results-table>tbody>tr>td._time-drilldown:hover,.events-results-table>tbody>tr>td.multi-value-drilldown>a.field-val:hover{background-color:#e4e4e4;cursor:pointer;}\n.events-results-table>tbody>tr>td.one-value-drilldown:hover>a.field-val,.events-results-table>tbody>tr>td._time-drilldown:hover>a{color:#32496a;}\n.docked-header-table>table{border-top:0;}\n.reorderable-label{position:relative;display:block;padding:4px 8px 4px 18px;}\n.sorts .reorderable-label:after{font-family:\"Splunk Icons\";content:\"\\2195 \";padding-left:5px;color:#bbbbbb;}\n.sorts.asc .reorderable-label:after,.sorts.Asc .reorderable-label:after{content:\"\\21A5 \";color:#333333;}\n.sorts.desc .reorderable-label:after,.sorts.Desc .reorderable-label:after{content:\"\\21A7 \";color:#333333;}\n.reorderable-helper{background-color:#d85d3c;background-color:#ebebeb;background-image:-moz-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f5f5f5), to(#dcdcdc));background-image:-webkit-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-o-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:linear-gradient(to bottom, #f5f5f5, #dcdcdc);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5', endColorstr='#ffdcdcdc', GradientType=0);background-color:#e9e9e9;border:1px solid #aeaeae;color:#333333;text-shadow:0 1px 0 #ffffff;-webkit-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-moz-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);background-color:#f5f5f5;background-image:-moz-linear-gradient(top, #ffffff, #e5e5e5);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e5e5e5));background-image:-webkit-linear-gradient(top, #ffffff, #e5e5e5);background-image:-o-linear-gradient(top, #ffffff, #e5e5e5);background-image:linear-gradient(to bottom, #ffffff, #e5e5e5);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe5e5e5', GradientType=0);background-color:#eeeeee;border-color:#aeaeae;border-top-color:#b7b7b7;border-bottom-color:#989898;background-position:0 0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;z-index:10;line-height:16px;}\n.reorderable-helper.reorderable-remove{background-color:#fdf7f5;background-image:-moz-linear-gradient(top, #ffffff, #faeae6);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#faeae6));background-image:-webkit-linear-gradient(top, #ffffff, #faeae6);background-image:-o-linear-gradient(top, #ffffff, #faeae6);background-image:linear-gradient(to bottom, #ffffff, #faeae6);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#fffaeae6', GradientType=0);border-color:#cfb3ab;}\nth.reorderable{cursor:move;padding:0;}th.reorderable.sorts:after{display:none;}\n.on.reorderable-label:before{content:\"\";position:absolute;display:block;height:20px;width:7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAG0lEQVQIW2M0Njb+f/bsWUYYzciABuAyOFUAAKKMEAXhn6ySAAAAAElFTkSuQmCC) repeat;top:2px;left:4px;opacity:0.5;margin-bottom:-10px;}\nth.reorderable.moving{color:transparent;text-shadow:none;background:#cccccc;}\nth.reorderable.moving .reorderable-label:before{background:none;}\nth.reorderable.moving .reorderable-label:after{color:transparent;}\n.table-insertion-cursor{border-left:1px dashed #d85d3c;position:absolute;top:0;left:-100px;bottom:0;margin-left:-1px;display:none;}\n@media print{td.expands,td.actions,th.col-info{display:none !important;} .reorderable-label{padding-left:8px !important;}.reorderable-label:before{background:none !important;} .shared-eventsviewer pre.raw-event{word-break:break-all !important;word-wrap:break-word !important;overflow-wrap:break-word !important;white-space:normal !important;} .shared-eventsviewer,.events-viewer-wrapper{max-width:100% !important;width:100% !important;overflow:hidden !important;}}.shared-fieldinfo{width:600px;}.shared-fieldinfo .popdown-dialog-body{padding:0 20px 20px 20px;}\n.shared-fieldinfo h2{margin:-1px -21px 10px -21px;line-height:40px;font-size:16px;font-weight:normal;padding:0 60px 0 20px;background-color:#ebebeb;background-image:-moz-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f5f5f5), to(#dcdcdc));background-image:-webkit-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-o-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:linear-gradient(to bottom, #f5f5f5, #dcdcdc);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5', endColorstr='#ffdcdcdc', GradientType=0);background-color:#e9e9e9;border:1px solid #aeaeae;border-top-color:#b7b7b7;border-bottom-color:#989898;color:#333333;text-shadow:0 1px 0 #ffffff;-webkit-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-moz-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-webkit-border-top-right-radius:4px;-moz-border-radius-topright:4px;border-top-right-radius:4px;-webkit-border-top-left-radius:4px;-moz-border-radius-topleft:4px;border-top-left-radius:4px;border-bottom:1px solid #a9a9a9;box-shadow:none;*zoom:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}\n.shared-fieldinfo h3{font-size:12px;font-weight:bold;margin:15px 0 0 0;}\n.shared-fieldinfo p{line-height:30px;}\n.shared-fieldinfo .select-field-label{display:inline-block;margin:0 5px 0 20px;line-height:26px;color:#999999;vertical-align:top;}\n.shared-fieldinfo .fields-values>li,.shared-fieldinfo .fields-numeric>li{width:30%;}\n.shared-fieldinfo .graph-bar{margin:0 20px 0 0;height:16px;background-color:#999999;background-color:#b8b8b8;background-image:-moz-linear-gradient(top, #cccccc, #999999);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#cccccc), to(#999999));background-image:-webkit-linear-gradient(top, #cccccc, #999999);background-image:-o-linear-gradient(top, #cccccc, #999999);background-image:linear-gradient(to bottom, #cccccc, #999999);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffcccccc', endColorstr='#ff999999', GradientType=0);max-width:100%;}\n.shared-fieldinfo table.table-condensed{margin:13px -20px -5px -20px;width:598px;}\n.shared-fieldinfo td.value{max-width:200px;word-wrap:break-word;padding-left:20px;}\n.shared-fieldinfo th.value{padding-left:20px;}\n.shared-fieldinfo ul.inline{line-height:20px;margin-bottom:0;}.shared-fieldinfo ul.inline li{padding-left:0;}\n.shared-fieldinfo .close{display:block;top:15px;right:20px;opacity:0.4;filter:alpha(opacity=40);overflow:hidden;position:absolute;}.shared-fieldinfo .close:hover{opacity:0.8;filter:alpha(opacity=80);}\n.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:\"\";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.single-value{margin:20px;display:inline-block;*display:inline;*zoom:1;text-align:center;}.single-value .single-result{font-size:24px;font-weight:bold;word-wrap:break-word;}\n.single-value .before-label{margin-right:1em;}\n.single-value .after-label{margin-left:1em;}\n.single-value .under-label{text-transform:uppercase;color:#999999;font-size:11px;}\n.single-value .severe,.single-value.severe .single-result{color:#d85d3c;}\n.single-value .high,.single-value.high .single-result{color:#f7902b;}\n.single-value .elevated,.single-value.elevated .single-result{color:#fac51c;}\n.single-value .guarded,.single-value.guarded .single-result{color:#6ab7c7;}\n.single-value .low,.single-value.low .single-result{color:#65a637;}\n.single-value .None,.single-value.None .single-result{color:#999999;}\n.splunk-choice-input .splunk-choice-input-message {\n    color: gray;\n    font-size: 11px;\n    height: 0;\n    overflow: visible;\n}\n\n.splunk-choice-input {\n    padding-bottom: 15px;\n}/*\nVersion: 3.3.1 Timestamp: Wed Feb 20 09:57:22 PST 2013\n*/\n.select2-container {\n    position: relative;\n    display: inline-block;\n    /* inline-block for ie7 */\n    zoom: 1;\n    *display: inline;\n    vertical-align: top;\n}\n\n.select2-container,\n.select2-drop,\n.select2-search,\n.select2-search input{\n  /*\n    Force border-box so that % widths fit the parent\n    container without overlap because of margin/padding.\n\n    More Info : http://www.quirksmode.org/css/box.html\n  */\n  -webkit-box-sizing: border-box; /* webkit */\n   -khtml-box-sizing: border-box; /* konqueror */\n     -moz-box-sizing: border-box; /* firefox */\n      -ms-box-sizing: border-box; /* ie */\n          box-sizing: border-box; /* css3 */\n}\n\n.select2-container .select2-choice {\n    display: block;\n    height: 26px;\n    padding: 0 0 0 8px;\n    overflow: hidden;\n    position: relative;\n\n    border: 1px solid #aaa;\n    white-space: nowrap;\n    line-height: 26px;\n    color: #444;\n    text-decoration: none;\n\n    -webkit-border-radius: 4px;\n       -moz-border-radius: 4px;\n            border-radius: 4px;\n\n    -webkit-background-clip: padding-box;\n       -moz-background-clip: padding;\n            background-clip: padding-box;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n       -khtml-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n\n    background-color: #fff;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eeeeee), color-stop(0.5, white));\n    background-image: -webkit-linear-gradient(center bottom, #eeeeee 0%, white 50%);\n    background-image: -moz-linear-gradient(center bottom, #eeeeee 0%, white 50%);\n    background-image: -o-linear-gradient(bottom, #eeeeee 0%, #ffffff 50%);\n    background-image: -ms-linear-gradient(top, #ffffff 0%, #eeeeee 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#eeeeee', GradientType = 0);\n    background-image: linear-gradient(top, #ffffff 0%, #eeeeee 50%);\n}\n\n.select2-container.select2-drop-above .select2-choice {\n    border-bottom-color: #aaa;\n\n    -webkit-border-radius:0 0 4px 4px;\n       -moz-border-radius:0 0 4px 4px;\n            border-radius:0 0 4px 4px;\n\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eeeeee), color-stop(0.9, white));\n    background-image: -webkit-linear-gradient(center bottom, #eeeeee 0%, white 90%);\n    background-image: -moz-linear-gradient(center bottom, #eeeeee 0%, white 90%);\n    background-image: -o-linear-gradient(bottom, #eeeeee 0%, white 90%);\n    background-image: -ms-linear-gradient(top, #eeeeee 0%,#ffffff 90%);\n    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eeeeee',GradientType=0 );\n    background-image: linear-gradient(top, #eeeeee 0%,#ffffff 90%);\n}\n\n.select2-container .select2-choice span {\n    margin-right: 26px;\n    display: block;\n    overflow: hidden;\n\n    white-space: nowrap;\n\n    -ms-text-overflow: ellipsis;\n     -o-text-overflow: ellipsis;\n        text-overflow: ellipsis;\n}\n\n.select2-container .select2-choice abbr {\n    display: block;\n    width: 12px;\n    height: 12px;\n    position: absolute;\n    right: 26px;\n    top: 8px;\n\n    font-size: 1px;\n    text-decoration: none;\n\n    border: 0;\n    background: url('contrib/select2-3.3.1/select2.png') right top no-repeat;\n    cursor: pointer;\n    outline: 0;\n}\n.select2-container .select2-choice abbr:hover {\n    background-position: right -11px;\n    cursor: pointer;\n}\n\n.select2-drop-mask {\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 9998;\n    opacity: 0;\n}\n\n.select2-drop {\n    width: 100%;\n    margin-top:-1px;\n    position: absolute;\n    z-index: 9999;\n    top: 100%;\n\n    background: #fff;\n    color: #000;\n    border: 1px solid #aaa;\n    border-top: 0;\n\n    -webkit-border-radius: 0 0 4px 4px;\n       -moz-border-radius: 0 0 4px 4px;\n            border-radius: 0 0 4px 4px;\n\n    -webkit-box-shadow: 0 4px 5px rgba(0, 0, 0, .15);\n       -moz-box-shadow: 0 4px 5px rgba(0, 0, 0, .15);\n            box-shadow: 0 4px 5px rgba(0, 0, 0, .15);\n}\n\n.select2-drop.select2-drop-above {\n    margin-top: 1px;\n    border-top: 1px solid #aaa;\n    border-bottom: 0;\n\n    -webkit-border-radius: 4px 4px 0 0;\n       -moz-border-radius: 4px 4px 0 0;\n            border-radius: 4px 4px 0 0;\n\n    -webkit-box-shadow: 0 -4px 5px rgba(0, 0, 0, .15);\n       -moz-box-shadow: 0 -4px 5px rgba(0, 0, 0, .15);\n            box-shadow: 0 -4px 5px rgba(0, 0, 0, .15);\n}\n\n.select2-container .select2-choice div {\n    display: block;\n    width: 18px;\n    height: 100%;\n    position: absolute;\n    right: 0;\n    top: 0;\n\n    border-left: 1px solid #aaa;\n    -webkit-border-radius: 0 4px 4px 0;\n       -moz-border-radius: 0 4px 4px 0;\n            border-radius: 0 4px 4px 0;\n\n    -webkit-background-clip: padding-box;\n       -moz-background-clip: padding;\n            background-clip: padding-box;\n\n    background: #ccc;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #ccc), color-stop(0.6, #eee));\n    background-image: -webkit-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n    background-image: -moz-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n    background-image: -o-linear-gradient(bottom, #ccc 0%, #eee 60%);\n    background-image: -ms-linear-gradient(top, #cccccc 0%, #eeeeee 60%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#eeeeee', endColorstr = '#cccccc', GradientType = 0);\n    background-image: linear-gradient(top, #cccccc 0%, #eeeeee 60%);\n}\n\n.select2-container .select2-choice div b {\n    display: block;\n    width: 100%;\n    height: 100%;\n    background: url('contrib/select2-3.3.1/select2.png') no-repeat 0 1px;\n}\n\n.select2-search {\n    display: inline-block;\n    width: 100%;\n    min-height: 26px;\n    margin: 0;\n    padding-left: 4px;\n    padding-right: 4px;\n\n    position: relative;\n    z-index: 10000;\n\n    white-space: nowrap;\n}\n\n.select2-search-hidden {\n    display: block;\n    position: absolute;\n    left: -10000px;\n}\n\n.select2-search input {\n    width: 100%;\n    height: auto !important;\n    min-height: 26px;\n    padding: 4px 20px 4px 5px;\n    margin: 0;\n\n    outline: 0;\n    font-family: sans-serif;\n    font-size: 1em;\n\n    border: 1px solid #aaa;\n    -webkit-border-radius: 0;\n       -moz-border-radius: 0;\n            border-radius: 0;\n\n    -webkit-box-shadow: none;\n       -moz-box-shadow: none;\n            box-shadow: none;\n\n    background: #fff url('contrib/select2-3.3.1/select2.png') no-repeat 100% -22px;\n    background: url('contrib/select2-3.3.1/select2.png') no-repeat 100% -22px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, white), color-stop(0.99, #eeeeee));\n    background: url('contrib/select2-3.3.1/select2.png') no-repeat 100% -22px, -webkit-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n    background: url('contrib/select2-3.3.1/select2.png') no-repeat 100% -22px, -moz-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n    background: url('contrib/select2-3.3.1/select2.png') no-repeat 100% -22px, -o-linear-gradient(bottom, white 85%, #eeeeee 99%);\n    background: url('contrib/select2-3.3.1/select2.png') no-repeat 100% -22px, -ms-linear-gradient(top, #ffffff 85%, #eeeeee 99%);\n    background: url('contrib/select2-3.3.1/select2.png') no-repeat 100% -22px, linear-gradient(top, #ffffff 85%, #eeeeee 99%);\n}\n\n.select2-drop.select2-drop-above .select2-search input {\n    margin-top: 4px;\n}\n\n.select2-search input.select2-active {\n    background: #fff url('contrib/select2-3.3.1/select2-spinner.gif') no-repeat 100%;\n    background: url('contrib/select2-3.3.1/select2-spinner.gif') no-repeat 100%, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, white), color-stop(0.99, #eeeeee));\n    background: url('contrib/select2-3.3.1/select2-spinner.gif') no-repeat 100%, -webkit-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n    background: url('contrib/select2-3.3.1/select2-spinner.gif') no-repeat 100%, -moz-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n    background: url('contrib/select2-3.3.1/select2-spinner.gif') no-repeat 100%, -o-linear-gradient(bottom, white 85%, #eeeeee 99%);\n    background: url('contrib/select2-3.3.1/select2-spinner.gif') no-repeat 100%, -ms-linear-gradient(top, #ffffff 85%, #eeeeee 99%);\n    background: url('contrib/select2-3.3.1/select2-spinner.gif') no-repeat 100%, linear-gradient(top, #ffffff 85%, #eeeeee 99%);\n}\n\n.select2-container-active .select2-choice,\n.select2-container-active .select2-choices {\n    border: 1px solid #5897fb;\n    outline: none;\n\n    -webkit-box-shadow: 0 0 5px rgba(0,0,0,.3);\n       -moz-box-shadow: 0 0 5px rgba(0,0,0,.3);\n            box-shadow: 0 0 5px rgba(0,0,0,.3);\n}\n\n.select2-dropdown-open .select2-choice {\n    border-bottom-color: transparent;\n    -webkit-box-shadow: 0 1px 0 #fff inset;\n       -moz-box-shadow: 0 1px 0 #fff inset;\n            box-shadow: 0 1px 0 #fff inset;\n\n    -webkit-border-bottom-left-radius: 0;\n        -moz-border-radius-bottomleft: 0;\n            border-bottom-left-radius: 0;\n\n    -webkit-border-bottom-right-radius: 0;\n        -moz-border-radius-bottomright: 0;\n            border-bottom-right-radius: 0;\n\n    background-color: #eee;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, white), color-stop(0.5, #eeeeee));\n    background-image: -webkit-linear-gradient(center bottom, white 0%, #eeeeee 50%);\n    background-image: -moz-linear-gradient(center bottom, white 0%, #eeeeee 50%);\n    background-image: -o-linear-gradient(bottom, white 0%, #eeeeee 50%);\n    background-image: -ms-linear-gradient(top, #ffffff 0%,#eeeeee 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#ffffff',GradientType=0 );\n    background-image: linear-gradient(top, #ffffff 0%,#eeeeee 50%);\n}\n\n.select2-dropdown-open .select2-choice div {\n    background: transparent;\n    border-left: none;\n    filter: none;\n}\n.select2-dropdown-open .select2-choice div b {\n    background-position: -18px 1px;\n}\n\n/* results */\n.select2-results {\n    max-height: 200px;\n    padding: 0 0 0 4px;\n    margin: 4px 4px 4px 0;\n    position: relative;\n    overflow-x: hidden;\n    overflow-y: auto;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n\n.select2-results ul.select2-result-sub {\n    margin: 0;\n}\n\n.select2-results ul.select2-result-sub > li .select2-result-label { padding-left: 20px }\n.select2-results ul.select2-result-sub ul.select2-result-sub > li .select2-result-label { padding-left: 40px }\n.select2-results ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub > li .select2-result-label { padding-left: 60px }\n.select2-results ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub > li .select2-result-label { padding-left: 80px }\n.select2-results ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub > li .select2-result-label { padding-left: 100px }\n.select2-results ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub > li .select2-result-label { padding-left: 110px }\n.select2-results ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub ul.select2-result-sub > li .select2-result-label { padding-left: 120px }\n\n.select2-results li {\n    list-style: none;\n    display: list-item;\n    background-image: none;\n}\n\n.select2-results li.select2-result-with-children > .select2-result-label {\n    font-weight: bold;\n}\n\n.select2-results .select2-result-label {\n    padding: 3px 7px 4px;\n    margin: 0;\n    cursor: pointer;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n       -khtml-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n}\n\n.select2-results .select2-highlighted {\n    background: #3875d7;\n    color: #fff;\n}\n\n.select2-results li em {\n    background: #feffde;\n    font-style: normal;\n}\n\n.select2-results .select2-highlighted em {\n    background: transparent;\n}\n\n.select2-results .select2-highlighted ul {\n    background: white;\n    color: #000;\n}\n\n\n.select2-results .select2-no-results,\n.select2-results .select2-searching,\n.select2-results .select2-selection-limit {\n    background: #f4f4f4;\n    display: list-item;\n}\n\n/*\ndisabled look for disabled choices in the results dropdown\n*/\n.select2-results .select2-disabled.select2-highlighted {\n    color: #666;\n    background: #f4f4f4;\n    display: list-item;\n    cursor: default;\n}\n.select2-results .select2-disabled {\n  background: #f4f4f4;\n  display: list-item;\n  cursor: default;\n}\n\n.select2-results .select2-selected {\n    display: none;\n}\n\n.select2-more-results.select2-active {\n    background: #f4f4f4 url('contrib/select2-3.3.1/select2-spinner.gif') no-repeat 100%;\n}\n\n.select2-more-results {\n    background: #f4f4f4;\n    display: list-item;\n}\n\n/* disabled styles */\n\n.select2-container.select2-container-disabled .select2-choice {\n    background-color: #f4f4f4;\n    background-image: none;\n    border: 1px solid #ddd;\n    cursor: default;\n}\n\n.select2-container.select2-container-disabled .select2-choice div {\n    background-color: #f4f4f4;\n    background-image: none;\n    border-left: 0;\n}\n\n.select2-container.select2-container-disabled .select2-choice abbr {\n    display: none\n}\n\n\n/* multiselect */\n\n.select2-container-multi .select2-choices {\n    height: auto !important;\n    height: 1%;\n    margin: 0;\n    padding: 0;\n    position: relative;\n\n    border: 1px solid #aaa;\n    cursor: text;\n    overflow: hidden;\n\n    background-color: #fff;\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(1%, #eeeeee), color-stop(15%, #ffffff));\n    background-image: -webkit-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\n    background-image: -moz-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\n    background-image: -o-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\n    background-image: -ms-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\n    background-image: linear-gradient(top, #eeeeee 1%, #ffffff 15%);\n}\n\n.select2-locked {\n  padding: 3px 5px 3px 5px !important;\n}\n\n.select2-container-multi .select2-choices {\n    min-height: 26px;\n}\n\n.select2-container-multi.select2-container-active .select2-choices {\n    border: 1px solid #5897fb;\n    outline: none;\n\n    -webkit-box-shadow: 0 0 5px rgba(0,0,0,.3);\n       -moz-box-shadow: 0 0 5px rgba(0,0,0,.3);\n            box-shadow: 0 0 5px rgba(0,0,0,.3);\n}\n.select2-container-multi .select2-choices li {\n    float: left;\n    list-style: none;\n}\n.select2-container-multi .select2-choices .select2-search-field {\n    margin: 0;\n    padding: 0;\n    white-space: nowrap;\n}\n\n.select2-container-multi .select2-choices .select2-search-field input {\n    padding: 5px;\n    margin: 1px 0;\n\n    font-family: sans-serif;\n    font-size: 100%;\n    color: #666;\n    outline: 0;\n    border: 0;\n    -webkit-box-shadow: none;\n       -moz-box-shadow: none;\n            box-shadow: none;\n    background: transparent !important;\n}\n\n.select2-container-multi .select2-choices .select2-search-field input.select2-active {\n    background: #fff url('contrib/select2-3.3.1/select2-spinner.gif') no-repeat 100% !important;\n}\n\n.select2-default {\n    color: #999 !important;\n}\n\n.select2-container-multi .select2-choices .select2-search-choice {\n    padding: 3px 5px 3px 18px;\n    margin: 3px 0 3px 5px;\n    position: relative;\n\n    line-height: 13px;\n    color: #333;\n    cursor: default;\n    border: 1px solid #aaaaaa;\n\n    -webkit-border-radius: 3px;\n       -moz-border-radius: 3px;\n            border-radius: 3px;\n\n    -webkit-box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0,0,0,0.05);\n       -moz-box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0,0,0,0.05);\n            box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0,0,0,0.05);\n\n    -webkit-background-clip: padding-box;\n       -moz-background-clip: padding;\n            background-clip: padding-box;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n       -khtml-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n\n    background-color: #e4e4e4;\n    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#f4f4f4', GradientType=0 );\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(20%, #f4f4f4), color-stop(50%, #f0f0f0), color-stop(52%, #e8e8e8), color-stop(100%, #eeeeee));\n    background-image: -webkit-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\n    background-image: -moz-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\n    background-image: -o-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\n    background-image: -ms-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\n    background-image: linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\n}\n.select2-container-multi .select2-choices .select2-search-choice span {\n    cursor: default;\n}\n.select2-container-multi .select2-choices .select2-search-choice-focus {\n    background: #d4d4d4;\n}\n\n.select2-search-choice-close {\n    display: block;\n    width: 12px;\n    height: 13px;\n    position: absolute;\n    right: 3px;\n    top: 4px;\n\n    font-size: 1px;\n    outline: none;\n    background: url('contrib/select2-3.3.1/select2.png') right top no-repeat;\n}\n\n.select2-container-multi .select2-search-choice-close {\n    left: 3px;\n}\n\n.select2-container-multi .select2-choices .select2-search-choice .select2-search-choice-close:hover {\n  background-position: right -11px;\n}\n.select2-container-multi .select2-choices .select2-search-choice-focus .select2-search-choice-close {\n    background-position: right -11px;\n}\n\n/* disabled styles */\n.select2-container-multi.select2-container-disabled .select2-choices{\n    background-color: #f4f4f4;\n    background-image: none;\n    border: 1px solid #ddd;\n    cursor: default;\n}\n\n.select2-container-multi.select2-container-disabled .select2-choices .select2-search-choice {\n    padding: 3px 5px 3px 5px;\n    border: 1px solid #ddd;\n    background-image: none;\n    background-color: #f4f4f4;\n}\n\n.select2-container-multi.select2-container-disabled .select2-choices .select2-search-choice .select2-search-choice-close {\n    display: none;\n}\n/* end multiselect */\n\n\n.select2-result-selectable .select2-match,\n.select2-result-unselectable .select2-match {\n    text-decoration: underline;\n}\n\n.select2-offscreen {\n    position: absolute;\n    left: -10000px;\n}\n\n/* Retina-ize icons */\n\n@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min-resolution: 144dpi)  {\n  .select2-search input, .select2-search-choice-close, .select2-container .select2-choice abbr, .select2-container .select2-choice div b {\n      background-image: url('contrib/select2-3.3.1/select2x2.png') !important;\n      background-repeat: no-repeat !important;\n      background-size: 60px 40px !important;\n  }\n  .select2-search input {\n      background-position: 100% -21px !important;\n  }\n}\n.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:\"\";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.select2-container{min-width:200px;margin-bottom:8px;}.select2-container .select2-choice{background-color:#ebebeb;background-image:-moz-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f5f5f5), to(#dcdcdc));background-image:-webkit-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-o-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:linear-gradient(to bottom, #f5f5f5, #dcdcdc);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5', endColorstr='#ffdcdcdc', GradientType=0);background-color:#e9e9e9;border:1px solid #aeaeae;border-top-color:#b7b7b7;border-bottom-color:#989898;color:#333333;text-shadow:0 1px 0 #ffffff;-webkit-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-moz-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);height:24px;line-height:24px;}.select2-container .select2-choice:hover{background-color:#f5f5f5;background-image:-moz-linear-gradient(top, #ffffff, #e5e5e5);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e5e5e5));background-image:-webkit-linear-gradient(top, #ffffff, #e5e5e5);background-image:-o-linear-gradient(top, #ffffff, #e5e5e5);background-image:linear-gradient(to bottom, #ffffff, #e5e5e5);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe5e5e5', GradientType=0);background-color:#eeeeee;border-color:#aeaeae;border-top-color:#b7b7b7;border-bottom-color:#989898;background-position:0 0;}\n.select2-container .select2-choice span{text-shadow:0 1px 0 #ffffff;}\n.select2-container .select2-choice div{width:auto;padding-left:8px;padding-right:8px;background:transparent;border-left:none;}.select2-container .select2-choice div:after{display:inline-block;font-family:\"Splunk Icons\";content:\"\\25BE\";font-size:inherit;opacity:0.8;filter:alpha(opacity=80);}\n.select2-container .select2-choice div:hover{opacity:1;filter:alpha(opacity=100);}\n.select2-container .select2-choice div b{display:none;}\n.select2-container .select2-choice .select2-search-choice-close{background:none;top:1px;}.select2-container .select2-choice .select2-search-choice-close:before{display:inline-block;font-family:\"Splunk Icons\";content:\"\\2297\";font-size:16px;opacity:0.8;filter:alpha(opacity=80);}\n.select2-container .select2-choice .select2-search-choice-close:hover{opacity:1;filter:alpha(opacity=100);}\n.select2-drop{background-color:#e9e9e9;background-color:#e7e7e7;background-image:-moz-linear-gradient(top, #dfdfdf, #f3f3f3);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#dfdfdf), to(#f3f3f3));background-image:-webkit-linear-gradient(top, #dfdfdf, #f3f3f3);background-image:-o-linear-gradient(top, #dfdfdf, #f3f3f3);background-image:linear-gradient(to bottom, #dfdfdf, #f3f3f3);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffdfdfdf', endColorstr='#fff3f3f3', GradientType=0);border:1px solid #aeaeae;border-bottom-color:#989898;border-top-color:#b7b7b7;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);box-shadow:1px 6px 5px rgba(0, 0, 0, 0.3);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-border-top-left-radius:0;-moz-border-radius-topleft:0;border-top-left-radius:0;-webkit-border-top-right-radius:0;-moz-border-radius-topright:0;border-top-right-radius:0;border-top:none;padding:5px;}.select2-drop .select2-search{padding-left:0;padding-right:0;}.select2-drop .select2-search input{-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;margin-bottom:5px;}\n.select2-drop .select2-results{border:1px solid #a9a9a9;border-bottom-color:#909090;border-top-color:#b6b6b6;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background-color:#ffffff;padding:0;margin:0;}.select2-drop .select2-results .select2-result-selectable{background-color:#ffffff;border-top:1px dotted #dddddd;color:#5379af;}.select2-drop .select2-results .select2-result-selectable:hover{color:#32496a;background:#eeeeee;}\n.select2-drop .select2-results .select2-result-selectable:first-child{-webkit-border-top-left-radius:4px;-moz-border-radius-topleft:4px;border-top-left-radius:4px;-webkit-border-top-right-radius:4px;-moz-border-radius-topright:4px;border-top-right-radius:4px;border-top:none;}\n.select2-drop .select2-results .select2-result-selectable:last-child{-webkit-border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px;border-bottom-left-radius:4px;-webkit-border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px;border-bottom-right-radius:4px;}\n.select2-drop .select2-no-results{text-align:center;color:red;}\n.splunk-dropdown .select2-container.select2-container-active,.splunk-multidropdown .select2-container-multi.select2-container-active .select2-choices{border-color:rgba(82, 168, 236, 0.8);outline:0;outline:thin dotted \\9;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);}\n.select2-drop .select2-results .select2-result-selectable.select2-highlighted .select2-result-label{color:#32496a;background:#eeeeee;}\n.select2-drop.empty-results-allowed .select2-no-results{background-color:#ffffff;padding:3px 7px 4px;}\n.splunk-radiogroup input {\n    margin-left: 2px;\n    margin-right: 10px;\n}\n.splunk-radiogroup .choice label {\n    display: inline;\n}.proactive-monitoring-layout {\n	min-width: 800px;\n	min-height: 800px;\n}\n\n.proactive-monitoring-main-stage-container {\n	float: left;\n	clear: left;\n	margin: 0px;\n	padding: 0px;\n	min-width: 545px;\n	height: 100%;\n	overflow: hidden;\n}\n\n.proactive-monitoring-sidebar-container {\n	float: right;\n	clear: right;\n	border-left: 1px solid #CCCCCC;\n	margin: 0px;\n	padding: 0px;\n	width: 300px;\n	height: 100%;\n	overflow-y: scroll;\n}table.pm-pinned-detail-table tr {\n	border: none;\n	padding: 2px;\n}\n\ntable.pm-pinned-detail-table th {\n	font-weight: normal;\n	color: #888888;\n	text-align: left;\n}\n\ntable.pm-pinned-detail-table td {\n	font-weight: normal;\n	color: #000000;\n	text-align: left;\n}\n.pm-x-min-label {\n	text-align: left;\n	vertical-align: top;\n	padding-left: 0px;\n}\n\n.pm-x-max-label {\n	text-align: right;\n	vertical-align: top;\n	padding-right: 0px;\n}\n\n.pm-y-max-label {\n	text-align: right;\n	vertical-align: top;\n	padding-top: 0px;\n}\n\n.pm-y-min-label {\n	text-align: right;\n	vertical-align: bottom;\n	padding-bottom: 0px;\n}\n\n.pm-dark-style .pm-chart-axis-label {\n	color: #FFFFFF;\n}\n\n.pm-light-style .pm-chart-axis-label {\n	color: #888888;\n}\n\n.pm-light-style .pm-legend {\n	color: #888888;\n}\n\n.pm-dark-style .pm-legend {\n	color: #E4E4E4;\n}\n\n.pm-legend {\n	font-weight: normal;\n	font-size: 10px;\n	font-family: Lato, sans-serif;\n}\n\n.pm-legend-global {\n	float: left;\n	clear: both;\n	height: 5px;\n	width: 25px;\n}\n\n.pm-dark-style .pm-legend-global-inner {\n	background: #909090;\n}\n\n.pm-dark-style .pm-legend-global-outer {\n	background: #7A7A7A;\n}\n\n.pm-dark-style .pm-legend-specific {\n	background: #FFFFFF;\n}\n\n.pm-light-style .pm-legend-specific {\n	background: #333333;\n}\n\n.pm-light-style .pm-legend-global-inner {\n	background: #D4D3D4;\n}\n\n.pm-light-style .pm-legend-global-outer {\n	background: #ECECEC;\n}\n\n\n.pm-chart-axis-label {\n	font-weight: normal;\n	font-size: 10px;\n	font-family: Lato, sans-serif;\n}\n\n.pm-chart-plot-wrapper {\n	border-top: 1px solid #444444;\n	border-bottom: 1px solid #444444;\n}\n\n.pm-search-message-container {\n	position: relative;\n	top: -90px;\n}\n\n.pm-chart-layout .splunk-message-container.compact {\n	padding-bottom: 0px;\n}td.pm-threshold-indicator-cell {\n	vertical-align: middle;\n	/* overriding the core css for the table needs importants */\n	padding-bottom: 4px !important;\n	padding-left: 7px !important;\n	padding-right: 0px !important;\n	padding-top: 4px !important;\n}\n\n.pm-threshold-indicator-circle {\n	width: 10px;\n	height: 10px;\n	border-radius: 5px;\n	text-align: center;\n} \n.pm-threshold-indicator-circle.pm-threshold-critical {\n	background-color: #C44545;\n}\n.pm-threshold-indicator-circle.pm-threshold-warning {\n	background-color: #DE9400;\n}\n.pm-threshold-indicator-circle.pm-threshold-normal {\n	background-color: #57A116;\n}\n.pm-threshold-indicator-circle.pm-threshold-unknown {\n	background-color: #D5D5D5;\n}\n.pm-pinned-detail {\n	font-family: Roboto, Droid, 'Helvetica Neue', Helvetica, Arial, sans-serif;\n	font-weight: normal;\n}\n\n.pm-pinned-detail-title-bar {\n	overflow: hidden;\n	padding: 5px 0px 6px 10px;\n	line-height: 16px;\n	background-color: #F5F5F5;\n	/*border: 1px solid #aeaeae;\n	border-top-color: #b7b7b7;\n	border-bottom-color: #989898;*/\n	color: #333333;\n	text-decoration: none;\n	border-bottom: none;\n	-webkit-border-radius: 0;\n	-moz-border-radius: 0;\n	border-radius: 0;\n	-webkit-box-shadow: none;\n	-moz-box-shadow: none;\n	box-shadow: none;\n	cursor: pointer;\n}\n\n.pm-pinned-detail-name {\n	font-size: 14px;\n	margin-top: 3px;\n}\n\n.pm-pinned-detail-button-container {\n	padding: 0px;\n	margin: 0px;\n}\n\n.pm-pinned-detail-icon {\n	color: #FFFFFF;\n	vertical-align: middle;\n	font-size: 12px;\n	margin-top: 2px;\n	margin-left: 1px;\n	display: block;\n}\n\ndiv.pm-pinned-detail-icon-circle {\n	display: inline-block;\n	width: 20px;\n	height: 20px;\n	border-radius: 10px;\n	background-color: #6B6B6B;\n	text-align: center;\n	cursor: pointer;\n}\ndiv.pm-pinned-detail-icon-circle:hover {\n	background-color: #333333;\n}\n\ndiv.pm-pinned-detail-detail-section {\n	padding: 7px 0px 7px 12px;\n}\n\ndiv.pm-pinned-detail-metric-section {\n	padding: 7px 0px 7px 12px;\n}\n\ndiv.pm-pinned-detail-chart-section {\n	padding-left: 7px;\n}\n\n.pm-pinned-detail-chart-section th {\n	display: none;\n}\n\n.pm-pinned-detail-chart-section td {\n	/* core css tiger stripping is hard to get rid of, hence the important*/\n	background-color: #FFFFFF !important;\n	border: none;\n}\n\n.proactive-monitoring-pinboard-detail-list {\n	list-style: none;\n	margin: 0px;\n	padding: 0px;\n}\n.proactive-monitoring-leaf-node > text.name-label {\n	font-size: 11px;\n	text-anchor: start;\n}\n\n.proactive-monitoring-leaf-node > text.node-label {\n	fill: #FFFFFF;\n	font-size: 8px;\n	font-weight: normal;\n	text-anchor: middle;\n	letter-spacing: 1px;\n}\n.proactive-monitoring-parent-node > text.name-label {\n	font-size: 14px;\n	text-anchor: start;\n}\n\n.proactive-monitoring-parent-node > text.node-label {\n	fill: #FFFFFF;\n	font-size: 12px;\n	font-weight: bold;\n	text-anchor: middle;\n}\n.pm-tooltip-button-container {\n	float: left;\n	clear: left;\n	margin-right: 10px;\n	padding: 1px;\n}\n\n.pm-tooltip-text-container {\n	float: left;\n	clear: right;\n	padding: 1px;\n}\n.pm-tooltip-text {\n	float: left;\n	clear: both;\n	color: #DBDBDB;\n	font-family: Roboto, Droid, 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.pm-tooltip-title {\n	white-space: nowrap;\n	font-size: 15px;\n	font-weight: 200;\n	margin-bottom: 2px;\n}\n\n.pm-tooltip-subtitle {\n	font-size: 9px;\n	font-weight: normal;\n	color: #A6A6A6;\n}\n\n.pm-tooltip-icon {\n	color: #FFFFFF;\n	vertical-align: middle;\n	font-size: 13px;\n}\n\ndiv.pm-tooltip-icon-circle {\n	width: 20px;\n	height: 20px;\n	border-radius: 10px;\n	background-color: #888888;\n	text-align: center;\n	cursor: pointer;\n}\ndiv.pm-tooltip-icon-circle:hover {\n	background-color: #333333;\n}\n\n.pm-tooltip-chart-container {\n	float: left;\n	clear: both;\n}\n\n.pm-tooltip-content {\n	text-align: left;\n	padding: 8px;\n	font-family: Roboto, Droid, 'Helvetica Neue', Helvetica, Arial, sans-serif;\n	font-size: 10px;\n	font-weight: bold;\n	color: #FFFFFF;\n}\n\n.pm-tooltip-background {\n	border: 0px solid black;\n	border-radius: 4px;\n	background: rgba(47, 47, 47, 0.88);\n	min-height: 163px;\n}\n.pm-node {\n	cursor: pointer;\n}\n\n.pm-node text {\n	font-family: Roboto, Droid, 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.pm-link {\n	fill: none;\n	stroke: #D4D3D4;\n	stroke-width: 1px;\n}\n\n.proactive-monitoring-tree.active-drag-move:hover {\n	cursor: move;\n}\n\n.pm-perf-message-container {\n	float:left;\n	padding-top:17px;\n}\n\n.pm-perf-message-container .splunk-message-container {\n	padding: 0px;\n}\n\n.alert.alert-hide-icon .icon-alert:before {\n	content: \" \";\n}\n\n.proactive-monitoring-tree {\n	position: relative;\n	top: 0px;\n	left: 0px;\n}\n\n.proactive-monitoring-node-tooltip-container {\n	position: absolute;\n	z-index: 1500;\n}\n\n.proactive-monitoring-tree-controls-container {\n	position: absolute;\n	z-index: 1000;\n	top: 0px;\n	left: 0px;\n	background-color: #F5F5F5;\n	border-right: 1px solid #CCCCCC;\n	border-bottom: 1px solid #CCCCCC;\n	border-top-left-radius: 4px;\n	border-bottom-right-radius: 4px;\n}\n\n.pm-tree-button-container, .pm-tree-legend-container, .pm-tree-legend-undefined-container {\n	padding: 5px;\n}\n\n.pm-tree-legend-container, .pm-tree-legend-undefined-container {\n	border-left-width: 1px;\n	border-left-style: solid;\n	border-left-color: #CCCCCC;\n}\n\n\n.pm-tree-icon {\n	color: #FFFFFF;\n	vertical-align: middle;\n	font-size: 12px;\n	padding-top: 2px;\n	display: block;\n}\n\ndiv.pm-tree-icon-circle {\n	display: inline-block;\n	width: 20px;\n	height: 20px;\n	border-radius: 10px;\n	background-color: #6B6B6B;\n	text-align: center;\n	cursor: pointer;\n}\ndiv.pm-tree-icon-circle:hover {\n	background-color: #333333;\n}\n\nspan.pm-tree-legend-label {\n	vertical-align: middle;\n	font-size: 10px;\n}\n\ndiv.pm-tree-legend-circle {\n	display: inline-block;\n	vertical-align: middle;\n	width: 14px;\n	height: 14px;\n	border-radius: 7px;\n}\n\ndiv.pm-tree-legend-circle.pm-tree-legend-unknown {\n	background-color: #D5D5D5;\n}\n\ndiv.pm-tree-legend-circle.pm-tree-legend-normal {\n	background-color: #57A116;\n}\n\ndiv.pm-tree-legend-circle.pm-tree-legend-warning {\n	background-color: #DE9400;\n}\n\ndiv.pm-tree-legend-circle.pm-tree-legend-critical {\n	background-color: #C44545;\n}\n\n\n")}),requirejs.s.contexts._.nextTick=requirejs.nextTick;